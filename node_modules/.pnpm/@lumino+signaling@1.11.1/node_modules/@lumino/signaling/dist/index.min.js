!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@lumino/algorithm"),require("@lumino/properties")):"function"==typeof define&&define.amd?define(["exports","@lumino/algorithm","@lumino/properties"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_signaling={},n.lumino_algorithm,n.lumino_properties)}(this,(function(n,e,t){"use strict";var i,o;n.Signal=function(){function n(n){this._blockedCount=0,this.sender=n}return n.prototype.block=function(n){this._blockedCount++;try{n()}finally{this._blockedCount--}},n.prototype.connect=function(n,e){return o.connect(this,n,e)},n.prototype.disconnect=function(n,e){return o.disconnect(this,n,e)},n.prototype.emit=function(n){this._blockedCount||o.emit(this,n)},n}(),(i=n.Signal||(n.Signal={})).blockAll=function(n,e){var t=o.blockedProperty;t.set(n,t.get(n)+1);try{e()}finally{t.set(n,t.get(n)-1)}},i.disconnectBetween=function(n,e){o.disconnectBetween(n,e)},i.disconnectSender=function(n){o.disconnectSender(n)},i.disconnectReceiver=function(n){o.disconnectReceiver(n)},i.disconnectAll=function(n){o.disconnectAll(n)},i.clearData=function(n){o.disconnectAll(n)},i.getExceptionHandler=function(){return o.exceptionHandler},i.setExceptionHandler=function(n){var e=o.exceptionHandler;return o.exceptionHandler=n,e},function(n){function i(n){var t=r.get(n);t&&0!==t.length&&(e.each(t,(function(n){if(n.signal){var e=n.thisArg||n.slot;n.signal=null,f(c.get(e))}})),f(t))}function o(n){var t=c.get(n);t&&0!==t.length&&(e.each(t,(function(n){if(n.signal){var e=n.signal.sender;n.signal=null,f(r.get(e))}})),f(t))}n.exceptionHandler=function(n){console.error(n)},n.connect=function(n,e,t){t=t||void 0;var i=r.get(n.sender);if(i||(i=[],r.set(n.sender,i)),u(i,n,e,t))return!1;var o=t||e,l=c.get(o);l||(l=[],c.set(o,l));var s={signal:n,slot:e,thisArg:t};return i.push(s),l.push(s),!0},n.disconnect=function(n,e,t){t=t||void 0;var i=r.get(n.sender);if(!i||0===i.length)return!1;var o=u(i,n,e,t);if(!o)return!1;var l=t||e,s=c.get(l);return o.signal=null,f(i),f(s),!0},n.disconnectBetween=function(n,t){var i=r.get(n);if(i&&0!==i.length){var o=c.get(t);o&&0!==o.length&&(e.each(o,(function(e){e.signal&&e.signal.sender===n&&(e.signal=null)})),f(i),f(o))}},n.disconnectSender=i,n.disconnectReceiver=o,n.disconnectAll=function(n){i(n),o(n)},n.emit=function(e,t){if(!(n.blockedProperty.get(e.sender)>0)){var i=r.get(e.sender);if(i&&0!==i.length)for(var o=0,c=i.length;o<c;++o){var l=i[o];l.signal===e&&a(l,t)}}};var r=new WeakMap,c=new WeakMap,l=new Set,s="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function u(n,t,i,o){return e.find(n,(function(n){return n.signal===t&&n.slot===i&&n.thisArg===o}))}function a(e,t){var i=e.signal,o=e.slot,r=e.thisArg;try{o.call(r,i.sender,t)}catch(e){n.exceptionHandler(e)}}function f(n){0===l.size&&s(d),l.add(n)}function d(){l.forEach(g),l.clear()}function g(n){e.ArrayExt.removeAllWhere(n,p)}function p(n){return null===n.signal}n.blockedProperty=new t.AttachedProperty({name:"blocked",create:function(){return 0}})}(o||(o={})),Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map