!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-scale"),require("d3-selection"),require("@d3fc/d3fc-data-join"),require("@d3fc/d3fc-shape"),require("@d3fc/d3fc-rebind"),require("@d3fc/d3fc-series"),require("d3-shape")):"function"==typeof define&&define.amd?define(["exports","d3-scale","d3-selection","@d3fc/d3fc-data-join","@d3fc/d3fc-shape","@d3fc/d3fc-rebind","@d3fc/d3fc-series","d3-shape"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).fc=n.fc||{},n.d3,n.d3,n.fc,n.fc,n.fc,n.fc,n.d3)}(this,(function(n,t,e,r,i,a,o,l){"use strict";var c=function(n){return"function"==typeof n?n:function(){return n}},u=function(){var n=t.scaleIdentity(),i=t.scaleIdentity(),a=function(n){return n},o=a,l=function(){},u="horizontal",f=r.dataJoin("g","annotation-line"),d=function(t){if(r.isTransition(t)&&f.transition(t),"horizontal"!==u&&"vertical"!==u)throw new Error("Invalid orientation");var c="horizontal"===u,d=c?function(n,t){return"translate(".concat(n,", ").concat(t,")")}:function(n,t){return"translate(".concat(t,", ").concat(n,")")},s=c?"x2":"y2",h=c?i:n,g=c?"left-handle":"bottom-handle",v=c?"right-handle":"top-handle",y=c?"9":"0",p=c?"0":"9",x=c?"0.32em":"0.71em",b=c?"start":"middle",m=(c?n:i).range(),S=function(){return d(m[0],h(a.apply(void 0,arguments)))},A=m[1]-m[0];t.each((function(n,t,r){var i=f(e.select(r[t]),n),a=i.enter().attr("transform",S).style("stroke","#bbb");a.append("line").attr(s,A),a.append("g").classed(g,!0).style("stroke","none"),a.append("g").classed(v,!0).style("stroke","none").attr("transform",d(A,0)).append("text").attr("text-anchor",b).attr("x",y).attr("y",p).attr("dy",x),i.attr("class","annotation-line ".concat(u)),i.attr("transform",S),i.select("line").attr(s,A),i.select("g."+v).attr("transform",d(A,0)),i.select("text").text(o),l(i,n,t)}))};return d.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],d):i},d.value=function(){return arguments.length?(a=c(arguments.length<=0?void 0:arguments[0]),d):a},d.label=function(){return arguments.length?(o=c(arguments.length<=0?void 0:arguments[0]),d):o},d.decorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d};var f=function(){var n=t.scaleIdentity(),e=t.scaleIdentity(),r=function(n){return n},i=r,o=function(){},u="horizontal",f=l.line(),d=function(t){if("horizontal"!==u&&"vertical"!==u)throw new Error("Invalid orientation");var a="horizontal"===u,l=f.context(),c=a?n:e,d=a?e:n,s=c.domain(),h=a?9:0,g=a?0:9,v=a?"left":"center",y=a?"middle":"hanging";t.forEach((function(n,t){l.save(),l.beginPath(),l.strokeStyle="#bbb",l.fillStyle="#000",l.textAlign=v,l.textBaseline=y,o(l,n,t),f.context(l)(s.map((function(t){var e=[c(t),d(r(n))];return a?e:e.reverse()})));var e=a?c(s[1]):d(r(n)),u=a?d(r(n)):c(s[1]);l.fillText(i(n),e+h,u+g),l.fill(),l.stroke(),l.closePath(),l.restore()}))};return d.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],d):e},d.value=function(){return arguments.length?(r=c(arguments.length<=0?void 0:arguments[0]),d):r},d.label=function(){return arguments.length?(i=c(arguments.length<=0?void 0:arguments[0]),d):i},d.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],d):o},d.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},a.rebind(d,f,"context"),d};function d(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function s(n){return function(n){if(Array.isArray(n))return d(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return d(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(){var n=t.scaleIdentity(),e=[10],r=null,i=function(){var t;return null!=r?r:n.ticks?(t=n).ticks.apply(t,s(e)):n.domain()};return i.scale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.ticks=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e=t,i},i.tickArguments=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.tickValues=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},g=function(n){return n};n.annotationCanvasBand=function(){var n=t.scaleIdentity(),e=t.scaleIdentity(),r="horizontal",o=function(n){return n.from},l=function(n){return n.to},u=function(){},f=i.shapeBar().horizontalAlign("right").verticalAlign("top"),d=function(t){if("horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var i=f.context(),a="horizontal"===r,c=a?e:n,d=(a?n:e).range(),s=d[1]-d[0],h=a?"x":"y",g=a?"y":"x",v=a?"height":"width",y=a?"width":"height";t.forEach((function(n,t){i.save(),i.beginPath(),i.strokeStyle="transparent",f[g](c(o(n))),f[h](d[0]),f[y](s),f[v](c(l(n))-c(o(n))),u(i,n,t),f.context(i)([n],t),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return d.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],d):e},d.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],d):r},d.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d.fromValue=function(){return arguments.length?(o=c(arguments.length<=0?void 0:arguments[0]),d):o},d.toValue=function(){return arguments.length?(l=c(arguments.length<=0?void 0:arguments[0]),d):l},a.rebind(d,f,"context"),d},n.annotationCanvasCrosshair=function(){var n=function(n){return n.x},e=function(n){return n.y},r=t.scaleIdentity(),i=t.scaleIdentity(),l=o.seriesCanvasPoint(),c=f(),u=f().orient("vertical"),d=t.scaleIdentity(),s=t.scaleIdentity(),h=o.seriesCanvasMulti().series([c,u,l]).xScale(d).yScale(s).mapping((function(n){return[n]})),g=function(t){t.forEach((function(t){d.range(r.range()),s.range(i.range()),l.crossValue(n).mainValue(e),c.value(e),u.value(n),h(t)}))};g.x=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.y=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],g):e},g.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],g):r},g.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i};var v=a.include("label","decorate");return a.rebindAll(g,c,v,a.prefix("y")),a.rebindAll(g,u,v,a.prefix("x")),a.rebind(g,l,"decorate"),a.rebind(g,h,"context"),g},n.annotationCanvasGridline=function(){var n=function(){},t=function(){},e=h(),r=h(),i=l.line(),o=function(){var a=i.context(),o=e.scale(),l=r.scale();e().forEach((function(t,e){a.save(),a.beginPath(),a.strokeStyle="#bbb",a.fillStyle="transparent",n(a,t,e),i.context(a)(l.domain().map((function(n){return[o(t),l(n)]}))),a.fill(),a.stroke(),a.closePath(),a.restore()})),r().forEach((function(n,e){a.save(),a.beginPath(),a.strokeStyle="#bbb",a.fillStyle="transparent",t(a,n,e),i.context(a)(o.domain().map((function(t){return[o(t),l(n)]}))),a.fill(),a.stroke(),a.closePath(),a.restore()}))};return o.yDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.xDecorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},a.rebindAll(o,e,a.prefix("x")),a.rebindAll(o,r,a.prefix("y")),a.rebind(o,i,"context"),o},n.annotationCanvasLine=f,n.annotationSvgBand=function(){var n=t.scaleIdentity(),a=t.scaleIdentity(),o="horizontal",l=function(n){return n.from},u=function(n){return n.to},f=function(){},d=r.dataJoin("g","annotation-band"),s=i.shapeBar().horizontalAlign("center").verticalAlign("center").x(0).y(0),h=function(t){if(r.isTransition(t)&&d.transition(t),"horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var i="horizontal"===o,c=i?function(n,t){return"translate(".concat(n,", ").concat(t,")")}:function(n,t){return"translate(".concat(t,", ").concat(n,")")},h=i?a:n,g=(i?n:a).range(),v=g[1]-g[0],y=i?"height":"width",p=function(){return c((g[1]+g[0])/2,(h(u.apply(void 0,arguments))+h(l.apply(void 0,arguments)))/2)};s[i?"width":"height"](v),s[y]((function(){return h(u.apply(void 0,arguments))-h(l.apply(void 0,arguments))})),t.each((function(n,t,r){var i=d(e.select(r[t]),n);i.enter().attr("transform",p).append("path").classed("band",!0),i.attr("class","annotation-band ".concat(o)).attr("transform",p).select("path").attr("d",(function(n,t){return s([n],t)})),f(i,n,t)}))};return h.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],h):n},h.yScale=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],h):a},h.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],h):o},h.decorate=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],h):f},h.fromValue=function(){return arguments.length?(l=c(arguments.length<=0?void 0:arguments[0]),h):l},h.toValue=function(){return arguments.length?(u=c(arguments.length<=0?void 0:arguments[0]),h):u},h},n.annotationSvgCrosshair=function(){var n=function(n){return n.x},i=function(n){return n.y},l=t.scaleIdentity(),c=t.scaleIdentity(),f=function(){},d=r.dataJoin("g","annotation-crosshair"),s=o.seriesSvgPoint(),h=u(),g=u().orient("vertical"),v=t.scaleIdentity(),y=t.scaleIdentity(),p=o.seriesSvgMulti().series([h,g,s]).xScale(v).yScale(y).mapping((function(n){return[n]})),x=function(t){r.isTransition(t)&&d.transition(t),t.each((function(t,r,a){var o=d(e.select(a[r]),t);o.enter().style("pointer-events","none"),v.range(l.range()),y.range(c.range()),s.crossValue(n).mainValue(i),h.value(i),g.value(n),o.call(p),f(o,t,r)}))};x.x=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],x):n},x.y=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],x):i},x.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],x):l},x.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],x):c},x.decorate=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],x):f};var b=a.include("label");return a.rebindAll(x,h,b,a.prefix("y")),a.rebindAll(x,g,b,a.prefix("x")),x},n.annotationSvgGridline=function(){var n=function(){},t=function(){},i=h(),o=h(),l=r.dataJoin("line","gridline-y").key(g),c=r.dataJoin("line","gridline-x").key(g),u=function(a){r.isTransition(a)&&(l.transition(a),c.transition(a)),a.each((function(r,a,u){var f=u[a],d=e.select(u[a]),s=i.scale(),h=o.scale(),g=f.__x_scale__||s;f.__x_scale__=s.copy();var v=i(),y=l(d,v);y.enter().attr("x1",g).attr("x2",g).attr("y1",h.range()[0]).attr("y2",h.range()[1]).attr("stroke","#bbb"),y.attr("x1",s).attr("x2",s).attr("y1",h.range()[0]).attr("y2",h.range()[1]),y.exit().attr("x1",s).attr("x2",s),n(y,v,a);var p=f.__y_scale__||h;f.__y_scale__=h.copy();var x=o(),b=c(d,x);b.enter().attr("y1",p).attr("y2",p).attr("x1",s.range()[0]).attr("x2",s.range()[1]).attr("stroke","#bbb"),b.attr("y1",h).attr("y2",h).attr("x1",s.range()[0]).attr("x2",s.range()[1]),b.exit().attr("y1",h).attr("y2",h),t(b,x,a)}))};return u.yDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.xDecorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},a.rebindAll(u,l,a.includeMap({key:"xKey"})),a.rebindAll(u,c,a.includeMap({key:"yKey"})),a.rebindAll(u,i,a.prefix("x")),a.rebindAll(u,o,a.prefix("y")),u},n.annotationSvgLine=u,Object.defineProperty(n,"__esModule",{value:!0})}));
