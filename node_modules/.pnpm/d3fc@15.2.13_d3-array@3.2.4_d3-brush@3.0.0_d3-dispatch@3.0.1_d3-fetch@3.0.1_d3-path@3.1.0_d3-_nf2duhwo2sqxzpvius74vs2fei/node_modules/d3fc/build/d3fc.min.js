!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-fetch"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-scale-chromatic"),require("d3-dispatch"),require("d3-brush"),require("d3-zoom")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-fetch","d3-path","d3-selection","d3-shape","d3-scale-chromatic","d3-dispatch","d3-brush","d3-zoom"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).fc={},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,(function(t,n,e,r,i,a,o,u,l,c,f,s,d){"use strict";var h=function(t,n,e){var r=n[e];if("function"!=typeof r)throw new Error("Attempt to rebind ".concat(e," which isn't a function on the source object"));return function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var o=r.apply(n,i);return o===n?t:o}},g=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t[u]=h(t,n,u)}return t},v=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];for(var a=function(t){return function(n){return t.reduce((function(t,n){return t&&n(t)}),n)}}(r),o=0,u=Object.keys(n);o<u.length;o++){var l=u[o],c=a(l);c&&(t[c]=h(t,n,l))}return t},p=function(t){return t.map((function(t){return"string"==typeof t?new RegExp("^".concat(t,"$")):t}))},m=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=p(n),function(t){return n.every((function(n){return!n.test(t)}))&&t}},y=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=p(n),function(t){return n.some((function(n){return n.test(t)}))&&t}},b=function(t){return function(n){return t[n]}},x=function(t){return function(n){return t+((e=n)[0].toUpperCase()+e.slice(1));var e}};function S(t){return t}function w(t){}function V(t){return"function"==typeof t?t:function(){return t}}function A(t){return"number"==typeof t&&isNaN(t)?void 0:t}function C(){var t=function(){return 10},n=w,e=S,r=function(t){return null!=t},i=function(i){var a=t.apply(this,arguments),o=i.slice(0,a).map(e);return i.map((function(t,i){return i>=a&&(o.shift(),o.push(e(t,i))),i<a-1||o.some((function(t){return!r(t)}))?n(void 0,i):n(o,i)}))};return i.period=function(){return arguments.length?(t=V(arguments.length<=0?void 0:arguments[0]),i):t},i.accumulator=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.defined=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i}function k(){var t=S,e=function(){return 9},r=function(r){var i,a=e.apply(this,arguments),o=2/(a+1),u=function(t){var e=[];return function(r){var i;return e.length<t&&(null!=r?e.push(r):e=[]),e.length>=t&&(i=n.mean(e)),i}}(a);return r.map((function(n,e){var r=t(n,e);return A(i=void 0===i?u(r):r*o+(1-o)*i)}))};return r.period=function(){return arguments.length?(e=V(arguments.length<=0?void 0:arguments[0]),r):e},r.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r}function E(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function D(t){if(Array.isArray(t))return t}function T(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function I(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H(r.key),r)}}function _(t,n,e){return n&&I(t.prototype,n),e&&I(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=U(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function N(t){var n=B();return function(){var e,r=M(t);if(n){var i=M(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function P(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Y(t,n)}function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(B=function(){return!!t})()}function O(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(t,n){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Y(t,n)}function W(t,n){return D(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,a,o,u=[],l=!0,c=!1;try{if(a=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;l=!1}else for(;!(l=(r=a.call(e)).done)&&(u.push(r.value),u.length!==n);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(t,n)||U(t,n)||R()}function L(t){return function(t){if(Array.isArray(t))return E(t)}(t)||O(t)||U(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==typeof n?n:n+""}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function U(t,n){if(t){if("string"==typeof t)return E(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?E(t,n):void 0}}function G(t){var n="function"==typeof Map?new Map:void 0;return G=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(B())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var i=new(t.bind.apply(t,r));return e&&Y(i,e.prototype),i}(t,arguments,M(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Y(e,t)},G(t)}function j(){var t=C().accumulator((function(t){return t&&n.mean(t)})),e=function(n){return t(n)};return g(e,t,"period","value"),e}function q(){var t={distance:function(t,n){return n-t},offset:function(t,n){return t instanceof Date?new Date(t.getTime()+n):t+n},clampUp:function(t){return t},clampDown:function(t){return t},copy:function(){return t}};return t}var Q=function(t,n,e,r){var i=0,a=1,o=6,u=432e6,l={},c=function(n){return 0===t(n)||6===t(n)};return l.clampDown=function(e){if(e&&c(e)){var r=n.ceil(e);return t(r)===i?n.offset(r,-1):t(r)===a?n.offset(r,-2):r}return e},l.clampUp=function(e){if(e&&c(e)){var r=n.floor(e);return t(r)===o?n.offset(r,2):t(r)===i?n.offset(r,1):r}return e},l.distance=function(t,n){t=l.clampUp(t),n=l.clampDown(n);var r=e.ceil(t);if(n<r)return n.getTime()-t.getTime();var i=r.getTime()-t.getTime(),a=e.ceil(n),o=a.getTime()-n.getTime();return Math.round((a.getTime()-r.getTime())/6048e5)*u+i-o},l.offset=function(t,i){var a=c(t)?l.clampUp(t):t;if(0===i)return a;var o=i<0,f=i>0,s=i,d=o?r.floor(a):e.ceil(a);if(s-=d.getTime()-a.getTime(),o&&s>0||f&&s<0)return new Date(a.getTime()+i);a=o?d:n.offset(d,2);var h=Math.floor(s/u);return a=n.offset(a,7*h),s-=h*u,a=new Date(a.getTime()+s)},l.copy=function(){return l},l},X=864e5,Z="00:00:00.000";function K(t){if(1!==arguments.length||"string"!=typeof t)throw"Expected single argument of type string";var n=function(t,n){return!!Number.isInteger(t)&&(t>=0&&t<=n)},e=[0,0,0,0],r=t.split(":");if(r.length<2||r.length>3)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(e[0]=n(parseInt(r[0],10),23)?parseInt(r[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(r[0],"'")}(),e[1]=n(parseInt(r[1],10),59)?parseInt(r[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(r[1],"'")}(),3===r.length){var i=r[2].split(".").map((function(t){return parseInt(t,10)}));e[2]=n(i[0],59)?i[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(i[0],"'")}(),2===i.length&&(e[3]=n(i[1],999)?i[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(i[1],"'")}())}return"".concat(e[0].toString(10).padStart(2,"0"),":").concat(e[1].toString(10).padStart(2,"0"),":").concat(e[2].toString(10).padStart(2,"0"),".").concat(e[3].toString(10).padStart(3,"0"))}var $=function(t,n){var e=t.map((function(t){return function(t,n){if(2!=arguments.length||!Array.isArray(t)||2!==t.length||"string"!=typeof t[0]||"string"!=typeof t[1])throw"Expected argument is a single string[] of length 2.";"SOD"===t[0]&&(t[0]=Z),"EOD"===t[1]&&(t[1]=Z);var e=K(t[0]),r=K(t[1]);if(r!==Z&&e>r)throw"Time range start time '".concat(e,"' must be before end time '").concat(r,"' or both must equal ").concat(Z);var i={startTime:e,endTime:r,lenghtInMs:n.setTime(new Date(r===Z?X:0),r)-n.setTime(new Date(0),e),isInRange:function(t){var e=n.getTimeString(t);return i.startTime<=e&&(i.endTime===Z||i.endTime>e)}};return i}(t,n)})).sort((function(t,n){return t.startTime<n.startTime?-1:t.startTime>n.startTime?1:0}));return{totalTradingTimeInMiliseconds:X-e.reduce((function(t,n){return t+n.lenghtInMs}),0),nonTradingTimeRanges:e,totalTradingMillisecondsBetween:function(t,r){if(t.getTime()===r.getTime())return 0;if(n.dayInterval(t).getTime()!==n.dayInterval(r).getTime()&&n.getStartOfNextDay(t).getTime()!==r.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(t,"'; intervalEnd: '").concat(r,"'");var i,a=0,o=z(e.filter((function(e){return e.endTime===Z||n.setTime(t,e.endTime)>=t})));try{for(o.s();!(i=o.n()).done;){var u=i.value,l=n.setTime(t,u.startTime),c=u.endTime===Z?n.getStartOfNextDay(t):n.setTime(t,u.endTime);if(t<l&&r<l)return a+n.msInterval.count(t,r);if(t<l&&(a+=n.msInterval.count(t,l)),r<c)return a;t=c}}catch(t){o.e(t)}finally{o.f()}return a+n.msInterval.count(t,r)},offset:function(t,r){if(0===r)return[t,r];var i=n.msInterval.offset(t,r),a=r>0?e.filter((function(e){return n.setTime(t,e.startTime)>=t})):e.filter((function(e){return n.setTime(t,e.startTime)<t})).reverse();if(0===a.length)return[n.msInterval.offset(t,r),0];if(r>0){var o,u=z(a);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=n.setTime(t,l.startTime);c<=i&&(r-=n.msInterval.count(t,c),t=l.endTime===Z?n.getStartOfNextDay(t):n.setTime(t,l.endTime),i=n.msInterval.offset(t,r))}}catch(t){u.e(t)}finally{u.f()}r-=n.msInterval.count(t,i)}else{var f,s=z(a);try{for(s.s();!(f=s.n()).done;){var d=f.value,h=d.endTime===Z?n.getStartOfNextDay(t):n.setTime(t,d.endTime);i<h&&(r+=n.msInterval.count(h,t)+1,t=n.msInterval.offset(n.setTime(t,d.startTime),-1),i=n.msInterval.offset(t,r))}}catch(t){s.e(t)}finally{s.f()}r+=n.msInterval.count(i,t)}if(0!==r)throw"tradingDay.offset was called with an offset that spans more than a day";return[i,r]}}},J=function(t,n,e,r,i){var a={getTimeComponentArrayFromString:function(t){return[t.slice(0,2),t.slice(3,5),t.slice(6,8),t.slice(9,12)]},getTimeString:function(t){var n=W(e(t).map((function(t){return t.toString(10).padStart(2,"0")})),4),r=n[0],i=n[1],a=n[2],o=n[3];return"".concat(r,":").concat(i,":").concat(a,".").concat(o.padStart(3,"0"))},setTime:function(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=W(a.getTimeComponentArrayFromString(e),4),u=o[0],l=o[1],c=o[2],f=o[3];return i.offset(t(n,u,l,c,f),r)},getStartOfNextDay:function(t){return r.offset(r.floor(t),1)},getEndOfPreviousDay:function(t){return i.offset(r.floor(t),-1)}};return a.dayInterval=r,a.msInterval=i,a.getDay=n,a},tt=J((function(t,n,e,r,i){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),n,e,r,i)}),(function(t){return t.getDay()}),(function(t){return[t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}),r.timeDay,r.timeMillisecond),nt=function(t,n){var e=function(n){return void 0===t[n]?[]:t[n]},r=[$(e("Sunday"),n),$(e("Monday"),n),$(e("Tuesday"),n),$(e("Wednesday"),n),$(e("Thursday"),n),$(e("Friday"),n),$(e("Saturday"),n)],i=r.reduce((function(t,n){return t+n.totalTradingTimeInMiliseconds}),0);if(0===i)throw"Trading pattern must yield at least 1 ms of trading time";var a={tradingDays:r,totalTradingWeekMilliseconds:i,clampUp:function(t){var e,i=z(r[n.getDay(t)].nonTradingTimeRanges);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.isInRange(t))return o.endTime===Z?a.clampUp(n.getStartOfNextDay(t)):n.setTime(t,o.endTime)}}catch(t){i.e(t)}finally{i.f()}return t},clampDown:function(t){var e,i=z(r[n.getDay(t)].nonTradingTimeRanges);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.isInRange(t))return o.startTime===Z?a.clampDown(n.getEndOfPreviousDay(t)):n.setTime(t,o.startTime,-1)}}catch(t){i.e(t)}finally{i.f()}return t},distance:function(t,e){if(t.getTime()===e.getTime())return 0;var r=W(t<=e?[t,e,1]:[e,t,-1],3),i=r[0],o=r[1],u=r[2];if(n.dayInterval(i).getTime()===n.dayInterval(o).getTime())return a.tradingDays[n.getDay(i)].totalTradingMillisecondsBetween(i,o);var l=a.tradingDays[n.getDay(i)].totalTradingMillisecondsBetween(i,n.dayInterval.offset(n.dayInterval(i),1))+a.tradingDays[n.getDay(o)].totalTradingMillisecondsBetween(n.dayInterval(o),o);return 1===n.dayInterval.count(i,o)?l:(i=n.dayInterval.offset(n.dayInterval(i),1),o=n.dayInterval(o),u*n.dayInterval.range(i,o).reduce((function(t,e,r,i){var o=r<i.length-1?i[r+1]:n.dayInterval.offset(e,1),u=o-e!==X,l=a.tradingDays[n.getDay(e)];return t+(u?l.totalTradingMillisecondsBetween(e,o):l.totalTradingTimeInMiliseconds)}),l))},offset:function(t,e){t=e>=0?a.clampUp(t):a.clampDown(t);var r=function(t,e,r){if(r<0){var i=n.dayInterval(e),o=t.totalTradingMillisecondsBetween(i,e);return Math.abs(r)<=o?t.offset(e,r):[a.clampDown(n.msInterval.offset(i,-1)),r+o+1]}var u=n.getStartOfNextDay(e),l=t.totalTradingMillisecondsBetween(e,u);return r<l?t.offset(e,r):[a.clampUp(u),r-l]};if(0===e)return t;var i,o=e<0?function(t,e,r){return[a.clampDown(n.dayInterval.offset(t,-1)),e+r]}:function(t,e,r){return[a.clampUp(n.dayInterval.offset(t)),e-r]},u=a.tradingDays[n.getDay(t)],l=W(r(u,t,e),2);for(t=l[0],e=l[1];0!==e;)if(u=a.tradingDays[n.getDay(t)],i=t,n.dayInterval.offset(i)-n.dayInterval(i)!==X){var c=W(r(u,t,e),2);t=c[0],e=c[1]}else{var f=W(Math.abs(e)>=u.totalTradingTimeInMiliseconds?o(t,e,u.totalTradingTimeInMiliseconds):r(u,t,e),2);t=f[0],e=f[1]}return t},copy:function(){return a}};return a},et=J((function(t,n,e,r,i){return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),n,e,r,i))}),(function(t){return t.getUTCDay()}),(function(t){return[t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}),r.utcDay,r.utcMillisecond);function rt(){var t=[function(t){return t}],e=[0,0],r="percent",i=null,a=[],o=function(o){var u,l=new Array(o.length),c=z(t);try{for(c.s();!(u=c.n()).done;)for(var f=u.value,s=0;s<o.length;s++){var d=f(o[s],s);Array.isArray(d)?l.push.apply(l,L(d)):l.push(d)}}catch(t){c.e(t)}finally{c.f()}var h=[n.min(l),n.max(l)];if(h[0]=null==h[0]?n.min(a):n.min([h[0]].concat(L(a))),h[1]=null==h[1]?n.max(a):n.max([h[1]].concat(L(a))),null!=i){var g=Math.max(Math.abs(h[1]-i),Math.abs(h[0]-i));h[0]=i-g,h[1]=i+g}switch(r){case"domain":h[0]-=e[0],h[1]+=e[1];break;case"percent":var v=h[1]-h[0];h[0]-=e[0]*v,h[1]+=e[1]*v;break;default:throw new Error("Unknown padUnit: ".concat(r))}return h};return o.accessors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.padUnit=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.include=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o.symmetricalAbout=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o}function it(){var t=[],n=[0,0],e="percent",r=null,i=[],a=rt(),o=function(t){return null!=t?t.valueOf():null},u=function(u){var l=t.map((function(t){return function(){var n=t.apply(void 0,arguments);return Array.isArray(n)?n.map(o):o(n)}}));return a.accessors(l).pad(n).padUnit(e).symmetricalAbout(null!=r?r.valueOf():null).include(i.map((function(t){return t.valueOf()}))),a(u).map((function(t){return new Date(t)}))};return u.accessors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.pad=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.padUnit=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.include=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u.symmetricalAbout=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u}function at(){var t=1,n=20,e=.1,r=.1,a=i.randomNormal(),o=function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=t/n,u=[],l=0;l<n+1;l++){u.push(i);var c=a()*Math.sqrt(o)*r+(e-r*r/2)*o;i*=Math.exp(c)}return u};return o.period=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.steps=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.mu=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.sigma=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.random=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function ot(){var t=10,e=function(e){return t<=1?e.map((function(t){return[t]})):n.range(0,Math.ceil(e.length/t)).map((function(n){return e.slice(n*t,(n+1)*t)}))};return e.bucketSize=function(n){return arguments.length?(t=n,e):t},e}var ut=function(t){return"function"==typeof t?t:function(){return t}},lt=function(){var t=null,n=function(t){return t.date},e=function(t){return t.open},r=function(t){return t.high},i=function(t){return t.low},a=function(t){return t.close},u="vertical",l=ut(3),c=function(c){var f=t||o.path();return c.forEach((function(t,o){var c=n(t,o),s=e(t,o),d=r(t,o),h=i(t,o),g=a(t,o),v=l(t,o)/2;"vertical"===u?(f.moveTo(c,h),f.lineTo(c,d),f.moveTo(c,s),f.lineTo(c-v,s),f.moveTo(c,g),f.lineTo(c+v,g)):(f.moveTo(h,c),f.lineTo(d,c),f.moveTo(s,c),f.lineTo(s,c+v),f.moveTo(g,c),f.lineTo(g,c-v))})),t?null:f.toString()};return c.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.x=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),c):n},c.open=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),c):e},c.high=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),c):r},c.low=function(){return arguments.length?(i=ut(arguments.length<=0?void 0:arguments[0]),c):i},c.close=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),c):a},c.width=function(){return arguments.length?(l=ut(arguments.length<=0?void 0:arguments[0]),c):l},c.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],c):u},c},ct=function(){var t=null,n=function(t){return t.x},e=function(t){return t.y},r="center",i="center",a=function(t){return t.height},u=ut(3),l=function(l,c){var f=t||o.path();return l.forEach((function(t,o){var l,s,d=n.call(this,t,c||o),h=e.call(this,t,c||o),g=a.call(this,t,c||o),v=u.call(this,t,c||o);switch(r){case"left":l=v;break;case"right":l=0;break;case"center":l=v/2;break;default:throw new Error("Invalid horizontal alignment "+r)}switch(i){case"bottom":s=-g;break;case"top":s=0;break;case"center":s=g/2;break;default:throw new Error("Invalid vertical alignment "+i)}f.rect(d-l,h-s,v,g)}),this),t?null:f.toString()};return l.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.x=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),l):n},l.y=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),l):e},l.width=function(){return arguments.length?(u=ut(arguments.length<=0?void 0:arguments[0]),l):u},l.horizontalAlign=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.height=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),l):a},l.verticalAlign=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],l):i},l},ft=function(){var t=null,n=function(t){return t.date},e=function(t){return t.open},r=function(t){return t.high},i=function(t){return t.low},a=function(t){return t.close},u=ut(3),l=function(l){var c=t||o.path();return l.forEach((function(t,o){var l=n(t,o),f=e(t,o),s=r(t,o),d=i(t,o),h=a(t,o),g=u(t,o),v=g/2;c.rect(l-v,f,g,h-f),c.moveTo(l,Math.min(h,f)),c.lineTo(l,s),c.moveTo(l,Math.max(h,f)),c.lineTo(l,d)})),t?null:c.toString()};return l.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.x=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),l):n},l.open=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),l):e},l.high=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),l):r},l.low=function(){return arguments.length?(i=ut(arguments.length<=0?void 0:arguments[0]),l):i},l.close=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),l):a},l.width=function(){return arguments.length?(u=ut(arguments.length<=0?void 0:arguments[0]),l):u},l},st=function(){var t=null,n=function(t){return t.value},e=function(t){return t.median},r=function(t){return t.upperQuartile},i=function(t){return t.lowerQuartile},a=function(t){return t.high},u=function(t){return t.low},l="vertical",c=ut(5),f=ut(.5),s=function(s){var d=t||o.path();return s.forEach((function(t,o){var s=n(t,o),h=c(t,o),g=h/2,v=h*f(t,o)/2,p=a(t,o),m=r(t,o),y=e(t,o),b=i(t,o),x=u(t,o),S=b-m;"vertical"===l?(d.moveTo(s-v,p),d.lineTo(s+v,p),d.moveTo(s,p),d.lineTo(s,m),d.rect(s-g,m,h,S),d.moveTo(s-g,y),d.lineTo(s+g,y),d.moveTo(s,b),d.lineTo(s,x),d.moveTo(s-v,x),d.lineTo(s+v,x)):(d.moveTo(x,s-v),d.lineTo(x,s+v),d.moveTo(x,s),d.lineTo(b,s),d.rect(b,s-g,-S,h),d.moveTo(y,s-g),d.lineTo(y,s+g),d.moveTo(m,s),d.lineTo(p,s),d.moveTo(p,s-v),d.lineTo(p,s+v))})),t?null:d.toString()};return s.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.value=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),s):n},s.median=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),s):e},s.upperQuartile=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),s):r},s.lowerQuartile=function(){return arguments.length?(i=ut(arguments.length<=0?void 0:arguments[0]),s):i},s.high=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),s):a},s.low=function(){return arguments.length?(u=ut(arguments.length<=0?void 0:arguments[0]),s):u},s.width=function(){return arguments.length?(c=ut(arguments.length<=0?void 0:arguments[0]),s):c},s.orient=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.cap=function(){return arguments.length?(f=ut(arguments.length<=0?void 0:arguments[0]),s):f},s},dt=function(){var t=null,n=function(t){return t.x},e=function(t){return t.high},r=function(t){return t.low},i="vertical",a=ut(5),u=function(u){var l=t||o.path();return u.forEach((function(t,o){var u=n(t,o),c=a(t,o)/2,f=e(t,o),s=r(t,o);"vertical"===i?(l.moveTo(u-c,f),l.lineTo(u+c,f),l.moveTo(u,f),l.lineTo(u,s),l.moveTo(u-c,s),l.lineTo(u+c,s)):(l.moveTo(s,u-c),l.lineTo(s,u+c),l.moveTo(s,u),l.lineTo(f,u),l.moveTo(f,u-c),l.lineTo(f,u+c))})),t?null:l.toString()};return u.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.value=function(){return arguments.length?(n=ut(arguments.length<=0?void 0:arguments[0]),u):n},u.high=function(){return arguments.length?(e=ut(arguments.length<=0?void 0:arguments[0]),u):e},u.low=function(){return arguments.length?(r=ut(arguments.length<=0?void 0:arguments[0]),u):r},u.width=function(){return arguments.length?(a=ut(arguments.length<=0?void 0:arguments[0]),u):a},u.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u},ht=function(t){return"function"==typeof t?t:function(){return t}},gt=1e-6,vt=function(t){return t.selection()!==t},pt=function(t,n){t=t||"g";var e=function(t,n){return n},r=null,i=function(i,a){a=a||function(t){return t};var o=i.selection(),u=vt(i)?i:null,l=o.selectChildren(null==n?t:"".concat(t,".").concat(n)).data(a,e),c=l.enter().append(t).attr("class",n),f=l.exit();l=l.merge(c);var s=u||r;return s&&(l=l.transition(s).style("opacity",1),c.style("opacity",gt),f=f.transition(s).style("opacity",gt)),f.remove(),l.enter=function(){return c},l.exit=function(){return f},l};return i.element=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.className=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.key=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.transition=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},mt=function(t,n){if(function(t,n){return!(t.x>=n.x+n.width||t.x+t.width<=n.x||t.y>=n.y+n.height||t.y+t.height<=n.y)}(t,n)){var e=Math.max(t.x,n.x),r=Math.min(t.x+t.width,n.x+n.width),i=Math.max(t.y,n.y);return(r-e)*(Math.min(t.y+t.height,n.y+n.height)-i)}return 0},yt=function(t,e){return n.sum(t.map((function(n,r){return e===r?0:mt(t[e],n)})))},bt=function(t,n,e,r,i){return{x:t,y:n,width:e,height:r,location:i}},xt=function(t){var n=t.x,e=t.y,r=t.width,i=t.height;return[bt(n,e,r,i,"bottom-right"),bt(n-r,e,r,i,"bottom-left"),bt(n-r,e-i,r,i,"top-left"),bt(n,e-i,r,i,"top-right"),bt(n,e-i/2,r,i,"middle-right"),bt(n-r/2,e,r,i,"bottom-center"),bt(n-r,e-i/2,r,i,"middle-left"),bt(n-r/2,e-i,r,i,"top-center")]},St=function(t,n,e){return[].concat(L(t.slice(0,n)),[e],L(t.slice(n+1)))},wt=function(t,n){return t<n},Vt=function t(){var e,r=null,i=wt,a=function(){return 0},o=function o(u,l){r||(r=n.sum(e.map((function(t,n){return a(t,n,e)}))));var c=function(t,n){return r-a(e[n],n,e)+a(t,n,St(e,n,t))}(u,l);return i(c,r)?t().locationScore(a).winningScore(i).score(c).rectangles(St(e,l,u)):o};return o.rectangles=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.score=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.winningScore=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o.locationScore=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o},At=function(t){return Math.floor(Math.random()*t.length)},Ct=function(t){return"function"==typeof t?t:function(){return t}};function kt(){var t=arguments;return function(n,e){for(var r=0,i=t.length;r<i;r++)if(null==t[r](n,e))return!1;return!0}}var Et=function(t,n){switch(t){case"left":return n/2;case"right":return-n/2;default:return 0}},Dt=function(t){var n=Object.assign({},t),e=function(){};return Object.keys(n).forEach((function(t){e[t]=function(){return arguments.length?(n[t]=arguments.length<=0?void 0:arguments[0],e):n[t]}})),e},Tt=function(){var t=function(){return 0},n=function(t){return t.x},r=function(t){return t.y},i="center",a=function(){return 5},o="vertical",u=Dt({decorate:function(){},defined:function(e,i){return kt(t,n,r)(e,i)},xScale:e.scaleIdentity(),yScale:e.scaleIdentity()});return u.values=function(e,l){var c=a(e,l),f=Et(i,c),s=u.xScale(),d=u.yScale();if("vertical"===o){var h=d(r(e,l),l),g=d(t(e,l),l),v=s(n(e,l),l)+f;return{d:e,x:v,y:h,y0:g,width:c,height:h-g,origin:[v,h],baseOrigin:[v,g],transposedX:v,transposedY:h}}var p=s(r(e,l),l),m=s(t(e,l),l),y=d(n(e,l),l)+f;return{d:e,x:y,y:p,y0:m,width:c,height:p-m,origin:[p,y],baseOrigin:[m,y],transposedX:p,transposedY:y}},u.xValues=function(){return"vertical"===o?[n]:[t,r]},u.yValues=function(){return"vertical"!==o?[n]:[t,r]},u.baseValue=function(){return arguments.length?(t=Ct(arguments.length<=0?void 0:arguments[0]),u):t},u.crossValue=function(){return arguments.length?(n=Ct(arguments.length<=0?void 0:arguments[0]),u):n},u.mainValue=function(){return arguments.length?(r=Ct(arguments.length<=0?void 0:arguments[0]),u):r},u.bandwidth=function(){return arguments.length?(a=Ct(arguments.length<=0?void 0:arguments[0]),u):a},u.align=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u},It="#c60",_t="#6c0",zt="#000",Nt="#ddd",Mt="#999",Pt=function(){var t=Tt(),n=l.line().x((function(n,e){return t.values(n,e).transposedX})).y((function(n,e){return t.values(n,e).transposedY})),e=pt("path","line"),r=function(r){vt(r)&&e.transition(r),n.defined(t.defined()),r.each((function(r,i,a){var o=e(u.select(a[i]),[r]);o.enter().attr("fill","none").attr("stroke",zt),o.attr("d",n),t.decorate()(o,r,i)}))};return v(r,t,m("baseValue","bandwidth","align")),g(r,e,"key"),g(r,n,"curve"),r},Bt=function(){var t=Tt(),n=l.line().x((function(n,e){return t.values(n,e).transposedX})).y((function(n,e){return t.values(n,e).transposedY})),e=function(e){var r=n.context();r.beginPath(),r.strokeStyle=zt,r.fillStyle="transparent",t.decorate()(r,e),n.defined(t.defined())(e),r.fill(),r.stroke(),r.closePath()};return v(e,t,m("baseValue","bandwidth","align")),g(e,n,"curve","context"),e},Ot=function(){var t=[0,1],n=[-1,1],e=function(){};return e.domain=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},e.range=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],e):n},e},Rt=function(){var t={},n={},e=null,r=function(r,i){var a=r.context();Object.keys(t).forEach((function(n){var e=t[n];if("function"!=typeof e)throw new Error("Expected an attribute for ".concat(n,", found ").concat(e));var o=a.getAttribLocation(i,n);e.location(o)(r)})),Object.keys(n).forEach((function(t){var e=n[t];if("function"!=typeof e)throw new Error("Expected a uniform for ".concat(t,", found ").concat(e));var o=a.getUniformLocation(i,t);e.location(o)(r)})),null!==e&&e(r)};return r.flush=function(){Object.values(t).forEach((function(t){return t.clear()})),Object.values(n).forEach((function(t){return t.clear()})),null!==e&&e.clear()},r.attribute=function(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return 1===e.length?t[e[0]]:(t[e[0]]=e[1],r)},r.uniform=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return 1===e.length?n[e[0]]:(n[e[0]]=e[1],r)},r.elementIndices=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r},Yt=function(t){var n=-1,e=t,r=!0,i=function(t){if(r){var i=t.context();if(Array.isArray(e))switch(e.length){case 1:i.uniform1fv(n,e);break;case 2:i.uniform2fv(n,e);break;case 3:i.uniform3fv(n,e);break;case 4:i.uniform4fv(n,e);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(e.length," provided."))}else i.uniform1f(n,e);r=!1}};return i.clear=function(){r=!0},i.location=function(){return arguments.length?(n!==(arguments.length<=0?void 0:arguments[0])&&(n=arguments.length<=0?void 0:arguments[0],r=!0),i):n},i.data=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r=!0,i):e},i},Wt=0,Lt=4,Ht=function(){var t=null,n=null,e=null,r=null,i=null,a=null,o=Lt,u=0,l=Rt(),c=!1,f=null,s=!0,d=1,h=function h(v){if(null!=t){var p=e(),m=r();if(function(t,n,e){if(!t||s)return!0;return n!==i||e!==a}(n,p,m)&&(n=function(n,e){var r=g(n,t.VERTEX_SHADER),i=g(e,t.FRAGMENT_SHADER),a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,i),t.linkProgram(a),c&&!t.getProgramParameter(a,t.LINK_STATUS)){var o=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error("Failed to link program : ".concat(o,"\n            Vertex Shader : ").concat(n,"\n            Fragment Shader : ").concat(e))}return a}(p,m),i=p,a=m,s=!1),t.useProgram(n),l.uniform("uScreen",Yt([t.canvas.width/d,t.canvas.height/d])),l(h,n),0===u)null==l.elementIndices()?t.drawArrays(o,0,v):t.drawElements(o,v,t.UNSIGNED_SHORT,0);else if(null==l.elementIndices())f.drawArraysInstancedANGLE(o,0,u,v);else{var y=l.elementIndices().data().length;if(u!==y)throw new Error("Expected elementIndices length ".concat(y)+" to match subInstanceCount ".concat(u,"."));f.drawElementsInstancedANGLE(o,u,t.UNSIGNED_SHORT,0,v)}}};return h.extInstancedArrays=function(){return f},h.context=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.length?(null!=e[0]&&e[0]===t||(l.flush(),s=!0),null!=e[0]&&e[0]!==t&&(f=e[0].getExtension("ANGLE_instanced_arrays")),t=e[0],h):t},h.buffers=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.vertexShader=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],h):e},h.fragmentShader=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],h):r},h.mode=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],h):o},h.subInstanceCount=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},h.debug=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.pixelRatio=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h;function g(n,e){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),c&&!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error("Failed to compile shader : ".concat(i,"\n            Shader : ").concat(n))}return r}},Ft=function(t){var n=[],e=[],r=function(){return t(n.join("\n"),e.join("\n"))};function i(t,n){t.push(n)}function a(t,n,e){var r=t.indexOf(e);t.splice(r>=0?r:t.length,0,n)}function o(t,n){-1===t.indexOf(n)&&t.push(n)}return r.appendHeader=function(t){return i(n,t),r},r.insertHeader=function(t,e){return a(n,t,e),r},r.appendHeaderIfNotExists=function(t){return o(n,t),r},r.appendBody=function(t){return i(e,t),r},r.insertBody=function(t,n){return a(e,t,n),r},r.appendBodyIfNotExists=function(t){return o(e,t),r},r},Ut=function(t,n){return"\nprecision mediump float;\nfloat inf = 1.0 / 0.0;\n".concat(t,"\nvoid main() {\n    ").concat(n,"\n}")},Gt=function(t,n){return"\nprecision mediump float;\n".concat(t,"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    ").concat(n,"\n}")},jt="attribute vec4 aFillColor;\n             varying vec4 vFillColor;",qt="vFillColor = aFillColor;",Qt="attribute vec4 aStrokeColor;\n             varying vec4 vStrokeColor;",Xt="vStrokeColor = aStrokeColor;",Zt="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",Kt="\n        vDefined = aDefined;\n        vSize = 2.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",$t="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",Jt="\n        vDefined = aDefined;\n        vSize = 4.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",tn="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",nn="\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",en="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",rn="\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",an="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",on="\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",un="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",ln="\n        vDefined = aDefined;\n        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",cn="\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",fn="\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 5.0);\n        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);",sn="\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",dn="\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n         (isPositiveY * isExtremeY * aLowValue) +\n         (isPositiveY * isNotExtremeY * aCloseValue) +\n         (isNotPositiveY * isNotExtremeY * aOpenValue) +\n         (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);\n\n        float bodyThickness = (aOpenValue == aCloseValue ? 1.0 : sign(aCloseValue - aOpenValue));\n        float lineWidthYDirection = (isNotExtremeY * bodyThickness * aCorner.y);\n\n        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);",hn="\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",gn="\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n            (isPositiveY * isExtremeY * aLowValue) +\n            (isPositiveY * isNotExtremeY * aCloseValue) +\n            (isNotPositiveY * isNotExtremeY * aOpenValue) +\n            (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = isExtremeY * aCorner.z;\n        float lineWidthYDirection = isNotExtremeY * aCorner.z;\n\n        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);",vn="\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aMainValue;\n        attribute float aBaseValue;\n        attribute vec2 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",pn="\n        vDefined = aDefined;\n        float isBaseline = (1.0 - aCorner.y) / 2.0;\n        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);\n\n        float xModifier = aCorner.x * (aBandwidth) / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);",mn="\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",yn="\n        vDefined = aDefined;\n        float isLow = (aCorner.y + 1.0) / 2.0;\n        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;\n\n        float isEdgeCorner = abs(aCorner.x);\n        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;\n        float lineWidthYDirection = isEdgeCorner * aCorner.z;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);\n        float yModifier = (uStrokeWidth * lineWidthYDirection);",bn="\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aCrossNextValue;\n        attribute float aMainNextValue;\n        attribute float aBaseValue;\n        attribute float aBaseNextValue;\n        attribute float aDefined;\n        attribute float aDefinedNext;\n\n        varying float vDefined;\n\n        float when_lt(float a, float b) {\n            return max(sign(b - a), 0.0);\n        }\n\n        float and(float a, float b) {\n            return a * b;\n        }",xn="\n        vDefined = aDefined * aDefinedNext;\n        gl_Position = vec4(0, 0, 0, 1);\n\n        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);\n        float useIntercept = and(aCorner.z, hasIntercepted);\n\n        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);\n        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);\n\n        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);\n        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);\n\n        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);\n        float interceptXValue = (y0Constant - yConstant) / denominator;\n        float interceptYValue = (yGradient * interceptXValue) + yConstant;\n\n        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);\n\n        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));\n        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));\n        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));",Sn="\n        attribute vec4 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aCapWidth;\n        attribute float aHighValue;\n        attribute float aUpperQuartileValue;\n        attribute float aMedianValue;\n        attribute float aLowerQuartileValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;\n    ",wn="\n        vDefined = aDefined;\n        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n\n        float isNonZeroY = abs(sign(aCorner.y));\n        float isZeroY = 1.0 - isNonZeroY;\n\n        float isQuartileY = isNotExtremeY * isNonZeroY;\n\n        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;\n        float isNegativeY = 1.0 - isPositiveY;\n\n        float yValue =\n          (isExtremeY * isNegativeY) * aHighValue +\n          (isQuartileY * isNegativeY) * aUpperQuartileValue +\n          isZeroY * aMedianValue +\n          (isQuartileY * isPositiveY) * aLowerQuartileValue +\n          (isExtremeY * isPositiveY) * aLowValue;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float isHorizontal = aCorner.w;\n        float isVertical = 1.0 - isHorizontal;\n\n        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;\n\n        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;\n        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;",Vn="\n        varying float vSize;\n        varying float vDefined;",An="\n        float canFill = 1.0;\n        float distance = length(2.0 * gl_PointCoord - 1.0);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }",Cn="\n        varying float vSize;\n        varying float vDefined;\n\n        // anterior, exterior angles\n        float an = 0.628319;\n        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)\n        float en = 0.952000;\n        vec2 ecs = vec2(0.580055, 0.814577);\n    ",kn="\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        p -= acs;\n        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);\n        float d = length(p) * sign(p.x);\n\n        float distance = 1.0 + d;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }",En="\n        varying float vSize;\n        varying float vDefined;\n    ",Dn="\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float an = 3.141593 / 3.0;\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        // box\n        vec2 d = abs(p) - vec2(0.9, 0.35);\n        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n\n        float distance = 1.0 + sdf;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }",Tn="\n        varying float vSize;\n        varying float vDefined;",In="\n        float canFill = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);",_n="\n        varying float vSize;\n        varying float vDefined;\n        float a = 0.6;\n        float b = 1.0;\n    ",zn="\n        if (vDefined < 0.5) {\n            discard;\n        }\n\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n\n        float x = abs(pointCoordTransform.x);\n        float y = abs(pointCoordTransform.y);\n\n        float X = (a * b * x) / (a * y + b * x);\n        float Y = (a * b * y) / (a * y + b * x);\n\n        float distance = length(vec2(x, y)) / length(vec2(X, Y));\n\n        if (distance > 1.0) {\n            discard;\n        }\n    ",Nn="\n        varying float vSize;\n        varying float vDefined;",Mn="\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));\n        float bottomEdgeDistance = pointCoordTransform.y + 0.5;\n        float distance = max(topEdgesDistance, bottomEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }",Pn="\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",Bn="\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;\n        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float distance = max(innerCornerDistance, outerEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }",On="\n        varying float vColorIndicator;\n        varying float vDefined;",Rn="\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }",Yn="\n        varying float vColorIndicator;\n        varying float vDefined;",Wn="\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }",Ln="\n        varying float vDefined;",Hn="\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);",Fn="\n        varying float vDefined;\n    ",Un="\n        float canFill = 0.0;\n        float canStroke = 1.0;\n\n        if (vDefined < 0.5) {\n            discard;\n        }",Gn="varying float vDefined;",jn="\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }",qn="varying float vDefined;",Qn="\n        float canFill = 1.0;\n        float canStroke = 0.0;\n\n        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);\n\n        if (vDefined < 0.5) {\n            discard;\n        }",Xn="varying vec4 vFillColor;",Zn="gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);",Kn="varying vec4 vStrokeColor;",$n="gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);",Jn=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(bn).appendBody(xn),n.appendHeader(Ln).appendBody(Hn),{vertex:function(){return t},fragment:function(){return n}}},te={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126};function ne(t){switch(t){case te.BYTE:case te.UNSIGNED_BYTE:return 1;case te.SHORT:case te.UNSIGNED_SHORT:return 2;case te.FLOAT:return 4;default:throw new Error("Unknown type ".concat(t))}}function ee(t){switch(t){case te.BYTE:return Int8Array;case te.UNSIGNED_BYTE:return Uint8Array;case te.SHORT:return Int16Array;case te.UNSIGNED_SHORT:return Uint16Array;case te.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(t))}}var re=function(){var t=-1,n=null,e=1,r=te.FLOAT,i=!1,a=0,o=0,u=null,l=function(l){var c=l.context();null==n&&(n=c.createBuffer()),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(t,e,r,i,a,o),c.enableVertexAttribArray(t),l.extInstancedArrays().vertexAttribDivisorANGLE(t,null!=u?u:l.subInstanceCount()>0?1:0)};return l.location=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.buffer=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.size=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.normalized=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],l):i},l.stride=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l.offset=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.divisor=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l},ie=function(){var t=!0,n=1,e=te.FLOAT,r=function(){var t=te.FLOAT,n=new Float32Array(0),e=function(e){var r=ee(t);return n.length>e?n=new r(n.buffer,0,e):n.length!==e&&(n=new r(e)),n};return e.type=function(){if(!arguments.length)return t;if(t!==(arguments.length<=0?void 0:arguments[0])){var r=ee(t=arguments.length<=0?void 0:arguments[0]);n=new r(0)}return e},e}(),i=function(t,n){return t},a=null,o=function(){var o=a.length,u=r.type(e)(o*n);if(n>1)for(var l=0;l<o;l++){var c=i(a[l],l);if(c.length!==n)throw new Error("Expected components array of size ".concat(n,", recieved array with length ").concat(c.length,"."));for(var f=0;f<n;f++)u[l*n+f]=c[f]}else for(var s=0;s<o;s++){var d=i(a[s],s);if(Array.isArray(d))throw new Error("Expected a single component value, recieved array with length ".concat(d.length,"."));u[s]=d}return t=!1,u};return o.dirty=function(){return t},o.clear=function(){t=!0},o.size=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],t=!0,o):n},o.type=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t=!0,o):e},o.arrayViewFactory=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],t=!0,o):r},o.value=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],t=!0,o):i},o.data=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],t=!0,o):a},o},ae=function(){var t=re(),n=ie(),e=function e(r){if(t.size(e.size()).type(e.type()),t(r),n.dirty()){var i=n(),a=r.context();a.bindBuffer(a.ARRAY_BUFFER,t.buffer()),a.bufferData(a.ARRAY_BUFFER,i,a.DYNAMIC_DRAW)}};return e.clear=function(){t.buffer(null),n.clear()},g(e,t,"normalized","location","divisor"),g(e,n,"data","value","size","type"),e},oe=function(t,n,e,r){for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];t[n]=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var u=e[r].apply(e,a.concat(i));return u===e?t:u}},ue=function(){var t=Ht().mode(Lt).subInstanceCount(6),n=Ot(),e=Ot(),r=function(){},i=ae().divisor(0).size(3).type(te.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);t.buffers().attribute("aCorner",i);var a=function(i){var a=Jn();t.vertexShader(a.vertex()).fragmentShader(a.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),r(t),t(i-1)};return a.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},g(a,t,"context","pixelRatio"),oe(a,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(a,"crossNextValueAttribute",t.buffers(),"attribute","aCrossNextValue"),oe(a,"mainValueAttribute",t.buffers(),"attribute","aMainValue"),oe(a,"mainNextValueAttribute",t.buffers(),"attribute","aMainNextValue"),oe(a,"baseValueAttribute",t.buffers(),"attribute","aBaseValue"),oe(a,"baseNextValueAttribute",t.buffers(),"attribute","aBaseNextValue"),oe(a,"definedAttribute",t.buffers(),"attribute","aDefined"),oe(a,"definedNextAttribute",t.buffers(),"attribute","aDefinedNext"),a},le=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(Zt).appendBody(Kt),n.appendHeader(Vn).appendBody(An),{vertex:function(){return t},fragment:function(){return n}}},ce=function(){var t=Ht().mode(Wt),n=Ot(),e=Ot(),r=le(),i=function(){},a=function(a){t.vertexShader(r.vertex()).fragmentShader(r.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),i(t),t(a)};return a.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},g(a,t,"context","pixelRatio"),oe(a,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(a,"mainValueAttribute",t.buffers(),"attribute","aMainValue"),oe(a,"sizeAttribute",t.buffers(),"attribute","aSize"),oe(a,"definedAttribute",t.buffers(),"attribute","aDefined"),a},fe=function(){var t=1,n=function(n){n.buffers().uniform("uStrokeWidth",Yt(t))};return n.lineWidth=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},se=function(t){var n=null,e=t,r=!0,i=function(t){var i=t.context();null==n&&(n=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n),r&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),i.STATIC_DRAW),r=!1)};return i.clear=function(){n=null,r=!0},i.data=function(){return arguments.length?(r=!0,e=arguments.length<=0?void 0:arguments[0],i):e},i},de=function(){var t=Ht().mode(Lt).subInstanceCount(6),n=Ot(),e=Ot(),r=function(){},i=fe(),a=ae().divisor(0).size(4).type(te.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);t.buffers().elementIndices(se([0,1,2,2,3,0])).attribute("aCorner",a);var o=function(a){var o=Ft(Ut),u=Ft(Gt);t.vertexShader(o).fragmentShader(u),o.appendHeader("\n            attribute vec4 aCorner;\n            attribute float aCrossValue;\n            attribute float aCrossNextValue;\n            attribute float aMainValue;\n            attribute float aMainNextValue;\n            attribute float aDefined;\n            attribute float aDefinedNext;\n\n            uniform float uStrokeWidth;\n            uniform vec2 uScreen;\n\n            varying float vLength;\n            varying vec2 vPosition;\n        "),o.appendBody("\n            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);\n            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);\n        "),n(t,"value",0),n(t,"nextValue",0),e(t,"value",1),e(t,"nextValue",1),o.appendBody("\n            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;\n\n            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);\n            vec2 normal = vec2(direction.y, -direction.x);\n            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));\n            \n            padding *= aDefined * aDefinedNext;\n            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;\n\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\n            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));\n            vPosition = aCorner.xy * (uStrokeWidth / 2.0);\n            vPosition.x += aCorner[3] * vLength;\n        "),u.appendHeader("\n            uniform float uStrokeWidth;\n            varying float vLength;\n            varying vec2 vPosition;\n\n            float canFill = 0.0;\n            float canStroke = 1.0;\n        "),u.appendBody("\n            vec2 position = vPosition;\n            position.x -= clamp(position.x, 0.0, vLength);\n            float sdf = length(position) - uStrokeWidth / 2.0;\n            if (sdf > 0.5) {\n                discard;\n            }\n        "),i(t),r(t),t(a-1)};return o.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},g(o,t,"context","pixelRatio"),g(o,i,"lineWidth"),oe(o,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(o,"crossNextValueAttribute",t.buffers(),"attribute","aCrossNextValue"),oe(o,"mainValueAttribute",t.buffers(),"attribute","aMainValue"),oe(o,"mainNextValueAttribute",t.buffers(),"attribute","aMainNextValue"),oe(o,"definedAttribute",t.buffers(),"attribute","aDefined"),oe(o,"definedNextAttribute",t.buffers(),"attribute","aDefinedNext"),o},he=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(hn).appendBody(gn),n.appendHeader(Yn).appendBody(Wn),{vertex:function(){return t},fragment:function(){return n}}},ge=function(){var t=Ht().mode(Lt).subInstanceCount(18),n=Ot(),e=Ot(),r=fe(),i=function(){},a=ae().divisor(0).size(3).type(te.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);t.buffers().elementIndices(se([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",a);var o=function(a){var o=he();t.vertexShader(o.vertex()).fragmentShader(o.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),r(t),t.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(t),t(a)};return o.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},g(o,t,"context","pixelRatio"),g(o,r,"lineWidth"),oe(o,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(o,"openValueAttribute",t.buffers(),"attribute","aOpenValue"),oe(o,"highValueAttribute",t.buffers(),"attribute","aHighValue"),oe(o,"lowValueAttribute",t.buffers(),"attribute","aLowValue"),oe(o,"closeValueAttribute",t.buffers(),"attribute","aCloseValue"),oe(o,"bandwidthAttribute",t.buffers(),"attribute","aBandwidth"),oe(o,"definedAttribute",t.buffers(),"attribute","aDefined"),o},ve=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(vn).appendBody(pn),n.appendHeader(qn).appendBody(Qn),{vertex:function(){return t},fragment:function(){return n}}},pe=function(){var t=Ht().mode(Lt).subInstanceCount(6),n=Ot(),e=Ot(),r=function(){},i=ae().divisor(0).size(2).type(te.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);t.buffers().elementIndices(se([0,1,2,0,1,3])).attribute("aCorner",i);var a=function(i){var a=ve();t.vertexShader(a.vertex()).fragmentShader(a.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),t.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n        "),r(t),t(i)};return a.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},g(a,t,"context","pixelRatio"),oe(a,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(a,"mainValueAttribute",t.buffers(),"attribute","aMainValue"),oe(a,"baseValueAttribute",t.buffers(),"attribute","aBaseValue"),oe(a,"bandwidthAttribute",t.buffers(),"attribute","aBandwidth"),oe(a,"definedAttribute",t.buffers(),"attribute","aDefined"),a},me=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(mn).appendBody(yn),n.appendHeader(Gn).appendBody(jn),{vertex:function(){return t},fragment:function(){return n}}},ye=function(){var t=Ht().mode(Lt).subInstanceCount(18),n=Ot(),e=Ot(),r=function(){},i=fe(),a=ae().divisor(0).size(3).type(te.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);t.buffers().elementIndices(se([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",a);var o=function(a){var o=me();t.vertexShader(o.vertex()).fragmentShader(o.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),i(t),t.vertexShader().appendBody("\n                gl_Position.x += xModifier / uScreen.x * 2.0;\n                gl_Position.y += yModifier / uScreen.y * 2.0;\n            "),r(t),t(a)};return o.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},g(o,t,"context","pixelRatio"),g(o,i,"lineWidth"),oe(o,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(o,"highValueAttribute",t.buffers(),"attribute","aHighValue"),oe(o,"lowValueAttribute",t.buffers(),"attribute","aLowValue"),oe(o,"bandwidthAttribute",t.buffers(),"attribute","aBandwidth"),oe(o,"definedAttribute",t.buffers(),"attribute","aDefined"),o},be=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(sn).appendBody(dn),n.appendHeader(On).appendBody(Rn),{vertex:function(){return t},fragment:function(){return n}}},xe=function(){var t=Ht().mode(Lt).subInstanceCount(12),n=Ot(),e=Ot(),r=fe(),i=function(){},a=ae().divisor(0).size(3).type(te.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);t.buffers().elementIndices(se([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",a);var o=function(a){var o=be();t.vertexShader(o.vertex()).fragmentShader(o.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),r(t),t.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(t),t(a)};return o.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},g(o,t,"context","pixelRatio"),g(o,r,"lineWidth"),oe(o,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(o,"openValueAttribute",t.buffers(),"attribute","aOpenValue"),oe(o,"highValueAttribute",t.buffers(),"attribute","aHighValue"),oe(o,"lowValueAttribute",t.buffers(),"attribute","aLowValue"),oe(o,"closeValueAttribute",t.buffers(),"attribute","aCloseValue"),oe(o,"bandwidthAttribute",t.buffers(),"attribute","aBandwidth"),oe(o,"definedAttribute",t.buffers(),"attribute","aDefined"),o},Se=function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(Sn).appendBody(wn),n.appendHeader(Fn).appendBody(Un),{vertex:function(){return t},fragment:function(){return n}}},we=function(){var t=Ht().mode(Lt).subInstanceCount(54),n=Ot(),e=Ot(),r=function(){},i=fe(),a=ae().divisor(0).size(4).type(te.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);t.buffers().elementIndices(se([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",a);var o=function(a){var o=Se();t.vertexShader(o.vertex()).fragmentShader(o.fragment()),n(t,"gl_Position",0),e(t,"gl_Position",1),i(t),t.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n            gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),r(t),t(a)};return o.decorate=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.yScale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},g(o,t,"context","pixelRatio"),g(o,i,"lineWidth"),oe(o,"crossValueAttribute",t.buffers(),"attribute","aCrossValue"),oe(o,"highValueAttribute",t.buffers(),"attribute","aHighValue"),oe(o,"upperQuartileValueAttribute",t.buffers(),"attribute","aUpperQuartileValue"),oe(o,"medianValueAttribute",t.buffers(),"attribute","aMedianValue"),oe(o,"lowerQuartileValueAttribute",t.buffers(),"attribute","aLowerQuartileValue"),oe(o,"lowValueAttribute",t.buffers(),"attribute","aLowValue"),oe(o,"bandwidthAttribute",t.buffers(),"attribute","aBandwidth"),oe(o,"capAttribute",t.buffers(),"attribute","aCapWidth"),oe(o,"definedAttribute",t.buffers(),"attribute","aDefined"),o},Ve=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>0||n<0)throw new Error("Offset values (".concat(t," & ").concat(n,") must straddle 0 "));var e=re(),r=ie(),i=function i(a){var o=i.size()*ne(i.type()),u=Math.abs(t)*o;if(e.offset(u).size(i.size()).type(i.type()),e(a),r.dirty()){var l=r(),c=n*o,f=u+l.length*ne(i.type())+c,s=a.context();s.bindBuffer(s.ARRAY_BUFFER,e.buffer()),s.bufferData(s.ARRAY_BUFFER,f,s.DYNAMIC_DRAW),s.bufferSubData(s.ARRAY_BUFFER,u,l)}};return i.offset=function(r){if(t>r||r>n)throw new Error("Requested offset ".concat(r," exceeds bounds (").concat(t," & ").concat(n,") "));var a=function(n){e.offset((r-t)*i.size()*ne(i.type())),e(n)};return g(a,i,"clear","location"),a},i.clear=function(){e.buffer(null),r.clear()},g(i,e,"normalized","location","divisor"),g(i,r,"data","value","size","type"),i},Ae=function(){var t=Ot(),n=function(t){return"linear".concat(t)},e=function(e,r,i){e.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(i),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(i),"Scale;")).appendBody("".concat(r," = ").concat(r," + ").concat(n(i),"Offset;")).appendBody("".concat(r," = ").concat(r," * ").concat(n(i),"Scale;"));var a=t.domain()[1]-t.domain()[0],o=t.range()[1]-t.range()[0],u=t.range()[0]*(a/o)-t.domain()[0],l=o/a,c=[0,0,0,0],f=[1,1,1,1];c[i]=u,f[i]=l,e.buffers().uniform("".concat(n(i),"Offset"),Yt(c)).uniform("".concat(n(i),"Scale"),Yt(f))};return v(e,t),e},Ce=function(){var t=Ot(),n=10;function e(t,n){return Math.log10(t)/Math.log10(n)}var r=function(t){return"log".concat(t)},i=function(i,a,o){var u="".concat(r(o),"Offset + (").concat(r(o),"Scale * clamp(log(").concat(a,") / log(").concat(r(o),"Base), -inf, inf))");i.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(r(o),"Base;")).appendBody("".concat(a," = (").concat(r(o),"Include * (").concat(u,")) + ((1.0 - ").concat(r(o),"Include) * ").concat(a,");"));var l=e(t.domain()[1],n)-e(t.domain()[0],n),c=(t.range()[1]-t.range()[0])/l,f=t.range()[0]-c*e(t.domain()[0],n),s=[0,0,0,0],d=[0,0,0,0],h=[0,0,0,0];s[o]=f,d[o]=c,h[o]=1,i.buffers().uniform("".concat(r(o),"Offset"),Yt(s)).uniform("".concat(r(o),"Scale"),Yt(d)).uniform("".concat(r(o),"Include"),Yt(h)).uniform("".concat(r(o),"Base"),Yt(n))};return i.base=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},v(i,t),i},ke=function(){var t=Ot(),n=1;function e(t,n){return Math.sign(t)*Math.pow(Math.abs(t),n)}var r=function(t){return"pow".concat(t)},i=function(i,a,o){var u="".concat(r(o),"Offset + (").concat(r(o),"Scale * sign(").concat(a,") * pow(abs(").concat(a,"), vec4(").concat(r(o),"Exp)))");i.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(r(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(r(o),"Exp;")).appendBody("".concat(a," = (").concat(r(o),"Include * (").concat(u,")) + ((1.0 - ").concat(r(o),"Include) * ").concat(a,");"));var l=e(t.domain()[1],n)-e(t.domain()[0],n),c=(t.range()[1]-t.range()[0])/l,f=t.range()[0]-c*e(t.domain()[0],n),s=[0,0,0,0],d=[0,0,0,0],h=[0,0,0,0];s[o]=f,d[o]=c,h[o]=1,i.buffers().uniform("".concat(r(o),"Offset"),Yt(s)).uniform("".concat(r(o),"Scale"),Yt(d)).uniform("".concat(r(o),"Include"),Yt(h)).uniform("".concat(r(o),"Exp"),Yt(n))};return i.exponent=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},v(i,t),i},Ee=e.scaleLinear().copy.toString(),De=e.scaleLog().copy.toString(),Te=e.scalePow().copy.toString(),Ie=e.scaleTime().copy.toString(),_e=e.scaleIdentity(),ze=Date.now(),Ne=function(t){return t-ze},Me=function(t){switch(t.copy.toString()){case Ee:return{scale:_e,webglScale:Ae().domain(t.domain())};case Ie:return{scale:Ne,webglScale:Ae().domain(t.domain().map(Ne))};case De:return{scale:_e,webglScale:Ce().domain(t.domain()).base(t.base())};case Te:return{scale:_e,webglScale:ke().domain(t.domain()).exponent(t.exponent())};default:return{scale:t.copy(),webglScale:Ae().domain(t.range())}}},Pe=function(t){switch(t){case l.symbolCircle:return le();case l.symbolSquare:return n=Ft(Ut),e=Ft(Gt),n.appendHeader(en).appendBody(rn),e.appendHeader(Tn).appendBody(In),{vertex:function(){return n},fragment:function(){return e}};case l.symbolTriangle:return function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(un).appendBody(ln),n.appendHeader(Nn).appendBody(Mn),{vertex:function(){return t},fragment:function(){return n}}}();case l.symbolCross:return function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(cn).appendBody(fn),n.appendHeader(Pn).appendBody(Bn),{vertex:function(){return t},fragment:function(){return n}}}();case l.symbolDiamond:return function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(an).appendBody(on),n.appendHeader(_n).appendBody(zn),{vertex:function(){return t},fragment:function(){return n}}}();case l.symbolStar:return function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader($t).appendBody(Jt),n.appendHeader(Cn).appendBody(kn),{vertex:function(){return t},fragment:function(){return n}}}();case l.symbolWye:return function(){var t=Ft(Ut),n=Ft(Gt);return t.appendHeader(tn).appendBody(nn),n.appendHeader(En).appendBody(Dn),{vertex:function(){return t},fragment:function(){return n}}}();default:throw new Error("Unrecognised symbol: ".concat(t))}var n,e},Be=function(t){var n=re().divisor(1),e=t,r=!0,i=function(t){if(n(t),r){if(!Array.isArray(e))throw new Error("Expected an array, received: ".concat(e));if(e.length!==n.size())throw new Error("Expected array of length: ".concat(n.size(),", recieved array of length: ").concat(e.length));var i=t.context();i["vertexAttrib".concat(e.length,"fv")](n.location(),e),i.disableVertexAttribArray(n.location()),r=!1}};return i.clear=function(){r=!0},i.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r=!0,i):e},g(i,n,"normalized","size","location"),i},Oe=function(){var t=Tt(),n=Ve(0,1),e=n.offset(1),r=Ve(0,1),i=r.offset(1),a=Ve(0,1).type(te.UNSIGNED_BYTE),o=a.offset(1),u=de().crossValueAttribute(n).crossNextValueAttribute(e).mainValueAttribute(r).mainNextValueAttribute(i).definedAttribute(a).definedNextAttribute(o),l=function(t,n){return!1},c=Me,f=[],s=null,d=null,h=function(e){var i=c(t.xScale()),o=c(t.yScale()),h=!l(f,e);h&&(f=e,a.value((function(n,e){return t.defined()(n,e)})).data(e)),(h||i.scale!==s)&&(s=i.scale,"vertical"===t.orient()?n.value((function(n,e){return i.scale(t.crossValue()(n,e))})).data(e):n.value((function(n,e){return i.scale(t.mainValue()(n,e))})).data(e)),(h||o.scale!==d)&&(d=o.scale,"vertical"===t.orient()?r.value((function(n,e){return o.scale(t.mainValue()(n,e))})).data(e):r.value((function(n,e){return o.scale(t.crossValue()(n,e))})).data(e)),u.xScale(i.webglScale).yScale(o.webglScale).decorate((function(n){return t.decorate()(n,e,0)})),u(e.length)};return h.equals=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.scaleMapper=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},v(h,t,m("baseValue","bandwidth","align")),g(h,u,"context","lineWidth","pixelRatio"),h},Re=function(){var t=l.symbol(),n=Tt(),e=pt("g","point"),r=function(t){return"translate("+t[0]+", "+t[1]+")"},i=function(i){vt(i)&&e.transition(i),i.each((function(i,a,o){var l=i.filter(n.defined()),c=e(u.select(o[a]),l);c.enter().attr("transform",(function(t,e){return r(n.values(t,e).origin)})).attr("fill",Nt).attr("stroke",zt).append("path"),c.attr("transform",(function(t,e){return r(n.values(t,e).origin)})).select("path").attr("d",t),n.decorate()(c,i,a)}))};return v(i,n,m("baseValue","bandwidth","align")),g(i,e,"key"),g(i,t,"type","size"),i},Ye=function(){var t=l.symbol(),n=Tt(),e=function(e){var r=e.filter(n.defined()),i=t.context();r.forEach((function(e,r){i.save();var a=n.values(e,r);i.translate(a.origin[0],a.origin[1]),i.beginPath(),i.strokeStyle=zt,i.fillStyle=Nt,n.decorate()(i,e,r),t(e,r),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return v(e,n,m("baseValue","bandwidth","align")),g(e,t,"size","type","context"),e},We=function(){var t=function(t){return t.high},n=function(t){return t.low},r=function(t){return t.cross},i="vertical",a="center",o=function(){return 5},u=Dt({decorate:function(){},defined:function(e,i){return kt(n,t,r)(e,i)},xScale:e.scaleIdentity(),yScale:e.scaleIdentity()});return u.values=function(e,l){var c=o(e,l),f=Et(a,c),s=u.xScale(),d=u.yScale();if("vertical"===i){var h=d(t(e,l));return{origin:[s(r(e,l))+f,h],high:0,low:d(n(e,l))-h,width:c}}var g=s(n(e,l));return{origin:[g,d(r(e,l))+f],high:s(t(e,l))-g,low:0,width:c}},u.xValues=function(){return"vertical"===i?[r]:[t,n]},u.yValues=function(){return"vertical"!==i?[r]:[t,n]},u.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u.lowValue=function(){return arguments.length?(n=Ct(arguments.length<=0?void 0:arguments[0]),u):n},u.highValue=function(){return arguments.length?(t=Ct(arguments.length<=0?void 0:arguments[0]),u):t},u.crossValue=function(){return arguments.length?(r=Ct(arguments.length<=0?void 0:arguments[0]),u):r},u.bandwidth=function(){return arguments.length?(o=Ct(arguments.length<=0?void 0:arguments[0]),u):o},u.align=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],u):a},u},Le=function(){var t,n=function(t){return t.date},r=function(t){return t.open},i=function(t){return t.high},a=function(t){return t.low},o=function(t){return t.close},u=function(){return 5},l="center",c=function(e,r){return t.xScale()(n(e,r))};return(t=Dt({decorate:function(){},defined:function(t,e){return kt(n,r,a,i,o)(t,e)},xScale:e.scaleIdentity(),yScale:e.scaleIdentity()})).values=function(n,e){var f=o(n,e),s=r(n,e),d=u(n,e),h=Et(l,d),g="";return f>s?g="up":f<s&&(g="down"),{cross:c(n,e)+h,open:t.yScale()(s),high:t.yScale()(i(n,e)),low:t.yScale()(a(n,e)),close:t.yScale()(f),width:d,direction:g}},t.xValues=function(){return[n]},t.yValues=function(){return[r,i,a,o]},t.crossValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],t):n},t.openValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],t):r},t.highValue=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],t):i},t.lowValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],t):a},t.yValue=t.closeValue=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],t):o},t.bandwidth=function(){return arguments.length?(u=Ct(arguments.length<=0?void 0:arguments[0]),t):u},t.align=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],t):l},t},He=function(t,n){var e=Le(),r=pt("g",n),i=function(t){return"translate("+t.cross+", "+t.high+")"},a=function(a){vt(a)&&r.transition(a);var o,l=(o=a,function(t){return vt(o)?t.transition(o):t});a.each((function(a,o,c){var f=a.filter(e.defined()),s=r(u.select(c[o]),f);s.enter().attr("transform",(function(t,n){return i(e.values(t,n))+" scale(1e-6, 1)"})).append("path"),s.each((function(r,a,o){var c=e.values(r,a),f="up"===c.direction?_t:It,s=l(u.select(o[a])).attr("class",n+" "+c.direction).attr("stroke",f).attr("fill",f).attr("transform",(function(){return i(c)+" scale(1)"}));t.x(0).width(c.width).open((function(){return c.open-c.high})).high(0).low((function(){return c.low-c.high})).close((function(){return c.close-c.high})),s.select("path").attr("d",t([r]))})),e.decorate()(s,a,o)}))};return g(a,r,"key"),v(a,e),a},Fe=function(t){var n=Le(),e=function(e){var r=e.filter(n.defined()),i=t.context();r.forEach((function(e,r){i.save();var a=n.values(e,r);i.translate(a.cross,a.high),i.beginPath(),t.x(0).open((function(){return a.open-a.high})).width(a.width).high(0).low((function(){return a.low-a.high})).close((function(){return a.close-a.high}))([e]);var o="up"===a.direction?_t:It;i.strokeStyle=o,i.fillStyle=o,n.decorate()(i,e,r),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return g(e,t,"context"),v(e,n),e},Ue=function(t){var n=Le(),e=ae(),r=ae(),i=ae(),a=ae(),o=ae(),u=ae().type(te.UNSIGNED_SHORT),l=ae().type(te.UNSIGNED_BYTE);t.crossValueAttribute(e).openValueAttribute(r).highValueAttribute(i).lowValueAttribute(a).closeValueAttribute(o).bandwidthAttribute(u).definedAttribute(l);var c=function(t,n){return!1},f=Me,s=[],d=null,h=null,p=function(g){var v=f(n.xScale()),p=f(n.yScale()),m=!c(s,g);m&&(s=g,u.value((function(t,e){return n.bandwidth()(t,e)})).data(g),l.value((function(t,e){return n.defined()(t,e)})).data(g)),(m||v.scale!==d)&&(d=v.scale,e.value((function(t,e){return v.scale(n.crossValue()(t,e))})).data(g)),(m||p.scale!==h)&&(h=p.scale,r.value((function(t,e){return p.scale(n.openValue()(t,e))})).data(g),i.value((function(t,e){return p.scale(n.highValue()(t,e))})).data(g),a.value((function(t,e){return p.scale(n.lowValue()(t,e))})).data(g),o.value((function(t,e){return p.scale(n.closeValue()(t,e))})).data(g)),t.xScale(v.webglScale).yScale(p.webglScale).decorate((function(t){return n.decorate()(t,g,0)})),t(g.length)};return p.equals=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],p):c},p.scaleMapper=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],p):f},v(p,n,m("align")),g(p,t,"context","lineWidth","pixelRatio"),p},Ge=function(){var t=function(t){return t.upperQuartile},n=function(t){return t.lowerQuartile},r=function(t){return t.high},i=function(t){return t.low},a=function(t){return t.value},o=function(t){return t.median},u="vertical",l="center",c=function(){return 5},f=Dt({decorate:function(){},defined:function(e,u){return kt(i,r,n,t,a,o)(e,u)},xScale:e.scaleIdentity(),yScale:e.scaleIdentity()});return f.values=function(e,s){var d=c(e,s),h=Et(l,d),g=f.xScale(),v=f.yScale();if("vertical"===u){var p=v(r(e,s));return{origin:[g(a(e,s))+h,p],high:0,upperQuartile:v(t(e,s))-p,median:v(o(e,s))-p,lowerQuartile:v(n(e,s))-p,low:v(i(e,s))-p,width:d}}var m=g(i(e,s));return{origin:[m,v(a(e,s))+h],high:g(r(e,s))-m,upperQuartile:g(t(e,s))-m,median:g(o(e,s))-m,lowerQuartile:g(n(e,s))-m,low:0,width:d}},f.xValues=function(){return"vertical"===u?[a]:[t,n,r,i,o]},f.yValues=function(){return"vertical"!==u?[a]:[t,n,r,i,o]},f.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],f):u},f.lowerQuartileValue=function(){return arguments.length?(n=Ct(arguments.length<=0?void 0:arguments[0]),f):n},f.upperQuartileValue=function(){return arguments.length?(t=Ct(arguments.length<=0?void 0:arguments[0]),f):t},f.lowValue=function(){return arguments.length?(i=Ct(arguments.length<=0?void 0:arguments[0]),f):i},f.highValue=function(){return arguments.length?(r=Ct(arguments.length<=0?void 0:arguments[0]),f):r},f.crossValue=function(){return arguments.length?(a=Ct(arguments.length<=0?void 0:arguments[0]),f):a},f.medianValue=function(){return arguments.length?(o=Ct(arguments.length<=0?void 0:arguments[0]),f):o},f.bandwidth=function(){return arguments.length?(c=Ct(arguments.length<=0?void 0:arguments[0]),f):c},f.align=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],f):l},f},je=function(){var t=[],n=function(t){return t},r=function(t,n){return n},i=Dt({decorate:function(){},xScale:e.scaleIdentity(),yScale:e.scaleIdentity()});return i.xValues=function(){return t.map((function(t){return t.xValues()})).reduce((function(t,n){return t.concat(n)}))},i.yValues=function(){return t.map((function(t){return t.yValues()})).reduce((function(t,n){return t.concat(n)}))},i.mapping=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.key=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.series=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i},qe=function(){var t=je(),n=pt("g"),e=pt("g","multi"),r=function(r){vt(r)&&(e.transition(r),n.transition(r));var i=t.mapping(),a=t.series(),o=t.xScale(),l=t.yScale();r.each((function(r,c,f){var s=e(u.select(f[c]),a);s.each((function(t,e,c){t.xScale(o).yScale(l);var f=i(r,e,a);n(u.select(c[e]),[f]).call(t)})),s.selection().order(),t.decorate()(s,r,c)}))};return v(r,t),g(r,e,"key"),r},Qe=function(){var t=null,n=je(),e=function(e){var r=n.mapping(),i=n.series(),a=n.xScale(),o=n.yScale();i.forEach((function(u,l){var c,f=r(e,l,i);u.context(t).xScale(a).yScale(o),u.decorate?(c=u.decorate(),u.decorate((function(t,r,i){n.decorate()(t,e,l),c(t,r,i)}))):n.decorate()(t,e,l),u(f),c&&u.decorate(c)}))};return e.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},v(e,n),e},Xe=function(){var t=null,n=1,e=je(),r=function(r){var i=e.mapping(),a=e.series(),o=e.xScale(),u=e.yScale();a.forEach((function(l,c){var f,s=i(r,c,a);l.context(t).pixelRatio(n).xScale(o).yScale(u),l.decorate?(f=l.decorate(),l.decorate((function(t,n,i){e.decorate()(t,r,c),f(t,n,i)}))):e.decorate()(t,r,c),l(s),f&&l.decorate(f)}))};return r.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r.pixelRatio=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},v(r,e),r},Ze=function(t){var r=function(){return 50},i="center",a=e.scaleBand(),o=Dt({decorate:function(){},xScale:e.scaleLinear(),yScale:e.scaleLinear()});return o.offsetScaleForDatum=function(t,e,o){var u=r(e,o),l=Et(i,u),c=u/2;return a.domain(n.range(0,t.length)).range([-c+l,c+l])},o.bandwidth=function(){return arguments.length?(r=Ct(arguments.length<=0?void 0:arguments[0]),o):r},o.align=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},v(o,a,b({paddingInner:"paddingOuter"})),o};var Ke=function(){var t=function(t){return t.x},r=function(t){return t.y},i=function(t){return t.color},a=function(){return 5},o=function(){return 5},u=c.interpolateViridis,l=Dt({decorate:function(){},defined:function(n,e){return kt(t,r,i)(n,e)},xScale:e.scaleIdentity(),yScale:e.scaleIdentity()});return l.pathGenerator=ct().x(0).y(0),l.colorScale=function(t){var r=t.map(i);return e.scaleLinear().domain([n.min(r),n.max(r)])},l.values=function(n,e){return{x:l.xScale()(t(n,e)),y:l.yScale()(r(n,e)),colorValue:i(n,e),width:o(n,e),height:a(n,e)}},l.xValues=function(){return[t]},l.yValues=function(){return[r]},l.xValue=function(){return arguments.length?(t=Ct(arguments.length<=0?void 0:arguments[0]),l):t},l.yValue=function(){return arguments.length?(r=Ct(arguments.length<=0?void 0:arguments[0]),l):r},l.colorValue=function(){return arguments.length?(i=Ct(arguments.length<=0?void 0:arguments[0]),l):i},l.colorInterpolate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l.xBandwidth=function(){return arguments.length?(o=Ct(arguments.length<=0?void 0:arguments[0]),l):o},l.yBandwidth=function(){return arguments.length?(a=Ct(arguments.length<=0?void 0:arguments[0]),l):a},v(l,l.pathGenerator,b({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),l},$e=function(t){return"function"==typeof t?t:function(){return t}},Je=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t},i=r,a=function(){},o="horizontal",l=pt("g","annotation-line"),c=function(e){if(vt(e)&&l.transition(e),"horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var c="horizontal"===o,f=c?function(t,n){return"translate(".concat(t,", ").concat(n,")")}:function(t,n){return"translate(".concat(n,", ").concat(t,")")},s=c?"x2":"y2",d=c?n:t,h=c?"left-handle":"bottom-handle",g=c?"right-handle":"top-handle",v=c?"9":"0",p=c?"0":"9",m=c?"0.32em":"0.71em",y=c?"start":"middle",b=(c?t:n).range(),x=function(){return f(b[0],d(r.apply(void 0,arguments)))},S=b[1]-b[0];e.each((function(t,n,e){var r=l(u.select(e[n]),t),c=r.enter().attr("transform",x).style("stroke","#bbb");c.append("line").attr(s,S),c.append("g").classed(h,!0).style("stroke","none"),c.append("g").classed(g,!0).style("stroke","none").attr("transform",f(S,0)).append("text").attr("text-anchor",y).attr("x",v).attr("y",p).attr("dy",m),r.attr("class","annotation-line ".concat(o)),r.attr("transform",x),r.select("line").attr(s,S),r.select("g."+g).attr("transform",f(S,0)),r.select("text").text(i),a(r,t,n)}))};return c.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],c):n},c.value=function(){return arguments.length?(r=$e(arguments.length<=0?void 0:arguments[0]),c):r},c.label=function(){return arguments.length?(i=$e(arguments.length<=0?void 0:arguments[0]),c):i},c.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},c.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},c};var tr=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t},i=r,a=function(){},o="horizontal",u=l.line(),c=function(e){if("horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var l="horizontal"===o,c=u.context(),f=l?t:n,s=l?n:t,d=f.domain(),h=l?9:0,g=l?0:9,v=l?"left":"center",p=l?"middle":"hanging";e.forEach((function(t,n){c.save(),c.beginPath(),c.strokeStyle="#bbb",c.fillStyle="#000",c.textAlign=v,c.textBaseline=p,a(c,t,n),u.context(c)(d.map((function(n){var e=[f(n),s(r(t))];return l?e:e.reverse()})));var e=l?f(d[1]):s(r(t)),o=l?s(r(t)):f(d[1]);c.fillText(i(t),e+h,o+g),c.fill(),c.stroke(),c.closePath(),c.restore()}))};return c.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],c):n},c.value=function(){return arguments.length?(r=$e(arguments.length<=0?void 0:arguments[0]),c):r},c.label=function(){return arguments.length?(i=$e(arguments.length<=0?void 0:arguments[0]),c):i},c.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},c.orient=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},g(c,u,"context"),c},nr=function(){var t=e.scaleIdentity(),n=[10],r=null,i=function(){var e;return null!=r?r:t.ticks?(e=t).ticks.apply(e,L(n)):t.domain()};return i.scale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.ticks=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n=e,i},i.tickArguments=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.tickValues=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},er=function(t){return t},rr=function(t){return t},ir=function(t,n,e,r){return t[n]?t[n].apply(t,e):r},ar=function(t){var n;return null!==(n=t.tickValues())&&void 0!==n?n:ir(t.scale(),"ticks",t.tickArguments(),t.scale().domain())},or=function(t){var n;return null!==(n=t.tickFormat())&&void 0!==n?n:ir(t.scale(),"tickFormat",t.tickArguments(),rr)},ur=function(t){return t},lr=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[10],i=null,a=function(){},o=null,c=6,f=6,s=3,d=l.line(),h=pt("g","tick").key(ur),g=pt("path","domain"),v=e.labelOffset||function(){return{offset:[0,f+s]}},p=e.tickPath||function(){return{path:[[0,0],[0,f]]}},m=function(t,n){var e=0;return t.bandwidth&&(e=t.bandwidth()/2,t.round()&&(e=Math.round(e))),function(r){return n(t(r)+e,0)}},y=function(t,n){return x()?"translate(".concat(n,", ").concat(t,")"):"translate(".concat(t,", ").concat(n,")")},b=function(t){return x()?t.map((function(t){return[t[1],t[0]]})):t},x=function(){return"left"===t||"right"===t},S=function e(r){vt(r)&&(h.transition(r),g.transition(r)),r.each((function(r,i,o){var l=o[i],f=u.select(l);l.__scale__||f.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===t?"start":"left"===t?"end":"middle");var s=l.__scale__||n;l.__scale__=n.copy();var S=ar(e),w=or(e),V="bottom"===t||"right"===t?1:-1,A=function(t){var n=W(t,2),e=n[0],r=n[1];return[e,V*r]},C=n.range(),k=b([[C[0],V*c],[C[0],0],[C[1],0],[C[1],V*c]]),E=g(f,[r]);E.enter().attr("stroke","#000"),E.attr("d",d(k));var D=h(f,S),T=S.map((function(t,n){return v(t,n,S)})),I=S.map((function(t,n){return p(t,n,S)}));D.enter().attr("transform",m(s,y)).append("path").attr("stroke","#000"),D.enter().append("text").attr("transform",(function(t,n){return y.apply(void 0,L(A(T[n].offset)))})).attr("fill","#000"),D.exit().attr("transform",m(n,y)),D.select("path").attr("visibility",(function(t,n){return I[n].hidden&&"hidden"})).attr("d",(function(t,n){return d(b(I[n].path.map(A)))})),D.select("text").attr("visibility",(function(t,n){return T[n].hidden&&"hidden"})).attr("transform",(function(t,n){return y.apply(void 0,L(A(T[n].offset)))})).attr("dy",(function(){var n="0em";return x()?n="0.32em":"bottom"===t&&(n="0.71em"),n})).text(w),D.attr("transform",m(n,y)),a(D,r,i)}))};return S.tickFormat=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],S):o},S.tickSize=function(){return arguments.length?(f=c=Number(arguments.length<=0?void 0:arguments[0]),S):f},S.tickSizeInner=function(){return arguments.length?(f=Number(arguments.length<=0?void 0:arguments[0]),S):f},S.tickSizeOuter=function(){return arguments.length?(c=Number(arguments.length<=0?void 0:arguments[0]),S):c},S.tickPadding=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],S):s},S.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],S):a},S.scale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],S):n},S.ticks=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return r=[].concat(n),S},S.tickArguments=function(){return arguments.length?(r=null==(arguments.length<=0?void 0:arguments[0])?[]:L(arguments.length<=0?void 0:arguments[0]),S):null!==r?r.slice():null},S.tickValues=function(){return arguments.length?(i=null==(arguments.length<=0?void 0:arguments[0])?[]:L(arguments.length<=0?void 0:arguments[0]),S):null!==i?i.slice():null},S.orient=function(){return t},S},cr=function(t,n){var e=!1,r=lr(t,n,{labelOffset:function(t,i,a){var o=0,u=r.tickSizeInner()+r.tickPadding(),l=!1;if(e){var c=n(t),f=i<a.length-1?n(a[i+1]):n.range()[1];o=(f-c)/2,u=r.tickPadding(),l=i===a.length-1&&c===f}return{offset:[o,u],hidden:l}}}),i=function(t){return r(t)};return i.tickCenterLabel=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},v(i,r),i},fr=function(t){return cr("top",t)},sr=function(t){return cr("bottom",t)},dr=function(t){return cr("left",t)},hr=function(t){return cr("right",t)},gr=function(t,n){var e=null,r=lr(t,n,{labelOffset:function(){return{offset:[0,r.tickPadding()]}},tickPath:function(t,i,a){var o=0;return o=e?e(t,i):function(t,e,r){if(n.step)return n.step();var i=n(t);return e<r.length-1?n(r[e+1])/i:2*(n.range()[1]-i)}(t,i,a)/2,{path:[[o,0],[o,r.tickSizeInner()]],hidden:i===a.length-1}}}),i=function(t){r(t)};return i.tickOffset=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},v(i,r),i},vr=function(t){return function(n){var e=ar(t),r=or(t),i=e.map(r),a=n.append("text"),o=i.map((function(t){return a.text(t).node().getBBox()})),u=Math.max.apply(Math,L(o.map((function(t){return t.height})))),l=Math.max.apply(Math,L(o.map((function(t){return t.width}))));return a.remove(),{maxHeight:u,maxWidth:l,labelCount:i.length}}},pr="__d3fc-elements__",mr=function(t){return t[pr]||{}},yr=function(t,n){t[pr]=n},br=function(t){return"D3FC-GROUP"===t.tagName?[t].concat(L(t.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[t]},xr=function(t){var n=mr(t),e=n.width,r=n.height,i=t.useDevicePixelRatio&&null!=window.devicePixelRatio?window.devicePixelRatio:1,a=t.clientWidth*i,o=t.clientHeight*i,u=a!==e||o!==r,l=t.children[0];yr(t,{pixelRatio:i,width:a,height:o,resized:u,child:l})};if("function"!=typeof CustomEvent)throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var Sr=function(t){var n=mr(t),e=new CustomEvent("measure",{detail:n});t.dispatchEvent(e)},wr=function(t){var n=mr(t),e=new CustomEvent("draw",{detail:n});t.dispatchEvent(e)},Vr=function(t){return mr(t.ownerDocument).queue||[]},Ar=function(t,n){var e=mr(t.ownerDocument).requestId;null==e&&(e=requestAnimationFrame((function(){var n,e=Vr(t);(n=e.map(br).reduce((function(t,n){return t.concat(n)}))).forEach(xr),n.forEach(Sr),n.forEach(wr),Cr(t)}))),yr(t.ownerDocument,{queue:n,requestId:e})},Cr=function(t){return function(t){return delete t[pr]}(t.ownerDocument)},kr=function(t,n){var e=t;do{if(e.parentNode===n)return!0}while(e=e.parentNode);return!1},Er=function(t){var n=Vr(t);if(!(n.indexOf(t)>-1)&&!n.some((function(n){return kr(t,n)}))){var e=n.filter((function(n){return!kr(n,t)}));e.push(t),Ar(t,e)}};if("function"!=typeof HTMLElement)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Dr=function(t,n){return function(e){P(i,e);var r=N(i);function i(){return T(this,i),r.apply(this,arguments)}return _(i,[{key:"attributeChangedCallback",value:function(t){if("use-device-pixel-ratio"===t)this.requestRedraw()}},{key:"connectedCallback",value:function(){0===this.childNodes.length&&this.appendChild(t()),function(t){null==t.__measureListener__&&(t.__measureListener__=function(n){return t.setMeasurements(n.detail)},t.addEventListener("measure",t.__measureListener__))}(this)}},{key:"disconnectedCallback",value:function(){!function(t){null!=t.__measureListener__&&(t.removeEventListener("measure",t.__measureListener__),t.__measureListener__=null)}(this)}},{key:"setMeasurements",value:function(t){var e,r=t.width,i=t.height,a=D(e=this.childNodes)||O(e)||U(e)||R(),o=a[0];if(a.slice(1).length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");n(this,o,{width:r,height:i})}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&"false"!==this.getAttribute("use-device-pixel-ratio")},set:function(t){t&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!t&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}},{key:"requestRedraw",value:function(){Er(this)}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),i}(G(HTMLElement))},Tr=function(t){P(e,t);var n=N(e);function e(){return T(this,e),n.apply(this,arguments)}return _(e,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&"false"!==this.getAttribute("set-webgl-viewport")},set:function(t){t&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!t&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),e}(Dr((function(){return document.createElement("canvas")}),(function(t,n,e){var r=e.width,i=e.height;(n.setAttribute("width",r),n.setAttribute("height",i),t.setWebglViewport)&&n.getContext("webgl").viewport(0,0,r,i)}))),Ir=function(t){t.autoResize?_r(t):zr(t)},_r=function(t){null==t.__autoResizeListener__&&(t.__autoResizeListener__=function(){return Er(t)},addEventListener("resize",t.__autoResizeListener__))},zr=function(t){null!=t.__autoResizeListener__&&(removeEventListener("resize",t.__autoResizeListener__),t.__autoResizeListener__=null)},Nr=function(t){P(e,t);var n=N(e);function e(){return T(this,e),n.apply(this,arguments)}return _(e,[{key:"connectedCallback",value:function(){Ir(this)}},{key:"disconnectedCallback",value:function(){zr(this)}},{key:"requestRedraw",value:function(){Er(this)}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(t){t&&!this.autoResize?this.setAttribute("auto-resize",""):!t&&this.autoResize&&this.removeAttribute("auto-resize"),Ir(this)}},{key:"attributeChangedCallback",value:function(t){if("auto-resize"===t)Ir(this)}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),e}(G(HTMLElement)),Mr=Dr((function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")}),(function(t,n,e){var r=e.width,i=e.height;n.setAttribute("viewBox","0 0 ".concat(r," ").concat(i))})),Pr="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Br=document.createElement("style");if(Br.setAttribute("type","text/css"),document.querySelector("head").appendChild(Br),Br.styleSheet?Br.styleSheet.cssText+=Pr:Br.textContent+=Pr,"object"!==("undefined"==typeof customElements?"undefined":F(customElements))||"function"!=typeof customElements.define)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Or=[],Rr=function(t,n){customElements.get(t)?Or.push(t):customElements.define(t,n)};Rr("d3fc-canvas",Tr),Rr("d3fc-group",Nr),Rr("d3fc-svg",Mr),Or.length>0&&console.warn('The d3fc components "'.concat(Or.join(", "),'" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used.'));var Yr=function(){for(var t={},n=function(n){for(var e=0,r=Object.keys(t);e<r.length;e++){var i=r[e];n[i].apply(null,t[i])}return n},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var a=function(){var e=u[o];n[e]=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.length?(t[e]=i,n):t[e]}},o=0,u=r;o<u.length;o++)a();return n},Wr="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}",Lr=document.createElement("style");Lr.setAttribute("type","text/css"),document.querySelector("head").appendChild(Lr),Lr.styleSheet?Lr.styleSheet.cssText+=Wr:Lr.textContent+=Wr;var Hr=function(t){return"function"==typeof t?t:function(){return t}},Fr=function(){var t=Ur.apply(void 0,arguments),n=t.xScale,e=t.yScale,r=t.xAxis,i=t.yAxis,a=Hr(""),o=Hr(""),l=Hr(""),c=Hr(null),f=Hr(null),s=Hr("right"),d=Hr("bottom"),h=null,g=null,p=null,y=!1,b=!0,S=Yr("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),w=function(){},V=Yr("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),A=function(){},C=function(){},k=pt("d3fc-group","cartesian-chart"),E=pt("d3fc-canvas","webgl-plot-area"),D=pt("d3fc-canvas","canvas-plot-area"),T=pt("d3fc-svg","svg-plot-area"),I=pt("d3fc-svg","x-axis").key((function(t){return t})),_=pt("d3fc-svg","y-axis").key((function(t){return t})),z=pt("div","chart-label"),N=pt("div","x-label").key((function(t){return t})),M=pt("div","y-label").key((function(t){return t})),P=function(t){var v,m=(v=t,function(t){return vt(v)?t.transition(v):t});t.each((function(t,v,x){var P=k(u.select(x[v]),[t]);P.enter().attr("auto-resize",""),z(P,[d(t)]).attr("class",(function(t){return"top"===t?"chart-label bottom-label":"chart-label top-label"})).style("margin-bottom",(function(t){return"top"===t?0:"1em"})).style("margin-top",(function(t){return"top"===t?"1em":0})).text(a(t)),N(P,[d(t)]).attr("class",(function(t){return"x-label ".concat(t,"-label")})).text(o(t)),M(P,[s(t)]).attr("class",(function(t){return"y-label ".concat(t,"-label")})).text(l(t)),E(P,h?[t]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",b).on("draw",(function(t,r){var i=t.detail,a=i.child,o=i.pixelRatio;h.context(y?null:a.getContext("webgl")).pixelRatio(o).xScale(n).yScale(e),h(r)})),P.select(".webgl-plot-area>canvas").on("webglcontextlost",(function(t){console.warn("WebGLRenderingContext lost"),t.preventDefault(),y=!0,P.node().requestRedraw()})).on("webglcontextrestored",(function(){console.info("WebGLRenderingContext restored"),y=!1,P.node().requestRedraw()})),D(P,g?[t]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",b).on("draw",(function(t,r){var i=t.detail,a=i.child,o=i.pixelRatio,u=a.getContext("2d");u.save(),b&&u.scale(o,o),g.context(u).xScale(n).yScale(e),g(r),u.restore()})),T(P,p?[t]:[]).classed("plot-area",!0).on("draw",(function(t,r){var i=t.detail.child;p.xScale(n).yScale(e),m(u.select(i).datum(r)).call(p)})),I(P,[d(t)]).attr("class",(function(t){return"x-axis ".concat(t,"-axis")})).style("height",c(t)).on("measure",(function(t,e){var r=t.detail,i=r.width,a=r.height,o=r.child;"top"===e&&u.select(o).attr("viewBox","0 ".concat(-a," ").concat(i," ").concat(a)),n.range([0,i])})).on("draw",(function(t,e){var i=t.detail.child,a="top"===e?r.top(n):r.bottom(n);a.decorate(w),m(u.select(i).datum(e)).call(S(a))})),_(P,[s(t)]).attr("class",(function(t){return"y-axis ".concat(t,"-axis")})).style("width",f(t)).on("measure",(function(t,n){var r=t.detail,i=r.width,a=r.height,o=r.child;"left"===n&&u.select(o).attr("viewBox","".concat(-i," 0 ").concat(i," ").concat(a)),e.range([a,0])})).on("draw",(function(t,n){var r=t.detail.child,a="left"===n?i.left(e):i.right(e);a.decorate(A),m(u.select(r).datum(n)).call(V(a))})),P.each((function(t,n,e){return e[n].requestRedraw()})),C(P,t,v)}))},B=m(/range\w*/,/tickFormat/);return v(P,n,B,x("x")),v(P,e,B,x("y")),v(P,S,x("x")),v(P,V,x("y")),P.xOrient=function(){return arguments.length?(d=Hr(arguments.length<=0?void 0:arguments[0]),P):d},P.yOrient=function(){return arguments.length?(s=Hr(arguments.length<=0?void 0:arguments[0]),P):s},P.xDecorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],P):w},P.yDecorate=function(){return arguments.length?(A=arguments.length<=0?void 0:arguments[0],P):A},P.chartLabel=function(){return arguments.length?(a=Hr(arguments.length<=0?void 0:arguments[0]),P):a},P.xLabel=function(){return arguments.length?(o=Hr(arguments.length<=0?void 0:arguments[0]),P):o},P.yLabel=function(){return arguments.length?(l=Hr(arguments.length<=0?void 0:arguments[0]),P):l},P.xAxisHeight=function(){return arguments.length?(c=Hr(arguments.length<=0?void 0:arguments[0]),P):c},P.yAxisWidth=function(){return arguments.length?(f=Hr(arguments.length<=0?void 0:arguments[0]),P):f},P.webglPlotArea=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],P):h},P.canvasPlotArea=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],P):g},P.svgPlotArea=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],P):p},P.decorate=function(){return arguments.length?(C=arguments.length<=0?void 0:arguments[0],P):C},P.useDevicePixelRatio=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],P):b},P},Ur=function(){for(var t={xScale:e.scaleIdentity(),yScale:e.scaleIdentity(),xAxis:{bottom:sr,top:fr},yAxis:{right:hr,left:dr}},n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return 1!==r.length||r[0].domain||r[0].range?Object.assign(t,{xScale:r[0]||t.xScale,yScale:r[1]||t.yScale}):Object.assign(t,r[0])},Gr=function(t){return"function"==typeof t?t:function(){return t}},jr=function(t,n){return function(){var e=Gr(""),r=n,i=function(){},a=Fr.apply(void 0,arguments),o=function(n){t(a,r),a.decorate((function(t,n,r){t.enter().select(".x-label").style("height","1em").style("line-height","1em");var o=a.yOrient()(n);t.enter().append("div").attr("class","y-label-container").style("grid-column","left"===o?1:5).style("-ms-grid-column","left"===o?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),t.select(".y-label-container>.y-label").text(e),i(t,n,r)})),n.call(a)};return v(o,a,y(/^x/,/^y/,"chartLabel")),o.yLabel=function(){return arguments.length?(e=Gr(arguments.length<=0?void 0:arguments[0]),o):e},o.plotArea=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],o):i},o}},qr=jr((function(t,n){return t.svgPlotArea(n)}),Pt),Qr=jr((function(t,n){return t.canvasPlotArea(n)}),Bt),Xr=function(t){return[t[1],t[0]]},Zr=function(t){var n=function(t){switch(t){case"x":return s.brushX();case"y":return s.brushY();case"xy":return s.brush()}}(t),r=f.dispatch("brush","start","end"),i=e.scaleIdentity(),a=e.scaleIdentity(),o=pt("g","brush"),l=function(n,e,r){switch(t){case"x":return n.map(e);case"y":return n.map(r);case"xy":return[[e(n[0][0]),r(n[0][1])],[e(n[1][0]),r(n[1][1])]]}},c=function(n){var r=e.scaleLinear().domain(i.domain());return"x"===t?n.map(r.invert):"xy"===t?[r.invert(n[0][0]),r.invert(n[1][0])]:void 0},d=function(n){var r=e.scaleLinear().domain(Xr(a.domain()));return"y"===t?[n[1],n[0]].map(r.invert):"xy"===t?[r.invert(n[1][1]),r.invert(n[0][1])]:void 0},h=function(t){var n;if(!t.sourceEvent||"draw"!==t.sourceEvent.type)if(t.selection){var o=(n=t.selection,l(n,e.scaleLinear().domain(i.range()),e.scaleLinear().domain(Xr(a.range()))));r.call(t.type,{},{selection:o,xDomain:c(o),yDomain:d(o)})}else r.call(t.type,{},{})},v=function(t){t.each((function(t,r,c){n.extent([[i.range()[0],a.range()[1]],[i.range()[1],a.range()[0]]]),n.on("end",(function(t){return h(t)})).on("brush",(function(t){return h(t)})).on("start",(function(t){return h(t)})),o(u.select(c[r]),[t]).call(n).call(n.move,t?l(t,e.scaleLinear().domain(i.range()).invert,e.scaleLinear().domain(Xr(a.range())).invert):null)}))};return v.xScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],v):i},v.yScale=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],v):a},g(v,r,"on"),g(v,n,"filter","handleSize"),v},Kr=function(t,n){if(null==t&&null==n)return!0;var e=t.domain(),r=n.domain();return e.length===r.length&&e.every((function(t,n){var e;return(null==t?void 0:t.valueOf())===(null===(e=r[n])||void 0===e?void 0:e.valueOf())}))},$r=Symbol("d3fc-domain-zoom");t.annotationCanvasBand=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r="horizontal",i=function(t){return t.from},a=function(t){return t.to},o=function(){},u=ct().horizontalAlign("right").verticalAlign("top"),l=function(e){if("horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var l=u.context(),c="horizontal"===r,f=c?n:t,s=(c?t:n).range(),d=s[1]-s[0],h=c?"x":"y",g=c?"y":"x",v=c?"height":"width",p=c?"width":"height";e.forEach((function(t,n){l.save(),l.beginPath(),l.strokeStyle="transparent",u[g](f(i(t))),u[h](s[0]),u[p](d),u[v](f(a(t))-f(i(t))),o(l,t,n),u.context(l)([t],n),l.fill(),l.stroke(),l.closePath(),l.restore()}))};return l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.fromValue=function(){return arguments.length?(i=$e(arguments.length<=0?void 0:arguments[0]),l):i},l.toValue=function(){return arguments.length?(a=$e(arguments.length<=0?void 0:arguments[0]),l):a},g(l,u,"context"),l},t.annotationCanvasCrosshair=function(){var t=function(t){return t.x},n=function(t){return t.y},r=e.scaleIdentity(),i=e.scaleIdentity(),a=Ye(),o=tr(),u=tr().orient("vertical"),l=e.scaleIdentity(),c=e.scaleIdentity(),f=Qe().series([o,u,a]).xScale(l).yScale(c).mapping((function(t){return[t]})),s=function(e){e.forEach((function(e){l.range(r.range()),c.range(i.range()),a.crossValue(t).mainValue(n),o.value(n),u.value(t),f(e)}))};s.x=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.y=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i};var d=y("label","decorate");return v(s,o,d,x("y")),v(s,u,d,x("x")),g(s,a,"decorate"),g(s,f,"context"),s},t.annotationCanvasGridline=function(){var t=function(){},n=function(){},e=nr(),r=nr(),i=l.line(),a=function(){var a=i.context(),o=e.scale(),u=r.scale();e().forEach((function(n,e){a.save(),a.beginPath(),a.strokeStyle="#bbb",a.fillStyle="transparent",t(a,n,e),i.context(a)(u.domain().map((function(t){return[o(n),u(t)]}))),a.fill(),a.stroke(),a.closePath(),a.restore()})),r().forEach((function(t,e){a.save(),a.beginPath(),a.strokeStyle="#bbb",a.fillStyle="transparent",n(a,t,e),i.context(a)(o.domain().map((function(n){return[o(n),u(t)]}))),a.fill(),a.stroke(),a.closePath(),a.restore()}))};return a.yDecorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.xDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},v(a,e,x("x")),v(a,r,x("y")),g(a,i,"context"),a},t.annotationCanvasLine=tr,t.annotationSvgBand=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r="horizontal",i=function(t){return t.from},a=function(t){return t.to},o=function(){},l=pt("g","annotation-band"),c=ct().horizontalAlign("center").verticalAlign("center").x(0).y(0),f=function(e){if(vt(e)&&l.transition(e),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var f="horizontal"===r,s=f?function(t,n){return"translate(".concat(t,", ").concat(n,")")}:function(t,n){return"translate(".concat(n,", ").concat(t,")")},d=f?n:t,h=(f?t:n).range(),g=h[1]-h[0],v=f?"height":"width",p=function(){return s((h[1]+h[0])/2,(d(a.apply(void 0,arguments))+d(i.apply(void 0,arguments)))/2)};c[f?"width":"height"](g),c[v]((function(){return d(a.apply(void 0,arguments))-d(i.apply(void 0,arguments))})),e.each((function(t,n,e){var i=l(u.select(e[n]),t);i.enter().attr("transform",p).append("path").classed("band",!0),i.attr("class","annotation-band ".concat(r)).attr("transform",p).select("path").attr("d",(function(t,n){return c([t],n)})),o(i,t,n)}))};return f.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],f):t},f.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],f):n},f.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],f):r},f.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],f):o},f.fromValue=function(){return arguments.length?(i=$e(arguments.length<=0?void 0:arguments[0]),f):i},f.toValue=function(){return arguments.length?(a=$e(arguments.length<=0?void 0:arguments[0]),f):a},f},t.annotationSvgCrosshair=function(){var t=function(t){return t.x},n=function(t){return t.y},r=e.scaleIdentity(),i=e.scaleIdentity(),a=function(){},o=pt("g","annotation-crosshair"),l=Re(),c=Je(),f=Je().orient("vertical"),s=e.scaleIdentity(),d=e.scaleIdentity(),h=qe().series([c,f,l]).xScale(s).yScale(d).mapping((function(t){return[t]})),g=function(e){vt(e)&&o.transition(e),e.each((function(e,g,v){var p=o(u.select(v[g]),e);p.enter().style("pointer-events","none"),s.range(r.range()),d.range(i.range()),l.crossValue(t).mainValue(n),c.value(n),f.value(t),p.call(h),a(p,e,g)}))};g.x=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],g):t},g.y=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],g):r},g.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.decorate=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],g):a};var p=y("label");return v(g,c,p,x("y")),v(g,f,p,x("x")),g},t.annotationSvgGridline=function(){var t=function(){},n=function(){},e=nr(),r=nr(),i=pt("line","gridline-y").key(er),a=pt("line","gridline-x").key(er),o=function(o){vt(o)&&(i.transition(o),a.transition(o)),o.each((function(o,l,c){var f=c[l],s=u.select(c[l]),d=e.scale(),h=r.scale(),g=f.__x_scale__||d;f.__x_scale__=d.copy();var v=e(),p=i(s,v);p.enter().attr("x1",g).attr("x2",g).attr("y1",h.range()[0]).attr("y2",h.range()[1]).attr("stroke","#bbb"),p.attr("x1",d).attr("x2",d).attr("y1",h.range()[0]).attr("y2",h.range()[1]),p.exit().attr("x1",d).attr("x2",d),t(p,v,l);var m=f.__y_scale__||h;f.__y_scale__=h.copy();var y=r(),b=a(s,y);b.enter().attr("y1",m).attr("y2",m).attr("x1",d.range()[0]).attr("x2",d.range()[1]).attr("stroke","#bbb"),b.attr("y1",h).attr("y2",h).attr("x1",d.range()[0]).attr("x2",d.range()[1]),b.exit().attr("y1",h).attr("y2",h),n(b,y,l)}))};return o.yDecorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.xDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},v(o,i,b({key:"xKey"})),v(o,a,b({key:"yKey"})),v(o,e,x("x")),v(o,r,x("y")),o},t.annotationSvgLine=Je,t.autoBandwidth=function(t){var e=.75,r=function(t){if(t.length<=1)return 10;t=t.sort(n.ascending).filter((function(t,n,e){return-1===e.indexOf(t,n+1)}));var r=n.pairs(t).map((function(t){return Math.abs(t[0]-t[1])})),i=n.min(r);return e*i},i=function(n,e,i){if(n.bandwidth)return n.bandwidth();var a,o=(Array.isArray(e)?(a=[]).concat.apply(a,L(e)):e).filter(t.defined()).map(i()).map(n);return r(o)},a=function(n){var e=function(n){if(t.xBandwidth&&t.yBandwidth)t.xBandwidth(i(t.xScale(),n,t.xValue)),t.yBandwidth(i(t.yScale(),n,t.yValue));else{var e=t.orient&&"horizontal"===t.orient()?t.yScale():t.xScale();t.bandwidth(i(e,n,t.crossValue))}};n instanceof u.selection?n.each((function(n,r,i){e(n),t(u.select(i[r]))})):(e(n),t(n))};return v(a,t),a.widthFraction=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a},t.axisBottom=sr,t.axisLabelOffset=function(t){var n="auto",e=function(){},r=function(){return"left"===t.orient()||"right"===t.orient()},i=function(){return"top"===t.orient()||"left"===t.orient()?-1:1},a=function(e){var a=vr(t)(e),o=a.maxHeight,u=a.maxWidth,l=a.labelCount,c=t.scale().range()[1],f="auto"===n?Math.floor((r()?o:u)*l/c)+1:n,s=e.select("text"),d=s.attr("transform");s.attr("transform",(function(t,n){return"".concat(d," ").concat(function(t){return r()?"translate(".concat(t%f*u*i(),", 0)"):"translate(0, ".concat(t%f*o*i(),")")}(n))}))},o=function(n){return t(n)};return t.decorate((function(t){a(t),e(t)})),o.decorate=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.labelOffsetDepth=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},v(o,t,m("decorate")),o},t.axisLabelRotate=function(t){var n="auto",e=function(){},r=function(){return"left"===t.orient()||"right"===t.orient()},i=function(){return"top"===t.orient()||"left"===t.orient()?-1:1},a=function(){switch(t.orient()){case"top":case"right":return"start";default:return"end"}},o=function(e){var o=function(e){var o,u=vr(t)(e),l=u.maxHeight,c=u.maxWidth,f=u.labelCount*c;if("auto"===n){var s=t.scale().range()[1];o=s<f?90*Math.min(1,(f/s-.8)/2):0}else o=n;return{rotate:r()?Math.floor(i()*(90-o)):Math.floor(-o),maxHeight:l,maxWidth:c,anchor:o?a():"middle"}}(e),u=o.rotate,l=o.maxHeight,c=o.anchor,f=e.select("text"),s=f.attr("transform"),d=i()*Math.floor(l/2),h=r()?"translate(".concat(d,", 0)"):"translate(0, ".concat(d,")");f.style("text-anchor",c).attr("transform","".concat(s," ").concat(h," rotate(").concat(u," 0 0)"))},u=function(n){t(n)};return t.decorate((function(t){o(t),e(t)})),u.decorate=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.labelRotate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},v(u,t,m("decorate")),u},t.axisLeft=dr,t.axisOrdinalBottom=function(t){return gr("bottom",t)},t.axisOrdinalLeft=function(t){return gr("left",t)},t.axisOrdinalRight=function(t){return gr("right",t)},t.axisOrdinalTop=function(t){return gr("top",t)},t.axisRight=hr,t.axisTop=fr,t.brush=function(){return Zr("xy")},t.brushX=function(){return Zr("x")},t.brushY=function(){return Zr("y")},t.bucket=ot,t.chartCanvasCartesian=Qr,t.chartCartesian=Fr,t.chartSvgCartesian=qr,t.dataJoin=pt,t.discontinuityIdentity=q,t.discontinuityRange=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=function(t,n){return t>n[0]&&t<n[1]},i={distance:function(t,e){t=i.clampUp(t),e=i.clampDown(e);var r=n.filter((function(n){return i=[t,e],(r=n)[0]>=i[0]&&r[1]<=i[1];var r,i})).map((function(t){return t[1]-t[0]}));return e-t-r.reduce((function(t,n){return t+n}),0)}},a=function(t,n){return t instanceof Date?new Date(t.getTime()+n):t+n};return i.offset=function(t,e){if(e>0){for(var r=i.clampUp(t),o=e;o>0;){var u=n.filter((function(t){return t[0]>r})).sort((function(t,n){return t[0]-n[0]}));if(u.length){var l=u[0],c=l[0]-r;c>o?(r=a(r,o),o=0):(r=l[1],o-=c)}else r=a(r,o),o=0}return r}for(var f=i.clampDown(t),s=e;s<0;){var d=n.filter((function(t){return t[1]<f})).sort((function(t,n){return n[0]-t[0]}));if(d.length){var h=d[0],g=h[1]-f;g<s?(f=a(f,s),s=0):(f=h[0],s-=g)}else f=a(f,s),s=0}return f},i.clampUp=function(t){return n.reduce((function(t,n){return r(t,n)?n[1]:t}),t)},i.clampDown=function(t){return n.reduce((function(t,n){return r(t,n)?n[0]:t}),t)},i.copy=function(){return i},i},t.discontinuitySkipUtcWeekends=function(){return Q((function(t){return t.getUTCDay()}),r.utcDay,r.utcSaturday,r.utcMonday)},t.discontinuitySkipUtcWeeklyPattern=function(t){return nt(t,et)},t.discontinuitySkipWeekends=function(){return Q((function(t){return t.getDay()}),r.timeDay,r.timeSaturday,r.timeMonday)},t.discontinuitySkipWeeklyPattern=function(t){return nt(t,tt)},t.effectivelyZero=gt,t.exclude=m,t.extentDate=it,t.extentLinear=rt,t.extentTime=it,t.feedGdax=function(){var t="BTC-USD",n=null,e=null,r=null,i=function(){var i=[];null!=n&&i.push("start="+n.toISOString()),null!=e&&i.push("end="+e.toISOString()),null!=r&&i.push("granularity="+r);var o="https://api.gdax.com/products/"+t+"/candles?"+i.join("&");return a.json(o).then((function(t){return t.map((function(t){return{date:new Date(1e3*t[0]),open:t[3],high:t[2],low:t[1],close:t[4],volume:t[5]}}))}))};return i.product=function(n){return arguments.length?(t=n,i):t},i.start=function(t){return arguments.length?(n=t,i):n},i.end=function(t){return arguments.length?(e=t,i):e},i.granularity=function(t){return arguments.length?(r=t,i):r},i},t.group=function(){var t="",n="vertical",e=function(t,n){return Number(t[n])},r=function(r){return"vertical"===n?function(n){return Object.keys(n[0]).filter((function(n){return n!==t})).map((function(r){var i=n.filter((function(t){return t[r]})).map((function(n){var i=[n[t],e(n,r)];return i.data=n,i}));return i.key=r,i}))}(r):function(n){return n.map((function(n){var r=Object.keys(n).filter((function(n){return n!==t})).map((function(t){var r=[t,e(n,t)];return r.data=n,r}));return r.key=n[t],r}))}(r)};return r.key=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r},t.include=y,t.includeMap=b,t.indicatorBollingerBands=function(){var t=2,e=C().accumulator((function(e){var r=e&&n.deviation(e),i=e&&n.mean(e);return{average:i,upper:A(i+t*r),lower:A(i-t*r)}})),r=function(t){return e(t)};return r.multiplier=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},g(r,e,"period","value"),r},t.indicatorElderRay=function(){var t=function(t,n){return t.close},e=function(t,n){return t.high},r=function(t,n){return t.low},i=k().period(13),a=function(a){return i.value(t),n.zip(a,i(a)).map((function(t){return{bullPower:A(e(t[0])-t[1]),bearPower:A(r(t[0])-t[1])}}))};return a.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.highValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},g(a,i,"period"),a},t.indicatorEnvelope=function(){var t=.1,n=S,e=function(e){return e.map((function(e){return{lower:A(n(e)*(1-t)),upper:A(n(e)*(1+t))}}))};return e.factor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},e.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],e):n},e},t.indicatorExponentialMovingAverage=k,t.indicatorForceIndex=function(){var t=function(t,n){return t.volume},n=function(t,n){return t.close},e=k().period(13),r=C().period(2).defined((function(e){return null!=n(e)&&null!=t(e)})).accumulator((function(e){return e&&A((n(e[1])-n(e[0]))*t(e[1]))})),i=function(t){var n=r(t);return e(n)};return i.volumeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.closeValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},g(i,e,"period"),i},t.indicatorMacd=function(){var t=S,e=k().period(12),r=k().period(26),i=k().period(9),a=function(a){e.value(t),r.value(t);var o=n.zip(e(a),r(a)).map((function(t){return void 0!==t[0]&&void 0!==t[1]?t[0]-t[1]:void 0})),u=i(o);return n.zip(o,u).map((function(t){return{macd:t[0],signal:t[1],divergence:void 0!==t[0]&&void 0!==t[1]?t[0]-t[1]:void 0}}))};return a.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},v(a,e,b({period:"fastPeriod"})),v(a,r,b({period:"slowPeriod"})),v(a,i,b({period:"signalPeriod"})),a},t.indicatorMovingAverage=j,t.indicatorRelativeStrengthIndex=function(){var t=C().period(14),e=function(t){var n=W(t,2),e=n[0],r=n[1];return e<r?0:e-r},r=function(t){var n=W(t,2),e=n[0],r=n[1];return e>r?0:r-e},i=function(t,e){return void 0!==e?(i=e)+((r=t)[r.length-1]-i)/r.length:n.mean(t);var r,i},a=function(a){var o,u,l,c=function(t){if(t){if(void 0!==o){var a=n.pairs([o].concat(L(t)));return u=i(a.map(e),u),l=i(a.map(r),l),A(100-100/(1+(isNaN(o)?NaN:l/u)))}o=t[0]}else void 0!==o&&(o=NaN)};return t.accumulator(c),t(a)};return g(a,t,"period","value"),a},t.indicatorStochasticOscillator=function(){var t=function(t,n){return t.close},e=function(t,n){return t.high},r=function(t,n){return t.low},i=C().period(5).defined((function(n){return null!=t(n)&&null!=e(n)&&null!=r(n)})).accumulator((function(i){var a=i&&n.max(i,e),o=i&&n.min(i,r);return A(i&&100*(t(i[i.length-1])-o)/(a-o))})),a=j().period(3),o=function(t){var n=i(t),e=a(n);return n.map((function(t,n){return{k:t,d:e[n]}}))};return o.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.highValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},v(o,i,b({period:"kPeriod"})),v(o,a,b({period:"dPeriod"})),o},t.isTransition=vt,t.largestTriangleOneBucket=function(){var t=ot(),e=function(t){return t},r=function(t){return t},i=function(i){if(t.bucketSize()>=i.length)return i;var a=function(t){var i=t.map((function(t){return[e(t),r(t)]})),a=n.range(1,i.length-1).map((function(t){var n=i[t-1],e=i[t],r=i[t+1];return.5*Math.abs((n[0]-r[0])*(e[1]-n[1])-(n[0]-e[0])*(r[1]-n[1]))}));return a}(i),o=t(a),u=t(i.slice(1,i.length-1)).map((function(t,e){var r=o[e],i=n.max(r);return t[r.indexOf(i)]}));return[].concat([i[0]],u,[i[i.length-1]])};return g(i,t,"bucketSize"),i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(r=t,i):r},i},t.largestTriangleThreeBucket=function(){var t=function(t){return t},e=function(t){return t},r=ot(),i=function(i){if(r.bucketSize()>=i.length)return i;var a=r(i.slice(1,i.length-1)),o=i[0],u=i[i.length-1],l=[].concat([o],a,[u]),c=t(o),f=e(o),s=a.map((function(r,i){var a=n.mean(l[i+1],t),o=n.mean(l[i+1],e),u=r.map((function(n){return[t(n),e(n)]})),s=u.map((function(t){return.5*Math.abs((c-a)*(t[1]-f)-(c-t[0])*(o-f))})),d=s.indexOf(n.max(s)),h=u[d];return c=h[0],f=h[1],r[d]}));return[].concat([i[0]],s,[i[i.length-1]])};return g(i,r,"bucketSize"),i.x=function(n){return arguments.length?(t=n,i):t},i.y=function(t){return arguments.length?(e=t,i):e},i},t.layoutAnnealing=function(){var t,n=1e3,e=1,r=function(n,e,r){return yt(r,e)+function(n){return t?n.width*n.height-mt(n,t):0}(n)+function(t){switch(t.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return t.width*t.height/8}return t.width*t.height/4}(n)},i=function(t){for(var i,a=n,o=Vt().locationScore(r).winningScore((function(t,n){return Math.exp((n-t)/a)>Math.random()})).rectangles(t);a>0;){var u=At(t);o=o((i=xt(t[u]))[At(i)],u),a-=e}return o.rectangles()};return i.temperature=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.cooling=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i},t.layoutBoundingBox=function(){var t=[0,0],n=function(n){return n.map((function(n,e){var r=n.x,i=n.y;return r+n.width>t[0]&&(r-=n.width),i+n.height>t[1]&&(i-=n.height),{height:n.height,width:n.width,x:r,y:i}}))};return n.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},t.layoutGreedy=function(){var t,n=function(n,e,r){return yt(r,e)+function(n){return t?n.width*n.height-mt(n,t):0}(n)},e=function(t){var e=Vt().locationScore(n).rectangles(t);return t.forEach((function(t,n){xt(t).forEach((function(t,r){e=e(t,n)}))})),e.rectangles()};return e.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},e},t.layoutLabel=function(t){var n=function(){},r=function(){return[0,0]},i=function(t,n){return[t.x,t.y]},a=t||function(t){return t},o=function(){},l=e.scaleIdentity(),c=e.scaleIdentity(),f=pt("g","label"),s=function(t){t.each((function(t,e,s){var d=f(u.select(s[e]),t).call(o),h=d.nodes(),g=h.map((function(t,n){var e=u.select(t).datum(),a=i(e,n,h),o=[l(a[0]),c(a[1])],f=r(e,n,h);return{hidden:!1,x:o[0],y:o[1],width:f[0],height:f[1]}})),v=a(g);d.attr("style",(function(t,n){return"display:"+(v[n].hidden?"none":"inherit")})).attr("transform",(function(t,n){return"translate("+v[n].x+", "+v[n].y+")"})).attr("layout-width",(function(t,n){return v[n].width})).attr("layout-height",(function(t,n){return v[n].height})).attr("anchor-x",(function(t,n,e){return g[n].x-v[n].x})).attr("anchor-y",(function(t,n,e){return g[n].y-v[n].y})),d.call(o),n(d,t,e)}))};return v(s,f,y("key")),v(s,a),s.size=function(){return arguments.length?(r=ht(arguments.length<=0?void 0:arguments[0]),s):r},s.position=function(){return arguments.length?(i=ht(arguments.length<=0?void 0:arguments[0]),s):i},s.component=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s.decorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],s):c},s},t.layoutRemoveOverlaps=function(t){var e=function(e){e=t(e);for(var r=function(){var t,r,i=e.filter((function(t){return!t.hidden})),a=i.map((function(t,n){return[t,yt(i,n)]})),o=(r=function(t,n){return n[1]-t[1]},(t=a)[n.scan(t,r)]);if(!(o[1]>0))return"break";o[0].hidden=!0};;){if("break"===r())break}return e};return v(e,t=t||function(t){return t}),e},t.layoutTextLabel=function(t){var n=2,e=function(t){return t},r=pt("text"),i=pt("rect"),a=pt("circle"),o=function(t){t.each((function(t,o,l){var c=l[o],f=u.select(c),s=Number(c.getAttribute("layout-width")),d=Number(c.getAttribute("layout-height"));i(f,[t]).attr("width",s).attr("height",d);var h=Number(c.getAttribute("anchor-x")),g=Number(c.getAttribute("anchor-y"));a(f,[t]).attr("r",2).attr("cx",h).attr("cy",g);var v=r(f,[t]);v.enter().attr("dy","0.9em").attr("transform","translate(".concat(n,", ").concat(n,")")),v.text(e)}))};return o.padding=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.value=function(){return arguments.length?(e=ht(arguments.length<=0?void 0:arguments[0]),o):e},o},t.modeMedian=function(){var t=ot(),e=function(t){return t},r=function(r){if(t.bucketSize()>r.length)return r;var i=n.extent(r,e),a=t(r.slice(1,r.length-1)).map((function(t,n){var r,a,o={},u=!0,l=t.map(e),c=l.filter((function(t){return t===i[0]||t===i[1]})).map((function(t){return l.indexOf(t)}))[0];return void 0!==c?t[c]:(l.forEach((function(t,n){void 0===o[t]&&(o[t]=0),o[t]++,o[t]>o[r]||void 0===r?(r=t,a=n,u=!0):o[t]===o[r]&&(u=!1)})),u?t[a]:t[Math.floor(t.length/2)])}));return[].concat([r[0]],a,[r[r.length-1]])};return g(r,t,"bucketSize"),r.value=function(t){return arguments.length?(e=t,r):e},r},t.pointer=function(){var t=f.dispatch("point");function n(n){var e=u.pointer(n);t.call("point",this,[{x:e[0],y:e[1]}])}function e(){t.call("point",this,[])}var r=function(t){t.on("mouseenter.pointer",n).on("mousemove.pointer",n).on("mouseleave.pointer",e)};return g(r,t,"on"),r},t.prefix=x,t.randomFinancial=function(){var t=new Date,n=100,e=r.timeDay,a=1,o=r.timeYear,u=1,l=null,c=function(){var t=i.randomNormal(1,.1);return Math.ceil(1e3*t())},f=at(),s=function(t,n){var r,i,l=(r=t,i=o.offset(r,u)-r,(e.offset(r,a)-r)/i),s=f.period(l)(n),d={date:t,open:s[0],high:Math.max.apply(Math,s),low:Math.min.apply(Math,s),close:s[f.steps()]};return d.volume=c(d),d},d=function(r){var i,o,u;do{i=r?e.offset(r.date,a):new Date(t.getTime()),o=r?r.close:n,r=s(i,o),u=l&&!l(r)}while(u);return r},h=function(){var t,n={next:function(){var n=d(t);return t=n,n},take:function(t){return n.until((function(n,e){return!t||t<0||e===t}))},until:function(n){for(var e=[],r=0,i=d(t),a=n&&!n(i,r);a;)e.push(i),i=d(t=i),r+=1,a=n&&!n(i,r);return e}};return n},g=function(t){return h().take(t)};if(g.stream=h,"function"!=typeof Symbol||"symbol"!==F(Symbol.iterator))throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return g[Symbol.iterator]=function(){var t=h();return{next:function(){return{value:t.next(),done:!1}}}},g.startDate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],g):t},g.startPrice=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.interval=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],g):e},g.intervalStep=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],g):a},g.unitInterval=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],g):o},g.unitIntervalStep=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},g.filter=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],g):l},g.volume=function(){return arguments.length?(c="function"==typeof(t=arguments.length<=0?void 0:arguments[0])?t:function(){return t},g):c;var t},v(g,f),g},t.randomGeometricBrownianMotion=at,t.randomSkipWeekends=function(t){var n=t.date.getDay();return!(0===n||6===n)},t.rebind=g,t.rebindAll=v,t.scaleDiscontinuous=function t(n){var r=this;arguments.length||(n=e.scaleIdentity());var i=q(),a=function(t){var e=n.domain(),r=n.range(),a=i.distance(e[0],e[1]);return i.distance(e[0],t)/a*(r[1]-r[0])+r[0]};return a.invert=function(t){var e=n.domain(),r=n.range(),a=(t-r[0])/(r[1]-r[0])*i.distance(e[0],e[1]);return i.offset(e[0],a)},a.domain=function(){if(!arguments.length)return n.domain();var t=arguments.length<=0?void 0:arguments[0],e=i.clampUp(t[0]),r=i.clampDown(t[1]);return n.domain([e,r]),a},a.nice=function(){n.nice();var t=n.domain(),e=i.clampUp(t[0]),r=i.clampDown(t[1]);return n.domain([e,r]),a},a.ticks=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(t,n){var e=t.map(n.clampUp);return e.length!==new Set(e.map((function(t){return null==t?void 0:t.valueOf()}))).size&&console.warn("There are multiple ticks that fall within a discontinuity, which has led to them being rendered on top of each other. Consider using scale.ticks to explicitly specify the ticks for the scale."),e}(n.ticks.apply(r,e),i)},a.copy=function(){return t(n.copy()).discontinuityProvider(i.copy())},a.discontinuityProvider=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},v(a,n,y("range","rangeRound","interpolate","clamp","tickFormat")),a},t.seriesCanvasArea=function(){var t=Tt(),n=l.area(),e=function(e){var r=n.context();n.defined(t.defined());var i=e.map(t.values);n.x((function(t,n){return i[n].transposedX})).y((function(t,n){return i[n].transposedY}));var a="vertical"===t.orient()?"y":"x";n[a+"0"]((function(t,n){return i[n].y0})),n[a+"1"]((function(t,n){return i[n].y})),r.beginPath(),r.fillStyle=Nt,r.strokeStyle="transparent",t.decorate()(r,e),n(e),r.fill(),r.stroke(),r.closePath()};return v(e,t,m("bandwidth","align")),g(e,n,"curve","context"),e},t.seriesCanvasBar=function(){var t=Tt(),n=ct().x(0).y(0),e=function(e){var r=n.context(),i=e.filter(t.defined()).map(t.values);"vertical"===t.orient()?(n.verticalAlign("top"),n.horizontalAlign("center")):(n.horizontalAlign("right"),n.verticalAlign("center")),i.forEach((function(e,i){var a;r.save(),r.beginPath(),r.translate(e.origin[0],e.origin[1]),r.fillStyle=Mt,r.strokeStyle="transparent",t.decorate()(r,e.d,i),(a=n,"vertical"===t.orient()?a.height:a.width)(-e.height),function(n){return"vertical"===t.orient()?n.width:n.height}(n)(e.width),n([e]),r.fill(),r.stroke(),r.closePath(),r.restore()}))};return v(e,t),g(e,n,"context"),e},t.seriesCanvasBoxPlot=function(){var t=Ge(),n=st().value(0),e=function(e){var r=e.filter(t.defined()),i=n.context();n.orient(t.orient()),r.forEach((function(e,r){i.save();var a=t.values(e,r);i.translate(a.origin[0],a.origin[1]),i.beginPath(),i.fillStyle=Nt,i.strokeStyle=zt,t.decorate()(i,e,r),n.median(a.median).upperQuartile(a.upperQuartile).lowerQuartile(a.lowerQuartile).high(a.high).width(a.width).low(a.low)([e]),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return v(e,t),g(e,n,"cap","context"),e},t.seriesCanvasCandlestick=function(){return Fe(ft())},t.seriesCanvasErrorBar=function(){var t=We(),n=dt().value(0),e=function(e){var r=e.filter(t.defined()),i=n.context();n.orient(t.orient()),r.forEach((function(e,r){i.save();var a=t.values(e,r);i.translate(a.origin[0],a.origin[1]),i.beginPath(),i.strokeStyle=zt,i.fillStyle=Nt,t.decorate()(i,e,r),n.high(a.high).width(a.width).low(a.low)([e]),i.fill(),i.stroke(),i.closePath(),i.restore()}))};return v(e,t),g(e,n,"context"),e},t.seriesCanvasGrouped=function(t){var n=Ze(),e=function(e){e.forEach((function(r,i){var a="horizontal"!==t.orient(),o=function(t,r){var o=n.offsetScaleForDatum(e,t,r);return(a?n.xScale():n.yScale())(t)+o(i)+o.bandwidth()/2};a?(t.xScale(o),t.yScale(n.yScale())):(t.yScale(o),t.xScale(n.xScale())),t.bandwidth&&t.bandwidth((function(t,r){return n.offsetScaleForDatum(e,t,r).bandwidth()})),t.decorate((function(t,e){return n.decorate()(t,e,i)})),t(r)}))};return v(e,t,m("decorate","xScale","yScale")),v(e,n,m("offsetScaleForDatum")),e},t.seriesCanvasHeatmap=function(){var t=Ke(),n=function(n){var e=n.filter(t.defined()),r=t.colorInterpolate(),i=t.colorScale(e),a=t.pathGenerator.context();e.forEach((function(n,e){a.save(),a.beginPath();var o=t.values(n,e);a.translate(o.x,o.y),a.fillStyle=r(i(o.colorValue)),a.strokeStyle="transparent",t.decorate()(a,n,e),t.pathGenerator.height(o.height).width(o.width)([n]),a.fill(),a.stroke(),a.closePath(),a.restore()}))};return g(n,t.pathGenerator,"context"),v(n,t),n},t.seriesCanvasLine=Bt,t.seriesCanvasMulti=Qe,t.seriesCanvasOhlc=function(){return Fe(lt())},t.seriesCanvasPoint=Ye,t.seriesCanvasRepeat=function(){var t="vertical",n=Bt(),e=Qe(),r=function(r){"vertical"===t?e.series(r[0].map((function(t){return n}))).mapping((function(t,n){return t.map((function(t){return t[n]}))})):e.series(r.map((function(t){return n}))).mapping((function(t,n){return t[n]})),e(r)};return r.series=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},v(r,e,m("series","mapping")),r},t.seriesSvgArea=function(){var t=Tt(),n=l.area(),e=pt("path","area"),r=function(r){vt(r)&&e.transition(r),n.defined(t.defined()),r.each((function(r,i,a){var o=r.map(t.values);n.x((function(t,n){return o[n].transposedX})).y((function(t,n){return o[n].transposedY}));var l="vertical"===t.orient()?"y":"x";n[l+"0"]((function(t,n){return o[n].y0})),n[l+"1"]((function(t,n){return o[n].y}));var c=e(u.select(a[i]),[r]);c.enter().attr("fill",Nt),c.attr("d",n),t.decorate()(c,r,i)}))};return v(r,t,m("bandwidth","align")),g(r,e,"key"),g(r,n,"curve"),r},t.seriesSvgBar=function(){var t=ct().x(0).y(0),n=Tt(),e=pt("g","bar"),r=function(t){return"vertical"===n.orient()?t.width:t.height},i=function(t){return"translate("+t[0]+", "+t[1]+")"},a=function(a){vt(a)&&e.transition(a),a.each((function(a,o,l){var c=n.orient();if("vertical"!==c&&"horizontal"!==c)throw new Error("The bar series does not support an orientation of "+c);var f=a.filter(n.defined()),s=f.map(n.values);t.width(0).height(0),"vertical"===n.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center"));var d=e(u.select(l[o]),f);d.enter().attr("transform",(function(t,n){return i(s[n].baseOrigin)})).attr("class","bar "+n.orient()).attr("fill",Mt).append("path").attr("d",(function(n,e){return r(t)(s[e].width),t([n])})),d.attr("transform",(function(t,n){return i(s[n].origin)})).select("path").attr("d",(function(e,i){var a;return r(t)(s[i].width),(a=t,"vertical"===n.orient()?a.height:a.width)(-s[i].height),t([e])})),n.decorate()(d,f,o)}))};return v(a,n),g(a,e,"key"),a},t.seriesSvgBoxPlot=function(){var t=Ge(),n=pt("g","box-plot"),e=st().value(0),r=function(t){return"translate("+t.origin[0]+", "+t.origin[1]+")"},i=function(i){vt(i)&&n.transition(i);var a,o=(a=i,function(t){return vt(a)?t.transition(a):t});i.each((function(i,a,l){var c=i.filter(t.defined()),f=n(u.select(l[a]),c);f.enter().attr("stroke",zt).attr("fill",Nt).attr("transform",(function(n,e){return r(t.values(n,e))+" scale(1e-6, 1)"})).append("path"),e.orient(t.orient()),f.each((function(n,i,a){var l=t.values(n,i);e.median(l.median).upperQuartile(l.upperQuartile).lowerQuartile(l.lowerQuartile).width(l.width).high(l.high).low(l.low),o(u.select(a[i])).attr("transform",r(l)).select("path").attr("d",e([n]))})),t.decorate()(f,i,a)}))};return v(i,t),g(i,n,"key"),g(i,e,"cap"),i},t.seriesSvgCandlestick=function(){return He(ft(),"candlestick")},t.seriesSvgErrorBar=function(){var t=We(),n=pt("g","error-bar"),e=dt().value(0),r=function(t){return"translate("+t.origin[0]+", "+t.origin[1]+")"},i=function(i){vt(i)&&n.transition(i);var a,o=(a=i,function(t){return vt(a)?t.transition(a):t});i.each((function(i,a,l){var c=i.filter(t.defined()),f=c.map(t.values),s=n(u.select(l[a]),c);s.enter().attr("stroke",zt).attr("fill",Nt).attr("transform",(function(n,e){return r(t.values(n,e))+" scale(1e-6, 1)"})).append("path"),e.orient(t.orient()),s.each((function(t,n,i){var a=f[n];e.high(a.high).low(a.low).width(a.width),o(u.select(i[n])).attr("transform",r(a)+" scale(1)").select("path").attr("d",e([t]))})),t.decorate()(s,i,a)}))};return v(i,t),g(i,n,"key"),i},t.seriesSvgGrouped=function(t){var n=Ze(),e=pt("g","grouped"),r=function(r){vt(r)&&e.transition(r),r.each((function(r,i,a){var o=e(u.select(a[i]),r);o.enter().append("g"),o.select("g").each((function(e,i,a){var o=u.select(a[i]),l="horizontal"!==t.orient(),c=function(t,e){var a=n.offsetScaleForDatum(r,t,e);return(l?n.xScale():n.yScale())(t)+a(i)+a.bandwidth()/2};l?(t.xScale(c),t.yScale(n.yScale())):(t.yScale(c),t.xScale(n.xScale())),t.bandwidth&&t.bandwidth((function(t,e){return n.offsetScaleForDatum(r,t,e).bandwidth()})),t.decorate((function(t,e){return n.decorate()(t,e,i)})),o.call(t)}))}))};return v(r,t,m("decorate","xScale","yScale")),v(r,n,m("offsetScaleForDatum")),r},t.seriesSvgHeatmap=function(){var t=Ke(),n=pt("g","box"),e=function(e){e.each((function(e,r,i){var a=e.filter(t.defined()),o=t.colorValue(),l=t.colorInterpolate(),c=t.colorScale(a),f=n(u.select(i[r]),a);f.enter().append("path").attr("stroke","transparent"),f.attr("transform",(function(n,e){return"translate("+(r=t.values(n,e)).x+", "+r.y+")";var r})).select("path").attr("d",(function(n,e){return t.pathGenerator.width(t.values(n,e).width).height(t.values(n,e).height)([n])})).attr("fill",(function(t,n){return l(c(o(t,n)))})),t.decorate()(f,e,r)}))};return v(e,t),e},t.seriesSvgLine=Pt,t.seriesSvgMulti=qe,t.seriesSvgOhlc=function(){return He(lt(),"ohlc")},t.seriesSvgPoint=Re,t.seriesSvgRepeat=function(){var t="vertical",n=Pt(),e=qe(),r=function(r){return r.each((function(r,i,a){"vertical"===t?e.series(r[0].map((function(t){return n}))).mapping((function(t,n){return t.map((function(t){return t[n]}))})):e.series(r.map((function(t){return n}))).mapping((function(t,n){return t[n]})),u.select(a[i]).call(e)}))};return r.series=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},v(r,e,m("series","mapping")),r},t.seriesWebglArea=function(){var t=Tt(),n=Ve(0,1),e=n.offset(1),r=Ve(0,1),i=r.offset(1),a=Ve(0,1),o=a.offset(1),u=Ve(0,1).type(te.UNSIGNED_BYTE),l=u.offset(1),c=ue().crossValueAttribute(n).crossNextValueAttribute(e).mainValueAttribute(r).mainNextValueAttribute(i).baseValueAttribute(a).baseNextValueAttribute(o).definedAttribute(u).definedNextAttribute(l),f=function(t,n){return!1},s=Me,d=[],h=null,p=null,y=function(e){if("vertical"!==t.orient())throw new Error("Unsupported orientation ".concat(t.orient()));var i=s(t.xScale()),o=s(t.yScale()),l=!f(d,e);l&&(d=e,u.value((function(n,e){return t.defined()(n,e)})).data(e)),(l||i.scale!==h)&&(h=i.scale,n.value((function(n,e){return i.scale(t.crossValue()(n,e))})).data(e)),(l||o.scale!==p)&&(p=o.scale,a.value((function(n,e){return o.scale(t.baseValue()(n,e))})).data(e),r.value((function(n,e){return o.scale(t.mainValue()(n,e))})).data(e)),c.xScale(i.webglScale).yScale(o.webglScale).decorate((function(n){return t.decorate()(n,e,0)})),c(e.length)};return y.equals=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],y):f},y.scaleMapper=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],y):s},v(y,t,m("bandwidth","align")),g(y,c,"context","pixelRatio"),y},t.seriesWebglBar=function(){var t=Tt(),n=ae(),e=ae(),r=ae(),i=ae().type(te.UNSIGNED_SHORT),a=ae().type(te.UNSIGNED_BYTE),o=pe().crossValueAttribute(n).mainValueAttribute(e).baseValueAttribute(r).bandwidthAttribute(i).definedAttribute(a),u=function(t,n){return!1},l=Me,c=[],f=null,s=null,d=function(d){if("vertical"!==t.orient())throw new Error("Unsupported orientation ".concat(t.orient()));var h=l(t.xScale()),g=l(t.yScale()),v=!u(c,d);v&&(c=d,i.value((function(n,e){return t.bandwidth()(n,e)})).data(d),a.value((function(n,e){return t.defined()(n,e)})).data(d)),(v||h.scale!==f)&&(f=h.scale,n.value((function(n,e){return h.scale(t.crossValue()(n,e))})).data(d)),(v||g.scale!==s)&&(s=g.scale,r.value((function(n,e){return g.scale(t.baseValue()(n,e))})).data(d),e.value((function(n,e){return g.scale(t.mainValue()(n,e))})).data(d)),o.xScale(h.webglScale).yScale(g.webglScale).decorate((function(n){return t.decorate()(n,d,0)})),o(d.length)};return d.equals=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d.scaleMapper=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},v(d,t,m("align")),g(d,o,"context","pixelRatio"),d},t.seriesWebglBoxPlot=function(){var t=Ge(),n=ae(),e=ae(),r=ae(),i=ae(),a=ae(),o=ae(),u=ae().type(te.UNSIGNED_SHORT),l=ae().type(te.UNSIGNED_SHORT),c=ae().type(te.UNSIGNED_BYTE),f=we().crossValueAttribute(n).highValueAttribute(e).upperQuartileValueAttribute(r).medianValueAttribute(i).lowerQuartileValueAttribute(a).lowValueAttribute(o).bandwidthAttribute(u).capAttribute(l).definedAttribute(c),s=function(t,n){return!1},d=Me,h=[],p=null,y=null,b=Ct(20),x=function(g){if("vertical"!==t.orient())throw new Error("Unsupported orientation ".concat(t.orient()));var v=d(t.xScale()),m=d(t.yScale()),x=!s(h,g);x&&(h=g,u.value((function(n,e){return t.bandwidth()(n,e)})).data(g),l.value((function(t,n){return b(t,n)})).data(g),c.value((function(n,e){return t.defined()(n,e)})).data(g)),(x||v.scale!==p)&&(p=v.scale,n.value((function(n,e){return v.scale(t.crossValue()(n,e))})).data(g)),(x||m.scale!==y)&&(y=m.scale,e.value((function(n,e){return m.scale(t.highValue()(n,e))})).data(g),r.value((function(n,e){return m.scale(t.upperQuartileValue()(n,e))})).data(g),i.value((function(n,e){return m.scale(t.medianValue()(n,e))})).data(g),a.value((function(n,e){return m.scale(t.lowerQuartileValue()(n,e))})).data(g),o.value((function(n,e){return m.scale(t.lowValue()(n,e))})).data(g)),f.xScale(v.webglScale).yScale(m.webglScale).decorate((function(n){return t.decorate()(n,g,0)})),f(g.length)};return x.cap=function(){return arguments.length?(b=Ct(arguments.length<=0?void 0:arguments[0]),x):b},x.equals=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],x):s},x.scaleMapper=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],x):d},v(x,t,m("align")),g(x,f,"context","lineWidth","pixelRatio"),x},t.seriesWebglCandlestick=function(){return Ue(xe())},t.seriesWebglErrorBar=function(){var t=We(),n=ae(),e=ae(),r=ae(),i=ae().type(te.UNSIGNED_SHORT),a=ae().type(te.UNSIGNED_BYTE),o=ye().crossValueAttribute(n).highValueAttribute(e).lowValueAttribute(r).bandwidthAttribute(i).definedAttribute(a),u=function(t,n){return!1},l=Me,c=[],f=null,s=null,d=function(d){if("vertical"!==t.orient())throw new Error("Unsupported orientation ".concat(t.orient()));var h=l(t.xScale()),g=l(t.yScale()),v=!u(c,d);v&&(c=d,i.value((function(n,e){return t.bandwidth()(n,e)})).data(d),a.value((function(n,e){return t.defined()(n,e)})).data(d)),(v||h.scale!==f)&&(f=h.scale,n.value((function(n,e){return h.scale(t.crossValue()(n,e))})).data(d)),(v||g.scale!==s)&&(s=g.scale,e.value((function(n,e){return g.scale(t.highValue()(n,e))})).data(d),r.value((function(n,e){return g.scale(t.lowValue()(n,e))})).data(d)),o.xScale(h.webglScale).yScale(g.webglScale).decorate((function(n){return t.decorate()(n,d,0)})),o(d.length)};return d.equals=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d.scaleMapper=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},v(d,t,m("align")),g(d,o,"context","lineWidth","pixelRatio"),d},t.seriesWebglLine=Oe,t.seriesWebglMulti=Xe,t.seriesWebglOhlc=function(){return Ue(ge())},t.seriesWebglPoint=function(){var t=Tt(),n=Ct(64),e=l.symbolCircle,r=ae(),i=ae(),a=ae().type(te.UNSIGNED_SHORT),o=ae().type(te.UNSIGNED_BYTE),u=ce().crossValueAttribute(r).mainValueAttribute(i).sizeAttribute(a).definedAttribute(o),c=function(t,n){return!1},f=Me,s=[],d=null,h=null,p=function(l){var g=f(t.xScale()),v=f(t.yScale()),p=!c(s,l);p&&(s=l,a.value((function(t,e){return n(t,e)})).data(l),o.value((function(n,e){return t.defined()(n,e)})).data(l)),(p||g.scale!==d)&&(d=g.scale,"vertical"===t.orient()?r.value((function(n,e){return g.scale(t.crossValue()(n,e))})).data(l):r.value((function(n,e){return g.scale(t.mainValue()(n,e))})).data(l)),(p||v.scale!==h)&&(h=v.scale,"vertical"===t.orient()?i.value((function(n,e){return v.scale(t.mainValue()(n,e))})).data(l):i.value((function(n,e){return v.scale(t.crossValue()(n,e))})).data(l)),u.xScale(g.webglScale).yScale(v.webglScale).type(Pe(e)).decorate((function(n){return t.decorate()(n,l,0)})),u(l.length)};return p.size=function(){return arguments.length?(n=Ct(arguments.length<=0?void 0:arguments[0]),p):n},p.type=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],p):e},p.equals=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],p):c},p.scaleMapper=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],p):f},v(p,t,m("baseValue","bandwidth","align")),g(p,u,"context","pixelRatio"),p},t.seriesWebglRepeat=function(){var t="vertical",n=function(){return Oe()},e=Xe(),r=[],i=function(i){if("vertical"===t){var a=r;r=i[0].map((function(t,e){return e<a.length?a[e]:n()})),e.series(r).mapping((function(t,n){return t.map((function(t){return t[n]}))}))}else{var o=r;r=i.map((function(t,e){return e<o.length?o[e]:n()})),e.series(r).mapping((function(t,n){return t[n]}))}e(i)};return i.series=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.length?(n="function"==typeof e[0].xScale&&"function"==typeof e[0].yScale?function(){return e[0]}:e[0],r=[],i):n},i.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r=[],i):t},v(i,e,m("series","mapping")),i},t.shapeBar=ct,t.shapeBoxPlot=st,t.shapeCandlestick=ft,t.shapeErrorBar=dt,t.shapeOhlc=lt,t.webglAdjacentAttribute=Ve,t.webglAttribute=ae,t.webglBaseAttribute=re,t.webglBufferBuilder=Rt,t.webglElementIndices=se,t.webglFillColor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],n=ae().size(4),e=t,r=!0,i=function(t){if(t.vertexShader().appendHeaderIfNotExists(jt).appendBodyIfNotExists(qt),t.fragmentShader().appendHeaderIfNotExists(Xn).appendBodyIfNotExists(Zn),Array.isArray(e))t.buffers().attribute("aFillColor",Be(e).size(4));else{if("function"!=typeof e)throw new Error("Expected value to be an array or function, received ".concat(e));if(!r)return;n.value(e),t.buffers().attribute("aFillColor",n)}r=!1};return i.value=function(){return arguments.length?(e!==(arguments.length<=0?void 0:arguments[0])&&(e=arguments.length<=0?void 0:arguments[0],r=!0),i):e},g(i,n,"data"),i},t.webglProgramBuilder=Ht,t.webglScaleLinear=Ae,t.webglScaleLog=Ce,t.webglScaleMapper=Me,t.webglScalePow=ke,t.webglSeriesArea=ue,t.webglSeriesBar=pe,t.webglSeriesBoxPlot=we,t.webglSeriesCandlestick=xe,t.webglSeriesErrorBar=ye,t.webglSeriesLine=de,t.webglSeriesOhlc=ge,t.webglSeriesPoint=ce,t.webglShaderBuilder=Ft,t.webglStrokeColor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],n=ae().size(4),e=t,r=!0,i=function(t){if(t.vertexShader().appendHeaderIfNotExists(Qt).appendBodyIfNotExists(Xt),t.fragmentShader().appendHeaderIfNotExists(Kn).appendBodyIfNotExists($n),Array.isArray(e))t.buffers().attribute("aStrokeColor",Be(e).size(4));else{if("function"!=typeof e)throw new Error("Expected value to be an array or function, received ".concat(e));if(!r)return;n.value(e),t.buffers().attribute("aStrokeColor",n)}r=!1};return i.value=function(){return arguments.length?(e!==(arguments.length<=0?void 0:arguments[0])&&(e=arguments.length<=0?void 0:arguments[0],r=!0),i):e},g(i,n,"data"),i},t.webglSymbolMapper=Pe,t.webglTypes=te,t.webglUniform=Yt,t.zoom=function(){var t=f.dispatch("zoom"),n=d.zoom().on("zoom",(function(e){var r,i,a=e.transform,o=this,l=a,c=o[$r],f=c.originalXScale,s=c.previousXScale,h=c.xScale,g=c.originalYScale,v=c.previousYScale,p=c.yScale,m=c.previousTransform;Kr(s,h)&&Kr(v,p)||(f=null==h?void 0:h.copy(),g=null==p?void 0:p.copy(),r=a,i=m,l=d.zoomIdentity.scale(r.k/i.k).translate(r.x-i.x,r.y-i.y)),null!=h&&(s=l.rescaleX(f.range(h.range())),h.domain(s.domain())),null!=p&&(v=l.rescaleY(g.range(p.range())),p.domain(v.domain())),m=l,o[$r]={originalXScale:f,previousXScale:s,xScale:h,originalYScale:g,previousYScale:v,yScale:p,previousTransform:m},l!==a&&n.transform(u.select(o),l),t.call("zoom",this,e)})),e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==e&&null==r&&console.warn("Without an xScale and/or yScale specified, this component won't do anything. Perhaps you forgot to specify them e.g. selection.call(zoom, x, y)?"),t.each((function(t,n,i){var a=i[n][$r];null!=a&&a.xScale===e&&a.yScale===r&&console.warn("This component should only be called on a selection once. Perhaps you're missing an .enter()?");var o=null==e?void 0:e.copy(),u=null==r?void 0:r.copy();i[n][$r]={originalXScale:o,previousXScale:o,xScale:e,originalYScale:u,previousYScale:u,yScale:r,previousTransform:d.zoomIdentity}})).call(n)};return g(e,t,"on"),g(e,n,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate","scaleExtent","translateExtent"),e},Object.defineProperty(t,"__esModule",{value:!0})}));
