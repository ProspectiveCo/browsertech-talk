var Da=Object.defineProperty;var it=(e,t)=>{for(var n in t)Da(e,n,{get:t[n],enumerable:!0})};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null});import*as ar from"d3fc";import*as he from"d3fc";var C={none:"none",ordinal:"ordinal",time:"time",linear:"linear"},Fe=e=>{let t="crossValues",n=null,r=null,a=()=>{let o=i=>{let l=n?e[t].filter(s=>n==s.name):e[t];return t=="crossValues"&&l.length>1?!1:l.some(s=>i.includes(s.type))};return e[t].length===0?C.none:r!=C.time&&o(["datetime","date"])?C.time:r!=C.linear&&o(["integer","float"])||r==C.ordinal?C.linear:C.ordinal};return a.settingName=(...o)=>o.length?(t=o[0],a):t,a.settingValue=(...o)=>o.length?(n=o[0],a):n,a.excludeType=(...o)=>o.length?(r=o[0],a):r,a};var $t={};it($t,{domain:()=>Oa,labelFunction:()=>Bt,scale:()=>za});import*as bn from"d3";var xn=e=>{let t=n=>(r,a)=>r===void 0?a:a===void 0?r:n(r,a);return e.reduce((n,r)=>[t(Math.min)(n[0],r[0]),t(Math.max)(n[1],r[1])],[void 0,void 0])},me=e=>Array.isArray(e)?e.flat(1/0):[e];import{rebindAll as ka}from"d3fc";var Ma=1,lt=e=>{let t=n=>e(n);return ka(t,e),t.bandwidth=(...n)=>n.length?(e.bandwidth(...n),t):Math.max(e.bandwidth(),Ma),t};import{rebindAll as Na}from"d3fc";var Sn=e=>{let t=n=>e(n);return Na(t,e),t.ticks=function(){return[]},t};var za=()=>Sn(lt(bn.scaleBand())),Oa=()=>{let e=["crossValue"],t="horizontal",n=a=>{let o=me(a);return r([...new Set(o.map(i=>i[e[0]]))])},r=a=>t=="vertical"?a.reverse():a;return n.valueName=(...a)=>a.length?(e=[a[0]],n):e[0],n.valueNames=(...a)=>a.length?(e=a[0],n):e,n.orient=(...a)=>a.length?(t=a[0],n):t,n},Bt=e=>t=>t[e].join("|");var mt={};it(mt,{component:()=>Ea,domain:()=>Gt,labelFunction:()=>Wt,scale:()=>Fa,tickFormatFunction:()=>jt});import*as Ke from"d3";import*as Q from"d3fc";import*as pe from"d3-array";var st=()=>{let e=[0,0],t="percent",n=r=>{switch(t){case"domain":{r[0]-=e[0],r[1]+=e[1];break}case"percent":{let a=r[1]-r[0];r[0]-=e[0]*a,r[1]+=e[1]*a;break}default:throw new Error("Unknown padUnit: "+t)}return r};return n.pad=function(...r){return r.length?(e=r[0],n):e},n.padUnit=function(...r){return r.length?(t=r[0],n):t},n};var vn=function(){let e=[function(o){return o}],t=null,n=[],r=st(),a=function(i){let l=new Array(i.length),s=!0,u=!1,c,d=e[Symbol.iterator]();try{for(let p;!(s=(p=d.next()).done);s=!0){let f=p.value;for(let h=0;h<i.length;h++){let y=f(i[h],h);Array.isArray(y)?l.push.apply(l,It(y)):l.push(y)}}}catch(p){u=!0,c=p}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}let m=[pe.min(l),pe.max(l)];if(m[0]=m[0]==null?pe.min(n):pe.min([m[0]].concat(It(n))),m[1]=m[1]==null?pe.max(n):pe.max([m[1]].concat(It(n))),t!=null){let p=Math.max(Math.abs(m[1]-t),Math.abs(m[0]-t));m[0]=t-p,m[1]=t+p}return r(m)};return a.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.pad=function(...o){return o.length?(r.pad(o[0]),a):r.pad},a.padUnit=function(...o){return o.length?(r.padUnit(o[0]),a):r.padUnit},a.include=function(...o){return o.length?(n=o[0],a):n},a.symmetricalAbout=function(...o){return o.length?(t=o[0],a):t},a.paddingStrategy=function(...o){return o.length?(r=o[0],a):r},a},It=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}else return Array.from(e)};import*as ct from"d3";var Pa=1e7,ut=(e,t)=>{let n=Math.ceil(Math.abs(Math.log10(t-e)))+1;return r=>Math.abs(r)>=Pa?ct.format(".3s")(r):Number.isInteger(r)?ct.format(",.0f")(r):ct.format(`,.${n}f`)(r)};function Ee(e){return e.getRootNode().host}function de(e){return e.closest("#container.chart")}var Fa=()=>Ke.scaleLinear(),Gt=()=>{let e=vn().pad([0,.1]).padUnit("percent"),t=["crossValue"],n=o=>(e.accessors(t.map(i=>l=>parseFloat(l[i]))),a(me(o)));Q.rebindAll(n,e);let r=o=>{let i=t.map(l=>o.map(s=>s[l]).sort((s,u)=>s-u).filter((s,u,c)=>u===0||s!==c[u-1]).reduce((s,u,c,d)=>c===0||s<=u-d[c-1]?s:Math.abs(u-d[c-1])));return Math.min(...i)},a=o=>{if(e.padUnit()=="domain"){let i=r(o);return e.pad([i/2,i/2])(o)}else return e(o)};return n.valueName=(...o)=>o.length?(t=[o[0]],n):t[0],n.valueNames=(...o)=>o.length?(t=o[0],n):t,n},Wt=e=>t=>t[e][0],jt=ut,Ea=e=>{let t=null,n="horizontal",r=null,a=(u,c)=>{try{return de(u.node()).querySelector(".cartesian-chart").querySelector(`.${c}-axis`)}catch{return null}},o=u=>{let c=Ke.select(u).select("text").node();c.style.fontSize="80%"},i=(u,c)=>{let d=u.getBoundingClientRect();c.each((m,p,f)=>{let h=Ke.select(f[p]).node().getBoundingClientRect();(n=="vertical"&&d.width<h.width||n=="horizontal"&&d.height<h.height)&&o(f[p])})},l=(u,c,d)=>{let m=a(u,c);m&&i(m,u)},s=()=>({bottom:Q.axisBottom,left:Q.axisLeft,top:Q.axisTop,right:Q.axisRight,decorate:l});return s.domain=(...u)=>u.length?(t=u[0],s):t,s.orient=(...u)=>u.length?(n=u[0],s):n,s.settingName=(...u)=>u.length?(r=u[0],s):r,s};var Ut={};it(Ut,{domain:()=>Ha,labelFunction:()=>Yt,scale:()=>Ra});import*as Vn from"d3";import*as Re from"d3fc";var Ra=()=>Vn.scaleTime(),Ha=()=>{let e=Re.extentTime(),t=["crossValue"],n=o=>(e.accessors(t.map(i=>l=>new Date(l[i]))),a(me(o)));Re.rebindAll(n,e,Re.exclude("include","paddingStrategy"));let r=o=>{let i=t.map(l=>o.map(s=>new Date(s[l]).getTime()).sort((s,u)=>s-u).filter((s,u,c)=>u===0||s!==c[u-1]).reduce((s,u,c,d)=>c===0||Math.abs(s)<=Math.abs(u-d[c-1])?Math.abs(s):Math.abs(u-d[c-1])));return Math.min(...i)},a=o=>{let i=Math.abs(r(o));return e.padUnit("domain").pad([i/2,i/2])(o)};return n.valueName=(...o)=>o.length?(t=[o[0]],n):t[0],n.valueNames=(...o)=>o.length?(t=o[0],n):t,n},Yt=e=>t=>new Date(t[e][0]);var Xt={};it(Xt,{component:()=>Ka,domain:()=>Ua,labelFunction:()=>Kt,scale:()=>Ya});import*as Xe from"d3";import*as fe from"d3fc";import{select as _n,line as Ba}from"d3";import{axisOrdinalTop as $a,axisOrdinalBottom as Ia,axisOrdinalLeft as Ga,axisOrdinalRight as Wa,dataJoin as Cn,rebindAll as An,exclude as ja}from"d3fc";var wn=(...e)=>{let t={},n=r=>{for(let a of Object.keys(t))r[a](t[a]);return r};for(let r of e)n[r]=(...a)=>a.length?(t[r]=a[0],n):t[r];return n};var pt=(e,t,n)=>{let r=6,a=6,o=wn("tickFormat","ticks","tickArguments","tickValues","tickPadding"),i=(...h)=>{},l=null,s=Cn("g","group"),u=Cn("path","domain"),c=(h,y)=>m()?`translate(${y}, ${h})`:`translate(${h}, ${y})`,d=h=>m()?h.map(y=>[y[1],y[0]]):h,m=()=>e==="left"||e==="right",p=h=>{if(!l){o(t(n).decorate(i))(h);return}h.each((y,g,x)=>{let b=x[g],S=_n(b),v=e==="bottom"||e==="right"?1:-1,w=n.range(),T=d([[w[0],v*r],[w[0],0],[w[1],0],[w[1],v*r]]);u(S,[y]).attr("d",Ba()(T)).attr("stroke","#000").attr("fill","none");let E=s(S,l),z=R=>Array.isArray(a)?a[R]:a,k=R=>{let M=0;for(let G=0;G<R;G++)M+=z(G);return M};E.attr("transform",(R,M)=>c(0,v*k(M))).each((R,M,G)=>{let J=_n(G[M]),X=f(n,R);o(t(X)).decorate((q,_)=>i(q,_,M)).tickSizeInner(z(M)).tickOffset(q=>X.step(q)/2)(J),J.select("path.domain").attr("visibility","hidden")}),E.exit().attr("transform",(R,M)=>c(0,v*k(M)))})},f=(h,y)=>{function g(x){let b=x.domain;return b.reduce((S,v)=>S+h(v),0)/b.length}return g.ticks=()=>y,g.tickFormat=()=>x=>x.text,g.copy=()=>f(h,y),g.step=x=>x.domain.length*h.step(),An(g,h,ja("ticks","step","copy")),g};return p.tickSize=(...h)=>h.length?(a=r=Number(h[0]),p):a,p.tickSizeInner=(...h)=>h.length?(a=Array.isArray(h[0])?h[0]:Number(h[0]),p):a,p.tickSizeOuter=(...h)=>h.length?(r=Number(h[0]),p):r,p.decorate=(...h)=>h.length?(i=h[0],p):i,p.groups=(...h)=>h.length?(l=h[0],p):l,An(p,o),p},Tn=e=>pt("top",$a,e),Ln=e=>pt("bottom",Ia,e),Dn=e=>pt("left",Ga,e),kn=e=>pt("right",Wa,e);var Ya=()=>lt(Xe.scaleBand()).padding(.5),Ua=()=>{let e=["crossValue"],t="horizontal",n=a=>{let o=me(a);return r([...Array.from(new Set(o.map(i=>i[e[0]])))])},r=a=>t=="vertical"?a.reverse():a;return n.valueName=(...a)=>a.length?(e=[a[0]],n):e[0],n.valueNames=(...a)=>a.length?(e=a[0],n):e,n.orient=(...a)=>a.length?(t=a[0],n):t,n},Kt=e=>t=>t[e].join("|"),Ka=e=>{let t="horizontal",n="crossValues",r=null,a=()=>{let m=e[n].length>1,p=i(r),f=p.map(l),h=m?f.map(S=>S.size):f[0].size,y=f.reduce((S,v)=>S+v.size,0),g=S=>v=>{let w=S(v);return m&&w.groups(p).tickSizeInner(h).tickSizeOuter(y),t!=="horizontal"&&w.tickPadding(10),w},x=(S,v,w)=>{let T=f[w].rotation;t==="horizontal"&&d(S,T),s(S,T)},b=o(m);return{bottom:g(b.bottom),left:g(b.left),right:g(b.right),top:g(b.top),size:`${y+10}px`,decorate:x}},o=m=>m?{bottom:Ln,left:Dn,top:Tn,right:kn}:{bottom:fe.axisOrdinalBottom,left:fe.axisOrdinalLeft,top:fe.axisOrdinalTop,right:fe.axisOrdinalRight},i=m=>{let p=[];return m.forEach(f=>{(f&&f.split?f.split("|"):[f]).forEach((y,g)=>{for(;p.length<=g;)p.push([]);let x=p[g];x.length>0&&x[x.length-1].text===y?x[x.length-1].domain.push(f):x.push({text:y,domain:[f]})})}),p.reverse()},l=m=>{let p=e.size.width,f=Math.max(...m.map(h=>h.text?h.text.length:0));return t==="horizontal"?m&&m.length*16>p-100?{size:f*5+10,rotation:90}:m&&m.length*(f*6+10)>p-100?{size:f*3+20,rotation:45}:{size:25,rotation:0}:{size:f*5+10,rotation:0}},s=(m,p)=>{let f=v=>{let w=v.indexOf(",")!==-1?",":" ",T=v.substring(v.indexOf("(")+1,v.indexOf(")")).split(w).map(I=>parseInt(I));for(;T.length<2;)T.push(0);return T},g=p?(v,w)=>v.x+v.width+14>w.x+w.width:(v,w)=>v.x<=w.x+w.width&&w.x<=v.x+v.width&&v.y<=w.y+w.height&&w.y<=v.y+v.height,x=(v,w)=>v.x>=w.x&&v.x+v.width<=w.x+w.width&&v.y>=w.y&&v.y+v.height<=w.y+w.height,b=t=="horizontal"?u(m):null,S=[];m.each((v,w,T)=>{let I=Xe.select(T[w]),E=f(I.attr("transform")),z=I.node().getBBox(),k={x:z.x+E[0],y:z.y+E[1],width:z.width,height:z.height},M=S.some(G=>g(G,k))||b&&!x(k,b);I.attr("visibility",M?"hidden":""),M||S.push(k)})},u=m=>{let p=de(m.node());if(p===null)return;let f=p.querySelector(".cartesian-chart"),h=f.querySelector(".x-axis"),y=f.getBoundingClientRect(),g=h.getBoundingClientRect();return{x:y.left-g.left,width:y.width,y:y.top-g.top,height:y.height}},c=m=>m?m<60?`rotate(-${m} 5 5)`:`rotate(-${m} 3 7)`:"translate(0, 8)",d=(m,p)=>{let f=c(p),h=p?"end":"";m.each((y,g,x)=>{Xe.select(x[g]).select("text").attr("transform",f).style("text-anchor",h)})};return a.orient=(...m)=>m.length?(t=m[0],a):t,a.settingName=(...m)=>m.length?(n=m[0],a):n,a.domain=(...m)=>m.length?(r=m[0],a):r,a};var Xa={none:$t,ordinal:Xt,time:Ut,linear:mt},A=e=>{let t=null,n="horizontal",r="crossValues",a,o=["crossValue"],i=null,l=null,s=["include","paddingStrategy","pad"],u={},c=p=>{let f=Fe(e).excludeType(t).settingName(r).settingValue(a)(),h=Xa[f],y=h.domain().valueNames(o);s.forEach(S=>{u[S]&&y[S]&&y[S](u[S])}),y.orient&&y.orient(n);let g=y(p);i!==null&&(g=i(g)),l&&typeof g[0]=="number"&&(l[0]=g[0]=Math.min(g[0],l[0]),l[1]=g[1]=Math.max(g[1],l[1]));let x=h.hasOwnProperty("component")?d(h,g,p):m(),b=h==mt?jt(g[0],g[1]):void 0;return{scale:h.scale(),domain:g,domainFunction:y,labelFunction:h.labelFunction,component:{bottom:x.bottom,left:x.left,top:x.top,right:x.right},size:x.size,decorate:x.decorate,label:e[r].map(S=>S.name).join(", "),tickFormatFunction:b}},d=(p,f,h)=>p.component(e).orient(n).settingName(r).domain(f)(h),m=()=>({bottom:he.axisBottom,left:he.axisLeft,top:he.axisTop,right:he.axisRight,decorate:()=>{}});return c.memoValue=(...p)=>p.length?(l=p[0],c):l,c.excludeType=(...p)=>p.length?(t=p[0],c):t,c.orient=(...p)=>p.length?(n=p[0],c):n,c.settingName=(...p)=>p.length?(r=p[0],c):r,c.settingValue=(...p)=>p.length?(a=p[0],c):a,c.valueName=(...p)=>p.length?(o=[p[0]],c):o[0],c.valueNames=(...p)=>p.length?(o=p[0],c):o,c.modifyDomain=p=>p?(i=p,c):i,s.forEach(p=>{c[p]=(...f)=>f.length?(u[p]=f[0],c):u[p]}),c};import*as ge from"d3";import*as Ae from"d3fc";var Y=(e,t)=>Mn(e,t,(n,r)=>n.svgPlotArea(r),!1),He=(e,t)=>Mn(e,t,(n,r)=>n.canvasPlotArea(r).svgPlotArea(Ae.seriesSvgPoint()),!0),Mn=(e,t,n,r)=>{let a=null,o=null,i=Ae.chartCartesian({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&i.xDecorate(e.decorate),t.decorate&&i.yDecorate(t.decorate),i.xPaddingInner&&i.xPaddingInner(1),i.xPaddingOuter&&i.xPaddingOuter(.5),i.yPaddingInner&&i.yPaddingInner(1),i.yPaddingOuter&&i.yPaddingOuter(.5),i.axisSplitter=(...s)=>s.length?(a=s[0],i):a,i.altAxis=(...s)=>s.length?(o=s[0],i):o,i.plotArea=function(...s){return s.length==0?r?this.canvasPlotArea():this.svgPlotArea():n(this,...s)};let l=i.decorate();return i.decorate((s,u)=>{let c=s.select("d3fc-svg.plot-area"),d=c.select("svg").node();d.setAttribute("viewBox",`0 0 ${c.node().clientWidth} ${c.node().clientHeight}`),d.setAttribute("preserveAspectRatio","none");for(let m of["x-axis","y-axis"])s.select(`d3fc-svg.${m} svg`).node().setAttribute("preserveAspectRatio","none");if(l(s,u),r){let m=s.select(".svg-plot-area").node(),p=s.select(".canvas-plot-area").node();ge.selectAll([m,p]).order()}if(!!a){if(a.haveSplit()){let m=a.altData(),p=Ae.dataJoin("d3fc-svg","y2-axis").key(g=>g),f=Ae.dataJoin("g","y-series").key(g=>g);s.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",o.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let h=o.scale.domain(o.domain),y=o.component.right(h);if(y.tickFormat(o.tickFormatFunction),o.decorate&&y.decorate(o.decorate),p(s,["right"]).attr("class",g=>`y-axis ${g}-axis`).on("measure",function(g,x){let{width:b,height:S}=g.detail;x==="left"&&ge.select(g.currentTarget).select("svg").attr("viewBox",`${-b} 0 ${b} ${S}`).attr("preserveAspectRatio","none"),h.range([S,0])}).on("draw",function(g,x){ge.select(g.currentTarget).select("svg").call(y)}),r){let g=x=>{let b=i.plotArea();b.context(x.node().getContext("2d")).xScale(e.scale);let S=[t.scale,h];[u,m].forEach((v,w)=>{b.yScale(S[w]),b(v)})};s.select("d3fc-canvas.plot-area").on("draw",function(x,b){g(ge.select(x.currentTarget).select("canvas"))})}else{let g=function(x){let b=i.plotArea();b.xScale(e.scale);let S=[t.scale,h];f(x,[u,m]).each((v,w,T)=>{b.yScale(S[w]),ge.select(T[w]).datum(v).call(b)})};s.select("d3fc-svg.plot-area").on("draw",function(x,b){g(ge.select(x.currentTarget).select("svg"))})}}a(s)}}),i};import*as se from"d3fc";import{select as Zt}from"d3";function O(e,t,n){let r=e.select(t);return r.size()>0?r:n()}function ee(e,t,n="right"){if(n==="right"||n==="bottom")return e[n]<t[n];if(n==="left"||n==="top")return e[n]>t[n];throw`Direction being checked for overflow is invalid: ${n}`}function qt(e,t,n,r=0){let a=e==="x"?"width":"height",o=t[e],i=t[e]+t[a],l=n[e],s=n[e]+n[a],u=l+r>o&&l-r<i,c=s+r>o&&s-r<i,d=l+r<o&&s-r>i;return u||c||d}var Nn=`<ul id="tooltip-values"></ul>
`;import{select as Za}from"d3";function le(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],{dateStyle:"short",timeStyle:"medium"});case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function dt(e,t){return t.crossValues.length===0?[]:e.crossValue.length===0?[]:((e.crossValue.split?e.crossValue.split("|"):Array.isArray(e.crossValue)?e.crossValue:[e.crossValue])||[e.key]).map((r,a)=>({name:t.crossValues[a].name,value:le(t.crossValues[a].type,r)}))}function ft(e,t){if(t.splitValues.length===0)return[];let n=[e.mainValue];return e.key?n=e.key.split("|"):e.mainValue?.split&&(n=e.mainValue.split("|")),t.splitValues.map((r,a)=>({name:r.name,value:le(r.type,n[a])}))}function ht(e,t){return t.mainValues.length>1?e.mainValues?t.mainValues.map((n,r)=>({name:n.name,value:le(n.type,e.mainValues[r])})):t.mainValues.map(n=>({name:n.name,value:le(n.type,e.row[n.name])})):[{name:t.mainValues[0].name,value:le(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}function zn(e,t,n){let r=dt(t,n).concat(ft(t,n)).concat(ht(t,n));Ja(e,r)}function Ja(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each(function(n){Za(this).text(`${n.name}: `).append("b").text(Qa(n.value))})}var Qa=e=>e==null?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});var On=e=>[e.name,"==",e.value],qe=(e,t,n)=>{let r=ht(t,n).map(l=>l.name),a=dt(t,n).map(On),o=ft(t,n).map(On),i=n.filter.concat(a).concat(o);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:r,config:{filter:i},row:t.row}}))},Pn=()=>{let e=null,t=n=>{let r=n.node();n.on("click",(a,o)=>qe(r,o,e))};return t.settings=(...n)=>n.length?(e=n[0],t):e,t};var ye=()=>{let e=!1,t=null,n=null,r=!1,a=o=>{let i=o.node();if(!i||!i.isConnected){Fn(t);return}let l=Zt(de(i));t=eo(l);let s=function(c,d){zn(t,d,n);let m=o.nodes(),p=m.indexOf(this);to(l.node(),m[p],t,r),Zt(m[p]).style("opacity","0.7")},u=function(c,d){Fn(t);let m=o.nodes(),p=m.indexOf(this);m&&Zt(m[p]).style("opacity","1")};e?o.each(function(c){return s.call(this,void 0,c)}):(o.on("mouseover",s).on("mouseout",u),Pn().settings(n)(o))};return a.alwaysShow=(...o)=>o.length?(e=o[0],a):e,a.centered=(...o)=>o.length?(r=o[0],a):r,a.settings=(...o)=>o.length?(n=o[0],a):n,a};function eo(e){return O(e,"div.tooltip",()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(Nn))}function to(e,t,n,r){let a=e.getBoundingClientRect(),o=t.getBoundingClientRect(),i=o.left+o.width/2-a.left,l=o.top-a.top+e.scrollTop;r&&(l=o.top+o.height/2-a.top+e.scrollTop),n.style("left",`${i}px`).style("top",`${l}px`).style("opacity",.9),r&&([i,l]=no(n,a)),ro(n,a,i,l,r)}function no(e,t){let n=e.node().getBoundingClientRect(),r=n.width/2,a=n.left-r-t.left;e.style("left",`${a}px`);let o=n.height/2,i=n.top-o-t.top;return e.style("top",`${i}px`),[a,i]}function ro(e,t,n,r,a=!1){let o=e.node().getBoundingClientRect();if(ee(t,o)){let i=o.right-t.right;e.style("left",`${n-i}px`)}if(ee(t,o,"bottom")){let i=o.bottom-t.bottom;e.style("top",`${r-i}px`)}if(!!a){if(ee(t,o,"left")){let i=o.left-t.left;e.style("left",`${n-i}px`)}if(ee(t,o,"top")){let i=o.top-t.top;e.style("top",`${r-i}px`)}}}function Fn(e){e&&e.style("opacity",0)}function gt(e,t){let n=e.mainValues.length>1?se.seriesSvgGrouped(se.seriesSvgBar()):se.seriesSvgBar();return n=n.decorate(r=>{ye().settings(e)(r),r.style("fill",a=>t(a.key))}),se.autoBandwidth(ao(n)).crossValue(r=>r.crossValue).mainValue(r=>r.mainValue?r.mainValue:0).baseValue(r=>r.baseValue)}var ao=e=>{let t=n=>e(n);return se.rebindAll(t,e),t.bandwidth=(...n)=>n.length?(e.bandwidth(Math.max(n[0],1)),t):e.bandwidth(),t};import*as xt from"d3";function xe(e){return e.split("|").slice(0,-1).join("|")}function yt(e,t){return e.data.map(n=>Object.entries(n).filter(([r,a])=>r.split("|").at(-1)===t&&!!a).map(([r,a])=>a)).flat()}function te(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter(r=>r!=="__ROW_PATH__");return Z().settings(e).domain(n)()}function En(e,t){let n=yt(e,t),r=[...new Set(n)].sort();return Z().settings(e).domain(r)()}function Te(e,t){let n=[...new Set(t)];return Z().settings(e).domain(n)()}function Rn(e){let t=e.data[0]??{},n=Object.keys(t).filter(a=>a!=="__ROW_PATH__").map(a=>xe(a)),r=[...new Set(n)];return Z().settings(e).domain(r)()}function Z(){let e=null,t=null,n={},r=o=>Le(o,n.colorStyles&&n.colorStyles.opacity),a=()=>{let o=n.colorStyles,i=t||[o.series];if(i||e.length>1){let l=e.length>1?o.scheme:i;return xt.scaleOrdinal(l.map(r)).domain(e)}return null};return a.domain=(...o)=>o.length===0?e:(e=o[0],a),a.defaultColors=(...o)=>o.length?(t=o[0],a):t,a.mapFunction=(...o)=>o.length?(r=o[0],a):r,a.settings=(...o)=>o.length?(n=o[0],a):n,a}function ne(e){return De(1)(e)}function Le(e,t=.5){return De(t)(e)}function De(e){return t=>{let n=xt.color(t);return n!=null&&(n.opacity=e),n+""}}import{rebindAll as oo}from"d3fc";var io={none:Bt,ordinal:Kt,time:Yt,linear:Wt},U=e=>{let t=Fe(e),n="__ROW_PATH__",r=(a,o)=>io[t()](n)(a);return oo(r,t),r.valueName=(...a)=>a.length?(n=a[0],r):n,r};function ke(e,t,{stack:n=!1,excludeEmpty:r=!1}={}){let a=t||e.data;return e.splitValues.length>0?lo(e,a,{stack:n,excludeEmpty:r}):[a]}function lo(e,t,{stack:n=!1,excludeEmpty:r=!1}){let a={};return t.forEach(o=>{let i={},l={};Object.keys(o).filter(s=>s!=="__ROW_PATH__").filter(s=>!r||o[s]!=null&&o[s]!=null).forEach(s=>{let u=s.split("|"),c=u[u.length-1],d=o[s]||0,m=`${c}${d>=0?"+ve":"-ve"}`,p=u.slice(0,u.length-1).join("|"),f=l[p]=l[p]||{__ROW_PATH__:o.__ROW_PATH__},h=i[m]||0;f.__KEY__=p,n?(f[c]=h+d,f[`__BASE_VALUE__${c}`]=h,i[m]=f[c]):f[c]=d,f.row=o}),Object.keys(l).forEach(s=>{(a[s]=a[s]||[]).push(l[s])})}),Object.keys(a).map(o=>{let i=a[o];return i.key=o,i})}function Hn(e,t){let n={stack:!1},r=ke(e,t,n).map(a=>Bn(e,a,n));return e.mainValues.length>1?r.reduce((o,i)=>o.concat(i)):r}function St(e,t){let n={stack:!0};return ke(e,t,n).map(r=>Bn(e,r,n))}function so(e,t,{stack:n=!1}){let r=U(e);return a=>{let o=l=>n&&l[`__BASE_VALUE__${a.name}`]||0,i=t.map((l,s)=>({crossValue:r(l,s),mainValue:l[a.name]?l[a.name]:null,baseValue:o(l),key:l.__KEY__?`${l.__KEY__}|${a.name}`:a.name,row:l.row||l}));return i.key=i[0].key,i}}function Bn(e,t,{stack:n=!1}){let r=so(e,t,{stack:n});return e.mainValues.length>1?e.mainValues.map(r):r(e.mainValues[0])}import*as bt from"d3";import*as vt from"d3-svg-legend";import*as Jn from"d3-svg-legend";import{rebindAll as bo}from"d3fc";var $n=`<span id="up-arrow">&#9650;</span>
<span id="page-text"></span>
<span id="down-arrow">&#9660;</span>
`;function In(e){let t=e.select("g.legendCells"),n=e.node().getBoundingClientRect();if(!ee(n,t.node().getBoundingClientRect()))return;let r=e.select(".legend");t.selectAll(".label").text((a,o,i)=>{let l=i[o];if(ee(n,l.getBoundingClientRect())){let s=uo(l,r,n);return`${a.substring(0,s-3)}...`}else return a})}function uo(e,t,n){let r=e.getBoundingClientRect(),a=t.node().createSVGPoint(),o=3;return a.x=n.right-r.left-o,a.y=0,e.getCharNumAtPosition(a)}import*as Ne from"d3";import*as Gn from"d3";var Me=10;function Se(e,t,n){let r=Gn.select(Ee(e).getContainer()).node().getBoundingClientRect(),a=e.getBoundingClientRect(),o={top:a.top+n-Me,right:a.right+t+Me,bottom:a.bottom+n+Me,left:a.left+t-Me},i={x:t,y:n};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach(s=>{if(ee(r,o,s.edge)){let u=o[s.edge]-r[s.edge];i[s.dimension]=i[s.dimension]-u}}),i}var Jt="resize.for-dragging";function Wn(){let e=!0,t=null,n=r=>{let a=r.node(),o=a.getRootNode().host.closest("perspective-viewer");a.style.cursor="move",t.legend&&(a.style.left=t.legend.left,a.style.top=t.legend.top);let i=Ne.drag().on("drag",function(l){let s=Se(this,l.dx,l.dy);this.style.left=`${this.offsetLeft+s.x}px`,this.style.top=`${this.offsetTop+s.y}px`;let u={left:this.style.left,top:this.style.top};t.legend={...t.legend,...u},e=fo(a)?po(a):mo(a,e)});i.on("end",function(l){Ne.select(window).on(Jt,null),o?.dispatchEvent(new Event("perspective-config-update"))}),r.call(i)};return n.settings=(...r)=>r.length?(t=r[0],n):t,n}function mo(e,t){return t!==!1&&Ne.select(window).on(Jt,function(){let n=Se(e,0,0);e.style.left=`${e.offsetLeft+n.x}px`,e.style.top=`${e.offsetTop+n.y}px`}),!1}function po(e){return Ne.select(window).on(Jt,null),e.style.left="auto",!0}function fo(e){let t=e.getBoundingClientRect(),n=Ne.select(de(e)).node().getBoundingClientRect(),r=5;return t.right+Me+r>=n.right&&t.top-Me-r<=n.top}import*as Ze from"d3";var jn="horizontal-drag-handle",Yn="vertical-drag-handle",ho="corner-drag-handle",Kn="dragHandles",Un=0,be="resize";function Xn(){let e=9,t=3,n=null,r={height:100,width:100},a={height:null,width:null},o=[],i=(c,d)=>o.filter(m=>m.event===c).forEach(m=>m.execute(d)),l=c=>{if(yo(c))return;let d={left:V=>i(be,{horizontal:J(V),vertical:!1}),top:V=>i(be,{horizontal:!1,vertical:ae(V)}),right:V=>i(be,{horizontal:X(V),vertical:!1}),bottom:V=>i(be,{horizontal:!1,vertical:q(V)}),topleft:V=>i(be,{horizontal:J(V),vertical:ae(V)}),topright:V=>i(be,{horizontal:X(V),vertical:ae(V)}),bottomright:V=>i(be,{horizontal:X(V),vertical:q(V)}),bottomleft:V=>i(be,{horizontal:J(V),vertical:q(V)})},m=c.node();n.legend&&(m.style.height=n.legend.height,m.style.width=n.legend.width);let p=m.getBoundingClientRect(),f=c.append("svg").attr("id",Kn).attr("width",p.width).attr("height",p.height),h=f.append("g"),y=V=>V==="left"||V==="right",g={left:0,top:e,right:p.width-e,bottom:e},x={left:e,top:0,right:e,bottom:p.height-e},b=["left","top","right","bottom"],[S,v,w,T]=b.map(V=>h.append("rect").attr("id",`drag${V}`).attr("class",y(V)?Yn:jn).attr("y",x[V]).attr("x",g[V]).attr("height",y(V)?p.height-e*2:e).attr("width",y(V)?e:p.width-e*2).attr("fill",y(V)?"lightgreen":"lightblue").attr("fill-opacity",Un).style("z-index",t).attr("cursor",y(V)?"ew-resize":"ns-resize").call(Ze.drag().on("drag",d[V]))),I=V=>`${V[0]}${V[1]}`,E={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},z=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]],[k,R,M,G]=z.map(V=>h.append("rect").attr("id",`drag${I(V)}`).attr("class",`${ho} ${V[0]} ${V[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",Un).style("z-index",t).attr("cursor",`${E[I(V)]}-resize`).call(Ze.drag().on("drag",d[I(V)])));ue("height","y",T),ue("width","x",w),oe(f);function J(V){let L=u(Se(S.node(),V.x,0).x,f,"width",(j,ie)=>j-ie);return m.style.left=`${m.offsetLeft+L}px`,m.style.width=`${m.offsetWidth-L}px`,_(),N(w,L,"width","x")}function X(V){let L=-u(Se(w.node(),V.dx,0).x,f,"width",(j,ie)=>j+ie);return s(L,"x",w,V)?!1:(m.style.width=`${m.offsetWidth-L}px`,_(),N(w,L,"width","x"))}function ae(V){let L=u(Se(v.node(),0,V.y).y,f,"height",(j,ie)=>j-ie);return m.style.top=`${m.offsetTop+L}px`,m.style.height=`${m.offsetHeight-L}px`,_(),N(T,L,"height","y")}function q(V){let L=-u(Se(T.node(),0,V.dy).y,f,"height",(j,ie)=>j+ie);return s(L,"y",T,V)?!1:(m.style.height=`${m.offsetHeight-L}px`,_(),N(T,L,"height","y"))}function _(){let V={top:m.style.top,left:m.style.left,height:m.style.height,width:m.style.width};n.legend={...n.legend,...V}}function N(V,L,j,ie){return So(f,j,L),xo(V,ie,L),go(f,L,j,j==="height"?Yn:jn),oe(f),L!=0}function oe(V){k.attr("y",0),R.attr("y",0).attr("x",V.attr("width")-e),M.attr("y",V.attr("height")-e).attr("x",V.attr("width")-e),G.attr("y",V.attr("height")-e).attr("x",0)}function ue(V,L,j){!!a[V]&&a[V]<p[V]&&(m.style[V]=`${a[V]}px`,N(j,p[V]-a[V],V,L))}};l.on=(c,d)=>(o.push({event:c,execute:d}),l),l.zIndex=c=>(t=c,l),l.settings=(...c)=>c.length?(n=c[0],l):n,l.minWidth=c=>(r.width=c,a.width&&(a.width=Math.max(r.width,a.width)),l),l.minHeight=c=>(r.height=c,a.height&&(a.height=Math.max(r.height,a.height)),l),l.handleWidth=c=>(e=c,l),l.maxWidth=c=>(a.width=c,r.width=Math.min(r.width,a.width),l),l.maxHeight=c=>(a.height=c,r.height=Math.min(r.height,a.height),l);function s(c,d,m,p){let f=(y,g,x,b)=>y<0&&b[g]<Number(x.attr(g)),h=(y,g,x,b)=>y>0&&b[g]>Number(x.attr(g));return f(c,d,m,p)||h(c,d,m,p)}function u(c,d,m,p){let f=p(Number(d.attr(m)),c);if(f<r[m]){let h=r[m]-f;return p(c,h)}if(!!a[m]&&f>a[m]){let h=a[m]-f;return p(c,h)}return c}return l}var go=(e,t,n,r)=>{e.selectAll(`.${r}`).each((o,i,l)=>{let s=l[i];Ze.select(s).attr(n,s.getBoundingClientRect()[n]-t)})},yo=e=>e.select(`#${Kn}`).size()>0,xo=(e,t,n)=>e.attr(t,Number(e.attr(t))-n),So=(e,t,n)=>e.attr(t,e.node().getBoundingClientRect()[t]-n);var qn=16,Zn=20,Qt=(e,t)=>{let n=e||Jn.legendColor(),r=[],a=1,o,i=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,l=()=>{},s=Wn().settings(t),u,c=S=>{r=n.scale().domain(),u=Xn().settings(t).maxHeight(r.length*qn+Zn).on("resize",()=>d(S)),u(S),s(S),d(S)},d=S=>{y(S),m(S),p(S),In(S)},m=S=>{let v=x(S);v.style("display",a<=1?"none":"block"),v.select("#page-text").text(`${i+1}/${a}`),v.select("#up-arrow").attr("class",i===0?"disabled":"").on("click",()=>{i>0&&(f(i-1),d(S))}),v.select("#down-arrow").attr("class",i>=a-1?"disabled":"").on("click",()=>{i<a-1&&(f(i+1),d(S))})},p=S=>{a>1&&n.cellFilter(h()),S.select("g.legendCells").remove();let v=b(S);v.call(n);let w=S.select("g.legendCells").node().getBBox();v.attr("height",w.height+Zn),l(S)},f=S=>{i=S,t.legend={...t.legend,pageIndex:i}},h=()=>(S,v)=>v>=o*i&&v<o*i+o,y=S=>{let v=S.node().getBoundingClientRect(),w=Math.floor(v.height/qn)-1;o=w<r.length?w-1:w,a=g(w),i=Math.min(i,a-1)},g=S=>Math.ceil(r.length/S),x=S=>O(S,".legend-controls",()=>S.append("g").attr("class","legend-controls").html($n)),b=S=>O(S,".legend",()=>S.append("svg").attr("class","legend"));return c.decorate=(...S)=>S.length?(l=S[0],c):l,bo(c,n),c};var Qn=e=>Qt(vt.legendColor().shape("circle").shapeRadius(6),e),vo=e=>Qt(vt.legendSymbol().shapePadding(1).labelOffset(3),e),H=()=>en(Qn),Je=()=>en(vo,tr),er=()=>en(Qn,tr);function tr(e){if(!e)return null;let t=e.domain(),n=e.range().map(r=>bt.symbol().type(r)());return bt.scaleOrdinal().domain(t).range(n)}function en(e,t=void 0){let n={},r=null,a=null,o=i=>{if(r&&r.range().length>1){let l=e(n);l.scale(r).orient("vertical").on("cellclick",function(u){let c=this.__data__;n.hideKeys=n.hideKeys||[],n.hideKeys.includes(c)?n.hideKeys=n.hideKeys.filter(d=>d!==c):n.hideKeys.push(c),Ee(this)._draw()}),l.labels(u=>{let c=String(u.domain[u.i]).split("|");return n.mainValues.length<=1&&c.length>1?c.slice(0,c.length-1).join("|"):u.domain[u.i]});let s=O(i,"div.legend-container",()=>i.append("div"));l.decorate(u=>{let c=m=>n.hideKeys&&n.hideKeys.includes(m),d=u.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");d.classed("hidden",c),d.append("title").html(m=>m),a&&d.select("circle, path").style("fill",m=>c(m)?null:a(m)).style("stroke",m=>c(m)?null:ne(a(m)))}),s.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(l)}};return o.settings=(...i)=>i.length===0?n:(n=i[0],o),o.scale=(...i)=>i.length?(r=t?t(i[0]):i[0],o):r,o.color=(...i)=>i.length?(a=i[0],o):a,o}function K(e,t=void 0){let n=t||e.data;return(e.hideKeys?.length??0)>0?n.map(a=>{let o={...a};return e.hideKeys.forEach(i=>{delete o[i]}),o}):n}function Be(e){let t=e.data,n=e.hideKeys?.length??0,r=e.splitValues.length;return n>0?r===0?t.filter(a=>Object.values(a).reduce((o,i)=>o&&!e.hideKeys.includes(i),!0)):t.map(a=>{let o=Object.entries(a).filter(([i,l])=>!e.hideKeys.includes(xe(i)));return Object.fromEntries(o)}):t}import*as ve from"d3fc";var Vo=e=>(t,n)=>t.style("stroke-width",r=>"1.0").style("stroke",r=>tn(r,e));function tn(e,t){return e===0?t?t.textStyles.color:"#666":t?t.colorStyles.grid.gridLineColor:"#bbb"}var wo=e=>(t,n)=>{t.strokeStyle=tn(n,e),t.lineWidth=1},_o=(e,t)=>e.style("display","none"),Co=e=>(t,n)=>{t.lineWidth=1,t.strokeStyle=tn(n,e)},P=(e,t)=>{let n="both",r=!1,a=null,o=null,i=null,l=ve.seriesSvgMulti(),s=ve.annotationSvgGridline(),u=Vo(t),c=_o,d=function(...m){r&&(l=ve.seriesCanvasMulti().context(i),s=ve.annotationCanvasGridline(),u=wo(t),c=Co(t));let p=l.xScale(a).yScale(o),f=n==="vertical"?c:u,h=n==="horizontal"?c:u,y=s.xDecorate(f).yDecorate(h);return p.series([y,e])(...m)};return d.orient=(...m)=>m.length?(n=m[0],d):n,d.canvas=(...m)=>m.length?(r=m[0],d):r,d.xScale=(...m)=>m.length?(a=m[0],d):a,d.yScale=(...m)=>m.length?(o=m[0],d):o,d.context=(...m)=>m.length?(i=m[0],d):i,d};import*as nr from"d3fc";var B=()=>{let e=st(),t=n=>{let r=e.pad(),a=e.padUnit(),o=1;switch(a){case"domain":break;case"percent":{o=n[1]-n[0];break}default:throw new Error("Unknown padUnit: "+a)}let i=n[0]-r[0]*o,l=n[1]+r[1]*o;return n[0]=n[0]>=0&&i<0?0:i,n[1]=n[1]<=0&&l>0?0:l,n};return t.pad=function(...n){return e.pad()},t.padUnit=function(...n){return e.padUnit()},nr.rebindAll(t,e),t};import*as $e from"d3";var rr=`<button id="zoom-reset">Reset zoom</button>
<button id="one-year">1 Year</button>
<button id="six-months">6 Months</button>
<button id="one-month">1 Month</button>
`;var F=()=>{let e=null,t=null,n=null,r=null,a=null,o=null,i=!1,l=!1,s=()=>{};function u(p){let f=`d3fc-${l?"canvas":"svg"}.plot-area`;if(n||a){let h=r&&r.domain()[0]instanceof Date,y=$e.zoom().on("zoom",x=>{let{transform:b}=x;t.zoom={k:b.k,x:b.x,y:b.y},c(b),p.call(e);let S=b.k===1&&b.x===0&&b.y===0,v=d(p).style("display",S?"none":"");v.select("#zoom-reset").on("click",()=>p.select(f).call(y.transform,$e.zoomIdentity));let w=v.select("#one-year").style("display",h?"":"none"),T=v.select("#six-months").style("display",h?"":"none"),I=v.select("#one-month").style("display",h?"":"none");if(h){let E=z=>()=>{let k=new Date(n.domain()[0]),R=new Date(k);z(k,R);let M=r.range(),G=(M[1]-M[0])/(r(R)-r(k)),J=-r(k)*G,X=0;if(a){let ae=a.domain().reduce((q,_)=>q+_)/2;X=-o(ae)*G+a(ae)}p.select(f).call(y.transform,$e.zoomIdentity.translate(J,X).scale(G))};w.on("click",E((z,k)=>k.setYear(z.getFullYear()+1))),T.on("click",E((z,k)=>k.setMonth(z.getMonth()+6))),I.on("click",E((z,k)=>k.setMonth(z.getMonth()+1)))}}),g=e.decorate();e.decorate((x,b)=>{if(g(x,b),!i){i=!0;let S=x.select(f),v=l?window.devicePixelRatio:1;S.on("measure.zoom-range",w=>{if(r&&r.range([0,w.detail.width/v]),o&&o.range([0,w.detail.height/v]),t.zoom){let T=$e.zoomIdentity.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);S.call(y.transform,T)}}).call(y)}})}p.call(e)}u.chart=(...p)=>p.length?(e=p[0],u):e,u.settings=(...p)=>p.length?(t=p[0],u):t,u.xScale=(...p)=>p.length?(n=m(p[0]),r=n?n.copy():null,u):n,u.yScale=(...p)=>{if(!p.length)return a;if(a=m(p[0]),o=a?a.copy():null,o){let f=o.domain();o.domain([f[1],f[0]])}return u},u.canvas=(...p)=>p.length?(l=p[0],u):l,u.onChange=(...p)=>p.length?(s=p[0],u):s;let c=p=>{let f={...p};if(n&&(n.domain(p.rescaleX(r).domain()),f.xDomain=n.domain()),a){let h=p.rescaleY(o).domain();a.domain([h[1],h[0]]),f.yDomain=a.domain()}s(f)},d=p=>O(p,".zoom-controls",()=>p.append("div").attr("class","zoom-controls").style("display","none").html(rr)),m=p=>p&&p.nice?p:null;return u};function or(e,t){let n=St(t,K(t)),r=te(t),a=H().settings(t).scale(r),o=gt(t,r).orient("horizontal"),i=ar.seriesSvgMulti().mapping((d,m)=>d[m]).series(n.map(()=>o)),l=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[0]).excludeType(C.ordinal).include([0]).paddingStrategy(B())(n),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue").orient("vertical")(n),u=Y(l,s).plotArea(P(i,t).orient("horizontal"));u.yPaddingInner&&(u.yPaddingInner(.5),u.yPaddingOuter(.25),o.align("left")),u.xNice&&u.xNice();let c=F().chart(u).settings(t).yScale(s.scale);e.datum(n).call(c),e.call(a)}or.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["X Axis"]}};var ir=or;import*as fr from"d3fc";var ur=(e,t)=>{if(!lr(e)||!lr(t))return;let n=sr(e),r=sr(t);n>r?t[0]=cr(t,n):e[0]=cr(e,r)},lr=e=>e.length===2&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],sr=e=>(0-e[0])/(e[1]-e[0]),cr=(e,t)=>t*e[1]/(t-1);import*as mr from"d3fc";var pr=e=>{let t=[],n=!1,r,a=i=>{i.text("");let l=mr.dataJoin("span","splitter-label").key(c=>c),s=!n&&t.length===1,u=r&&e.splitValues.length===0;l(i,t).classed("disabled",s).text(c=>c.name).style("color",c=>u?ne(r(c.name)):void 0).on("click",(c,d)=>{s||(n?e.splitMainValues=e.splitMainValues.filter(m=>m!=d.name):e.splitMainValues=[d.name].concat(e.splitMainValues||[]),c.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),o(i))})},o=i=>{let l=Ee(i.node());l._container.innerHTML="",l._draw()};return a.labels=(...i)=>i.length?(t=i[0],a):t,a.alt=(...i)=>i.length?(n=i[0],a):n,a.color=(...i)=>i.length?(r=i[0],a):r,a};var Ve=(e,t,n=To)=>{let r,a,o,i=e.splitMainValues||[],l=c=>{let d=c.split("|");return i.includes(d[d.length-1])},s=e.mainValues.some(c=>l(c.name));a=s?n(t,c=>!l(c)):t,o=s?n(t,l):null;let u=c=>{if(e.mainValues.length===1)return;let d=e.mainValues.map((h,y)=>({index:y,name:h.name})),m=d.filter(h=>!l(h.name)),p=d.filter(h=>l(h.name)),f=()=>pr(e).color(r);c.select(".y-label.left-label").call(f().labels(m)),c.select(".y-label.right-label").call(f().labels(p).alt(!0))};return u.color=(...c)=>c.length?(r=c[0],u):r,u.haveSplit=()=>s,u.data=(...c)=>c.length?(a=c[0],u):a,u.altData=(...c)=>c.length?(o=c[0],u):o,u},To=(e,t)=>e.map(n=>n.filter(r=>t(r.key))),nn=(e,t)=>e.map(n=>t(n.key)?n:n.map(r=>Object.assign({},r,{mainValue:null}))),dr=(e,t)=>e.map(n=>nn(n,t));function hr(e,t){let n=St(t,K(t)),r=te(t),a=H().settings(t).scale(r),o=gt(t,r).orient("vertical"),i=fr.seriesSvgMulti().mapping((h,y)=>h[y]).series(n.map(()=>o)),l=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),s=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(C.ordinal).orient("vertical").include([0]).paddingStrategy(B()),u=t.mainValues.length>1?dr:nn,c=Ve(t,n,u).color(r),d=s(c.data()),m=c.haveSplit()?i:P(i,t).orient("vertical"),p=Y(l,d).axisSplitter(c).plotArea(m);p.xPaddingInner&&(p.xPaddingInner(.5),p.xPaddingOuter(.25),o.align("left")),p.yNice&&p.yNice();let f=F().chart(p).settings(t).xScale(l.scale);if(c.haveSplit()){let h=s(c.altData());ur(d.domain,h.domain),p.yDomain(d.domain).altAxis(h)}e.datum(c.data()).call(f),e.call(a)}hr.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var gr=hr;import*as Sr from"d3fc";import*as yr from"d3fc";function Ie(e,t){let n=yr.seriesSvgLine(),r=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),a=Math.max(1,Math.min(3,Math.floor(e.size.width/r/2)));return n=n.decorate(o=>{o.style("stroke",i=>ne(t(i[0]&&i[0].key))).style("stroke-width",a)}),n.crossValue(o=>o.crossValue).mainValue(o=>o.mainValue)}function xr(e,t){let n=U(e);return t.map((r,a)=>Object.keys(r).filter(o=>o!=="__ROW_PATH__").map(o=>({key:o,crossValue:n(r,a),mainValue:r[o],row:r})))}var Vt=function(e){let t=[];for(let n of e)for(let r=0;r<n.length;r++)n[r].mainValue!==null&&(t[r]=t[r]||[],t[r].push(n[r]));return t};import*as wt from"d3fc";var rn=(e,t,n=Math.min)=>{let r=i=>i.reduce((l,s)=>{let u=a(s);return u&&(!l||n(l.value,u.value)===u.value)?u:l},null),a=i=>{if(Array.isArray(i))return r(i);let l=t(i);return l!==null?{item:i,value:l}:null},o=r(e);return o?o.item:null};var W=()=>{let e=ye().alwaysShow(!0),t=null,n=null,r=null,a=null,o=!1,i=null,l="crossValue",s="mainValue",u=null,c=1,d=f=>{let h=`d3fc-${o?"canvas":"svg"}.plot-area`;if(t||n){let y=null,g=wt.pointer().on("point",x=>{let b=x.length?p(x[0]):null;y=b?[b.data]:[];let S=b?b.scale:n;m(f,y,S)});f.select(h).on("measure.nearbyTip",()=>m(f,[])).on("click",()=>{y.length&&qe(f.node(),y[0],e.settings())}).call(g)}},m=(f,h,y=n)=>{let g=f.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(h);g.exit().remove(),g.enter().append("circle").attr("class","nearbyTip").merge(g).attr("r",x=>a?c*Math.sqrt(a(x.size)):10).attr("transform",x=>`translate(${t(x[l])},${y(x[s])})`).style("stroke","none").style("fill",x=>r&&x.key&&Le(r(x.key))),e(g)},p=f=>{let h=x=>b=>b[s]===void 0||b[s]===null||b[l]===void 0||b[l]===null?null:Math.sqrt(Math.pow(t(b[l])-f.x,2)+Math.pow(x(b[s])-f.y,2)),y=h(n),g=rn(i,y,Math.min);if(u){let x=h(u.yScale),b=rn(u.data,x,Math.min);return y(g)<=x(b)?{data:g,scale:n}:{data:b,scale:u.yScale}}return{data:g,scale:n}};return d.scaleFactor=(...f)=>f.length?(c=f[0],d):c,d.xScale=(...f)=>f.length?(t=f[0],d):t,d.yScale=(...f)=>f.length?(n=f[0],d):n,d.color=(...f)=>f.length?(r=f[0],d):r,d.size=(...f)=>f.length?(a=f[0]?f[0].copy().range([40,4e3]):null,d):a,d.canvas=(...f)=>f.length?(o=f[0],d):o,d.data=(...f)=>f.length?(i=f[0],d):i,d.xValueName=(...f)=>f.length?(l=f[0],d):l,d.yValueName=(...f)=>f.length?(s=f[0],d):s,d.altDataWithScale=(...f)=>f.length?(u=f[0],d):u,d.settings=(...f)=>f.length?(e.settings(f[0]),d):e.settings(),wt.rebindAll(d,e),d};function br(e,t){let n=xr(t,K(t)),r=te(t),a=H().settings(t).scale(r),o=Sr.seriesSvgRepeat().series(Ie(t,r)).orient("horizontal"),i=B().pad([.1,.1]).padUnit("percent"),l=Ve(t,Vt(n)).color(r),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),u=A(t).settingName("mainValues").valueName("mainValue").memoValue(l.haveSplit()?null:t.axisMemo[0]).orient("vertical").paddingStrategy(i),c=u(l.data()),d=l.haveSplit()?o:P(o,t).orient("vertical"),m=Y(s,c).axisSplitter(l).plotArea(d);m.yNice&&m.yNice();let p=F().chart(m).settings(t).xScale(s.scale),f=W().settings(t).xScale(s.scale).yScale(c.scale).color(r).data(n);if(l.haveSplit()){let y=u(l.altData());m.altAxis(y),f.data(l.data()).altDataWithScale({yScale:y.scale,data:l.altData()})}let h=l.data();e.datum(h).call(p),e.call(f),e.call(a)}br.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var vr=br;import*as Ar from"d3fc";import{seriesCanvasPoint as ko}from"d3fc";import*as D from"d3";var an=Math.sqrt(3),Lo={draw:function(e,t){let n=Math.sqrt(t/(an*3));e.moveTo(0,n*2),e.lineTo(-an*n,-n),e.lineTo(an*n,-n),e.closePath()}},Do=[D.symbolCircle,D.symbolCross,D.symbolDiamond,D.symbolSquare,D.symbolStar,D.symbolTriangle,D.symbolWye],on={circle:D.symbolCircle,square:D.symbolSquare,cross:D.symbolCross,diamond:D.symbolDiamond,star:D.symbolStar,triangle:D.symbolTriangle,wye:D.symbolWye,nabla:Lo};function Qe(e){return e.length>1?D.scaleOrdinal().domain(e).range(Do):null}var Mo=8,No=1;function Vr(e,t,n,r,a,o,i=1){let l=ko().crossValue(s=>s.x).mainValue(s=>s.y);return o&&l.type(s=>o(s.row[t])),n&&l.size(s=>Math.round(i*n(s.size))),l.decorate((s,u)=>{let c=r(u.colorValue),d=e.colorStyles?.opacity;if(a){let{type:m}=e.mainValues.find(f=>f.name===a),p=le(m,u.row[a]);if(p!==null){s.fillStyle=e.textStyles.color,s.font=e.textStyles.font;let f=0;n&&(f=Math.sqrt(i*n(u.size)/Math.PI)*No);let h=f+Mo;s.fillText(p,h,4)}}s.strokeStyle=ne(c),s.fillStyle=Le(c,d)}),l}function wr(e,t){let n=[...new Set(yt(e,t))];return Qe(n)}function _r(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach(r=>{if(r!=="__ROW_PATH__"){let a=xe(r);n.includes(a)||n.push(a)}}),Qe(n)}function Cr(e,t){let n=e.mainValues.length;return t.map(r=>{let a=Object.keys(r).filter(i=>i!=="__ROW_PATH__"),o=new Array(a.length/n);for(let i=0;i<a.length/n;i++)o[i]={key:xe(a[i*n]),crossValue:r[a[i*n]],mainValue:r[a[i*n+1]],row:r};return o})}function Tr(e,t){let n=Vt(Cr(t,Be(t))),r=Rn(t),a=_r(t),o=null;r.domain().length>=2&&(o=er().settings(t).scale(a).color(r));let i=Ar.seriesSvgRepeat().series(Ie(t,r)).orient("horizontal"),l=B().pad([.1,.1]).padUnit("percent"),s=A(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").memoValue(t.axisMemo[0]).paddingStrategy(l),c=A(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l)(n),d=s(n),m=P(i,t).orient("vertical"),p=Y(d,c).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(m);p.xNice&&p.xNice(),p.yNice&&p.yNice();let f=F().chart(p).settings(t).xScale(d.scale).yScale(c.scale),h=W().settings(t).xScale(d.scale).yScale(c.scale).color(r).data(n);e.datum(n).call(f),e.call(h),o&&e.call(o)}Tr.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Lr=Tr;import*as et from"d3fc";import*as Dr from"d3fc";function kr(e,t){let n=Dr.seriesSvgArea();return n=n.decorate(r=>{r.style("fill",a=>t(a[0].key)).style("opacity",.5)}),n.crossValue(r=>r.crossValue).mainValue(r=>r.mainValue).baseValue(r=>r.baseValue)}function Mr(e,t){let n=U(e);return t.map((r,a)=>{let o={};return Object.keys(r).filter(i=>i!=="__ROW_PATH__").map(i=>{let l=i.split("|"),s=l[l.length-1],u=o[s]||0,c=u+r[i];return o[s]=c,{key:i,crossValue:n(r,a),mainValue:c,baseValue:u,row:r}})})}function Nr(e,t){let n=Mr(t,K(t)),r=te(t),a=H().settings(t).scale(r),o=et.seriesSvgRepeat().series(kr(t,r).orient("vertical")),i=et.seriesSvgRepeat().series(Ie(t,r)).orient("vertical"),l=et.seriesSvgMulti().series([o,i]),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),u=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(C.ordinal).orient("vertical").include([0]).paddingStrategy(B()),c=Ve(t,n).color(r),d=u(c.data()),m=c.haveSplit()?l:P(l,t).orient("vertical"),p=Y(s,d).axisSplitter(c).plotArea(m);p.yNice&&p.yNice();let f=F().chart(p).settings(t).xScale(s.scale),h=W().settings(t).xScale(s.scale).yScale(d.scale).color(r).data(n);if(c.haveSplit()){let y=u(c.altData());p.altAxis(y),h.data(c.data()).altDataWithScale({yScale:y.scale,data:c.altData()})}e.datum(c.data()).call(f),e.call(h),e.call(a)}Nr.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var zr=Nr;import*as Er from"d3fc";import*as Or from"d3fc";function Pr(e,t,n,r){let a=Or.seriesSvgPoint().size(100),o=e.colorStyles&&e.colorStyles.opacity;return r&&a.type(r(t)),a.decorate(i=>{i.style("stroke",l=>ne(n(l.colorValue||t))).style("fill",l=>Le(n(l.colorValue||t),o))}),a.crossValue(i=>i.crossValue).mainValue(i=>i.mainValue)}function Fr(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter(r=>r!=="__ROW_PATH__");return Qe(n)}function Rr(e,t){let n=Hn(t,K(t)),r=Fr(t),a=te(t),o=Je().settings(t).scale(r).color(a),i=Er.seriesSvgMulti().mapping((y,g)=>y[g]).series(n.map(y=>Pr(t,y.key,a,r))),l=B().pad([.05,.05]).padUnit("percent"),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),u=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l),c=Ve(t,n).color(a),d=u(c.data()),m=c.haveSplit()?i:P(i,t).orient("vertical"),p=Y(s,d).axisSplitter(c).plotArea(m);p.yNice&&p.yNice();let f=F().chart(p).settings(t).xScale(s.scale),h=W().settings(t).xScale(s.scale).yScale(d.scale).color(a).data(n);if(c.haveSplit()){let y=u(c.altData());p.altAxis(y),h.data(c.data()).altDataWithScale({yScale:y.scale,data:c.altData()})}e.datum(c.data()).call(f),e.call(h),o&&e.call(o)}Rr.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Hr=Rr;import*as tt from"d3";function Br(e,t){return ke(e,t,{excludeEmpty:!0}).map(n=>zo(e,n))}function zo(e,t){let n=U(e),r=t.map((a,o)=>({crossValue:n(a,o),mainValues:e.mainValues.map(i=>a[i.name]),x:a[e.mainValues[0].name],y:a[e.mainValues[1].name],colorValue:e.realValues[2]?a[e.realValues[2]]:void 0,size:e.realValues[3]?a[e.realValues[3]]:void 0,key:t.key,row:a}));return r.key=t.key,r}import*as Ge from"d3";function $r(e,t,n,r){return Ge.scaleLinear().domain(Ir(t,n,r))}function we(e,t,n,r=null){let a=Ir(t,n,r),o=e.colorStyles.gradient.full;if(a[0]>=0)o=e.colorStyles.gradient.positive;else if(a[1]<=0)o=e.colorStyles.gradient.negative;else{let l=Math.max(-a[0],a[1]);a=[-l,l]}let i=Oo(o);return Ge.scaleSequential(i).domain(a)}var Ir=(e,t,n)=>n||Gt().valueName(t).pad([0,0])(e),Oo=e=>{let t=e.slice(1).map((n,r)=>Ge.interpolate(e[r][1],n[1]));return n=>{let r=e.findIndex((l,s)=>s<e.length-1&&n<=e[s+1][0]&&n>l[0]);if(r===-1)return n<=e[0][0]?e[0][1]:e[e.length-1][1];let a=t[r],[o]=e[r],[i]=e[r+1];return a((n-o)/(i-o))}};import*as We from"d3";import*as _e from"d3fc";function Ce(){let e=null;function t(n){let r=O(n,"div.legend-container",()=>n.append("div").attr("class","legend-container legend-color").style("z-index","2")),{width:a,height:o}=r.node().getBoundingClientRect(),i=We.scaleBand().domain([0,1]).range([0,a]),l=e.copy().nice().domain(),s=_e.extentLinear().pad([.1,.1]).padUnit("percent")(l),[u,c]=s,d=We.range(u,c,(c-u)/o),m=We.scaleLinear().domain(s).range([o,0]),p=_e.autoBandwidth(_e.seriesSvgBar()).xScale(i).yScale(m).crossValue(0).baseValue((v,w)=>d[Math.max(0,w-1)]).mainValue(v=>v).decorate(v=>{v.selectAll("path").style("fill",w=>e(w))}),f=l[0]<0&&l[1]>0?0:Math.round((l[1]+l[0])/2),h=[...l,f],y=ut(u,c),g=_e.axisRight(m).tickValues(h).tickSizeOuter(0).tickFormat(v=>y(v)),x=O(r,"svg",()=>r.append("svg")).style("width",a).style("height",o),b=O(x,"g",()=>x.append("g")).datum(d).call(p),S=Math.abs(b.node().getBBox().x);O(x,"#legend-axis",()=>x.append("g").attr("id","legend-axis")).attr("transform",`translate(${S})`).datum(d).call(g).select(".domain").attr("visibility","hidden")}return t.scale=(...n)=>n.length?(e=n[0],t):e,t}function je(){let e="element-prefix-unset",t=null,n=null,r=null,a=null,o=null,i=null,l=!0,s=null,u=c=>{let d=O(c,"div.outer-container",()=>c.append("div").attr("class","outer-container").style("width",`calc(100% - ${s??0})`).style("height",`calc(100% - ${s??0})`).style("padding-left",s??0)),m=O(d,"div.inner-container",()=>d.append("div").attr("class","inner-container")),p=d.node().getBoundingClientRect(),f=p.height,h=p.width-(o?70:0),y=300,g=c.datum(),x=Math.max(1,Math.min(g.length,Math.floor(h/y))),b=Math.ceil(g.length/x);i={width:h/Math.max(x,1),height:Math.min(f,Math.max(f/b,h/Math.max(x,1)))},f/b>i.height*.75&&(i.height=f/b),g.length>1?(m.style("grid-template-columns",`repeat(${x}, ${100/x}%)`),m.style("grid-template-rows",`repeat(${b}, ${i.height}px)`)):(m.style("grid-template-columns","repeat(1, 100%)"),m.style("grid-template-rows","repeat(1, 100%)")),r=m.selectAll(`div.${e}-container`).data(g,S=>S.split),r.exit().remove(),n=r.enter().append("div").attr("class",`${e}-container`),a=n.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),l?t=n.append("svg").append("g").attr("class",e):t=n.append("div").attr("class",e)};return u.padding=(...c)=>c.length?(s=c[0],u):s,u.svg=(...c)=>c.length?(l=c[0],u):l,u.elementsPrefix=(...c)=>c.length?(e=c[0],u):e,u.chartContainer=()=>t,u.chartEnter=()=>n,u.chartDiv=()=>r,u.chartTitle=()=>a,u.containerSize=()=>i,u}import*as Gr from"d3fc";function Po([e,t],[n,r]){let a=(r-t)/(n-e),o=r-a*n;return function(i){let l=i.node(),s=Math.min(l.clientWidth,l.clientHeight);return Math.min(r,Math.max(t,a*s+o))}}function _t(){let e=null,t=null,n=null,r=null,a=o=>{let l=!!e.realValues[2],s=e.realValues[4],u=e.realValues[3]?$r(e,t,"size").range([10,1e4]):null,c=e.realValues[5],d=Po([600,.1],[1600,1])(o),m=Gr.seriesCanvasMulti().mapping((v,w)=>v[w]).series(t.map(()=>Vr(e,s,u,n,c,r,d))),p=()=>A(e).settingName("mainValues").paddingStrategy(B()).pad([.1,.1]),f=p().settingValue(e.mainValues[0].name).memoValue(e.axisMemo[0]).valueName("x")(t),h=p().orient("vertical").settingValue(e.mainValues[1].name).memoValue(e.axisMemo[1]).valueName("y")(t),[y,g]=e.splitValues.length===0?[e.mainValues[0].name,e.mainValues[1].name]:["",""],x=He(f,h).xLabel(y).yLabel(g).plotArea(P(m,e).canvas(!0));x.xNice&&x.xNice(),x.yNice&&x.yNice();let b=F().chart(x).settings(e).xScale(f.scale).yScale(h.scale).canvas(!0),S=W().scaleFactor(d).settings(e).canvas(!0).xScale(f.scale).xValueName("x").yValueName("y").yScale(h.scale).color(!l&&n).size(u).data(t);o.datum(t).call(b),o.call(S)};return a.settings=(...o)=>o.length?(e=o[0],a):e,a.data=(...o)=>o.length?(t=o[0],a):t,a.color=(...o)=>o.length?(n=o[0],a):n,a.symbols=(...o)=>o.length?(r=o[0],a):r,a}function Fo(e,t){if(!t)return;let n=e.realValues[4],r=e.mainValues.find(s=>s.name===n)?.type,a=t.domain(),o=t.range(),i=o.length;for(let[s,u]of a.entries())o[s]=o[s%i];let l=e.columns_config?.[n]?.symbols??{};return Object.entries(l).forEach(([s,u])=>{let c=on[u]??tt.symbolCircle,d=a.findIndex(m=>{switch(r){case"date":case"datetime":return new Date(m).valueOf()===new Date(s).valueOf();default:return String(m)===String(s)}});o[d]=c}),t.range(o),t}function Ct(e,t){let n=t.realValues[2],r=!!n,a=t.mainValues.find(d=>d.name===n)?.type==="string",o=null,i=null,l=t.realValues[4],s=wr(t,l),u=Fo(t,s),c=Br(t,Be(t));if(r&&a?l?(t.splitValues.length>0?o=Te(t,c):o=Te(t,c[0]),i=Je().settings(t).scale(u)):(o=En(t,n),i=H().settings(t).scale(o)):r?(o=we(t,c,"colorValue"),i=Ce().scale(o)):(o=Z().settings(t).domain([""])(),i=Je().settings(t).scale(u)),t.splitValues.length!==0){let d=je().svg(!1).elementsPrefix("xy-scatter");d=d.padding("2.5em"),e.append("div").attr("class","multi-xlabel").append("p").text(t.mainValues[0].name),e.append("div").attr("class","multi-ylabel").append("p").text(t.mainValues[1].name).style("transform","rotate(-90deg)").style("text-wrap","nowrap"),e=e.datum(c),e.call(d);let f=d.chartContainer(),h=d.chartEnter(),y=d.chartDiv(),g=d.chartTitle(),x=d.containerSize();g.each((b,S,v)=>tt.select(v[S]).text(b.key)),h.merge(y).attr("transform",`translate(${x.width/2}, ${x.height/2})`).each(function(b){let S=tt.select(this);_t().settings(t).data([b]).color(o).symbols(u)(S)})}else _t().settings(t).data(c).color(o).symbols(u)(e);i&&e.call(i)}Ct.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Symbol","Label","Tooltip"]},selectMode:"toggle"};Ct.can_render_column_styles=(e,t)=>e==="string"&&t==="Symbol";Ct.column_style_controls=(e,t)=>e==="string"&&t==="Symbol"?{symbols:{keys:"row",values:Object.keys(on)}}:null;var Wr=Ct;import*as At from"d3fc";function jr(e,t){let n=At.seriesCanvasHeatmap();return n.decorate((r,a)=>{r.fillStyle=t(a.colorValue)}),At.autoBandwidth(n).xValue(r=>r.crossValue).yValue(r=>r.mainValue).colorValue(r=>r.colorValue).colorInterpolate(t.interpolator()).widthFraction(1)}function Yr(e,t){let n=U(e),r=Fe(e).excludeType(C.linear).settingName("splitValues")(),a=[];return t.forEach((o,i)=>{let l=n(o,i);Object.keys(o).filter(s=>s!=="__ROW_PATH__").forEach(s=>{let u=Eo(s);a.push({crossValue:l,mainValue:r===C.time?new Date(u):u,colorValue:o[s],row:o})})}),a}function Eo(e){let t=e.split("|");return t.pop(),t.join("|")}function Ur(e,t){let n=Yr(t,K(t)),r=we(t,n,"colorValue"),a=jr(t,r),o=Ce().scale(r),i=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),l=A(t).excludeType(C.linear).settingName("splitValues").valueName("mainValue").modifyDomain(d=>!isNaN(d[0])?d.reverse():d).orient("vertical")(n),s=He(i,l).plotArea(P(a,t).canvas(!0));s.xPaddingInner&&(s.xPaddingInner(0),s.xPaddingOuter(0),a.xAlign("right")),s.yPaddingInner&&(s.yPaddingInner(0),s.yPaddingOuter(0),a.yAlign("top"));let u=F().chart(s).settings(t).xScale(i.scale).yScale(l.scale).canvas(!0),c=W().settings(t).canvas(!0).xScale(i.scale).yScale(l.scale).color(r).data(n);e.datum(n).call(u),e.call(o),e.call(c)}Ur.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0,initial:{names:["Color"]}};var Kr=Ur;import{seriesCanvasOhlc as $o}from"d3fc";import*as Tt from"d3fc";function Xr(e,t){return ke(e,t,{excludeEmpty:!0}).map(n=>Ro(e,n))}function Ro(e,t){let n=U(e),r=o=>t[o<t.length-1?o+1:o][e.realValues[0]],a=t.map((o,i)=>{let l=e.realValues[0]?o[e.realValues[0]]:void 0,s=e.realValues[1]?o[e.realValues[1]]:r(i);return{crossValue:n(o,i),mainValues:e.mainValues.map(u=>o[u.name]),openValue:l,closeValue:s,highValue:e.realValues[2]?o[e.realValues[2]]:Math.max(l,s),lowValue:e.realValues[3]?o[e.realValues[3]]:Math.min(l,s),key:t.key,row:o}});return a.key=t.key,a}import*as Ye from"d3fc";var Ho=e=>e.closeValue>=e.openValue;function qr(e,t,n){let r=n.domain(),a=Z().domain(r).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(De(.5))(),o=Z().settings(e).domain(r)(),i=t().crossValue(u=>u.crossValue).openValue(u=>u.openValue).highValue(u=>u.highValue).lowValue(u=>u.lowValue).closeValue(u=>u.closeValue).decorate((u,c)=>{let d=Ho(c)?n(c.key):a(c.key);u.fillStyle=d,u.strokeStyle=d}),l=Ye.seriesCanvasLine().mainValue(u=>u.bollinger.average).crossValue(u=>u.crossValue).decorate((u,c)=>{u.strokeStyle=o(c[0].key)}),s=Ye.seriesCanvasArea().mainValue(u=>u.bollinger.upper).baseValue(u=>u.bollinger.lower).crossValue(u=>u.crossValue).decorate((u,c)=>{u.fillStyle=De(.25)(o(c[0].key))});return Ye.seriesCanvasMulti().series([s,i,l])}function Bo(e){return function(t,n){let r=Xr(n,Be(n)),a=Tt.indicatorBollingerBands().value(g=>g.openValue),o=r.map(g=>{let x=a(g);return g.map((b,S)=>Object.assign({bollinger:x[S]},b))}),i=r.map(g=>g.key).concat(n.hideKeys?n.hideKeys:[]).sort(),l=Z().domain(i).settings(n).mapFunction(De(1))(),s=H().settings(n).scale(i.length>1?l:null),u=qr(n,e,l),c=Tt.seriesCanvasMulti().mapping((g,x)=>g[x]).series(o.map(()=>u)),d=B().pad([.1,.1]).padUnit("percent"),m=A(n).settingName("crossValues").valueName("crossValue")(o),p=A(n).settingName("mainValues").valueNames(["lowValue","highValue"]).memoValue(n.axisMemo[1]).orient("vertical").paddingStrategy(d)(o),f=He(m,p).plotArea(P(c,n).orient("vertical").canvas(!0));f.yNice&&f.yNice();let h=F().chart(f).settings(n).xScale(m.scale).onChange(g=>{let x=o.map(b=>b.filter(S=>S.crossValue>=g.xDomain[0]&&S.crossValue<=g.xDomain[1]));f.yDomain(p.domainFunction(x))}).canvas(!0),y=W().settings(n).xScale(m.scale).yScale(p.scale).yValueName("closeValue").color(l).data(o).canvas(!0);t.datum(o).call(h),t.call(y),t.call(s)}}var Lt=Bo;var Zr=Lt($o);Zr.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Jr=Zr;import{seriesCanvasCandlestick as Io}from"d3fc";var Qr=Lt(Io);Qr.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var ea=Qr;import*as ln from"d3";function ta(e,t){if(e.realValues.length>1&&e.realValues[1]!==null){let n=e.realValues[1];if(e.mainValues.find(r=>r.name===n)?.type==="string"){let r=t.map(a=>a.data).filter(a=>a.height>0).map(a=>na(a)).reduce((a,o)=>a.concat(o));return Te(e,r)}else return we(e,null,null,xn(t.map(r=>r.extents)))}}function na(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(n=>t.concat(na(n,t))):e.data.color&&t.push(e.data.color),t}import*as Dt from"d3";function kt(e){let t={},n=e.realValues.map(a=>a===null?null:e.mainValues.find(o=>o.name===a));return e.data.forEach((a,o)=>{let i=Array.isArray(a.__ROW_PATH__)?a.__ROW_PATH__:[];Wo(a).forEach(s=>{let u;t[s]||(t[s]=[]),u=t[s],i.forEach((c,d)=>{let m=u.find(p=>p.name===c);if(m||(m={name:c,children:[]},u.push(m)),e.realValues.length>1&&e.realValues[1]!==null){let p=d===i.length-1,f=Ue(p?a:e.agg_paths[o][d+1]||a,e.mainValues[1],s);f!==void 0&&(m.color=f)}if(e.realValues.length>2&&e.realValues[2]!==null){m.tooltip=[];for(let p=2;p<e.realValues.length;++p)m.tooltip.push(Ue(a,n[p],s))}if(d===i.length-1){if(m.name=i.slice(-1)[0],e.crossValues.length===0)m.size=Ue(a,e.mainValues[0],"");else if(i.length===e.crossValues.length){let p=Ue(a,e.mainValues[0],s);m.size=p>0?p:0}}u=m.children})})}),Object.entries(t).map(a=>{let o={name:"root",children:a[1]},i=Dt.hierarchy(o).sum(s=>s.size),l=Dt.partition().size([2*Math.PI,i.height+1])(i);return l.each(s=>{s.current=s,s.mainValues=e.realValues.length===1||e.realValues[1]===null&&e.realValues[2]===null?s.value:[s.value,s.data.color].concat(s.data.tooltip||[]).filter(u=>u!==void 0),s.crossValue=s.ancestors().slice(0,-1).reverse().map(u=>u.data.name),s.key=a[0],s.label=le(e.crossValues[s.depth-1<0?0:s.depth-1]?.type||e.mainValues[0].type,s.data.name)}),{split:a[0],data:l,extents:Go(e,a)}})}var Ue=(e,t,n)=>n.length?e[`${n}|${t.name}`]:e[t.name];function Go(e,[t,n]){if(e.realValues.length>1&&e.realValues[1]!==null){let r=Math.min(...e.data.map(o=>Ue(o,e.mainValues[1],t))),a=Math.max(...n.map(o=>o.color));return[r,a]}}function Wo(e){let t=[];return Object.keys(e).forEach(n=>{if(n!=="__ROW_PATH__"){let r=n.split("|").slice(0,-1).join("|");t.includes(r)||t.push(r)}}),t}import{arc as jo}from"d3";var Mt=e=>jo().startAngle(t=>t.x0).endAngle(t=>t.x1).padAngle(t=>Math.min((t.x1-t.x0)/2,.005)).padRadius(e).innerRadius(t=>Math.max(1,(t.y0-1)*e)).outerRadius(t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1)),ce=e=>e.y0>=1&&e.x1>e.x0;import{select as Yo}from"d3";var nt=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function Nt(e,t){let n=(e.x0+e.x1)/2*180/Math.PI,r=(e.y0-1+(e.y1-1))/2*t;return`rotate(${n-90}) translate(${r},0) rotate(${n<180?0:180})`}function ra(e,t){let n=this.getBBox().width;if(n>t){let r=e.label,a=Yo(this);for(;n>t;)r=r.substring(0,r.length-1),a.text(()=>r),n=this.getBBox().width;a.text(()=>`${r.substring(0,r.length-3).replace(/\s+$/,"")}...`)}}import{interpolate as Uo}from"d3";var aa=(e,t,n,r,a,o,i,l,s)=>(u,c)=>{s.sunburstLevel[l]=u.data.name,u.parent?(n.datum(u.parent),n.style("cursor","pointer"),r.html(`&#8682; ${u.label}`)):(n.datum(e),n.style("cursor","default"),r.html("")),e.each(m=>m.target={x0:Math.max(0,Math.min(1,(m.x0-u.x0)/(u.x1-u.x0)))*2*Math.PI,x1:Math.max(0,Math.min(1,(m.x1-u.x0)/(u.x1-u.x0)))*2*Math.PI,y0:Math.max(0,m.y0-u.depth),y1:Math.max(0,m.y1-u.depth)});let d=t.transition().duration(c?0:750);a.transition(d).tween("data",m=>{let p=Uo(m.current,m.target);return f=>m.current=p(f)}).filter(function(m){return+this.getAttribute("fill-opacity")||ce(m.target)}).attr("fill-opacity",m=>ce(m.target)?1:0).attr("user-select",m=>ce(m.target)?"initial":"none").style("pointer-events",m=>ce(m.target)?"initial":"none").attrTween("d",m=>()=>Mt(i)(m.current)),o.filter(function(m){return+this.getAttribute("fill-opacity")||nt(m.target)}).transition(d).attr("fill-opacity",m=>+nt(m.target)).attrTween("transform",m=>()=>Nt(m.current,i))};function oa(){let e=null,t=null,n=null,r=null,a=null,o=i=>{let l=i.selectAll("g.segment").data(n.descendants().slice(1)),s=l.enter().append("g").attr("class","segment");s.append("path"),s.append("text").attr("class","segment").attr("dy","0.35em");let u=s.merge(l),c=u.select("path").attr("fill-opacity",h=>ce(h.current)?1:0).attr("user-select",h=>ce(h.current)?"initial":"none").style("pointer-events",h=>ce(h.current)?"initial":"none").attr("d",h=>Mt(a)(h.current));r&&c.style("fill",h=>r(h.data.color));let d=u.select("text").attr("fill-opacity",h=>+nt(h.current)).attr("transform",h=>Nt(h.current,a)).text(h=>h.label).each(function(h){ra.call(this,h,a)}),m=i.select("text.parent"),p=i.select("circle").attr("r",a).datum(n),f=aa(n,i,p,m,c,d,a,t,e);if(e.sunburstLevel){let h=n.descendants().find(y=>y.data.name===e.sunburstLevel[t]);h&&f(h,!0)}else e.sunburstLevel={};p.on("click",h=>f(h,!1)),c.filter(h=>h.children).style("cursor","pointer").on("click",h=>f(h,!1))};return o.settings=(...i)=>i.length?(e=i[0],o):e,o.split=(...i)=>i.length?(t=i[0],o):t,o.data=(...i)=>i.length?(n=i[0],o):n,o.color=(...i)=>i.length?(r=i[0],o):r,o.radius=(...i)=>i.length?(a=i[0],o):a,o}function ia(e,t){let n=kt(t),r=ta(t,n),a=je().elementsPrefix("sunburst");if(e.datum(n).call(a),r){let c=t.realValues[1];if(t.mainValues.find(d=>d.name===c)?.type==="string"){let d=H().settings(t).scale(r);e.call(d)}else{let d=Ce().scale(r);e.call(d)}}let o=a.chartContainer(),i=a.chartEnter(),l=a.chartDiv(),s=a.chartTitle(),u=a.containerSize();s.each((c,d,m)=>ln.select(m[d]).text(c.split)),o.append("circle").attr("fill","none").style("pointer-events","all"),o.append("text").attr("class","parent"),i.merge(l).select("svg").select("g.sunburst").attr("transform",`translate(${u.width/2}, ${u.height/2})`).each(function({split:c,data:d}){let m=ln.select(this),p=this.parentNode,{width:f,height:h}=p.getBoundingClientRect(),y=(Math.min(f,h)-24)/Math.max(2,t.crossValues.length*2);oa().settings(t).split(c).data(d).color(r).radius(y)(m),ye().settings(t)(m.selectAll("g.segment"))})}ia.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var la=ia;import*as ot from"d3";function sa(e,t){if(e.realValues.length<1||e.realValues[1]===null||e.realValues[1]===void 0)return;let n=e.realValues[1],r=t.filter(a=>a.height>0).map(a=>ca(a)).reduce((a,o)=>a.concat(o));if(e.mainValues.find(a=>a.name===n)?.type==="string")return Te(e,r);{let a=Math.min(...r),o=Math.max(...r);return we(e,null,null,[a,o])}}function ca(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(n=>t.concat(ca(n,t))):e.data.color&&t.push(e.data.color),t}import{select as $}from"d3";var ua=7,zt=e=>!!(e.target&&e.target.textAttributes),Ot=(e,t,n)=>{e.selectAll("text").each(function(a,o){let i=Zo(a,t,n);this.style=i});let r=at(e);Ko(r),sn(r)},ma=e=>{e.each((t,n,r)=>{$(r[n]).selectAll("text").attr("dx",t.target.textAttributes.dx).attr("dy",t.target.textAttributes.dy).attr("style",t.target.textAttributes.style)})},sn=e=>{let r=o=>o.getBoundingClientRect(),a=[];e.selectAll("text").filter((o,i,l)=>$(l[i]).attr("style")===ze.high).each((o,i,l)=>a.push(l[i])),e.selectAll("text").filter((o,i,l)=>$(l[i]).attr("style")===ze.low).each((o,i,l)=>{let s=l[i];a.filter(u=>qt("x",r(u),r(s))&&qt("y",r(u),r(s),-2)).forEach(()=>$(s).attr("dy",Number($(s).attr("dy"))+14))})},pa=e=>$(e).style("opacity",rt[$(e).attr("class")]),da=e=>$(e).style("opacity",null),rt={top:1,mid:.7,lower:0},at=e=>e.filter((t,n,r)=>$(r[n]).selectAll("text").attr("style")!==ze.zero),Pt=e=>e.selectAll("text").each((t,n,r)=>Xo(r[n])),Ko=e=>e.selectAll("text").each((t,n,r)=>fa(r[n])),fa=e=>{let t=$(e),n=e.getBoundingClientRect();t.attr("dx",0-n.width/2).attr("dy",0+n.height/4)},Xo=e=>{let n=e.parentNode.childNodes[0],r=e.getBBox(),a=n.getBBox();qo(e,a,r)||$(e).attr("style",$(e).attr("style"))},qo=(e,t,n)=>{let r=Math.min(t.height/n.height,t.width/n.width);if(r<1){let a=parseInt($(e).style("font-size")),o=Math.floor(a*r);return a>ua&&o>ua?($(e).style("font-size",`${o}px`),fa(e)):($(e).style("font-size",null),$(e).style("opacity","0")),!0}return!1},Zo=(e,t,n)=>{if(!n.filter(r=>r!=="").every(r=>e.crossValue.includes(r)))return ze.zero;switch(e.depth){case t+1:return ze.high;case t+2:return ze.low;default:return ze.zero}},ze={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"};import*as Ft from"d3";var Et=(e,t)=>{let n=Ft.treemap().size([e,t]).paddingInner(r=>1+2*(r.height-1));return n.tile(Ft.treemapBinary),n};import*as re from"d3";import{hierarchy as Jo,select as cn}from"d3";var Qo=(e,t)=>t.every(n=>e.crossValue.includes(n));function un(e,t,n,r,a,o){ei(e,t,n,r,a),e.mapLevel[r].levelRoot=!0,ti(e,o.node().getBoundingClientRect().width,o.node().getBoundingClientRect().height,r),ga(n,r)}function ha(e,t){e.each(n=>{n.mapLevel=[],n.mapLevel[0]={x0:n.x0,x1:Oe(n)+n.x0,y0:n.y0,y1:Pe(n)+n.y0,visible:!0,opacity:1}}),t.mapLevel[0].levelRoot=!0,ga(e,0)}var Rt=(e,t)=>{e.each((n,r,a)=>{let o=cn(a[r]).selectAll("text");n.mapLevel[t].textAttributes={dx:o.attr("dx"),dy:o.attr("dy"),class:o.attr("class"),"font-size":o.style("font-size")}})};function ei(e,t,n,r,a){let o={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:a.x1-a.x0,height:a.y1-a.y0},l={width:i.width/o.width,height:i.height/o.height};n.each(s=>{let u=(s.x0-o.x)*l.width,c=(s.y0-o.y)*l.height,d=Oe(s)*l.width,m=Pe(s)*l.height,p=Qo(s,t)&&s.data.name!==t[r-1];s.mapLevel[r]={x0:u,x1:d+u,y0:c,y1:m+c,visible:p,opacity:p?1:0}}),e.mapLevel[r].levelRoot=!0}function ti(e,t,n,r){let i=Et(t,n)(Jo(e.data).sum(s=>s.size)).descendants(),l=e.descendants();i.forEach((s,u)=>{l[u].mapLevel[r].x0=i[u].x0,l[u].mapLevel[r].x1=i[u].x1,l[u].mapLevel[r].y0=i[u].y0,l[u].mapLevel[r].y1=i[u].y1})}function ga(e,t){e.selectAll("text").each((n,r,a)=>{let o=cn(a[r]),i=cn(a[r]).datum(),l=o.attr("class");i.mapLevel[t].textLockedAt={opacity:rt[l]}})}function ya(e,t,n,r,a,o,i,l,s){if(r.treemapLevel>0){let u=i.crossValue;pn(i,e,t,n,r,a,o,i,0,u,l,s,1,!1),r.treemapRoute.slice(1,r.treemapRoute.length).forEach(c=>{let d=t.filter(p=>p.crossValue===c).datum(),m=d.crossValue;un(d,m,t,d.depth,i,a),pn(d,e,t,n,r,a,o,i,d.depth,m,l,s,1,!1)})}}function dn(e,t,n,r,a,o,i,l,s,u){if(!e.children)return;a.treemapLevel<e.depth?a.treemapRoute.push(e.crossValue):a.treemapRoute.pop(),a.treemapLevel=e.depth;let c=e.crossValue;(!e.mapLevel[a.treemapLevel]||!e.mapLevel[a.treemapLevel].levelRoot)&&un(e,c,n,a.treemapLevel,l,o),pn(e,t,n,r,a,o,i,l,a.treemapLevel,c,s,u)}function pn(e,t,n,r,a,o,i,l,s,u,c,d,m=500,p=!0){let f=e.parent,h=i.transition("main transition").duration(m).ease(re.easeCubicOut);n.each(g=>g.target=g.mapLevel[s]),zt(e)||oi(n,c),n.transition(h).tween("data",g=>{let x=re.interpolate(g.current,g.target);return b=>g.current=x(b)}).styleTween("opacity",g=>()=>g.current.opacity).attrTween("pointer-events",g=>()=>g.target.visible?"all":"none"),t.transition(h).filter(g=>g.target.visible).styleTween("x",g=>()=>`${g.current.x0}px`).styleTween("y",g=>()=>`${g.current.y0}px`).styleTween("width",g=>()=>`${g.current.x1-g.current.x0}px`).styleTween("height",g=>()=>`${g.current.y1-g.current.y0}px`),r.transition(h).filter(g=>g.target.visible).attrTween("x",g=>()=>g.current.x0+Oe(g.current)/2).attrTween("y",g=>()=>g.current.y0+Pe(g.current)/2).end().catch(()=>mn(n)).then(()=>{zt(e)||(sn(y),Pt(y),ni(r,i,m),p&&Rt(n,s),mn(n,c))}).catch(g=>{console.error("Exception completing promises after main transition",g),mn(n,c)}),zt(e)?ma(n):(r.each((g,x,b)=>pa(b[x])),Ot(n,s,u));let y=at(n);f?c.hide(!1).text(e.label).onClick(()=>{dn(f,t,n,r,a,o,i,l,c,d);let g=o.node().getRootNode().host.parentElement;qe(g,f,d)})():c.hide(!0)()}async function ni(e,t,n=400){let r=t.transition("text fade transition").duration(n).ease(re.easeCubicOut);await e.transition(r).filter(a=>a.target.visible).tween("data",(a,o,i)=>{let l=i[o],s=re.interpolate(ri(a),ai(l));return u=>a.current.opacity=s(u)}).styleTween("opacity",a=>()=>a.current.opacity).end().catch(a=>console.error("Exception in text fade transition",a)).then(()=>e.each((a,o,i)=>da(i[o])))}var ri=e=>e.target.textLockedAt.opacity,ai=e=>rt[re.select(e).attr("class")],oi=(e,t)=>{t.deactivate(!0),e.each((n,r,a)=>{re.select(a[r]).selectAll("rect").style("pointer-events","none")})},mn=(e,t=void 0)=>{t&&t.deactivate(!1),e.each((n,r,a)=>{re.select(a[r]).selectAll("rect").style("pointer-events",null)})};var xa=`<button id="goto-parent">Goto parent</button>
`;function Sa(e){let t=null,n=null,r=!0,a=!1,o=O(e,".parent-controls",()=>e.append("div").attr("class","parent-controls").style("display",r?"none":"").html(xa)),i=()=>{o.style("display",r?"none":"").select("#goto-parent").style("pointer-events",a?"none":null).html(`\u21EA ${n}`).on("click",()=>t())};return i.deactivate=(...l)=>{if(!l.length)return a;a=l[0];let s=o.select("#goto-parent");return a?s.style("pointer-events","none"):s.style("pointer-events",null),i},i.hide=(...l)=>l.length?(r=l[0],i):r,i.text=(...l)=>l.length?(n=l[0],i):n,i.onClick=(...l)=>l.length?(t=l[0],i):t,i}var Ht={leaf:"leafnode",branch:"branchnode",root:"rootnode"},Oe=e=>e.x1-e.x0,Pe=e=>e.y1-e.y0,li=(e,t)=>t.depth===e,ba=(e,t)=>t.depth===0?Ht.root:li(e,t)?Ht.leaf:Ht.branch;function va(){let e=null,t=null,n=null,r=null,a=null,o=null,i=l=>{o=Sa(a),o();let s=n.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Et(a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height)(n);let c=l.selectAll("g").data(n.descendants()),d=c.enter().append("g");d.append("rect"),d.append("text");let m=d.merge(c).sort((y,g)=>g.depth-y.depth),p=m.select("rect").attr("class",y=>`treerect ${ba(s,y)}`).style("x",y=>y.x0).style("y",y=>y.y0).style("width",y=>Oe(y)).style("height",y=>Pe(y));p.style("fill",y=>ba(s,y)===Ht.leaf?y.data.color?r(y.data.color):t.colorStyles.series:"transparent");let f=m.filter(y=>y.value!==0).select("text").attr("x",y=>y.x0+Oe(y)/2).attr("y",y=>y.y0+Pe(y)/2).text(y=>y.label),h=p.filter(y=>y.crossValue.length===0).datum();ha(m,h),Ot(m,0,[]),Pt(at(m)),Rt(m,0),e.treemapRoute.length===0&&e.treemapRoute.push(h.crossValue),p.filter(y=>y.children).on("click",(y,g)=>dn(g,p,m,f,e,a,l,h,o,t)),ya(p,m,f,e,a,l,h,o,t)};return i.settings=(...l)=>l.length?(e=l[0],t=l[1],i):e,i.data=(...l)=>l.length?(n=l[0],i):n,i.color=(...l)=>l.length?(r=l[0],i):r,i.container=(...l)=>l.length?(a=l[0],i):a,i}function Va(e,t){t.treemaps||(t.treemaps={});let n=kt(t),r=sa(t,n.map(s=>s.data));r&&this._container.classList.add("has-legend");let a=je().elementsPrefix("treemap");if(e.datum(n).call(a),r){let s=t.realValues[1];if(t.mainValues.find(u=>u.name===s)?.type==="string"){let u=H().settings(t).scale(r);e.call(u)}else{let u=Ce().scale(r);e.call(u)}}let o=a.chartEnter(),i=a.chartDiv();a.chartTitle().each((s,u,c)=>ot.select(c[u]).text(s.split)),o.merge(i).select("svg").select("g.treemap").each(function({split:s,data:u}){let c=ot.select(this);t.treemaps[s]||(t.treemaps[s]={}),va().settings(t.treemaps[s],t).data(u).container(ot.select(ot.select(this.parentNode).node().parentNode)).color(r)(c),ye().settings(t).centered(!0)(c.selectAll("g"))})}Va.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:3e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var wa=Va;var si=[ir,gr,vr,Lr,zr,Hr,Wr,Jr,ea,wa,la,Kr],fn=si;import*as hn from"d3";import*as _a from"gradient-parser";var gn=(e,t)=>{if(!t.colorStyles){let n={scheme:[],gradient:{},interpolator:{},grid:{}},r=mi(e);n.series=r("--d3fc-local-series");for(let o=1;;o++){let i=`series-${o}`,l=r(`--d3fc-local-${i}`);if(!l)break;n[i]=l,n.scheme.push(l)}n.opacity=ci(n.series),n.grid.gridLineColor=r`--d3fc-gridline--color`,["full","positive","negative"].forEach(o=>{let i=r(`--d3fc-local-${o}--gradient`);n.gradient[o]=pi(i,n.opacity)}),t.colorStyles=n}if(!t.textStyles){let n=window.getComputedStyle(e),r=n.getPropertyValue("color"),a=`12px ${n.getPropertyValue("font-family")}`;t.textStyles={color:r,font:a}}},ci=e=>hn.color(e).opacity,ui=(e,t)=>{let n=hn.color(`#${e}`);return n.opacity=t,n+""},mi=e=>{let t=getComputedStyle(e);return n=>t?.getPropertyValue(n)},pi=(e,t)=>{let n=_a.parse(e)[0].colorStops;return n.map((r,a)=>[r.length?r.length.value/100:a/(n.length-1),ui(r.value,t)]).sort((r,a)=>r[0]-a[0])};var Ca=':host .chart{--d3fc-local-full--gradient:var(--d3fc-full--gradient,linear-gradient(#4d342f 0%,#e4521b 22.5%,#feeb65 42.5%,#f0f0f0 50%,#dcedc8 57.5%,#42b3d5 67.5%,#1a237e 100%));--d3fc-local-positive--gradient:var(--d3fc-positive--gradient,linear-gradient(#dcedc8 0%,#42b3d5 35%,#1a237e 100%));--d3fc-local-negative--gradient:var(--d3fc-negative--gradient,linear-gradient(#feeb65 100%,#e4521b 70%,#4d342f 0%));--d3fc-local-series:var(--d3fc-series,rgba(31,119,180,0.5));--d3fc-local-series-1:var(--d3fc-series-1,#0366d6);--d3fc-local-series-2:var(--d3fc-series-2,#ff7f0e);--d3fc-local-series-3:var(--d3fc-series-3,#2ca02c);--d3fc-local-series-4:var(--d3fc-series-4,#d62728);--d3fc-local-series-5:var(--d3fc-series-5,#9467bd);--d3fc-local-series-6:var(--d3fc-series-6,#8c564b);--d3fc-local-series-7:var(--d3fc-series-7,#e377c2);--d3fc-local-series-8:var(--d3fc-series-8,#7f7f7f);--d3fc-local-series-9:var(--d3fc-series-9,#bcbd22);--d3fc-local-series-10:var(--d3fc-series-10,#17becf);}:host .chart .series{fill:var(--d3fc-local-series);}:host .chart .series-1{fill:var(--d3fc-local-series-1);}:host .chart .series-2{fill:var(--d3fc-local-series-2);}:host .chart .series-3{fill:var(--d3fc-local-series-3);}:host .chart .series-4{fill:var(--d3fc-local-series-4);}:host .chart .series-5{fill:var(--d3fc-local-series-5);}:host .chart .series-6{fill:var(--d3fc-local-series-6);}:host .chart .series-7{fill:var(--d3fc-local-series-7);}:host .chart .series-8{fill:var(--d3fc-local-series-8);}:host .chart .series-9{fill:var(--d3fc-local-series-9);}:host .chart .series-10{fill:var(--d3fc-local-series-10);}:host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.xyscatter{padding:0;font-size:14px;}:host .chart.xyscatter d3fc-group:first-child{padding:16px;padding-top:0px;width:calc(100% - 32px);height:calc(100% - 16px);}:host .chart.xyscatter .multi-xlabel{position:absolute;bottom:0;height:2.5em;width:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .multi-ylabel{position:absolute;top:0;width:2.5em;height:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .outer-container{height:100%;}:host .chart.xyscatter .inner-container{display:inline-grid;overflow-y:auto;width:calc(100% - 16px);height:100%;padding:0;margin:0;}:host .chart.xyscatter .inner-container div{overflow:hidden;}:host .chart.xyscatter .inner-container text.segment,:host .chart.xyscatter .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.xyscatter .inner-container div.xy-scatter-container{margin:5px 0;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .outer-container{height:100%;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .outer-container{height:100%;}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover="true"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover="true"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}';import*as Ta from"d3";var Aa={initial:{type:"number",count:1,names:[]},selectMode:"select"},fi=`${Ca}${hi()}`,yn=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps","axisMemo","columns_config"];function hi(){let e=document.querySelector("head").querySelectorAll("style"),t=[];return e.forEach(n=>{n.innerText.indexOf("d3fc-")!==-1&&t.push(n.innerText)}),t.join("")}async function gi(e){await customElements.get("perspective-viewer").registerPlugin(e)}function La(...e){let t=new Set(e.length>0?e:fn.map(n=>n.plugin.name));fn.forEach(n=>{if(t.has(n.plugin.name)){let r=n.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,""),a=`perspective-viewer-d3fc-${r}`;customElements.define(a,class extends HTMLElement{_chart;_settings;render_warning;_initialized;_container;_staged_view;config;constructor(){super(),this._chart=null,this._settings=null,this.render_warning=!0}connectedCallback(){this._initialized||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${fi}</style>`,this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0)}get name(){return n.plugin.name}get category(){return n.plugin.category}get select_mode(){return n.plugin.selectMode||"select"}get min_config_columns(){return n.plugin.initial?.count||Aa.initial.count}get config_column_names(){return n.plugin.initial?.names||Aa.initial.names}get max_cells(){return n.plugin.max_cells||4e3}set max_cells(o){n.plugin.max_cells=o}get max_columns(){return n.plugin.max_columns||50}set max_columns(o){n.plugin.max_columns=o}can_render_column_styles(o,i){return n.can_render_column_styles?.call(this,o,i)}column_style_controls(o,i){return n.column_style_controls?.call(this,o,i)}async render(){var o=document.createElement("canvas"),i=this.shadowRoot.querySelector("#container");o.width=i.offsetWidth,o.height=i.offsetHeight;let l=o.getContext("2d");l.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",l.fillRect(0,0,o.width,o.height);let s=window.getComputedStyle(this).getPropertyValue("color"),u=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let p of u.reverse()){var c=document.createElement("img");let f=0;c.width=p.parentElement?p.parentElement.offsetWidth:f,c.height=p.parentElement?p.parentElement.offsetHeight:f;let h=p.cloneNode(!0);h.hasAttribute("viewBox")||h.setAttribute("viewBox",`0 0 ${c.width} ${c.height}`),h.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let g of h.querySelectorAll("text"))g.setAttribute("fill",s);var d=new XMLSerializer().serializeToString(h);d=d.replace(/[^\x00-\x7F]/g,"");let y=new Promise((g,x)=>{c.onload=g,c.onerror=x});try{c.src=`data:image/svg+xml;base64,${btoa(d)}`,await y}catch{let x=new Promise((b,S)=>{c.onload=b,c.onerror=S});c.src=`data:image/svg+xml;utf8,${d}`,await x}l.drawImage(c,p.parentNode.offsetLeft,p.parentNode.offsetTop,c.width,c.height)}let m=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let p of m.reverse())l.drawImage(p,p.parentNode.offsetLeft,p.parentNode.offsetTop,p.width/window.devicePixelRatio,p.height/window.devicePixelRatio);return await new Promise(p=>o.toBlob(f=>p(f)),"image/png")}async draw(o,i,l){if(this.offsetParent===null){this._staged_view=[o,i,l];return}this._staged_view=void 0,this._settings&&(this._settings.axisMemo=[[1/0,-1/0],[1/0,-1/0]]),await this.update(o,i,l,!0)}async update(o,i,l,s=!1){if(this.offsetParent===null)return;let u=this.parentElement,c,d,m=n.plugin.name!=="Sunburst";i&&l?c=o.to_columns_string({end_row:l,end_col:i,leaves_only:m}):i?c=o.to_columns_string({end_col:i,leaves_only:m}):l?c=o.to_columns_string({end_row:l,leaves_only:m}):c=o.to_columns_string({leaves_only:m}),d=await Promise.all([u.save(),u.getTable().then(_=>_.schema()),o.expression_schema(!1),o.schema(!1),c,o.get_config()]);let[p,f,h,y,g,x]=d,b=JSON.parse(g),S=Object.keys(b),v={row(_){let N={};for(let oe of S)N[oe]=b[oe][_];return N}};this.config=p;let w=this.config.columns,T=function(_){let N=f[_];return N||(N=h[_]),N},{columns:I,group_by:E,split_by:z,filter:k}=x,R=b[Object.keys(b)[0]]||[],M=E.length>0?R.reduce((_,N,oe)=>{let ue=v.row(oe);if(ue.__ROW_PATH__&&ue.__ROW_PATH__.length==E.length)_.agg_paths.push(_.aggs.slice()),_.rows.push(ue);else{let V=ue.__ROW_PATH__.filter(L=>L!==void 0).length;_.aggs[V]=ue,_.aggs=_.aggs.slice(0,V+1)}return _},{rows:[],aggs:[],agg_paths:[]}):{rows:R.map((_,N)=>v.row(N))},G=(_,N)=>E.length?_:{..._,__ROW_PATH__:[N]},J=M.rows.map(G),X={realValues:w,crossValues:E.map(_=>({name:_,type:T(_)})),mainValues:I.map(_=>({name:_,type:y[_]})),splitValues:z.map(_=>({name:_,type:T(_)})),filter:k,data:J,agg_paths:M.agg_paths,...this.config.plugin_config};this._chart=n;let ae={set:(_,N,oe)=>(yn.includes(N)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),_[N]=oe,!0)},q=[[1/0,-1/0],[1/0,-1/0]];this._settings=new Proxy({axisMemo:q,...this._settings,...X},ae),this._settings.splitMainValues&&this._settings.splitMainValues.length>=I.length&&(this._settings.splitMainValues=[]),gn(this._container,this._settings),s&&(this._container.innerHTML=""),this._draw(),await new Promise(_=>requestAnimationFrame(_))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(this.offsetParent!==null){let o=Ta.select(this._container),i=`chart ${r}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(o.attr("class",i),this._settings):o.attr("class",`${i} disabled`)}}async resize(o){if(this.offsetParent!==null)if(this._settings?.data!==void 0)this._draw();else{let[i,l,s]=this._staged_view;this._staged_view=void 0,this.draw(i,l,s)}}async restyle(o,i,l){let s=this._settings;s&&(delete s.colorStyles,delete s.textStyles,this.isConnected&&(gn(this._container,this._settings),this.resize(o)))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let o={...this._settings};return yn.forEach(i=>{delete o[i]}),o}restore(o,i){let l={};for(let s of yn)this._settings?.[s]!==void 0&&(l[s]=this._settings?.[s]);this._settings={...l,...o,columns_config:i}}}),customElements.whenDefined("perspective-viewer").then(()=>gi(a))}})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);La("X/Y Scatter");
//# sourceMappingURL=xy-scatter.js.map
