var ii=Object.create;var Wt=Object.defineProperty;var ni=Object.getOwnPropertyDescriptor;var ri=Object.getOwnPropertyNames;var oi=Object.getPrototypeOf,ai=Object.prototype.hasOwnProperty;var si=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var li=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ri(e))!ai.call(i,r)&&r!==t&&Wt(i,r,{get:()=>e[r],enumerable:!(n=ni(e,r))||n.enumerable});return i};var at=(i,e,t)=>(t=i!=null?ii(oi(i)):{},li(e||!i||!i.__esModule?Wt(t,"default",{value:i,enumerable:!0}):t,i));var tt=si((ct,Jt)=>{(function(i,e){typeof ct=="object"&&typeof Jt<"u"?e(ct):typeof define=="function"&&define.amd?define(["exports"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.lumino_coreutils={}))})(ct,function(i){"use strict";i.JSONExt=void 0,function(s){s.emptyObject=Object.freeze({}),s.emptyArray=Object.freeze([]);function a(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"}s.isPrimitive=a;function d(f){return Array.isArray(f)}s.isArray=d;function g(f){return!a(f)&&!d(f)}s.isObject=g;function _(f,w){if(f===w)return!0;if(a(f)||a(w))return!1;var y=d(f),I=d(w);return y!==I?!1:y&&I?x(f,w):b(f,w)}s.deepEqual=_;function M(f){return a(f)?f:d(f)?c(f):p(f)}s.deepCopy=M;function x(f,w){if(f===w)return!0;if(f.length!==w.length)return!1;for(var y=0,I=f.length;y<I;++y)if(!_(f[y],w[y]))return!1;return!0}function b(f,w){if(f===w)return!0;for(var y in f)if(f[y]!==void 0&&!(y in w))return!1;for(var y in w)if(w[y]!==void 0&&!(y in f))return!1;for(var y in f){var I=f[y],A=w[y];if(!(I===void 0&&A===void 0)&&(I===void 0||A===void 0||!_(I,A)))return!1}return!0}function c(f){for(var w=new Array(f.length),y=0,I=f.length;y<I;++y)w[y]=M(f[y]);return w}function p(f){var w={};for(var y in f){var I=f[y];I!==void 0&&(w[y]=M(I))}return w}}(i.JSONExt||(i.JSONExt={}));var e=function(){function s(){this._types=[],this._values=[]}return s.prototype.types=function(){return this._types.slice()},s.prototype.hasData=function(a){return this._types.indexOf(a)!==-1},s.prototype.getData=function(a){var d=this._types.indexOf(a);return d!==-1?this._values[d]:void 0},s.prototype.setData=function(a,d){this.clearData(a),this._types.push(a),this._values.push(d)},s.prototype.clearData=function(a){var d=this._types.indexOf(a);d!==-1&&(this._types.splice(d,1),this._values.splice(d,1))},s.prototype.clear=function(){this._types.length=0,this._values.length=0},s}(),t=function(){function s(){var a=this;this.promise=new Promise(function(d,g){a._resolve=d,a._reject=g})}return s.prototype.resolve=function(a){var d=this._resolve;d(a)},s.prototype.reject=function(a){var d=this._reject;d(a)},s}(),n=function(){function s(a){this.name=a,this._tokenStructuralPropertyT=null}return s}();function r(s){for(var a=0,d=0,g=s.length;d<g;++d)d%4===0&&(a=Math.random()*4294967295>>>0),s[d]=a&255,a>>>=8}i.Random=void 0,function(s){s.getRandomValues=function(){var a=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return a&&typeof a.getRandomValues=="function"?function(g){return a.getRandomValues(g)}:r}()}(i.Random||(i.Random={}));function o(s){for(var a=new Uint8Array(16),d=new Array(256),g=0;g<16;++g)d[g]="0"+g.toString(16);for(var g=16;g<256;++g)d[g]=g.toString(16);return function(){return s(a),a[6]=64|a[6]&15,a[8]=128|a[8]&63,d[a[0]]+d[a[1]]+d[a[2]]+d[a[3]]+"-"+d[a[4]]+d[a[5]]+"-"+d[a[6]]+d[a[7]]+"-"+d[a[8]]+d[a[9]]+"-"+d[a[10]]+d[a[11]]+d[a[12]]+d[a[13]]+d[a[14]]+d[a[15]]}}i.UUID=void 0,function(s){s.uuid4=o(i.Random.getRandomValues)}(i.UUID||(i.UUID={})),i.MimeData=e,i.PromiseDelegate=t,i.Token=n,Object.defineProperty(i,"__esModule",{value:!0})})});var Ft=`.p-Widget,.lm-Widget{box-sizing:border-box;position:relative;overflow:hidden;cursor:default;}.p-Widget.p-mod-hidden,.lm-Widget.lm-mod-hidden{display:none!important;}.lm-AccordionPanel[data-orientation='horizontal']>.lm-AccordionPanel-title{display:block;transform-origin:top left;transform:rotate(-90deg)translate(-100%);}.p-CommandPalette,.lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-CommandPalette-search,.lm-CommandPalette-search{flex:0 0 auto;}.p-CommandPalette-content,.lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none;}.p-CommandPalette-header,.lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.p-CommandPalette-item,.lm-CommandPalette-item{display:flex;flex-direction:row;}.p-CommandPalette-itemIcon,.lm-CommandPalette-itemIcon{flex:0 0 auto;}.p-CommandPalette-itemContent,.lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden;}.p-CommandPalette-itemShortcut,.lm-CommandPalette-itemShortcut{flex:0 0 auto;}.p-CommandPalette-itemLabel,.lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-close-icon{border:1px solid transparent;background-color:transparent;position:absolute;z-index:1;right:3%;top:0;bottom:0;margin:auto;padding:7px 0;display:none;vertical-align:middle;outline:0;cursor:pointer;}.lm-close-icon:after{content:'X';display:block;width:15px;height:15px;text-align:center;color:#000;font-weight:normal;font-size:12px;cursor:pointer;}.p-DockPanel,.lm-DockPanel{z-index:0;}.p-DockPanel-widget,.lm-DockPanel-widget{z-index:0;}.p-DockPanel-tabBar,.lm-DockPanel-tabBar{z-index:1;}.p-DockPanel-handle,.lm-DockPanel-handle{z-index:2;}.p-DockPanel-handle.p-mod-hidden,.lm-DockPanel-handle.lm-mod-hidden{display:none!important;}.p-DockPanel-handle:after,.lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-DockPanel-handle[data-orientation='horizontal'],.lm-DockPanel-handle[data-orientation='horizontal']{cursor:ew-resize;}.p-DockPanel-handle[data-orientation='vertical'],.lm-DockPanel-handle[data-orientation='vertical']{cursor:ns-resize;}.p-DockPanel-handle[data-orientation='horizontal']:after,.lm-DockPanel-handle[data-orientation='horizontal']:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-DockPanel-handle[data-orientation='vertical']:after,.lm-DockPanel-handle[data-orientation='vertical']:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-DockPanel-overlay,.lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none;}.p-DockPanel-overlay.p-mod-hidden,.lm-DockPanel-overlay.lm-mod-hidden{display:none!important;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-MenuBar,.lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-MenuBar-content,.lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none;}.p--MenuBar-item,.lm-MenuBar-item{box-sizing:border-box;}.p-MenuBar-itemIcon,.p-MenuBar-itemLabel,.lm-MenuBar-itemIcon,.lm-MenuBar-itemLabel{display:inline-block;}.p-ScrollBar,.lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-ScrollBar[data-orientation='horizontal'],.lm-ScrollBar[data-orientation='horizontal']{flex-direction:row;}.p-ScrollBar[data-orientation='vertical'],.lm-ScrollBar[data-orientation='vertical']{flex-direction:column;}.p-ScrollBar-button,.lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto;}.p-ScrollBar-track,.lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto;}.p-ScrollBar-thumb,.lm-ScrollBar-thumb{box-sizing:border-box;position:absolute;}.p-SplitPanel-child,.lm-SplitPanel-child{z-index:0;}.p-SplitPanel-handle,.lm-SplitPanel-handle{z-index:1;}.p-SplitPanel-handle.p-mod-hidden,.lm-SplitPanel-handle.lm-mod-hidden{display:none!important;}.p-SplitPanel-handle:after,.lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle{cursor:ew-resize;}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle{cursor:ns-resize;}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-TabBar,.lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-TabBar[data-orientation='horizontal'],.lm-TabBar[data-orientation='horizontal']{flex-direction:row;align-items:flex-end;}.p-TabBar[data-orientation='vertical'],.lm-TabBar[data-orientation='vertical']{flex-direction:column;align-items:flex-end;}.p-TabBar-content,.lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none;}.p-TabBar[data-orientation='horizontal']>.p-TabBar-content,.lm-TabBar[data-orientation='horizontal']>.lm-TabBar-content{flex-direction:row;}.p-TabBar[data-orientation='vertical']>.p-TabBar-content,.lm-TabBar[data-orientation='vertical']>.lm-TabBar-content{flex-direction:column;}.p-TabBar-tab,.lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;touch-action:none;}.p-TabBar-tabIcon,.p-TabBar-tabCloseIcon,.lm-TabBar-tabIcon,.lm-TabBar-tabCloseIcon{flex:0 0 auto;}.p-TabBar-tabLabel,.lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap;}.lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;}.p-TabBar-tab.p-mod-hidden,.lm-TabBar-tab.lm-mod-hidden{display:none!important;}.lm-TabBar-addButton.lm-mod-hidden{display:none!important;}.p-TabBar.p-mod-dragging .p-TabBar-tab,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative;}.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab{left:0;transition:left 150ms ease;}.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab{top:0;transition:top 150ms ease;}.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none;}.lm-TabBar-tabLabel .lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;background:inherit;}.p-TabPanel-tabBar,.lm-TabPanel-tabBar{z-index:1;}.p-TabPanel-stackedPanel,.lm-TabPanel-stackedPanel{z-index:0;}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:var(--icon--color,#666);cursor:pointer;padding:0px 6px;margin:0;margin-left:10.5px;margin-right:auto;flex:0 1 auto;border-radius:3px;}:host .p-TabBar-tabLabel:hover{background-color:var(--icon--color);color:var(--plugin--background);}:host .p-TabBar-tabLabel:focus{outline:none;color:var(--workspace-secondary--color,#666)!important;cursor:text;}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content,"\\2715");}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content,"\\1F527");font-family:var(--settings--font-family,"Arial");transition:color 0.5s ease;}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content,"\\1F527");}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce;}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none;}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all;}:host .p-mod-current .p-TabBar-tabConfigIcon,:host .p-mod-current .p-TabBar-tabCloseIcon{color:inherit;transition:color 0.2s ease-out;}:host .p-mod-current .p-TabBar-tabConfigIcon:hover,:host .p-mod-current .p-TabBar-tabCloseIcon:hover{color:#1a7da1;transition:color 0.2s ease-out;}:host .p-BoxPanel{overflow:scroll!important;}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";color:#aaa;}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";}:host .divider{left:32px;bottom:0;position:absolute;right:32px;height:1px;background-color:var(--workspace-tabbar--border-color);margin-bottom:0px;}:host .p-TabBar-tab .drag-handle{height:12px;width:5px;-webkit-mask-image:var(--column-drag-handle--mask-image);mask-image:var(--column-drag-handle--mask-image);margin:0px 0 0 16.5px;background-repeat:no-repeat;background-color:var(--inactive--color,red);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:0.5;}:host .p-TabBar-tab.p-mod-current .divider{display:block;}:host .p-TabBar{min-height:40px!important;}:host .pfm-button-base{background:white!important;}:host .pfm-button-base:active{background:#016bc6!important;}:host .p-TabBar-content{padding:0px;border-bottom:0px solid#fff!important;border-left:#eaeaea;border-right:#eaeaea;}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0px;}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none;}:host .p-TabBar-tab{border-color:#eaeaea;align-items:center;}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:var(--workspace-inactive-blur--background-color,transparent);}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block;}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0px;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px 1px 0px 1px!important;border-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0px;background-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{transition:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block;}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:none;color:#737373;height:40px!important;max-height:40px!important;transform:none!important;transition:color 0.2s ease-out;color:#ccc;color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-secondary--color,#666);}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important;}:host .p-TabBar-tabLabel{font-family:inherit;font-size:12px;line-height:22px;text-align:start;white-space:normal!important;word-break:break-all;}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:16.5px!important;}:host .p-TabBar-tabConfigIcon{padding-left:8px;padding-right:8px!important;}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px;}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-tabbar--color,#666)!important;border:var(--workspace-tabbar--border,1px solid#ddd);border-width:var(--workspace-tabbar-tab--border-width);box-shadow:0 13px 0 -12px var(--inactive--border-color);border-radius:6px 6px 0 0;background-color:var(--workspace-tabbar--background-color,white);height:40px!important;max-height:40px!important;}:host .bottom .p-TabBar-tab.p-mod-current{border:none;}:host ::-webkit-scrollbar-thumb{background-color:#ccc;}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1;}:host .perspective-workspace.context-menu * .p-TabBar,:host .perspective-workspace.context-menu .p-Widget.workspace-widget:not(.context-focus) .viewer-container{opacity:0.2;}:host .bookmarks-button{margin-left:11px;margin-right:-13px;border-radius:3px;height:22px;}:host .bookmarks-button:hover{background-color:var(--icon--color);}:host .bookmarks{cursor:pointer;background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:26px;height:12px;-webkit-mask-image:var(--bookmarks--mask-image);mask-image:var(--bookmarks--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-size:auto;mask-size:auto;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;padding:5px;}:host .bookmarks:hover{background-color:var(--plugin--background);}:host .p-DockPanel{overflow:var(--dock-panel--overflow,hidden);position:absolute;background-color:var(--detail--background-color,transparent);padding:3px;top:0;left:0;right:0;bottom:0;}:host .p-DockPanel[data-mode="single-document"]{padding:0px;}:host .lm-Widget,:host .p-Widget{cursor:inherit;}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important;}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important;}:host .workspace-master-widget{min-width:100px!important;}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none;}:host .widget-blur ::slotted(perspective-viewer){opacity:0.5;}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,0.05);}:host .perspective-scroll-panel{overflow:auto!important;}:host .p-Panel{min-height:100%;}:host .p-DockPanel-handle{background-color:none;}:host .p-SplitPanel-handle,:host .p-DockPanel-handle{transition:background-color 0.3s ease-out;}:host .p-SplitPanel-handle:hover,:host .p-DockPanel-handle:hover{background-color:rgba(0,0,0,0.05);}:host .p-DockPanel-overlay{background:rgba(75,75,75,0.2);border:1px dashed#666;border-radius:6px;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:linear;margin:0px;}:host .lm-DockPanel:not([data-mode="single-document"]) .viewer-container{border:var(--workspace-tabbar--border,1px solid var(--inactive--color));border-width:var(--workspace-tabbar--border-width);border-radius:var(--workspace-tabbar--border-radius,0 0 6px 6px);}:host .viewer-container{flex:1;height:100%;overflow:hidden;}:host .perspective-scroll-panel.has-master-panel{margin-left:-8px!important;}:host .perspective-scroll-panel .workspace-widget{min-width:300px;min-height:200px;}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid#eaedef;border-width:0px!important;}:host{background-color:hsl(210deg 18% 90%);width:100%;height:100%;}:host .workspace{width:100%;height:100%;}:host .p-SplitPanel{height:100%;width:100%;}:host div.p-SplitPanel-handle{background-color:inherit;}:host .master-panel{background-color:var(--workspace-master--background-color,inherit);padding:0px 0px 0px 0px;}:host .master-panel .viewer-container{border-width:0px;}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:0.2;}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:0.2;}`;var Nt=`<!--

Copyright (c) 2017, the Perspective Authors.

This file is part of the Perspective library, distributed under the terms of
the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<template id="perspective-workspace">
    <div id="container" class="workspace"></div>
</template>
`;var yt;(S=>{function i(v,T,u=0,l=-1){let m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k;l<u?k=l+1+(m-u):k=l-u+1;for(let h=0;h<k;++h){let L=(u+h)%m;if(v[L]===T)return L}return-1}S.firstIndexOf=i;function e(v,T,u=-1,l=0){let m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k;u<l?k=u+1+(m-l):k=u-l+1;for(let h=0;h<k;++h){let L=(u-h+m)%m;if(v[L]===T)return L}return-1}S.lastIndexOf=e;function t(v,T,u=0,l=-1){let m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k;l<u?k=l+1+(m-u):k=l-u+1;for(let h=0;h<k;++h){let L=(u+h)%m;if(T(v[L],L))return L}return-1}S.findFirstIndex=t;function n(v,T,u=-1,l=0){let m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k;u<l?k=u+1+(m-l):k=u-l+1;for(let h=0;h<k;++h){let L=(u-h+m)%m;if(T(v[L],L))return L}return-1}S.findLastIndex=n;function r(v,T,u=0,l=-1){let m=t(v,T,u,l);return m!==-1?v[m]:void 0}S.findFirstValue=r;function o(v,T,u=-1,l=0){let m=n(v,T,u,l);return m!==-1?v[m]:void 0}S.findLastValue=o;function s(v,T,u,l=0,m=-1){let k=v.length;if(k===0)return 0;l<0?l=Math.max(0,l+k):l=Math.min(l,k-1),m<0?m=Math.max(0,m+k):m=Math.min(m,k-1);let h=l,L=m-l+1;for(;L>0;){let D=L>>1,R=h+D;u(v[R],T)<0?(h=R+1,L-=D+1):L=D}return h}S.lowerBound=s;function a(v,T,u,l=0,m=-1){let k=v.length;if(k===0)return 0;l<0?l=Math.max(0,l+k):l=Math.min(l,k-1),m<0?m=Math.max(0,m+k):m=Math.min(m,k-1);let h=l,L=m-l+1;for(;L>0;){let D=L>>1,R=h+D;u(v[R],T)>0?L=D:(h=R+1,L-=D+1)}return h}S.upperBound=a;function d(v,T,u){if(v===T)return!0;if(v.length!==T.length)return!1;for(let l=0,m=v.length;l<m;++l)if(u?!u(v[l],T[l]):v[l]!==T[l])return!1;return!0}S.shallowEqual=d;function g(v,T={}){let{start:u,stop:l,step:m}=T;if(m===void 0&&(m=1),m===0)throw new Error("Slice `step` cannot be zero.");let k=v.length;u===void 0?u=m<0?k-1:0:u<0?u=Math.max(u+k,m<0?-1:0):u>=k&&(u=m<0?k-1:k),l===void 0?l=m<0?-1:k:l<0?l=Math.max(l+k,m<0?-1:0):l>=k&&(l=m<0?k-1:k);let h;m<0&&l>=u||m>0&&u>=l?h=0:m<0?h=Math.floor((l-u+1)/m+1):h=Math.floor((l-u-1)/m+1);let L=[];for(let D=0;D<h;++D)L[D]=v[u+D*m];return L}S.slice=g;function _(v,T,u){let l=v.length;if(l<=1||(T<0?T=Math.max(0,T+l):T=Math.min(T,l-1),u<0?u=Math.max(0,u+l):u=Math.min(u,l-1),T===u))return;let m=v[T],k=T<u?1:-1;for(let h=T;h!==u;h+=k)v[h]=v[h+k];v[u]=m}S.move=_;function M(v,T=0,u=-1){let l=v.length;if(!(l<=1))for(T<0?T=Math.max(0,T+l):T=Math.min(T,l-1),u<0?u=Math.max(0,u+l):u=Math.min(u,l-1);T<u;){let m=v[T],k=v[u];v[T++]=k,v[u--]=m}}S.reverse=M;function x(v,T,u=0,l=-1){let m=v.length;if(m<=1||(u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1),u>=l))return;let k=l-u+1;if(T>0?T=T%k:T<0&&(T=(T%k+k)%k),T===0)return;let h=u+T;M(v,u,h-1),M(v,h,l),M(v,u,l)}S.rotate=x;function b(v,T,u=0,l=-1){let m=v.length;if(m===0)return;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k;l<u?k=l+1+(m-u):k=l-u+1;for(let h=0;h<k;++h)v[(u+h)%m]=T}S.fill=b;function c(v,T,u){let l=v.length;T<0?T=Math.max(0,T+l):T=Math.min(T,l);for(let m=l;m>T;--m)v[m]=v[m-1];v[T]=u}S.insert=c;function p(v,T){let u=v.length;if(T<0&&(T+=u),T<0||T>=u)return;let l=v[T];for(let m=T+1;m<u;++m)v[m-1]=v[m];return v.length=u-1,l}S.removeAt=p;function f(v,T,u=0,l=-1){let m=i(v,T,u,l);return m!==-1&&p(v,m),m}S.removeFirstOf=f;function w(v,T,u=-1,l=0){let m=e(v,T,u,l);return m!==-1&&p(v,m),m}S.removeLastOf=w;function y(v,T,u=0,l=-1){let m=v.length;if(m===0)return 0;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k=0;for(let h=0;h<m;++h)u<=l&&h>=u&&h<=l&&v[h]===T||l<u&&(h<=l||h>=u)&&v[h]===T?k++:k>0&&(v[h-k]=v[h]);return k>0&&(v.length=m-k),k}S.removeAllOf=y;function I(v,T,u=0,l=-1){let m,k=t(v,T,u,l);return k!==-1&&(m=p(v,k)),{index:k,value:m}}S.removeFirstWhere=I;function A(v,T,u=-1,l=0){let m,k=n(v,T,u,l);return k!==-1&&(m=p(v,k)),{index:k,value:m}}S.removeLastWhere=A;function E(v,T,u=0,l=-1){let m=v.length;if(m===0)return 0;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);let k=0;for(let h=0;h<m;++h)u<=l&&h>=u&&h<=l&&T(v[h],h)||l<u&&(h<=l||h>=u)&&T(v[h],h)?k++:k>0&&(v[h-k]=v[h]);return k>0&&(v.length=m-k),k}S.removeAllWhere=E})(yt||={});function me(i){let e;return typeof i.iter=="function"?e=i.iter():e=new Xe(i),e}function Je(i){let e=0,t=[],n=me(i),r;for(;(r=n.next())!==void 0;)t[e++]=r;return t}var Xe=class{constructor(e){this._source=e}iter(){return this}clone(){let e=new Xe(this._source);return e._index=this._index,e}next(){if(!(this._index>=this._source.length))return this._source[this._index++]}_index=0;_source};function Kt(i,e){let t=0,n=me(i),r;for(;(r=n.next())!==void 0;)if(e(r,t++))return r}var ci;(e=>{function i(t,n,r){return r===0?1/0:t>n&&r>0||t<n&&r<0?0:Math.ceil((n-t)/r)}e.rangeLength=i})(ci||={});var hi;(o=>{function i(s,a,d=0){let g=new Array(a.length);for(let _=0,M=d,x=a.length;_<x;++_,++M){if(M=s.indexOf(a[_],M),M===-1)return null;g[_]=M}return g}o.findIndices=i;function e(s,a,d=0){let g=i(s,a,d);if(!g)return null;let _=0;for(let M=0,x=g.length;M<x;++M){let b=g[M]-d;_+=b*b}return{score:_,indices:g}}o.matchSumOfSquares=e;function t(s,a,d=0){let g=i(s,a,d);if(!g)return null;let _=0,M=d-1;for(let x=0,b=g.length;x<b;++x){let c=g[x];_+=c-M-1,M=c}return{score:_,indices:g}}o.matchSumOfDeltas=t;function n(s,a,d){let g=[],_=0,M=0,x=a.length;for(;_<x;){let b=a[_],c=a[_];for(;++_<x&&a[_]===c+1;)c++;M<b&&g.push(s.slice(M,b)),b<c+1&&g.push(d(s.slice(b,c+1))),M=c+1}return M<s.length&&g.push(s.slice(M)),g}o.highlight=n;function r(s,a){return s<a?-1:s>a?1:0}o.cmp=r})(hi||={});var z;(function(i){function e(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);var k;l<u?k=l+1+(m-u):k=l-u+1;for(var h=0;h<k;++h){var L=(u+h)%m;if(v[L]===T)return L}return-1}i.firstIndexOf=e;function t(v,T,u,l){u===void 0&&(u=-1),l===void 0&&(l=0);var m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);var k;u<l?k=u+1+(m-l):k=u-l+1;for(var h=0;h<k;++h){var L=(u-h+m)%m;if(v[L]===T)return L}return-1}i.lastIndexOf=t;function n(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);var k;l<u?k=l+1+(m-u):k=l-u+1;for(var h=0;h<k;++h){var L=(u+h)%m;if(T(v[L],L))return L}return-1}i.findFirstIndex=n;function r(v,T,u,l){u===void 0&&(u=-1),l===void 0&&(l=0);var m=v.length;if(m===0)return-1;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);var k;u<l?k=u+1+(m-l):k=u-l+1;for(var h=0;h<k;++h){var L=(u-h+m)%m;if(T(v[L],L))return L}return-1}i.findLastIndex=r;function o(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=n(v,T,u,l);return m!==-1?v[m]:void 0}i.findFirstValue=o;function s(v,T,u,l){u===void 0&&(u=-1),l===void 0&&(l=0);var m=r(v,T,u,l);return m!==-1?v[m]:void 0}i.findLastValue=s;function a(v,T,u,l,m){l===void 0&&(l=0),m===void 0&&(m=-1);var k=v.length;if(k===0)return 0;l<0?l=Math.max(0,l+k):l=Math.min(l,k-1),m<0?m=Math.max(0,m+k):m=Math.min(m,k-1);for(var h=l,L=m-l+1;L>0;){var D=L>>1,R=h+D;u(v[R],T)<0?(h=R+1,L-=D+1):L=D}return h}i.lowerBound=a;function d(v,T,u,l,m){l===void 0&&(l=0),m===void 0&&(m=-1);var k=v.length;if(k===0)return 0;l<0?l=Math.max(0,l+k):l=Math.min(l,k-1),m<0?m=Math.max(0,m+k):m=Math.min(m,k-1);for(var h=l,L=m-l+1;L>0;){var D=L>>1,R=h+D;u(v[R],T)>0?L=D:(h=R+1,L-=D+1)}return h}i.upperBound=d;function g(v,T,u){if(v===T)return!0;if(v.length!==T.length)return!1;for(var l=0,m=v.length;l<m;++l)if(u?!u(v[l],T[l]):v[l]!==T[l])return!1;return!0}i.shallowEqual=g;function _(v,T){T===void 0&&(T={});var u=T.start,l=T.stop,m=T.step;if(m===void 0&&(m=1),m===0)throw new Error("Slice `step` cannot be zero.");var k=v.length;u===void 0?u=m<0?k-1:0:u<0?u=Math.max(u+k,m<0?-1:0):u>=k&&(u=m<0?k-1:k),l===void 0?l=m<0?-1:k:l<0?l=Math.max(l+k,m<0?-1:0):l>=k&&(l=m<0?k-1:k);var h;m<0&&l>=u||m>0&&u>=l?h=0:m<0?h=Math.floor((l-u+1)/m+1):h=Math.floor((l-u-1)/m+1);for(var L=[],D=0;D<h;++D)L[D]=v[u+D*m];return L}i.slice=_;function M(v,T,u){var l=v.length;if(!(l<=1)&&(T<0?T=Math.max(0,T+l):T=Math.min(T,l-1),u<0?u=Math.max(0,u+l):u=Math.min(u,l-1),T!==u)){for(var m=v[T],k=T<u?1:-1,h=T;h!==u;h+=k)v[h]=v[h+k];v[u]=m}}i.move=M;function x(v,T,u){T===void 0&&(T=0),u===void 0&&(u=-1);var l=v.length;if(!(l<=1))for(T<0?T=Math.max(0,T+l):T=Math.min(T,l-1),u<0?u=Math.max(0,u+l):u=Math.min(u,l-1);T<u;){var m=v[T],k=v[u];v[T++]=k,v[u--]=m}}i.reverse=x;function b(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=v.length;if(!(m<=1)&&(u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1),!(u>=l))){var k=l-u+1;if(T>0?T=T%k:T<0&&(T=(T%k+k)%k),T!==0){var h=u+T;x(v,u,h-1),x(v,h,l),x(v,u,l)}}}i.rotate=b;function c(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=v.length;if(m!==0){u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);var k;l<u?k=l+1+(m-u):k=l-u+1;for(var h=0;h<k;++h)v[(u+h)%m]=T}}i.fill=c;function p(v,T,u){var l=v.length;T<0?T=Math.max(0,T+l):T=Math.min(T,l);for(var m=l;m>T;--m)v[m]=v[m-1];v[T]=u}i.insert=p;function f(v,T){var u=v.length;if(T<0&&(T+=u),!(T<0||T>=u)){for(var l=v[T],m=T+1;m<u;++m)v[m-1]=v[m];return v.length=u-1,l}}i.removeAt=f;function w(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=e(v,T,u,l);return m!==-1&&f(v,m),m}i.removeFirstOf=w;function y(v,T,u,l){u===void 0&&(u=-1),l===void 0&&(l=0);var m=t(v,T,u,l);return m!==-1&&f(v,m),m}i.removeLastOf=y;function I(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=v.length;if(m===0)return 0;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);for(var k=0,h=0;h<m;++h)u<=l&&h>=u&&h<=l&&v[h]===T||l<u&&(h<=l||h>=u)&&v[h]===T?k++:k>0&&(v[h-k]=v[h]);return k>0&&(v.length=m-k),k}i.removeAllOf=I;function A(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m,k=n(v,T,u,l);return k!==-1&&(m=f(v,k)),{index:k,value:m}}i.removeFirstWhere=A;function E(v,T,u,l){u===void 0&&(u=-1),l===void 0&&(l=0);var m,k=r(v,T,u,l);return k!==-1&&(m=f(v,k)),{index:k,value:m}}i.removeLastWhere=E;function S(v,T,u,l){u===void 0&&(u=0),l===void 0&&(l=-1);var m=v.length;if(m===0)return 0;u<0?u=Math.max(0,u+m):u=Math.min(u,m-1),l<0?l=Math.max(0,l+m):l=Math.min(l,m-1);for(var k=0,h=0;h<m;++h)u<=l&&h>=u&&h<=l&&T(v[h],h)||l<u&&(h<=l||h>=u)&&T(v[h],h)?k++:k>0&&(v[h-k]=v[h]);return k>0&&(v.length=m-k),k}i.removeAllWhere=S})(z||(z={}));function pe(i){var e;return typeof i.iter=="function"?e=i.iter():e=new mi(i),e}function H(i,e){for(var t=0,n=pe(i),r;(r=n.next())!==void 0;)if(e(r,t++)===!1)return}function st(i,e){for(var t=0,n=pe(i),r;(r=n.next())!==void 0;)if(!e(r,t++))return!1;return!0}function lt(i,e){for(var t=0,n=pe(i),r;(r=n.next())!==void 0;)if(e(r,t++))return!0;return!1}function jt(i){for(var e=0,t=[],n=pe(i),r;(r=n.next())!==void 0;)t[e++]=r;return t}var mi=function(){function i(e){this._index=0,this._source=e}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},i}(),qr=function(){function i(e,t){t===void 0&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source,this._keys);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},i}(),Ur=function(){function i(e,t){t===void 0&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source,this._keys);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},i}(),$r=function(){function i(e,t){t===void 0&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source,this._keys);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},i}(),Gr=function(){function i(e){this._fn=e}return i.prototype.iter=function(){return this},i.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},i.prototype.next=function(){return this._fn.call(void 0)},i}();function xt(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return new Re(pe(i.map(pe)))}var Re=function(){function i(e){this._cloned=!1,this._source=e,this._active=void 0}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},i.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return t!==void 0?t:(this._active=void 0,this.next())},i}();function de(){return new pi}var pi=function(){function i(){}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i},i.prototype.next=function(){},i}();var Yr=function(){function i(e,t){this._source=e,this._index=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.clone(),this._index)},i.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},i}();var Xr=function(){function i(e,t){this._index=0,this._source=e,this._fn=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source.clone(),this._fn);return e._index=this._index,e},i.prototype.next=function(){for(var e=this._fn,t=this._source,n;(n=t.next())!==void 0;)if(e(n,this._index++))return n},i}();function Ze(i,e){for(var t=0,n=pe(i),r;(r=n.next())!==void 0;)if(e(r,t++))return r}function Oe(i,e){return new fi(pe(i),e)}var fi=function(){function i(e,t){this._index=0,this._source=e,this._fn=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source.clone(),this._fn);return e._index=this._index,e},i.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},i}();var Jr=function(){function i(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=_t.rangeLength(e,t,n)}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._start,this._stop,this._step);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},i}(),_t;(function(i){function e(t,n,r){return r===0?1/0:t>n&&r>0||t<n&&r<0?0:Math.ceil((n-t)/r)}i.rangeLength=e})(_t||(_t={}));function It(i,e,t){var n=0,r=pe(i),o=r.next();if(o===void 0&&t===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(o===void 0)return t;var s=r.next();if(s===void 0&&t===void 0)return o;if(s===void 0)return e(t,o,n++);var a;t===void 0?a=e(o,s,n++):a=e(e(t,o,n++),s,n++);for(var d;(d=r.next())!==void 0;)a=e(a,d,n++);return a}function dt(i){return new gi(i,1)}var gi=function(){function i(e,t){this._value=e,this._count=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._value,this._count)},i.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},i}();function ut(i){var e;return typeof i.retro=="function"?e=i.retro():e=new bi(i),e}var bi=function(){function i(e){this._source=e,this._index=e.length-1}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},i}();var Zr=function(){function i(e,t){this._source=e,this._step=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.clone(),this._step)},i.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e},i}(),Vt;(function(i){function e(s,a,d){d===void 0&&(d=0);for(var g=new Array(a.length),_=0,M=d,x=a.length;_<x;++_,++M){if(M=s.indexOf(a[_],M),M===-1)return null;g[_]=M}return g}i.findIndices=e;function t(s,a,d){d===void 0&&(d=0);var g=e(s,a,d);if(!g)return null;for(var _=0,M=0,x=g.length;M<x;++M){var b=g[M]-d;_+=b*b}return{score:_,indices:g}}i.matchSumOfSquares=t;function n(s,a,d){d===void 0&&(d=0);var g=e(s,a,d);if(!g)return null;for(var _=0,M=d-1,x=0,b=g.length;x<b;++x){var c=g[x];_+=c-M-1,M=c}return{score:_,indices:g}}i.matchSumOfDeltas=n;function r(s,a,d){for(var g=[],_=0,M=0,x=a.length;_<x;){for(var b=a[_],c=a[_];++_<x&&a[_]===c+1;)c++;M<b&&g.push(s.slice(M,b)),b<c+1&&g.push(d(s.slice(b,c+1))),M=c+1}return M<s.length&&g.push(s.slice(M)),g}i.highlight=r;function o(s,a){return s<a?-1:s>a?1:0}i.cmp=o})(Vt||(Vt={}));var Qr=function(){function i(e,t){this._source=e,this._count=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.clone(),this._count)},i.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},i}();var eo=function(){function i(e){this._source=e}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.map(function(e){return e.clone()}))},i.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var r=this._source[t].next();if(r===void 0)return;e[t]=r}return e},i}();var qt=function(){function i(e){this._root=new q.LeafNode,this.cmp=e}return Object.defineProperty(i.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){var e=q.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var e=q.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),i.prototype.iter=function(){return q.iterItems(this._root)},i.prototype.retro=function(){return q.retroItems(this._root)},i.prototype.slice=function(e,t){return q.sliceItems(this._root,e,t)},i.prototype.retroSlice=function(e,t){return q.retroSliceItems(this._root,e,t)},i.prototype.at=function(e){return q.itemAt(this._root,e)},i.prototype.has=function(e,t){return q.hasItem(this._root,e,t)},i.prototype.indexOf=function(e,t){return q.indexOf(this._root,e,t)},i.prototype.get=function(e,t){return q.getItem(this._root,e,t)},i.prototype.assign=function(e){this.clear(),this.update(e)},i.prototype.insert=function(e){var t=q.insertItem(this._root,e,this.cmp);return this._root=q.maybeSplitRoot(this._root),t},i.prototype.update=function(e){var t=this;H(e,function(n){t.insert(n)})},i.prototype.delete=function(e,t){var n=q.deleteItem(this._root,e,t);return this._root=q.maybeExtractRoot(this._root),n},i.prototype.remove=function(e){var t=q.removeItem(this._root,e);return this._root=q.maybeExtractRoot(this._root),t},i.prototype.clear=function(){q.clear(this._root),this._root=new q.LeafNode},i}();(function(i){function e(t,n){var r=new i(n);return r.assign(t),r}i.from=e})(qt||(qt={}));var q;(function(i){var e=function(){function h(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(h.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),h}();i.BranchNode=e;var t=function(){function h(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(h.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),h}();i.LeafNode=t;function n(h){for(;h.type===0;)h=h.children[0];return h}i.firstLeaf=n;function r(h){for(;h.type===0;)h=h.children[h.children.length-1];return h}i.lastLeaf=r;function o(h){var L=n(h);return new E(L,0,-1)}i.iterItems=o;function s(h){var L=r(h);return new S(L,L.size-1,-1)}i.retroItems=s;function a(h,L,D){L===void 0?L=0:L<0?L=Math.max(0,L+h.size):L=Math.min(L,h.size),D===void 0?D=h.size:D<0?D=Math.max(0,D+h.size):D=Math.min(D,h.size);var R=Math.max(0,D-L);if(R===0)return de();for(;h.type===0;){var P=v(h.sizes,L);P>0&&(L-=h.sizes[P-1]),h=h.children[P]}return new E(h,L,R)}i.sliceItems=a;function d(h,L,D){L===void 0?L=h.size-1:L<0?L=Math.max(-1,L+h.size):L=Math.min(L,h.size-1),D===void 0?D=-1:D<0?D=Math.max(-1,D+h.size):D=Math.min(D,h.size-1);var R=Math.max(0,L-D);if(R===0)return de();for(;h.type===0;){var P=v(h.sizes,L);P>0&&(L-=h.sizes[P-1]),h=h.children[P]}return new S(h,L,R)}i.retroSliceItems=d;function g(h,L){if(L<0&&(L+=h.size),!(L<0||L>=h.size)){for(;h.type===0;){var D=v(h.sizes,L);D>0&&(L-=h.sizes[D-1]),h=h.children[D]}return h.items[L]}}i.itemAt=g;function _(h,L,D){for(;h.type===0;){var R=T(h.items,L,D);h=h.children[R]}var P=u(h.items,L,D);return P>=0}i.hasItem=_;function M(h,L,D){for(var R=0;h.type===0;){var P=T(h.items,L,D);P>0&&(R+=h.sizes[P-1]),h=h.children[P]}var K=u(h.items,L,D);return K>=0?R+K:-R+K}i.indexOf=M;function x(h,L,D){for(;h.type===0;){var R=T(h.items,L,D);h=h.children[R]}var P=u(h.items,L,D);return P>=0?h.items[P]:void 0}i.getItem=x;function b(h,L,D){if(h.type===1){var R=u(h.items,L,D),P;return R>=0?(P=h.items[R],h.items[R]=L):(P=void 0,z.insert(h.items,-R-1,L)),P}var K=T(h.items,L,D),G=h.children[K],ce=G.size,Y=b(G,L,D),J=G.size;if(h.items[K]=G.items[0],ce===J)return Y;if(G.width>I){var re=m(G);z.insert(h.children,K+1,re),z.insert(h.items,K+1,re.items[0])}return l(h,K),Y}i.insertItem=b;function c(h,L,D){if(h.type===1){var R=u(h.items,L,D);return R<0?void 0:z.removeAt(h.items,R)}var P=T(h.items,L,D),K=h.children[P],G=K.size,ce=c(K,L,D),Y=K.size;return G===Y||(h.items[P]=K.items[0],K.width<A&&(P=k(h,P)),l(h,P)),ce}i.deleteItem=c;function p(h,L){if(L<0&&(L+=h.size),!(L<0||L>=h.size)){if(h.type===1)return z.removeAt(h.items,L);var D=v(h.sizes,L);D>0&&(L-=h.sizes[D]);var R=h.children[D],P=p(R,L);return h.items[D]=R.items[0],R.width<A&&(D=k(h,D)),l(h,D),P}}i.removeItem=p;function f(h){h.type===0?(H(h.children,f),h.children.length=0,h.sizes.length=0,h.items.length=0):(h.items.length=0,h.next=null,h.prev=null)}i.clear=f;function w(h){if(h.width<=I)return h;var L=new e,D=m(h);return L.sizes[0]=h.size,L.sizes[1]=h.size+D.size,L.children[0]=h,L.children[1]=D,L.items[0]=h.items[0],L.items[1]=D.items[0],L}i.maybeSplitRoot=w;function y(h){if(h.type===1||h.children.length>1)return h;var L=h.children.pop();return f(h),L}i.maybeExtractRoot=y;var I=32,A=I>>1,E=function(){function h(L,D,R){this._node=L,this._index=D,this._count=R}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._node,this._index,this._count)},h.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},h}(),S=function(){function h(L,D,R){this._node=L,this._index=D,this._count=R}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._node,this._index,this._count)},h.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},h}();function v(h,L){for(var D=h.length,R=0;R<D;++R)if(h[R]>L)return R;return D-1}function T(h,L,D){for(var R=h.length,P=1;P<R;++P)if(D(h[P],L)>0)return P-1;return R-1}function u(h,L,D){for(var R=h.length,P=0;P<R;++P){var K=D(h[P],L);if(K===0)return P;if(K>0)return-P-1}return-R-1}function l(h,L){for(var D=h.sizes,R=h.children,P=L>0?D[L-1]:0,K=R.length;L<K;++L)P=D[L]=P+R[L].size;D.length=R.length}function m(h){if(h.type===1){for(var L=new t,D=h.items,R=L.items,P=A,K=D.length;P<K;++P)R.push(D[P]);return D.length=A,h.next&&(h.next.prev=L),L.next=h.next,L.prev=h,h.next=L,L}for(var G=new e,ce=h.children,Y=G.children,P=A,K=ce.length;P<K;++P)Y.push(ce[P]);ce.length=A;for(var J=h.items,re=G.items,P=A,K=J.length;P<K;++P)re.push(J[P]);return J.length=A,l(h,A),l(G,0),G}function k(h,L){var D,R,P,K,G,ce,Y=h.children[L],J=L===0?h.children[L+1]:h.children[L-1],re=L===0,Ie=Y.type===1,Te=J.width>A;if(Ie&&Te&&re){var F=Y,N=J;return F.items.push(N.items.shift()),h.items[L+1]=N.items[0],L}if(Ie&&Te&&!re){var F=Y,N=J;return F.items.unshift(N.items.pop()),h.items[L]=F.items[0],L-1}if(Ie&&!Te&&re){var F=Y,N=J;return(D=N.items).unshift.apply(D,F.items),z.removeAt(h.children,L),z.removeAt(h.items,L+1),F.prev&&(F.prev.next=N),N.prev=F.prev,f(F),L}if(Ie&&!Te&&!re){var F=Y,N=J;return(R=N.items).push.apply(R,F.items),z.removeAt(h.children,L),z.removeAt(h.items,L),F.next&&(F.next.prev=N),N.next=F.next,f(F),L-1}if(!Ie&&Te&&re){var F=Y,N=J;return F.children.push(N.children.shift()),F.items.push(N.items.shift()),h.items[L+1]=N.items[0],l(F,F.width-1),l(N,0),L}if(!Ie&&Te&&!re){var F=Y,N=J;return F.children.unshift(N.children.pop()),F.items.unshift(N.items.pop()),h.items[L]=F.items[0],l(F,0),l(N,N.width-1),L-1}if(!Ie&&!Te&&re){var F=Y,N=J;return(P=N.children).unshift.apply(P,F.children),(K=N.items).unshift.apply(K,F.items),z.removeAt(h.children,L),z.removeAt(h.items,L+1),l(N,0),F.children.length=0,f(F),L}if(!Ie&&!Te&&!re){var F=Y,N=J;return(G=N.children).push.apply(G,F.children),(ce=N.items).push.apply(ce,F.items),z.removeAt(h.children,L),z.removeAt(h.items,L),l(N,0),F.children.length=0,f(F),L-1}throw"unreachable"}})(q||(q={}));var Ke=function(){function i(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(i.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),i.prototype.iter=function(){return new i.ForwardValueIterator(this._first)},i.prototype.retro=function(){return new i.RetroValueIterator(this._last)},i.prototype.nodes=function(){return new i.ForwardNodeIterator(this._first)},i.prototype.retroNodes=function(){return new i.RetroNodeIterator(this._last)},i.prototype.assign=function(e){var t=this;this.clear(),H(e,function(n){t.addLast(n)})},i.prototype.push=function(e){this.addLast(e)},i.prototype.pop=function(){return this.removeLast()},i.prototype.shift=function(e){this.addFirst(e)},i.prototype.unshift=function(){return this.removeFirst()},i.prototype.addFirst=function(e){var t=new we.LinkedListNode(this,e);return this._first?(t.next=this._first,this._first.prev=t,this._first=t):(this._first=t,this._last=t),this._size++,t},i.prototype.addLast=function(e){var t=new we.LinkedListNode(this,e);return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,t},i.prototype.insertBefore=function(e,t){if(!t||t===this._first)return this.addFirst(e);if(!(t instanceof we.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");var n=new we.LinkedListNode(this,e),r=t,o=r.prev;return n.next=r,n.prev=o,r.prev=n,o.next=n,this._size++,n},i.prototype.insertAfter=function(e,t){if(!t||t===this._last)return this.addLast(e);if(!(t instanceof we.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");var n=new we.LinkedListNode(this,e),r=t,o=r.next;return n.next=o,n.prev=r,r.next=n,o.prev=n,this._size++,n},i.prototype.removeFirst=function(){var e=this._first;if(!!e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},i.prototype.removeLast=function(){var e=this._last;if(!!e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},i.prototype.removeNode=function(e){if(!(e instanceof we.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");var t=e;t===this._first&&t===this._last?(this._first=null,this._last=null):t===this._first?(this._first=t.next,this._first.prev=null):t===this._last?(this._last=t.prev,this._last.next=null):(t.next.prev=t.prev,t.prev.next=t.next),t.list=null,t.next=null,t.prev=null,this._size--},i.prototype.clear=function(){for(var e=this._first;e;){var t=e.next;e.list=null,e.prev=null,e.next=null,e=t}this._first=null,this._last=null,this._size=0},i}();(function(i){function e(s){var a=new i;return a.assign(s),a}i.from=e;var t=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.next,a.value}},s}();i.ForwardValueIterator=t;var n=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.prev,a.value}},s}();i.RetroValueIterator=n;var r=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.next,a}},s}();i.ForwardNodeIterator=r;var o=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.prev,a}},s}();i.RetroNodeIterator=o})(Ke||(Ke={}));var we;(function(i){var e=function(){function t(n,r){this.list=null,this.next=null,this.prev=null,this.list=n,this.value=r}return t}();i.LinkedListNode=e})(we||(we={}));var Tt=function(i,e){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Tt(i,e)};function vi(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tt(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ue=function(){function i(e){this.type=e}return Object.defineProperty(i.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.conflate=function(e){return!1},i}(),Pe=function(i){vi(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.conflate=function(t){return!0},e}(ue),O;(function(i){function e(u,l){var m=_.get(u);if(!m||m.length===0){y(u,l);return}var k=st(ut(m),function(h){return h?w(h,u,l):!0});k&&y(u,l)}i.sendMessage=e;function t(u,l){if(!l.isConflatable){I(u,l);return}var m=lt(g,function(k){return k.handler!==u||!k.msg||k.msg.type!==l.type||!k.msg.isConflatable?!1:k.msg.conflate(l)});m||I(u,l)}i.postMessage=t;function n(u,l){var m=_.get(u);m&&m.indexOf(l)!==-1||(m?m.push(l):_.set(u,[l]))}i.installMessageHook=n;function r(u,l){var m=_.get(u);if(!!m){var k=m.indexOf(l);k!==-1&&(m[k]=null,E(m))}}i.removeMessageHook=r;function o(u){var l=_.get(u);l&&l.length>0&&(z.fill(l,null),E(l)),H(g,function(m){m.handler===u&&(m.handler=null,m.msg=null)})}i.clearData=o;function s(){c||b===0||(f(b),c=!0,A(),c=!1)}i.flush=s;function a(){return x}i.getExceptionHandler=a;function d(u){var l=x;return x=u,l}i.setExceptionHandler=d;var g=new Ke,_=new WeakMap,M=new Set,x=function(u){console.error(u)},b=0,c=!1,p=function(){var u=typeof requestAnimationFrame=="function";return u?requestAnimationFrame:setImmediate}(),f=function(){var u=typeof cancelAnimationFrame=="function";return u?cancelAnimationFrame:clearImmediate}();function w(u,l,m){var k=!0;try{typeof u=="function"?k=u(l,m):k=u.messageHook(l,m)}catch(h){x(h)}return k}function y(u,l){try{u.processMessage(l)}catch(m){x(m)}}function I(u,l){g.addLast({handler:u,msg:l}),b===0&&(b=p(A))}function A(){if(b=0,!g.isEmpty){var u={handler:null,msg:null};for(g.addLast(u);;){var l=g.removeFirst();if(l===u)return;l.handler&&l.msg&&e(l.handler,l.msg)}}}function E(u){M.size===0&&p(S),M.add(u)}function S(){M.forEach(v),M.clear()}function v(u){z.removeAllWhere(u,T)}function T(u){return u===null}})(O||(O={}));var Ut;(function(i){function e(t){var n=document.body,r=function(o){o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",t),n.removeEventListener("copy",r,!0)};n.addEventListener("copy",r,!0),document.execCommand("copy")}i.copyText=e})(Ut||(Ut={}));var j;(function(i){function e(o){var s=window.getComputedStyle(o),a=parseFloat(s.borderTopWidth)||0,d=parseFloat(s.borderLeftWidth)||0,g=parseFloat(s.borderRightWidth)||0,_=parseFloat(s.borderBottomWidth)||0,M=parseFloat(s.paddingTop)||0,x=parseFloat(s.paddingLeft)||0,b=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingBottom)||0,p=d+x+b+g,f=a+M+c+_;return{borderTop:a,borderLeft:d,borderRight:g,borderBottom:_,paddingTop:M,paddingLeft:x,paddingRight:b,paddingBottom:c,horizontalSum:p,verticalSum:f}}i.boxSizing=e;function t(o){var s=window.getComputedStyle(o),a=parseFloat(s.minWidth)||0,d=parseFloat(s.minHeight)||0,g=parseFloat(s.maxWidth)||1/0,_=parseFloat(s.maxHeight)||1/0;return g=Math.max(a,g),_=Math.max(d,_),{minWidth:a,minHeight:d,maxWidth:g,maxHeight:_}}i.sizeLimits=t;function n(o,s,a){var d=o.getBoundingClientRect();return s>=d.left&&s<d.right&&a>=d.top&&a<d.bottom}i.hitTest=n;function r(o,s){var a=o.getBoundingClientRect(),d=s.getBoundingClientRect();if(!(d.top<=a.top&&d.bottom>=a.bottom)){if(d.top<a.top&&d.height<=a.height){o.scrollTop-=a.top-d.top;return}if(d.bottom>a.bottom&&d.height>=a.height){o.scrollTop-=a.top-d.top;return}if(d.top<a.top&&d.height>a.height){o.scrollTop-=a.bottom-d.bottom;return}if(d.bottom>a.bottom&&d.height<a.height){o.scrollTop-=a.bottom-d.bottom;return}}}i.scrollIntoViewIfNeeded=r})(j||(j={}));var V;(function(i){i.IS_MAC=!!navigator.platform.match(/Mac/i),i.IS_WIN=!!navigator.platform.match(/Win/i),i.IS_IE=/Trident/.test(navigator.userAgent),i.IS_EDGE=/Edge/.test(navigator.userAgent);function e(t){return i.IS_MAC?t.metaKey:t.ctrlKey}i.accelKey=e})(V||(V={}));var ve;(function(i){function e(r){if(r in fe.specificityCache)return fe.specificityCache[r];var o=fe.calculateSingle(r);return fe.specificityCache[r]=o}i.calculateSpecificity=e;function t(r){if(r in fe.validityCache)return fe.validityCache[r];var o=!0;try{fe.testElem.querySelector(r)}catch{o=!1}return fe.validityCache[r]=o}i.isValid=t;function n(r,o){return fe.protoMatchFunc.call(r,o)}i.matches=n})(ve||(ve={}));var fe;(function(i){i.specificityCache=Object.create(null),i.validityCache=Object.create(null),i.testElem=document.createElement("div"),i.protoMatchFunc=function(){var _=Element.prototype;return _.matches||_.matchesSelector||_.mozMatchesSelector||_.msMatchesSelector||_.oMatchesSelector||_.webkitMatchesSelector||function(M){var x=this,b=x.ownerDocument?x.ownerDocument.querySelectorAll(M):[];return Array.prototype.indexOf.call(b,x)!==-1}}();function e(_){_=_.split(",",1)[0];var M=0,x=0,b=0;function c(p){var f=_.match(p);return f===null?!1:(_=_.slice(f[0].length),!0)}for(_=_.replace(g," $1 ");_.length>0;){if(c(t)){M++;continue}if(c(n)){x++;continue}if(c(r)){x++;continue}if(c(s)){b++;continue}if(c(a)){x++;continue}if(c(o)){b++;continue}if(!c(d))return 0}return M=Math.min(M,255),x=Math.min(x,255),b=Math.min(b,255),M<<16|x<<8|b}i.calculateSingle=e;var t=/^#[^\s\+>~#\.\[:]+/,n=/^\.[^\s\+>~#\.\[:]+/,r=/^\[[^\]]+\]/,o=/^[^\s\+>~#\.\[:]+/,s=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,a=/^:[^\s\+>~#\.\[:]+/,d=/^[\s\+>~\*]+/,g=/:not\(([^\)]+)\)/g})(fe||(fe={}));var te=function(){function i(e){this._pid=He.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return i.prototype.get=function(e){var t,n=He.ensureMap(e);return this._pid in n?t=n[this._pid]:t=n[this._pid]=this._createValue(e),t},i.prototype.set=function(e,t){var n,r=He.ensureMap(e);this._pid in r?n=r[this._pid]:n=r[this._pid]=this._createValue(e);var o=this._coerceValue(e,t);this._maybeNotify(e,n,r[this._pid]=o)},i.prototype.coerce=function(e){var t,n=He.ensureMap(e);this._pid in n?t=n[this._pid]:t=n[this._pid]=this._createValue(e);var r=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=r)},i.prototype._createValue=function(e){var t=this._create;return t(e)},i.prototype._coerceValue=function(e,t){var n=this._coerce;return n?n(e,t):t},i.prototype._compareValue=function(e,t){var n=this._compare;return n?n(e,t):e===t},i.prototype._maybeNotify=function(e,t,n){var r=this._changed;r&&!this._compareValue(t,n)&&r(e,t,n)},i}();(function(i){function e(t){He.ownerData.delete(t)}i.clearData=e})(te||(te={}));var He;(function(i){i.ownerData=new WeakMap,i.nextPID=function(){var t=0;return function(){var n=Math.random(),r=(""+n).slice(2);return"pid-"+r+"-"+t++}}();function e(t){var n=i.ownerData.get(t);return n||(n=Object.create(null),i.ownerData.set(t,n),n)}i.ensureMap=e})(He||(He={}));var W=function(){function i(e){this._blockedCount=0,this.sender=e}return i.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},i.prototype.connect=function(e,t){return oe.connect(this,e,t)},i.prototype.disconnect=function(e,t){return oe.disconnect(this,e,t)},i.prototype.emit=function(e){this._blockedCount||oe.emit(this,e)},i}();(function(i){function e(g,_){var M=oe.blockedProperty;M.set(g,M.get(g)+1);try{_()}finally{M.set(g,M.get(g)-1)}}i.blockAll=e;function t(g,_){oe.disconnectBetween(g,_)}i.disconnectBetween=t;function n(g){oe.disconnectSender(g)}i.disconnectSender=n;function r(g){oe.disconnectReceiver(g)}i.disconnectReceiver=r;function o(g){oe.disconnectAll(g)}i.disconnectAll=o;function s(g){oe.disconnectAll(g)}i.clearData=s;function a(){return oe.exceptionHandler}i.getExceptionHandler=a;function d(g){var _=oe.exceptionHandler;return oe.exceptionHandler=g,_}i.setExceptionHandler=d})(W||(W={}));var oe;(function(i){i.exceptionHandler=function(y){console.error(y)};function e(y,I,A){A=A||void 0;var E=d.get(y.sender);if(E||(E=[],d.set(y.sender,E)),x(E,y,I,A))return!1;var S=A||I,v=g.get(S);v||(v=[],g.set(S,v));var T={signal:y,slot:I,thisArg:A};return E.push(T),v.push(T),!0}i.connect=e;function t(y,I,A){A=A||void 0;var E=d.get(y.sender);if(!E||E.length===0)return!1;var S=x(E,y,I,A);if(!S)return!1;var v=A||I,T=g.get(v);return S.signal=null,c(E),c(T),!0}i.disconnect=t;function n(y,I){var A=d.get(y);if(!(!A||A.length===0)){var E=g.get(I);!E||E.length===0||(H(E,function(S){!S.signal||S.signal.sender===y&&(S.signal=null)}),c(A),c(E))}}i.disconnectBetween=n;function r(y){var I=d.get(y);!I||I.length===0||(H(I,function(A){if(!!A.signal){var E=A.thisArg||A.slot;A.signal=null,c(g.get(E))}}),c(I))}i.disconnectSender=r;function o(y){var I=g.get(y);!I||I.length===0||(H(I,function(A){if(!!A.signal){var E=A.signal.sender;A.signal=null,c(d.get(E))}}),c(I))}i.disconnectReceiver=o;function s(y){r(y),o(y)}i.disconnectAll=s;function a(y,I){if(!(i.blockedProperty.get(y.sender)>0)){var A=d.get(y.sender);if(!(!A||A.length===0))for(var E=0,S=A.length;E<S;++E){var v=A[E];v.signal===y&&b(v,I)}}}i.emit=a;var d=new WeakMap,g=new WeakMap,_=new Set,M=function(){var y=typeof requestAnimationFrame=="function";return y?requestAnimationFrame:setImmediate}();function x(y,I,A,E){return Ze(y,function(S){return S.signal===I&&S.slot===A&&S.thisArg===E})}function b(y,I){var A=y.signal,E=y.slot,S=y.thisArg;try{E.call(S,A.sender,I)}catch(v){i.exceptionHandler(v)}}function c(y){_.size===0&&M(p),_.add(y)}function p(){_.forEach(f),_.clear()}function f(y){z.removeAllWhere(y,w)}function w(y){return y.signal===null}i.blockedProperty=new te({name:"blocked",create:function(){return 0}})})(oe||(oe={}));var We=class{constructor(e){this.owner=e.owner,e.label!==void 0&&(this._label=e.label),e.mnemonic!==void 0&&(this._mnemonic=e.mnemonic),e.icon!==void 0?typeof e.icon=="string"?(this._icon=null,this._iconClass=e.icon):this._icon=e.icon:this._icon=null,e.iconClass!==void 0&&(this._iconClass=e.iconClass),e.iconLabel!==void 0&&(this._iconLabel=e.iconLabel),e.iconRenderer!==void 0&&(this._icon=e.iconRenderer),e.caption!==void 0&&(this._caption=e.caption),e.className!==void 0&&(this._className=e.className),e.closable!==void 0&&(this._closable=e.closable),this._dataset=e.dataset||{}}get changed(){return this._changed}owner;get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))}get icon(){return this._icon===null?this.iconClass:this._icon}set icon(e){if(typeof e=="string")this._icon=null,this.iconClass=e;else{if(this._icon===e)return;this._icon=e,this._changed.emit(void 0)}}get iconClass(){return this._iconClass}set iconClass(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))}get iconRenderer(){return this._icon||void 0}set iconRenderer(e){this.icon=e}get caption(){return this._caption}set caption(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))}get className(){return this._className}set className(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))}get closable(){return this._closable}set closable(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,W.clearData(this))}_label="";_caption="";_mnemonic=-1;_icon;_iconClass="";_iconLabel="";_className="";_closable=!1;_dataset;_changed=new W(this);_isDisposed=!1};var B=class{constructor(e={}){this.node=wt.createNode(e),this.addClass("lm-Widget"),this.addClass("p-Widget")}dispose(){this.isDisposed||(this.setFlag(B.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&B.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),W.clearData(this),O.clearData(this),te.clearData(this))}get disposed(){return this._disposed}node;get isDisposed(){return this.testFlag(B.Flag.IsDisposed)}get isAttached(){return this.testFlag(B.Flag.IsAttached)}get isHidden(){return this.testFlag(B.Flag.IsHidden)}get isVisible(){return this.testFlag(B.Flag.IsVisible)}get title(){return wt.titleProperty.get(this)}get id(){return this.node.id}set id(e){this.node.id=e}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this.isHidden&&this._toggleHidden(!1),e==B.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=e,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let t=new B.ChildMessage("child-removed",this);O.sendMessage(this._parent,t)}if(this._parent=e,this._parent&&!this._parent.isDisposed){let t=new B.ChildMessage("child-added",this);O.sendMessage(this._parent,t)}this.isDisposed||O.sendMessage(this,B.Msg.ParentChanged)}}get layout(){return this._layout}set layout(e){if(this._layout!==e){if(this.testFlag(B.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}}children(){return this._layout?this._layout.iter():de()}contains(e){for(let t=e;t;t=t._parent)if(t===this)return!0;return!1}hasClass(e){return this.node.classList.contains(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e,t){return t===!0?(this.node.classList.add(e),!0):t===!1?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)}update(){O.postMessage(this,B.Msg.UpdateRequest)}fit(){O.postMessage(this,B.Msg.FitRequest)}activate(){O.postMessage(this,B.Msg.ActivateRequest)}close(){O.sendMessage(this,B.Msg.CloseRequest)}show(){if(!!this.testFlag(B.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&O.sendMessage(this,B.Msg.BeforeShow),this.clearFlag(B.Flag.IsHidden),this.node.removeAttribute("aria-hidden"),this._toggleHidden(!1),this.isAttached&&(!this.parent||this.parent.isVisible)&&O.sendMessage(this,B.Msg.AfterShow),this.parent)){let e=new B.ChildMessage("child-shown",this);O.sendMessage(this.parent,e)}}hide(){if(!this.testFlag(B.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&O.sendMessage(this,B.Msg.BeforeHide),this.setFlag(B.Flag.IsHidden),this.node.setAttribute("aria-hidden","true"),this._toggleHidden(!0),this.isAttached&&(!this.parent||this.parent.isVisible)&&O.sendMessage(this,B.Msg.AfterHide),this.parent)){let e=new B.ChildMessage("child-hidden",this);O.sendMessage(this.parent,e)}}setHidden(e){e?this.hide():this.show()}testFlag(e){return(this._flags&e)!==0}setFlag(e){this._flags|=e}clearFlag(e){this._flags&=~e}processMessage(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(B.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(B.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(B.Flag.IsVisible),this.setFlag(B.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(B.Flag.IsVisible),this.clearFlag(B.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e);break}}notifyLayout(e){this._layout&&this._layout.processParentMessage(e)}onCloseRequest(e){this.parent?this.parent=null:this.isAttached&&B.detach(this)}onResize(e){}onUpdateRequest(e){}onFitRequest(e){}onActivateRequest(e){}onBeforeShow(e){}onAfterShow(e){}onBeforeHide(e){}onAfterHide(e){}onBeforeAttach(e){}onAfterAttach(e){}onBeforeDetach(e){}onAfterDetach(e){}onChildAdded(e){}onChildRemoved(e){}_toggleHidden(e){if(e)switch(this._hiddenMode){case B.HiddenMode.Display:this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden");break;case B.HiddenMode.Scale:this.node.style.transform="scale(0)";break;case B.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1";break}else switch(this._hiddenMode){case B.HiddenMode.Display:this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden");break;case B.HiddenMode.Scale:this.node.style.transform="";break;case B.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex="";break}}_flags=0;_layout=null;_parent=null;_disposed=new W(this);_hiddenMode=B.HiddenMode.Display};(a=>{let i;(M=>(M[M.Display=0]="Display",M[M.Scale=1]="Scale",M[M.ContentVisibility=2]="ContentVisibility"))(i=a.HiddenMode||={});let e;(b=>(b[b.IsDisposed=1]="IsDisposed",b[b.IsAttached=2]="IsAttached",b[b.IsHidden=4]="IsHidden",b[b.IsVisible=8]="IsVisible",b[b.DisallowLayout=16]="DisallowLayout"))(e=a.Flag||={});let t;(E=>(E.BeforeShow=new ue("before-show"),E.AfterShow=new ue("after-show"),E.BeforeHide=new ue("before-hide"),E.AfterHide=new ue("after-hide"),E.BeforeAttach=new ue("before-attach"),E.AfterAttach=new ue("after-attach"),E.BeforeDetach=new ue("before-detach"),E.AfterDetach=new ue("after-detach"),E.ParentChanged=new ue("parent-changed"),E.UpdateRequest=new Pe("update-request"),E.FitRequest=new Pe("fit-request"),E.ActivateRequest=new Pe("activate-request"),E.CloseRequest=new Pe("close-request")))(t=a.Msg||={});class n extends ue{constructor(g,_){super(g),this.child=_}child}a.ChildMessage=n;class r extends ue{constructor(g,_){super("resize"),this.width=g,this.height=_}width;height}a.ResizeMessage=r,(g=>g.UnknownSize=new g(-1,-1))(r=a.ResizeMessage||={});function o(d,g,_=null){if(d.parent)throw new Error("Cannot attach a child widget.");if(d.isAttached||d.node.isConnected)throw new Error("Widget is already attached.");if(!g.isConnected)throw new Error("Host is not attached.");O.sendMessage(d,a.Msg.BeforeAttach),g.insertBefore(d.node,_),O.sendMessage(d,a.Msg.AfterAttach)}a.attach=o;function s(d){if(d.parent)throw new Error("Cannot detach a child widget.");if(!d.isAttached||!d.node.isConnected)throw new Error("Widget is not attached.");O.sendMessage(d,a.Msg.BeforeDetach),d.node.parentNode.removeChild(d.node),O.sendMessage(d,a.Msg.AfterDetach)}a.detach=s})(B||={});var wt;(t=>{t.titleProperty=new te({name:"title",create:n=>new We({owner:n})});function e(n){return n.node||document.createElement(n.tag||"div")}t.createNode=e})(wt||={});var ye=class{constructor(e={}){this._fitPolicy=e.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,W.clearData(this),te.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){let t=this._parent.node.style;t.minWidth="",t.minHeight="",t.maxWidth="",t.maxHeight="",this._parent.fit()}}processParentMessage(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e);break}}init(){H(this,e=>{e.parent=this.parent})}onResize(e){H(this,t=>{O.sendMessage(t,B.ResizeMessage.UnknownSize)})}onUpdateRequest(e){H(this,t=>{O.sendMessage(t,B.ResizeMessage.UnknownSize)})}onBeforeAttach(e){H(this,t=>{O.sendMessage(t,e)})}onAfterAttach(e){H(this,t=>{O.sendMessage(t,e)})}onBeforeDetach(e){H(this,t=>{O.sendMessage(t,e)})}onAfterDetach(e){H(this,t=>{O.sendMessage(t,e)})}onBeforeShow(e){H(this,t=>{t.isHidden||O.sendMessage(t,e)})}onAfterShow(e){H(this,t=>{t.isHidden||O.sendMessage(t,e)})}onBeforeHide(e){H(this,t=>{t.isHidden||O.sendMessage(t,e)})}onAfterHide(e){H(this,t=>{t.isHidden||O.sendMessage(t,e)})}onChildRemoved(e){this.removeWidget(e.child)}onFitRequest(e){}onChildShown(e){}onChildHidden(e){}_disposed=!1;_fitPolicy;_parent=null};(r=>{function i(o){return Qe.horizontalAlignmentProperty.get(o)}r.getHorizontalAlignment=i;function e(o,s){Qe.horizontalAlignmentProperty.set(o,s)}r.setHorizontalAlignment=e;function t(o){return Qe.verticalAlignmentProperty.get(o)}r.getVerticalAlignment=t;function n(o,s){Qe.verticalAlignmentProperty.set(o,s)}r.setVerticalAlignment=n})(ye||={});var Ve=class{constructor(e){this.widget=e,this.widget.node.style.position="absolute"}dispose(){if(this._disposed)return;this._disposed=!0;let e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height=""}widget;get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let e=j.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight}update(e,t,n,r){let o=Math.max(this._minWidth,Math.min(n,this._maxWidth)),s=Math.max(this._minHeight,Math.min(r,this._maxHeight));if(o<n)switch(ye.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(n-o)/2;break;case"right":e+=n-o;break;default:throw"unreachable"}if(s<r)switch(ye.getVerticalAlignment(this.widget)){case"top":break;case"center":t+=(r-s)/2;break;case"bottom":t+=r-s;break;default:throw"unreachable"}let a=!1,d=this.widget.node.style;if(this._top!==t&&(this._top=t,d.top=`${t}px`),this._left!==e&&(this._left=e,d.left=`${e}px`),this._width!==o&&(a=!0,this._width=o,d.width=`${o}px`),this._height!==s&&(a=!0,this._height=s,d.height=`${s}px`),a){let g=new B.ResizeMessage(o,s);O.sendMessage(this.widget,g)}}_top=NaN;_left=NaN;_width=NaN;_height=NaN;_minWidth=0;_minHeight=0;_maxWidth=1/0;_maxHeight=1/0;_disposed=!1},Qe;(n=>{n.horizontalAlignmentProperty=new te({name:"horizontalAlignment",create:()=>"center",changed:t}),n.verticalAlignmentProperty=new te({name:"verticalAlignment",create:()=>"top",changed:t});function t(r){r.parent&&r.parent.layout&&r.parent.update()}})(Qe||={});var je=class extends ye{dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}iter(){return pe(this._widgets)}addWidget(e){this.insertWidget(this._widgets.length,e)}insertWidget(e,t){t.parent=this.parent;let n=this._widgets.indexOf(t),r=Math.max(0,Math.min(e,this._widgets.length));if(n===-1){z.insert(this._widgets,r,t),this.parent&&this.attachWidget(r,t);return}r===this._widgets.length&&r--,n!==r&&(z.move(this._widgets,n,r),this.parent&&this.moveWidget(n,r,t))}removeWidget(e){this.removeWidgetAt(this._widgets.indexOf(e))}removeWidgetAt(e){let t=z.removeAt(this._widgets,e);t&&this.parent&&this.detachWidget(e,t)}init(){super.init(),H(this,(e,t)=>{this.attachWidget(t,e)})}attachWidget(e,t){let n=this.parent.node.children[e];this.parent.isAttached&&O.sendMessage(t,B.Msg.BeforeAttach),this.parent.node.insertBefore(t.node,n),this.parent.isAttached&&O.sendMessage(t,B.Msg.AfterAttach)}moveWidget(e,t,n){this.parent.isAttached&&O.sendMessage(n,B.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&O.sendMessage(n,B.Msg.AfterDetach);let r=this.parent.node.children[t];this.parent.isAttached&&O.sendMessage(n,B.Msg.BeforeAttach),this.parent.node.insertBefore(n.node,r),this.parent.isAttached&&O.sendMessage(n,B.Msg.AfterAttach)}detachWidget(e,t){this.parent.isAttached&&O.sendMessage(t,B.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&O.sendMessage(t,B.Msg.AfterDetach)}_widgets=[]};var qe=class extends B{constructor(e={}){super(),this.addClass("lm-Panel"),this.addClass("p-Panel"),this.layout=$t.createLayout(e)}get widgets(){return this.layout.widgets}addWidget(e){this.layout.addWidget(e)}insertWidget(e,t){this.layout.insertWidget(e,t)}},$t;(e=>{function i(t){return t.layout||new je}e.createLayout=i})($t||={});var Mt=function(i,e){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Mt(i,e)};function Yt(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mt(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Me=function(){function i(e){this._fn=e}return Object.defineProperty(i.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){if(!!this._fn){var e=this._fn;this._fn=null,e()}},i}(),Uo=function(i){Yt(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._disposed=new W(t),t}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(i.prototype.dispose.call(this),this._disposed.emit(void 0),W.clearData(this))},e}(Me),kt=function(){function i(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(e){e.dispose()}),this._items.clear())},i.prototype.contains=function(e){return this._items.has(e)},i.prototype.add=function(e){this._items.add(e)},i.prototype.remove=function(e){this._items.delete(e)},i.prototype.clear=function(){this._items.clear()},i}();(function(i){function e(t){var n=new i;return H(t,function(r){n.add(r)}),n}i.from=e})(kt||(kt={}));var Gt=function(i){Yt(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._disposed=new W(t),t}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(i.prototype.dispose.call(this),this._disposed.emit(void 0),W.clearData(this))},e}(kt);(function(i){function e(t){var n=new i;return H(t,function(r){n.add(r)}),n}i.from=e})(Gt||(Gt={}));var ke=function(){function i(e){var t=this;this._onScrollFrame=function(){if(!!t._scrollTarget){var n=t._scrollTarget,r=n.element,o=n.edge,s=n.distance,a=Z.SCROLL_EDGE_SIZE-s,d=Math.pow(a/Z.SCROLL_EDGE_SIZE,2),g=Math.max(1,Math.round(d*Z.SCROLL_EDGE_SIZE));switch(o){case"top":r.scrollTop-=g;break;case"left":r.scrollLeft-=g;break;case"right":r.scrollLeft+=g;break;case"bottom":r.scrollTop+=g;break}requestAnimationFrame(t._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}return i.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var e=Z.createMouseEvent("pointerup",-1,-1);Z.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}},Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),i.prototype.start=function(e,t){var n=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,t),this._promise=new Promise(function(o,s){n._resolve=o});var r=Z.createMouseEvent("pointermove",e,t);return document.dispatchEvent(r),this._promise},i.prototype.handleEvent=function(e){switch(e.type){case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation();break}},i.prototype.moveDragImage=function(e,t){if(!!this.dragImage){var n=this.dragImage.style;n.top=t+"px",n.left=e+"px"}},i.prototype._evtMouseMove=function(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)},i.prototype._evtMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),e.button===0){if(this._updateCurrentTarget(e),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){Z.dispatchDragLeave(this,this._currentTarget,null,e),this._finalize("none");return}var t=Z.dispatchDrop(this,this._currentTarget,e);this._finalize(t)}},i.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this.dispose()},i.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},i.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},i.prototype._updateDragScroll=function(e){var t=Z.findScrollTarget(e);!this._scrollTarget&&!t||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=t)},i.prototype._updateCurrentTarget=function(e){var t=this._currentTarget,n=this._currentTarget,r=this._currentElement,o=this.document.elementFromPoint(e.clientX,e.clientY);this._currentElement=o,o!==r&&o!==n&&Z.dispatchDragExit(this,n,o,e),o!==r&&o!==n&&(n=Z.dispatchDragEnter(this,o,n,e)),n!==t&&(this._currentTarget=n,Z.dispatchDragLeave(this,t,n,e));var s=Z.dispatchDragOver(this,n,e);this._setDropAction(s)},i.prototype._attachDragImage=function(e,t){if(!!this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var n=this.dragImage.style;n.pointerEvents="none",n.position="fixed",n.top=t+"px",n.left=e+"px";var r=this.document instanceof Document?this.document.body:this.document.firstElementChild;r.appendChild(this.dragImage)}},i.prototype._detachDragImage=function(){if(!!this.dragImage){var e=this.dragImage.parentNode;!e||e.removeChild(this.dragImage)}},i.prototype._setDropAction=function(e){if(e=Z.validateAction(e,this.supportedActions),!(this._override&&this._dropAction===e))switch(e){case"none":this._dropAction=e,this._override=i.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=e,this._override=i.overrideCursor("copy",this.document);break;case"link":this._dropAction=e,this._override=i.overrideCursor("alias",this.document);break;case"move":this._dropAction=e,this._override=i.overrideCursor("move",this.document);break}},i.prototype._finalize=function(e){var t=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,t&&t(e)},i}();(function(i){function e(n,r){r===void 0&&(r=document);var o=++t,s=r instanceof Document?r.body:r.firstElementChild;return s.style.cursor=n,s.classList.add("lm-mod-override-cursor"),s.classList.add("p-mod-override-cursor"),new Me(function(){o===t&&(s.style.cursor="",s.classList.remove("lm-mod-override-cursor"),s.classList.remove("p-mod-override-cursor"))})}i.overrideCursor=e;var t=0})(ke||(ke={}));var Z;(function(i){i.SCROLL_EDGE_SIZE=20;function e(x,b){return g[x]&_[b]?x:"none"}i.validateAction=e;function t(x,b,c){var p=document.createEvent("MouseEvent");return p.initMouseEvent(x,!0,!0,window,0,0,0,b,c,!1,!1,!1,!1,0,null),p}i.createMouseEvent=t;function n(x){for(var b=x.clientX,c=x.clientY,p=document.elementFromPoint(b,c);p;p=p.parentElement){var f=p.hasAttribute("data-lm-dragscroll");if(f=f||p.hasAttribute("data-p-dragscroll"),!!f){var w=0,y=0;p===document.body&&(w=window.pageXOffset,y=window.pageYOffset);var I=p.getBoundingClientRect(),A=I.top+y,E=I.left+w,S=E+I.width,v=A+I.height;if(!(b<E||b>=S||c<A||c>=v)){var T=b-E+1,u=c-A+1,l=S-b,m=v-c,k=Math.min(T,u,l,m);if(!(k>i.SCROLL_EDGE_SIZE)){var h=void 0;switch(k){case m:h="bottom";break;case u:h="top";break;case l:h="right";break;case T:h="left";break;default:throw"unreachable"}var L=p.scrollWidth-p.clientWidth,D=p.scrollHeight-p.clientHeight,R=void 0;switch(h){case"top":R=D>0&&p.scrollTop>0;break;case"left":R=L>0&&p.scrollLeft>0;break;case"right":R=L>0&&p.scrollLeft<L;break;case"bottom":R=D>0&&p.scrollTop<D;break;default:throw"unreachable"}if(!!R)return{element:p,edge:h,distance:k}}}}}return null}i.findScrollTarget=n;function r(x,b,c,p){if(!b)return null;var f=M("lm-dragenter",x,p,c),w=!b.dispatchEvent(f);if(w||(f=M("p-dragenter",x,p,c),w=!b.dispatchEvent(f),w))return b;var y=x.document instanceof Document?x.document.body:x.document.firstElementChild;return b===y?c:(f=M("lm-dragenter",x,p,c),y.dispatchEvent(f),f=M("p-dragenter",x,p,c),y.dispatchEvent(f),y)}i.dispatchDragEnter=r;function o(x,b,c,p){if(!!b){var f=M("lm-dragexit",x,p,c);b.dispatchEvent(f),f=M("p-dragexit",x,p,c),b.dispatchEvent(f)}}i.dispatchDragExit=o;function s(x,b,c,p){if(!!b){var f=M("lm-dragleave",x,p,c);b.dispatchEvent(f),f=M("p-dragleave",x,p,c),b.dispatchEvent(f)}}i.dispatchDragLeave=s;function a(x,b,c){if(!b)return"none";var p=M("lm-dragover",x,c,null),f=!b.dispatchEvent(p);return f||(p=M("p-dragover",x,c,null),f=!b.dispatchEvent(p),f)?p.dropAction:"none"}i.dispatchDragOver=a;function d(x,b,c){if(!b)return"none";var p=M("lm-drop",x,c,null),f=!b.dispatchEvent(p);return f||(p=M("p-drop",x,c,null),f=!b.dispatchEvent(p),f)?p.dropAction:"none"}i.dispatchDrop=d;var g={none:0,copy:1,link:2,move:4},_={none:g.none,copy:g.copy,link:g.link,move:g.move,"copy-link":g.copy|g.link,"copy-move":g.copy|g.move,"link-move":g.link|g.move,all:g.copy|g.link|g.move};function M(x,b,c,p){var f=document.createEvent("MouseEvent");return f.initMouseEvent(x,!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,p),f.dropAction="none",f.mimeData=b.mimeData,f.proposedAction=b.proposedAction,f.supportedActions=b.supportedActions,f.source=b.source,f}})(Z||(Z={}));var Ee=class{sizeHint=0;minSize=0;maxSize=1/0;stretch=1;size=0;done=!1},Le;(r=>{function i(o,s){let a=o.length;if(a===0)return s;let d=0,g=0,_=0,M=0,x=0;for(let p=0;p<a;++p){let f=o[p],w=f.minSize,y=f.maxSize,I=f.sizeHint;f.done=!1,f.size=Math.max(w,Math.min(I,y)),_+=f.size,d+=w,g+=y,f.stretch>0&&(M+=f.stretch,x++)}if(s===_)return 0;if(s<=d){for(let p=0;p<a;++p){let f=o[p];f.size=f.minSize}return s-d}if(s>=g){for(let p=0;p<a;++p){let f=o[p];f.size=f.maxSize}return s-g}let b=.01,c=a;if(s<_){let p=_-s;for(;x>0&&p>b;){let f=p,w=M;for(let y=0;y<a;++y){let I=o[y];if(I.done||I.stretch===0)continue;let A=I.stretch*f/w;I.size-A<=I.minSize?(p-=I.size-I.minSize,M-=I.stretch,I.size=I.minSize,I.done=!0,c--,x--):(p-=A,I.size-=A)}}for(;c>0&&p>b;){let f=p/c;for(let w=0;w<a;++w){let y=o[w];y.done||(y.size-f<=y.minSize?(p-=y.size-y.minSize,y.size=y.minSize,y.done=!0,c--):(p-=f,y.size-=f))}}}else{let p=s-_;for(;x>0&&p>b;){let f=p,w=M;for(let y=0;y<a;++y){let I=o[y];if(I.done||I.stretch===0)continue;let A=I.stretch*f/w;I.size+A>=I.maxSize?(p-=I.maxSize-I.size,M-=I.stretch,I.size=I.maxSize,I.done=!0,c--,x--):(p-=A,I.size+=A)}}for(;c>0&&p>b;){let f=p/c;for(let w=0;w<a;++w){let y=o[w];y.done||(y.size+f>=y.maxSize?(p-=y.maxSize-y.size,y.size=y.maxSize,y.done=!0,c--):(p-=f,y.size+=f))}}}return 0}r.calc=i;function e(o,s,a){o.length===0||a===0||(a>0?t(o,s,a):n(o,s,-a))}r.adjust=e;function t(o,s,a){let d=0;for(let x=0;x<=s;++x){let b=o[x];d+=b.maxSize-b.size}let g=0;for(let x=s+1,b=o.length;x<b;++x){let c=o[x];g+=c.size-c.minSize}a=Math.min(a,d,g);let _=a;for(let x=s;x>=0&&_>0;--x){let b=o[x],c=b.maxSize-b.size;c>=_?(b.sizeHint=b.size+_,_=0):(b.sizeHint=b.size+c,_-=c)}let M=a;for(let x=s+1,b=o.length;x<b&&M>0;++x){let c=o[x],p=c.size-c.minSize;p>=M?(c.sizeHint=c.size-M,M=0):(c.sizeHint=c.size-p,M-=p)}}function n(o,s,a){let d=0;for(let x=s+1,b=o.length;x<b;++x){let c=o[x];d+=c.maxSize-c.size}let g=0;for(let x=0;x<=s;++x){let b=o[x];g+=b.size-b.minSize}a=Math.min(a,d,g);let _=a;for(let x=s+1,b=o.length;x<b&&_>0;++x){let c=o[x],p=c.maxSize-c.size;p>=_?(c.sizeHint=c.size+_,_=0):(c.sizeHint=c.size+p,_-=p)}let M=a;for(let x=s;x>=0&&M>0;--x){let b=o[x],c=b.size-b.minSize;c>=M?(b.sizeHint=b.size-M,M=0):(b.sizeHint=b.size-c,M-=c)}}})(Le||={});var et;(e=>{function i(t){return Math.max(0,Math.floor(t))}e.clampDimension=i})(et||={});var Et=et;var ge=class extends je{constructor(e){super(),this.renderer=e.renderer,e.orientation!==void 0&&(this._orientation=e.orientation),e.alignment!==void 0&&(this._alignment=e.alignment),e.spacing!==void 0&&(this._spacing=et.clampDimension(e.spacing))}dispose(){H(this._items,e=>{e.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}renderer;get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=et.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(e=>e.size)}relativeSizes(){return Ce.normalize(this._sizers.map(e=>e.size))}setRelativeSizes(e,t=!0){let n=this._sizers.length,r=e.slice(0,n);for(;r.length<n;)r.push(0);let o=Ce.normalize(r);for(let s=0;s<n;++s){let a=this._sizers[s];a.sizeHint=o[s],a.size=o[s]}this._hasNormedSizes=!0,t&&this.parent&&this.parent.update()}moveHandle(e,t){let n=this._handles[e];if(!n||n.classList.contains("lm-mod-hidden"))return;let r;if(this._orientation==="horizontal"?r=t-n.offsetLeft:r=t-n.offsetTop,r!==0){for(let o of this._sizers)o.size>0&&(o.sizeHint=o.size);Le.adjust(this._sizers,e,r),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,t){let n=new Ve(t),r=Ce.createHandle(this.renderer),o=Ce.averageSize(this._sizers),s=Ce.createSizer(o);z.insert(this._items,e,n),z.insert(this._sizers,e,s),z.insert(this._handles,e,r),this.parent.isAttached&&O.sendMessage(t,B.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.node.appendChild(r),this.parent.isAttached&&O.sendMessage(t,B.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,n){z.move(this._items,e,t),z.move(this._sizers,e,t),z.move(this._handles,e,t),this.parent.fit()}detachWidget(e,t){let n=z.removeAt(this._items,e),r=z.removeAt(this._handles,e);z.removeAt(this._sizers,e),this.parent.isAttached&&O.sendMessage(t,B.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.node.removeChild(r),this.parent.isAttached&&O.sendMessage(t,B.Msg.AfterDetach),n.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}updateItemPosition(e,t,n,r,o,s,a){let d=this._items[e];if(d.isHidden)return;let g=this._handles[e].style;t?(n+=this.widgetOffset,d.update(n,r,a,o),n+=a,g.top=`${r}px`,g.left=`${n}px`,g.width=`${this._spacing}px`,g.height=`${o}px`):(r+=this.widgetOffset,d.update(n,r,s,a),r+=a,g.top=`${r}px`,g.left=`${n}px`,g.width=`${s}px`,g.height=`${this._spacing}px`)}_fit(){let e=0,t=-1;for(let d=0,g=this._items.length;d<g;++d)this._items[d].isHidden?(this._handles[d].classList.add("lm-mod-hidden"),this._handles[d].classList.add("p-mod-hidden")):(this._handles[d].classList.remove("lm-mod-hidden"),this._handles[d].classList.remove("p-mod-hidden"),t=d,e++);t!==-1&&(this._handles[t].classList.add("lm-mod-hidden"),this._handles[t].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;let n=this._orientation==="horizontal",r=n?this._fixed:0,o=n?0:this._fixed;for(let d=0,g=this._items.length;d<g;++d){let _=this._items[d],M=this._sizers[d];if(M.size>0&&(M.sizeHint=M.size),_.isHidden){M.minSize=0,M.maxSize=0;continue}_.fit(),M.stretch=ge.getStretch(_.widget),n?(M.minSize=_.minWidth,M.maxSize=_.maxWidth,r+=_.minWidth,o=Math.max(o,_.minHeight)):(M.minSize=_.minHeight,M.maxSize=_.maxHeight,o+=_.minHeight,r=Math.max(r,_.minWidth))}let s=this._box=j.boxSizing(this.parent.node);r+=s.horizontalSum,o+=s.verticalSum;let a=this.parent.node.style;a.minWidth=`${r}px`,a.minHeight=`${o}px`,this._dirty=!0,this.parent.parent&&O.sendMessage(this.parent.parent,B.Msg.FitRequest),this._dirty&&O.sendMessage(this.parent,B.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let n=0;for(let M=0,x=this._items.length;M<x;++M)n+=+!this._items[M].isHidden;if(n===0&&this.widgetOffset===0)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=j.boxSizing(this.parent.node));let r=this._box.paddingTop,o=this._box.paddingLeft,s=e-this._box.horizontalSum,a=t-this._box.verticalSum,d=0,g=0,_=this._orientation==="horizontal";if(n>0){let M;if(_?M=Math.max(0,s-this._fixed):M=Math.max(0,a-this._fixed),this._hasNormedSizes){for(let b of this._sizers)b.sizeHint*=M;this._hasNormedSizes=!1}let x=Le.calc(this._sizers,M);if(x>0)switch(this._alignment){case"start":break;case"center":d=0,g=x/2;break;case"end":d=0,g=x;break;case"justify":d=x/n,g=0;break;default:throw"unreachable"}}for(let M=0,x=this._items.length;M<x;++M){let c=this._items[M].isHidden?0:this._sizers[M].size+d;this.updateItemPosition(M,_,_?o+g:o,_?r:r+g,a,s,c);let p=this.widgetOffset+(this._handles[M].classList.contains("lm-mod-hidden")?0:this._spacing);_?o+=c+p:r+=c+p}}widgetOffset=0;_fixed=0;_spacing=4;_dirty=!1;_hasNormedSizes=!1;_sizers=[];_items=[];_handles=[];_box=null;_alignment="start";_orientation="horizontal"};(t=>{function i(n){return Ce.stretchProperty.get(n)}t.getStretch=i;function e(n,r){Ce.stretchProperty.set(n,r)}t.setStretch=e})(ge||={});var Ce;(s=>{s.stretchProperty=new te({name:"stretch",create:()=>0,coerce:(a,d)=>Math.max(0,Math.floor(d)),changed:o});function e(a){let d=new Ee;return d.sizeHint=Math.floor(a),d}s.createSizer=e;function t(a){let d=a.createHandle();return d.style.position="absolute",d}s.createHandle=t;function n(a){return a.reduce((d,g)=>d+g.size,0)/a.length||0}s.averageSize=n;function r(a){let d=a.length;if(d===0)return[];let g=a.reduce((_,M)=>_+Math.abs(M),0);return g===0?a.map(_=>1/d):a.map(_=>_/g)}s.normalize=r;function o(a){a.parent&&a.parent.layout instanceof ge&&a.parent.fit()}})(Ce||={});var Ae=class extends qe{constructor(e={}){super({layout:Xt.createLayout(e)}),this.addClass("lm-SplitPanel"),this.addClass("p-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(e){this.layout.orientation=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(e,t=!0){this.layout.setRelativeSizes(e,t)}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){e.child.addClass("lm-SplitPanel-child"),e.child.addClass("p-SplitPanel-child"),this._releaseMouse()}onChildRemoved(e){e.child.removeClass("lm-SplitPanel-child"),e.child.removeClass("p-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),e.keyCode===27&&this._releaseMouse()}_evtMouseDown(e){if(e.button!==0)return;let t=this.layout,n=z.findFirstIndex(t.handles,g=>g.contains(e.target));if(n===-1)return;e.preventDefault(),e.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let r,o=t.handles[n],s=o.getBoundingClientRect();t.orientation==="horizontal"?r=e.clientX-s.left:r=e.clientY-s.top;let a=window.getComputedStyle(o),d=ke.overrideCursor(a.cursor);this._pressData={index:n,delta:r,override:d}}_evtMouseMove(e){e.preventDefault(),e.stopPropagation();let t,n=this.layout,r=this.node.getBoundingClientRect();n.orientation==="horizontal"?t=e.clientX-r.left-this._pressData.delta:t=e.clientY-r.top-this._pressData.delta,n.moveHandle(this._pressData.index,t)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}_handleMoved=new W(this);_pressData=null};(r=>{class i{createHandle(){let s=document.createElement("div");return s.className="lm-SplitPanel-handle",s.classList.add("p-SplitPanel-handle"),s}}r.Renderer=i,r.defaultRenderer=new i;function t(o){return ge.getStretch(o)}r.getStretch=t;function n(o,s){ge.setStretch(o,s)}r.setStretch=n})(Ae||={});var Xt;(e=>{function i(t){return t.layout||new ge({renderer:t.renderer||Ae.defaultRenderer,orientation:t.orientation,alignment:t.alignment,spacing:t.spacing})}e.createLayout=i})(Xt||={});var Zt=at(tt());var Lt=function(i,e){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Lt(i,e)};function yi(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Lt(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ht=function(){function i(e){this.type="text",this.content=e}return i}(),mt=function(){function i(e,t,n,r){this.type="element",this.tag=e,this.attrs=t,this.children=n,this.renderer=r}return i}(),ba=function(i){yi(e,i);function e(t,n,r){return i.call(this,t,n,[],r||void 0)||this}return e}(mt);function X(i){for(var e={},t,n=[],r=1,o=arguments.length;r<o;++r){var s=arguments[r];typeof s=="string"?n.push(new ht(s)):s instanceof ht||s instanceof mt?n.push(s):s instanceof Array?a(n,s):(r===1||r===2)&&s&&typeof s=="object"&&("render"in s?t=s:e=s)}return new mt(i,e,n,t);function a(d,g){for(var _=0,M=g;_<M.length;_++){var x=M[_];typeof x=="string"?d.push(new ht(x)):(x instanceof ht||x instanceof mt)&&d.push(x)}}}(function(i){i.a=i.bind(void 0,"a"),i.abbr=i.bind(void 0,"abbr"),i.address=i.bind(void 0,"address"),i.area=i.bind(void 0,"area"),i.article=i.bind(void 0,"article"),i.aside=i.bind(void 0,"aside"),i.audio=i.bind(void 0,"audio"),i.b=i.bind(void 0,"b"),i.bdi=i.bind(void 0,"bdi"),i.bdo=i.bind(void 0,"bdo"),i.blockquote=i.bind(void 0,"blockquote"),i.br=i.bind(void 0,"br"),i.button=i.bind(void 0,"button"),i.canvas=i.bind(void 0,"canvas"),i.caption=i.bind(void 0,"caption"),i.cite=i.bind(void 0,"cite"),i.code=i.bind(void 0,"code"),i.col=i.bind(void 0,"col"),i.colgroup=i.bind(void 0,"colgroup"),i.data=i.bind(void 0,"data"),i.datalist=i.bind(void 0,"datalist"),i.dd=i.bind(void 0,"dd"),i.del=i.bind(void 0,"del"),i.dfn=i.bind(void 0,"dfn"),i.div=i.bind(void 0,"div"),i.dl=i.bind(void 0,"dl"),i.dt=i.bind(void 0,"dt"),i.em=i.bind(void 0,"em"),i.embed=i.bind(void 0,"embed"),i.fieldset=i.bind(void 0,"fieldset"),i.figcaption=i.bind(void 0,"figcaption"),i.figure=i.bind(void 0,"figure"),i.footer=i.bind(void 0,"footer"),i.form=i.bind(void 0,"form"),i.h1=i.bind(void 0,"h1"),i.h2=i.bind(void 0,"h2"),i.h3=i.bind(void 0,"h3"),i.h4=i.bind(void 0,"h4"),i.h5=i.bind(void 0,"h5"),i.h6=i.bind(void 0,"h6"),i.header=i.bind(void 0,"header"),i.hr=i.bind(void 0,"hr"),i.i=i.bind(void 0,"i"),i.iframe=i.bind(void 0,"iframe"),i.img=i.bind(void 0,"img"),i.input=i.bind(void 0,"input"),i.ins=i.bind(void 0,"ins"),i.kbd=i.bind(void 0,"kbd"),i.label=i.bind(void 0,"label"),i.legend=i.bind(void 0,"legend"),i.li=i.bind(void 0,"li"),i.main=i.bind(void 0,"main"),i.map=i.bind(void 0,"map"),i.mark=i.bind(void 0,"mark"),i.meter=i.bind(void 0,"meter"),i.nav=i.bind(void 0,"nav"),i.noscript=i.bind(void 0,"noscript"),i.object=i.bind(void 0,"object"),i.ol=i.bind(void 0,"ol"),i.optgroup=i.bind(void 0,"optgroup"),i.option=i.bind(void 0,"option"),i.output=i.bind(void 0,"output"),i.p=i.bind(void 0,"p"),i.param=i.bind(void 0,"param"),i.pre=i.bind(void 0,"pre"),i.progress=i.bind(void 0,"progress"),i.q=i.bind(void 0,"q"),i.rp=i.bind(void 0,"rp"),i.rt=i.bind(void 0,"rt"),i.ruby=i.bind(void 0,"ruby"),i.s=i.bind(void 0,"s"),i.samp=i.bind(void 0,"samp"),i.section=i.bind(void 0,"section"),i.select=i.bind(void 0,"select"),i.small=i.bind(void 0,"small"),i.source=i.bind(void 0,"source"),i.span=i.bind(void 0,"span"),i.strong=i.bind(void 0,"strong"),i.sub=i.bind(void 0,"sub"),i.summary=i.bind(void 0,"summary"),i.sup=i.bind(void 0,"sup"),i.table=i.bind(void 0,"table"),i.tbody=i.bind(void 0,"tbody"),i.td=i.bind(void 0,"td"),i.textarea=i.bind(void 0,"textarea"),i.tfoot=i.bind(void 0,"tfoot"),i.th=i.bind(void 0,"th"),i.thead=i.bind(void 0,"thead"),i.time=i.bind(void 0,"time"),i.title=i.bind(void 0,"title"),i.tr=i.bind(void 0,"tr"),i.track=i.bind(void 0,"track"),i.u=i.bind(void 0,"u"),i.ul=i.bind(void 0,"ul"),i.var_=i.bind(void 0,"var"),i.video=i.bind(void 0,"video"),i.wbr=i.bind(void 0,"wbr")})(X||(X={}));var Se;(function(i){function e(n){return Fe.createDOMNode(n)}i.realize=e;function t(n,r){var o=Fe.hostMap.get(r)||[],s=Fe.asContentArray(n);Fe.hostMap.set(r,s),Fe.updateContent(r,o,s)}i.render=t})(Se||(Se={}));var Fe;(function(i){i.hostMap=new WeakMap;function e(b){return b?b instanceof Array?b:[b]:[]}i.asContentArray=e;function t(b){var c=arguments[1]||null,p=arguments[2]||null;if(c)c.insertBefore(t(b),p);else{if(b.type==="text")return document.createTextNode(b.content);if(c=document.createElement(b.tag),s(c,b.attrs),b.renderer)return b.renderer.render(c,{attrs:b.attrs,children:b.children}),c;for(var f=0,w=b.children.length;f<w;++f)t(b.children[f],c)}return c}i.createDOMNode=t;function n(b,c,p){if(c!==p){for(var f=x(b,c),w=c.slice(),y=b.firstChild,I=p.length,A=0;A<I;++A){if(A>=w.length){t(p[A],b);continue}var E=w[A],S=p[A];if(E===S){y=y.nextSibling;continue}if(E.type==="text"&&S.type==="text"){y.textContent!==S.content&&(y.textContent=S.content),y=y.nextSibling;continue}if(E.type==="text"||S.type==="text"){z.insert(w,A,S),t(S,b,y);continue}if(!E.renderer!=!S.renderer){z.insert(w,A,S),t(S,b,y);continue}var v=S.attrs.key;if(v&&v in f){var T=f[v];T.vNode!==E&&(z.move(w,w.indexOf(T.vNode,A+1),A),b.insertBefore(T.element,y),E=T.vNode,y=T.element)}if(E===S){y=y.nextSibling;continue}var u=E.attrs.key;if(u&&u!==v){z.insert(w,A,S),t(S,b,y);continue}if(E.tag!==S.tag){z.insert(w,A,S),t(S,b,y);continue}a(y,E.attrs,S.attrs),S.renderer?S.renderer.render(y,{attrs:S.attrs,children:S.children}):n(y,E.children,S.children),y=y.nextSibling}r(b,w,I,!0)}}i.updateContent=n;function r(b,c,p,f){for(var w=c.length-1;w>=p;--w){var y=c[w],I=f?b.lastChild:b.childNodes[w];y.type==="text"||(y.renderer&&y.renderer.unrender?y.renderer.unrender(I,{attrs:y.attrs,children:y.children}):r(I,y.children,0,!1)),f&&b.removeChild(I)}}var o={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function s(b,c){for(var p in c)p in o||(p.substr(0,2)==="on"?b[p]=c[p]:b.setAttribute(p,c[p]));c.className!==void 0&&b.setAttribute("class",c.className),c.htmlFor!==void 0&&b.setAttribute("for",c.htmlFor),c.dataset&&d(b,c.dataset),c.style&&_(b,c.style)}function a(b,c,p){if(c!==p){var f;for(f in c)f in o||f in p||(f.substr(0,2)==="on"?b[f]=null:b.removeAttribute(f));for(f in p)f in o||c[f]===p[f]||(f.substr(0,2)==="on"?b[f]=p[f]:b.setAttribute(f,p[f]));c.className!==p.className&&(p.className!==void 0?b.setAttribute("class",p.className):b.removeAttribute("class")),c.htmlFor!==p.htmlFor&&(p.htmlFor!==void 0?b.setAttribute("for",p.htmlFor):b.removeAttribute("for")),c.dataset!==p.dataset&&g(b,c.dataset||{},p.dataset||{}),c.style!==p.style&&M(b,c.style||{},p.style||{})}}function d(b,c){for(var p in c)b.setAttribute("data-"+p,c[p])}function g(b,c,p){for(var f in c)f in p||b.removeAttribute("data-"+f);for(var w in p)c[w]!==p[w]&&b.setAttribute("data-"+w,p[w])}function _(b,c){var p=b.style,f;for(f in c)p[f]=c[f]}function M(b,c,p){var f=b.style,w;for(w in c)w in p||(f[w]="");for(w in p)c[w]!==p[w]&&(f[w]=p[w])}function x(b,c){for(var p=b.firstChild,f=Object.create(null),w=0,y=c;w<y.length;w++){var I=y[w];I.type==="element"&&I.attrs.key&&(f[I.attrs.key]={vNode:I,element:p}),p=p.nextSibling}return f}})(Fe||(Fe={}));var ae=class extends B{constructor(e={}){super({node:be.createNode()}),this.addClass("lm-TabBar"),this.addClass("p-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(B.Flag.DisallowLayout),this._document=e.document||document,this.tabsMovable=e.tabsMovable||!1,this.titlesEditable=e.titlesEditable||!1,this.allowDeselect=e.allowDeselect||!1,this.addButtonEnabled=e.addButtonEnabled||!1,this.insertBehavior=e.insertBehavior||"select-tab-if-needed",this.name=e.name||"",this.orientation=e.orientation||"horizontal",this.removeBehavior=e.removeBehavior||"select-tab-after",this.renderer=e.renderer||ae.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}renderer;get document(){return this._document}tabsMovable;get titlesEditable(){return this._titlesEditable}set titlesEditable(e){this._titlesEditable=e}allowDeselect;insertBehavior;removeBehavior;get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(e){this.currentIndex=e?this._titles.indexOf(e):-1}get currentIndex(){return this._currentIndex}set currentIndex(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex===e)return;let t=this._currentIndex,n=this._titles[t]||null,r=e,o=this._titles[r]||null;this._currentIndex=r,this._previousTitle=n,this.update(),this._currentChanged.emit({previousIndex:t,previousTitle:n,currentIndex:r,currentTitle:o})}get name(){return this._name}set name(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(e){return this.insertTab(this._titles.length,e)}insertTab(e,t){this._releaseMouse();let n=be.asTitle(t),r=this._titles.indexOf(n),o=Math.max(0,Math.min(e,this._titles.length));return r===-1?(z.insert(this._titles,o,n),n.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(o,n),n):(o===this._titles.length&&o--,r===o||(z.move(this._titles,r,o),this.update(),this._adjustCurrentForMove(r,o)),n)}removeTab(e){this.removeTabAt(this._titles.indexOf(e))}removeTabAt(e){this._releaseMouse();let t=z.removeAt(this._titles,e);!t||(t.changed.disconnect(this._onTitleChanged,this),t===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,t))}clearTabs(){if(this._titles.length===0)return;this._releaseMouse();for(let n of this._titles)n.changed.disconnect(this._onTitleChanged,this);let e=this.currentIndex,t=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),e!==-1&&this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this)}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this._releaseMouse()}onUpdateRequest(e){let t=this._titles,n=this.renderer,r=this.currentTitle,o=new Array(t.length);for(let s=0,a=t.length;s<a;++s){let d=t[s],g=d===r,_=g?a:a-s-1;o[s]=n.renderTab({title:d,current:g,zIndex:_})}Se.render(o,this.contentNode)}_evtDblClick(e){if(!this.titlesEditable)return;let t=this.contentNode.children,n=z.findFirstIndex(t,s=>j.hitTest(s,e.clientX,e.clientY));if(n===-1)return;let r=this.titles[n],o=t[n].querySelector(".lm-TabBar-tabLabel");if(o&&o.contains(e.target)){let s=r.label||"",a=o.innerHTML;o.innerHTML="";let d=document.createElement("input");d.classList.add("lm-TabBar-tabInput"),d.value=s,o.appendChild(d);let g=()=>{d.removeEventListener("blur",g),o.innerHTML=a};d.addEventListener("dblclick",_=>_.stopPropagation()),d.addEventListener("blur",g),d.addEventListener("keydown",_=>{_.key==="Enter"?(d.value!==""&&(r.label=r.caption=d.value),g()):_.key==="Escape"&&g()}),d.select(),d.focus(),o.children.length>0&&o.children[0].focus()}}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this._releaseMouse()}_evtMouseDown(e){if(e.button!==0&&e.button!==1||this._dragData)return;let t=this.addButtonEnabled&&this.addButtonNode.contains(e.target),n=this.contentNode.children,r=z.findFirstIndex(n,s=>j.hitTest(s,e.clientX,e.clientY));if(r===-1&&!t||(e.preventDefault(),e.stopPropagation(),this._dragData={tab:n[r],index:r,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("mouseup",this,!0),this.document.addEventListener("pointerup",this,!0),e.button===1||t))return;let o=n[r].querySelector(this.renderer.closeIconSelector);o&&o.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("mousemove",this,!0),this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===r?this.currentIndex=-1:this.currentIndex=r,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtMouseMove(e){let t=this._dragData;if(!t)return;e.preventDefault(),e.stopPropagation();let n=this.contentNode.children;if(!(!t.dragActive&&!be.dragExceeded(t,e))){if(!t.dragActive){let r=t.tab.getBoundingClientRect();this._orientation==="horizontal"?(t.tabPos=t.tab.offsetLeft,t.tabSize=r.width,t.tabPressPos=t.pressX-r.left):(t.tabPos=t.tab.offsetTop,t.tabSize=r.height,t.tabPressPos=t.pressY-r.top),t.tabLayout=be.snapTabLayout(n,this._orientation),t.contentRect=this.contentNode.getBoundingClientRect(),t.override=ke.overrideCursor("default"),t.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),t.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),t.dragActive=!0}if(!t.detachRequested&&be.detachExceeded(t,e)){t.detachRequested=!0;let r=t.index,o=e.clientX,s=e.clientY,a=n[r],d=this._titles[r];if(this._tabDetachRequested.emit({index:r,title:d,tab:a,clientX:o,clientY:s}),t.dragAborted)return}be.layoutTabs(n,t,e,this._orientation)}}_evtMouseUp(e){if(e.button!==0&&e.button!==1)return;let t=this._dragData;if(!t)return;if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!t.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target)){this._addRequested.emit(void 0);return}let o=this.contentNode.children,s=z.findFirstIndex(o,g=>j.hitTest(g,e.clientX,e.clientY));if(s!==t.index)return;let a=this._titles[s];if(!a.closable)return;if(e.button===1){this._tabCloseRequested.emit({index:s,title:a});return}let d=o[s].querySelector(this.renderer.closeIconSelector);if(d&&d.contains(e.target)){this._tabCloseRequested.emit({index:s,title:a});return}return}if(e.button!==0)return;be.finalizeTabPosition(t,this._orientation),t.tab.classList.remove("lm-mod-dragging"),t.tab.classList.remove("p-mod-dragging");let n=be.parseTransitionDuration(t.tab);setTimeout(()=>{if(t.dragAborted)return;this._dragData=null,be.resetTabPositions(this.contentNode.children,this._orientation),t.override.dispose(),this.removeClass("lm-mod-dragging"),this.removeClass("p-mod-dragging");let r=t.index,o=t.targetIndex;o===-1||r===o||(z.move(this._titles,r,o),this._adjustCurrentForMove(r,o),this._tabMoved.emit({fromIndex:r,toIndex:o,title:this._titles[o]}),O.sendMessage(this,B.Msg.UpdateRequest))},n)}_releaseMouse(){let e=this._dragData;!e||(this._dragData=null,this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(be.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),e.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))}_adjustCurrentForInsert(e,t){let n=this.currentTitle,r=this._currentIndex,o=this.insertBehavior;if(o==="select-tab"||o==="select-tab-if-needed"&&r===-1){this._currentIndex=e,this._previousTitle=n,this._currentChanged.emit({previousIndex:r,previousTitle:n,currentIndex:e,currentTitle:t});return}r>=e&&this._currentIndex++}_adjustCurrentForMove(e,t){this._currentIndex===e?this._currentIndex=t:this._currentIndex<e&&this._currentIndex>=t?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=t&&this._currentIndex--}_adjustCurrentForRemove(e,t){let n=this._currentIndex,r=this.removeBehavior;if(n!==e){n>e&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null});return}if(r==="select-tab-after"){this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(r==="select-tab-before"){this._currentIndex=Math.max(0,e-1),this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(r==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}_onTitleChanged(e){this.update()}_name;_currentIndex=-1;_titles=[];_orientation;_document;_titlesEditable=!1;_previousTitle=null;_dragData=null;_addButtonEnabled=!1;_tabMoved=new W(this);_currentChanged=new W(this);_addRequested=new W(this);_tabCloseRequested=new W(this);_tabDetachRequested=new W(this);_tabActivateRequested=new W(this)};(n=>{class i{constructor(){this._uuid=++i._nInstance}closeIconSelector=".lm-TabBar-tabCloseIcon";renderTab(o){let s=o.title.caption,a=this.createTabKey(o),d=a,g=this.createTabStyle(o),_=this.createTabClass(o),M=this.createTabDataset(o),x=this.createTabARIA(o);return o.title.closable?X.li({id:d,key:a,className:_,title:s,style:g,dataset:M,...x},this.renderIcon(o),this.renderLabel(o),this.renderCloseIcon(o)):X.li({id:d,key:a,className:_,title:s,style:g,dataset:M,...x},this.renderIcon(o),this.renderLabel(o))}renderIcon(o){let{title:s}=o,a=this.createIconClass(o);return typeof s.icon=="string"?X.div({className:a},s.iconLabel):X.div({className:a},s.icon,s.iconLabel)}renderLabel(o){return X.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},o.title.label)}renderCloseIcon(o){return X.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}createTabKey(o){let s=this._tabKeys.get(o.title);return s===void 0&&(s=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(o.title,s)),s}createTabStyle(o){return{zIndex:`${o.zIndex}`}}createTabClass(o){let s="lm-TabBar-tab";return s+=" p-TabBar-tab",o.title.className&&(s+=` ${o.title.className}`),o.title.closable&&(s+=" lm-mod-closable",s+=" p-mod-closable"),o.current&&(s+=" lm-mod-current",s+=" p-mod-current"),s}createTabDataset(o){return o.title.dataset}createTabARIA(o){return{role:"tab","aria-selected":o.current.toString()}}createIconClass(o){let s="lm-TabBar-tabIcon";s+=" p-TabBar-tabIcon";let a=o.title.iconClass;return a?`${s} ${a}`:s}static _nInstance=0;_uuid;_tabID=0;_tabKeys=new WeakMap}n.Renderer=i,n.defaultRenderer=new i,n.addButtonSelector=".lm-TabBar-addButton"})(ae||={});var be;(M=>{M.DRAG_THRESHOLD=5,M.DETACH_THRESHOLD=20;function t(){let x=document.createElement("div"),b=document.createElement("ul");b.setAttribute("role","tablist"),b.className="lm-TabBar-content",b.classList.add("p-TabBar-content"),x.appendChild(b);let c=document.createElement("div");return c.className="lm-TabBar-addButton lm-mod-hidden",x.appendChild(c),x}M.createNode=t;function n(x){return x instanceof We?x:new We(x)}M.asTitle=n;function r(x){let b=window.getComputedStyle(x);return 1e3*(parseFloat(b.transitionDuration)||0)}M.parseTransitionDuration=r;function o(x,b){let c=new Array(x.length);for(let p=0,f=x.length;p<f;++p){let w=x[p],y=window.getComputedStyle(w);b==="horizontal"?c[p]={pos:w.offsetLeft,size:w.offsetWidth,margin:parseFloat(y.marginLeft)||0}:c[p]={pos:w.offsetTop,size:w.offsetHeight,margin:parseFloat(y.marginTop)||0}}return c}M.snapTabLayout=o;function s(x,b){let c=Math.abs(b.clientX-x.pressX),p=Math.abs(b.clientY-x.pressY);return c>=5||p>=5}M.dragExceeded=s;function a(x,b){let c=x.contentRect;return b.clientX<c.left-20||b.clientX>=c.right+20||b.clientY<c.top-20||b.clientY>=c.bottom+20}M.detachExceeded=a;function d(x,b,c,p){let f,w,y,I;p==="horizontal"?(f=b.pressX,w=c.clientX-b.contentRect.left,y=c.clientX,I=b.contentRect.width):(f=b.pressY,w=c.clientY-b.contentRect.top,y=c.clientY,I=b.contentRect.height);let A=b.index,E=w-b.tabPressPos,S=E+b.tabSize;for(let v=0,T=x.length;v<T;++v){let u,l=b.tabLayout[v],m=l.pos+(l.size>>1);if(v<b.index&&E<m)u=`${b.tabSize+b.tabLayout[v+1].margin}px`,A=Math.min(A,v);else if(v>b.index&&S>m)u=`${-b.tabSize-l.margin}px`,A=Math.max(A,v);else if(v===b.index){let k=y-f,h=I-(b.tabPos+b.tabSize);u=`${Math.max(-b.tabPos,Math.min(k,h))}px`}else u="";p==="horizontal"?x[v].style.left=u:x[v].style.top=u}b.targetIndex=A}M.layoutTabs=d;function g(x,b){let c;b==="horizontal"?c=x.contentRect.width:c=x.contentRect.height;let p;if(x.targetIndex===x.index)p=0;else if(x.targetIndex>x.index){let y=x.tabLayout[x.targetIndex];p=y.pos+y.size-x.tabSize-x.tabPos}else p=x.tabLayout[x.targetIndex].pos-x.tabPos;let f=c-(x.tabPos+x.tabSize),w=Math.max(-x.tabPos,Math.min(p,f));b==="horizontal"?x.tab.style.left=`${w}px`:x.tab.style.top=`${w}px`}M.finalizeTabPosition=g;function _(x,b){H(x,c=>{b==="horizontal"?c.style.left="":c.style.top=""})}M.resetTabPositions=_})(be||={});var pt=class extends ye{constructor(e){super(),this.renderer=e.renderer,e.spacing!==void 0&&(this._spacing=Et.clampDimension(e.spacing)),this._document=e.document||document,this._hiddenMode=e.hiddenMode!==void 0?e.hiddenMode:B.HiddenMode.Display}dispose(){let e=this.iter();this._items.forEach(t=>{t.dispose()}),this._box=null,this._root=null,this._items.clear(),H(e,t=>{t.dispose()}),super.dispose()}renderer;get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this._hiddenMode=e,H(this.tabBars(),t=>{t.titles.length>1&&t.titles.forEach(n=>{n.owner.hiddenMode=this._hiddenMode})}))}get spacing(){return this._spacing}set spacing(e){e=Et.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get isEmpty(){return this._root===null}iter(){return this._root?this._root.iterAllWidgets():de()}widgets(){return this._root?this._root.iterUserWidgets():de()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():de()}tabBars(){return this._root?this._root.iterTabBars():de()}handles(){return this._root?this._root.iterHandles():de()}moveHandle(e,t,n){let r=e.classList.contains("lm-mod-hidden");if(r=r||e.classList.contains("p-mod-hidden"),!this._root||r)return;let o=this._root.findSplitNode(e);if(!o)return;let s;o.node.orientation==="horizontal"?s=t-e.offsetLeft:s=n-e.offsetTop,s!==0&&(o.node.holdSizes(),Le.adjust(o.node.sizers,o.index,s),this.parent&&this.parent.update())}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(e){let t=new Set,n;e.main?n=$.normalizeAreaConfig(e.main,t):n=null;let r=this.widgets(),o=this.tabBars(),s=this.handles();this._root=null,H(r,a=>{t.has(a)||(a.parent=null)}),H(o,a=>{a.dispose()}),H(s,a=>{a.parentNode&&a.parentNode.removeChild(a)}),t.forEach(a=>{a.parent=this.parent}),n?this._root=$.realizeAreaConfig(n,{createTabBar:a=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):this._root=null,this.parent&&(t.forEach(a=>{this.attachWidget(a)}),this.parent.fit())}addWidget(e,t={}){let n=t.ref||null,r=t.mode||"tab-after",o=null;if(this._root&&n&&(o=this._root.findTabNode(n)),n&&!o)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,r){case"tab-after":this._insertTab(e,n,o,!0);break;case"tab-before":this._insertTab(e,n,o,!1);break;case"split-top":this._insertSplit(e,n,o,"vertical",!1);break;case"split-left":this._insertSplit(e,n,o,"horizontal",!1);break;case"split-right":this._insertSplit(e,n,o,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,n,o,"vertical",!0);break}!this.parent||(this.attachWidget(e),this.parent.fit())}removeWidget(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())}hitTestTabAreas(e,t){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=j.boxSizing(this.parent.node));let n=this.parent.node.getBoundingClientRect(),r=e-n.left-this._box.borderLeft,o=t-n.top-this._box.borderTop,s=this._root.hitTestTabNodes(r,o);if(!s)return null;let{tabBar:a,top:d,left:g,width:_,height:M}=s,x=this._box.borderLeft+this._box.borderRight,b=this._box.borderTop+this._box.borderBottom,c=n.width-x-(g+_),p=n.height-b-(d+M);return{tabBar:a,x:r,y:o,top:d,left:g,right:c,bottom:p,width:_,height:M}}init(){super.init(),H(this,e=>{this.attachWidget(e)}),H(this.handles(),e=>{this.parent.node.appendChild(e)}),this.parent.fit()}attachWidget(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new Ve(e)),this.parent.isAttached&&O.sendMessage(e,B.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&O.sendMessage(e,B.Msg.AfterAttach))}detachWidget(e){if(this.parent.node!==e.node.parentNode)return;this.parent.isAttached&&O.sendMessage(e,B.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&O.sendMessage(e,B.Msg.AfterDetach);let t=this._items.get(e);t&&(this._items.delete(e),t.dispose())}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_removeWidget(e){if(!this._root)return;let t=this._root.findTabNode(e);if(!t)return;if($.removeAria(e),t.tabBar.titles.length>1){if(t.tabBar.removeTab(e.title),this._hiddenMode===B.HiddenMode.Scale&&t.tabBar.titles.length==1){let x=t.tabBar.titles[0].owner;x.hiddenMode=B.HiddenMode.Display}return}if(t.tabBar.dispose(),this._root===t){this._root=null;return}this._root.holdAllSizes();let n=t.parent;t.parent=null;let r=z.removeFirstOf(n.children,t),o=z.removeAt(n.handles,r);if(z.removeAt(n.sizers,r),o.parentNode&&o.parentNode.removeChild(o),n.children.length>1){n.syncHandles();return}let s=n.parent;n.parent=null;let a=n.children[0],d=n.handles[0];if(n.children.length=0,n.handles.length=0,n.sizers.length=0,d.parentNode&&d.parentNode.removeChild(d),this._root===n){a.parent=null,this._root=a;return}let g=s,_=g.children.indexOf(n);if(a instanceof $.TabLayoutNode){a.parent=g,g.children[_]=a;return}let M=z.removeAt(g.handles,_);z.removeAt(g.children,_),z.removeAt(g.sizers,_),M.parentNode&&M.parentNode.removeChild(M);for(let x=0,b=a.children.length;x<b;++x){let c=a.children[x],p=a.handles[x],f=a.sizers[x];z.insert(g.children,_+x,c),z.insert(g.handles,_+x,p),z.insert(g.sizers,_+x,f),c.parent=g}a.children.length=0,a.handles.length=0,a.sizers.length=0,a.parent=null,g.syncHandles()}_insertTab(e,t,n,r){if(e===t)return;if(!this._root){let s=new $.TabLayoutNode(this._createTabBar());s.tabBar.addTab(e.title),this._root=s,$.addAria(e,s.tabBar);return}n||(n=this._root.findFirstTabNode()),n.tabBar.titles.indexOf(e.title)===-1&&(this._removeWidget(e),e.hide());let o;if(t?o=n.tabBar.titles.indexOf(t.title):o=n.tabBar.currentIndex,this._hiddenMode===B.HiddenMode.Scale)if(n.tabBar.titles.length===0)e.hiddenMode=B.HiddenMode.Display;else if(n.tabBar.titles.length==1){let s=n.tabBar.titles[0].owner;s.hiddenMode=B.HiddenMode.Scale}else e.hiddenMode=B.HiddenMode.Scale;else e.hiddenMode=this._hiddenMode;n.tabBar.insertTab(o+(r?1:0),e.title),$.addAria(e,n.tabBar)}_insertSplit(e,t,n,r,o){if(e===t&&n&&n.tabBar.titles.length===1)return;this._removeWidget(e);let s=new $.TabLayoutNode(this._createTabBar());if(s.tabBar.addTab(e.title),$.addAria(e,s.tabBar),!this._root){this._root=s;return}if(!n||!n.parent){let M=this._splitRoot(r),x=o?M.children.length:0;M.normalizeSizes();let b=$.createSizer(n?1:$.GOLDEN_RATIO);z.insert(M.children,x,s),z.insert(M.sizers,x,b),z.insert(M.handles,x,this._createHandle()),s.parent=M,M.normalizeSizes(),M.syncHandles();return}let a=n.parent;if(a.orientation===r){let M=a.children.indexOf(n);a.normalizeSizes();let x=a.sizers[M].sizeHint/=2,b=M+(o?1:0);z.insert(a.children,b,s),z.insert(a.sizers,b,$.createSizer(x)),z.insert(a.handles,b,this._createHandle()),s.parent=a,a.syncHandles();return}let d=z.removeFirstOf(a.children,n),g=new $.SplitLayoutNode(r);g.normalized=!0,g.children.push(n),g.sizers.push($.createSizer(.5)),g.handles.push(this._createHandle()),n.parent=g;let _=o?1:0;z.insert(g.children,_,s),z.insert(g.sizers,_,$.createSizer(.5)),z.insert(g.handles,_,this._createHandle()),s.parent=g,g.syncHandles(),z.insert(a.children,d,g),g.parent=a}_splitRoot(e){let t=this._root;if(t instanceof $.SplitLayoutNode&&t.orientation===e)return t;let n=this._root=new $.SplitLayoutNode(e);return t&&(n.children.push(t),n.sizers.push($.createSizer(0)),n.handles.push(this._createHandle()),t.parent=n),n}_fit(){let e=0,t=0;if(this._root){let o=this._root.fit(this._spacing,this._items);e=o.minWidth,t=o.minHeight}let n=this._box=j.boxSizing(this.parent.node);e+=n.horizontalSum,t+=n.verticalSum;let r=this.parent.node.style;r.minWidth=`${e}px`,r.minHeight=`${t}px`,this._dirty=!0,this.parent.parent&&O.sendMessage(this.parent.parent,B.Msg.FitRequest),this._dirty&&O.sendMessage(this.parent,B.Msg.UpdateRequest)}_update(e,t){if(this._dirty=!1,!this._root)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=j.boxSizing(this.parent.node));let n=this._box.paddingTop,r=this._box.paddingLeft,o=e-this._box.horizontalSum,s=t-this._box.verticalSum;this._root.update(n,r,o,s,this._spacing,this._items)}_createTabBar(){let e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&(e.parent=this.parent,this.attachWidget(e)),e}_createHandle(){let e=this.renderer.createHandle(),t=e.style;return t.position="absolute",t.top="0",t.left="0",t.width="0",t.height="0",this.parent&&this.parent.node.appendChild(e),e}_spacing=4;_dirty=!1;_root=null;_box=null;_document;_hiddenMode;_items=new Map},$;(x=>{x.GOLDEN_RATIO=.618;function e(b){let c=new Ee;return c.sizeHint=b,c.size=b,c}x.createSizer=e;function t(b,c){let p;return b.type==="tab-area"?p=d(b,c):p=g(b,c),p}x.normalizeAreaConfig=t;function n(b,c,p){let f;return b.type==="tab-area"?f=_(b,c,p):f=M(b,c,p),f}x.realizeAreaConfig=n;class r{constructor(c){let p=new Ee,f=new Ee;p.stretch=0,f.stretch=1,this.tabBar=c,this.sizers=[p,f]}parent=null;tabBar;sizers;get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}iterAllWidgets(){return xt(dt(this.tabBar),this.iterUserWidgets())}iterUserWidgets(){return Oe(this.tabBar.titles,c=>c.owner)}iterSelectedWidgets(){let c=this.tabBar.currentTitle;return c?dt(c.owner):de()}iterTabBars(){return dt(this.tabBar)}iterHandles(){return de()}findTabNode(c){return this.tabBar.titles.indexOf(c.title)!==-1?this:null}findSplitNode(c){return null}findFirstTabNode(){return this}hitTestTabNodes(c,p){return c<this._left||c>=this._left+this._width||p<this._top||p>=this._top+this._height?null:this}createConfig(){let c=this.tabBar.titles.map(f=>f.owner),p=this.tabBar.currentIndex;return{type:"tab-area",widgets:c,currentIndex:p}}holdAllSizes(){}fit(c,p){let f=0,w=0,y=1/0,I=1/0,A=p.get(this.tabBar),E=this.tabBar.currentTitle,S=E?p.get(E.owner):void 0,[v,T]=this.sizers;return A&&A.fit(),S&&S.fit(),A&&!A.isHidden?(f=Math.max(f,A.minWidth),w+=A.minHeight,v.minSize=A.minHeight,v.maxSize=A.maxHeight):(v.minSize=0,v.maxSize=0),S&&!S.isHidden?(f=Math.max(f,S.minWidth),w+=S.minHeight,T.minSize=S.minHeight,T.maxSize=1/0):(T.minSize=0,T.maxSize=1/0),{minWidth:f,minHeight:w,maxWidth:y,maxHeight:I}}update(c,p,f,w,y,I){this._top=p,this._left=c,this._width=f,this._height=w;let A=I.get(this.tabBar),E=this.tabBar.currentTitle,S=E?I.get(E.owner):void 0;if(Le.calc(this.sizers,w),A&&!A.isHidden){let v=this.sizers[0].size;A.update(c,p,f,v),p+=v}if(S&&!S.isHidden){let v=this.sizers[1].size;S.update(c,p,f,v)}}_top=0;_left=0;_width=0;_height=0}x.TabLayoutNode=r;class o{constructor(c){this.orientation=c}parent=null;normalized=!1;orientation;children=[];sizers=[];handles=[];iterAllWidgets(){let c=Oe(this.children,p=>p.iterAllWidgets());return new Re(c)}iterUserWidgets(){let c=Oe(this.children,p=>p.iterUserWidgets());return new Re(c)}iterSelectedWidgets(){let c=Oe(this.children,p=>p.iterSelectedWidgets());return new Re(c)}iterTabBars(){let c=Oe(this.children,p=>p.iterTabBars());return new Re(c)}iterHandles(){let c=Oe(this.children,p=>p.iterHandles());return xt(this.handles,new Re(c))}findTabNode(c){for(let p=0,f=this.children.length;p<f;++p){let w=this.children[p].findTabNode(c);if(w)return w}return null}findSplitNode(c){let p=this.handles.indexOf(c);if(p!==-1)return{index:p,node:this};for(let f=0,w=this.children.length;f<w;++f){let y=this.children[f].findSplitNode(c);if(y)return y}return null}findFirstTabNode(){return this.children.length===0?null:this.children[0].findFirstTabNode()}hitTestTabNodes(c,p){for(let f=0,w=this.children.length;f<w;++f){let y=this.children[f].hitTestTabNodes(c,p);if(y)return y}return null}createConfig(){let c=this.orientation,p=this.createNormalizedSizes(),f=this.children.map(w=>w.createConfig());return{type:"split-area",orientation:c,children:f,sizes:p}}syncHandles(){H(this.handles,(c,p)=>{c.setAttribute("data-orientation",this.orientation),p===this.handles.length-1?(c.classList.add("lm-mod-hidden"),c.classList.add("p-mod-hidden")):(c.classList.remove("lm-mod-hidden"),c.classList.remove("p-mod-hidden"))})}holdSizes(){H(this.sizers,c=>{c.sizeHint=c.size})}holdAllSizes(){H(this.children,c=>c.holdAllSizes()),this.holdSizes()}normalizeSizes(){let c=this.sizers.length;if(c===0)return;this.holdSizes();let p=It(this.sizers,(f,w)=>f+w.sizeHint,0);p===0?H(this.sizers,f=>{f.size=f.sizeHint=1/c}):H(this.sizers,f=>{f.size=f.sizeHint/=p}),this.normalized=!0}createNormalizedSizes(){let c=this.sizers.length;if(c===0)return[];let p=this.sizers.map(w=>w.size),f=It(p,(w,y)=>w+y,0);return f===0?H(p,(w,y)=>{p[y]=1/c}):H(p,(w,y)=>{p[y]=w/f}),p}fit(c,p){let f=this.orientation==="horizontal",w=Math.max(0,this.children.length-1)*c,y=f?w:0,I=f?0:w,A=1/0,E=1/0;for(let S=0,v=this.children.length;S<v;++S){let T=this.children[S].fit(c,p);f?(I=Math.max(I,T.minHeight),y+=T.minWidth,this.sizers[S].minSize=T.minWidth):(y=Math.max(y,T.minWidth),I+=T.minHeight,this.sizers[S].minSize=T.minHeight)}return{minWidth:y,minHeight:I,maxWidth:A,maxHeight:E}}update(c,p,f,w,y,I){let A=this.orientation==="horizontal",E=Math.max(0,this.children.length-1)*y,S=Math.max(0,(A?f:w)-E);this.normalized&&(H(this.sizers,v=>{v.sizeHint*=S}),this.normalized=!1),Le.calc(this.sizers,S);for(let v=0,T=this.children.length;v<T;++v){let u=this.children[v],l=this.sizers[v].size,m=this.handles[v].style;A?(u.update(c,p,l,w,y,I),c+=l,m.top=`${p}px`,m.left=`${c}px`,m.width=`${y}px`,m.height=`${w}px`,c+=y):(u.update(c,p,f,l,y,I),p+=l,m.top=`${p}px`,m.left=`${c}px`,m.width=`${f}px`,m.height=`${y}px`,p+=y)}}}x.SplitLayoutNode=o;function s(b,c){b.node.setAttribute("role","tabpanel");let p=c.renderer;if(p instanceof ae.Renderer){let f=p.createTabKey({title:b.title,current:!1,zIndex:0});b.node.setAttribute("aria-labelledby",f)}}x.addAria=s;function a(b){b.node.removeAttribute("role"),b.node.removeAttribute("aria-labelledby")}x.removeAria=a;function d(b,c){if(b.widgets.length===0)return null;let p=[];if(H(b.widgets,w=>{c.has(w)||(c.add(w),p.push(w))}),p.length===0)return null;let f=b.currentIndex;return f!==-1&&(f<0||f>=p.length)&&(f=0),{type:"tab-area",widgets:p,currentIndex:f}}function g(b,c){let p=b.orientation,f=[],w=[];for(let y=0,I=b.children.length;y<I;++y){let A=t(b.children[y],c);!A||(A.type==="tab-area"||A.orientation!==p?(f.push(A),w.push(Math.abs(b.sizes[y]||0))):(f.push(...A.children),w.push(...A.sizes)))}return f.length===0?null:f.length===1?f[0]:{type:"split-area",orientation:p,children:f,sizes:w}}function _(b,c,p){let f=c.createTabBar(p);return H(b.widgets,w=>{w.hide(),f.addTab(w.title),x.addAria(w,f)}),f.currentIndex=b.currentIndex,new r(f)}function M(b,c,p){let f=new o(b.orientation);return H(b.children,(w,y)=>{let I=n(w,c,p),A=e(b.sizes[y]),E=c.createHandle();f.children.push(I),f.handles.push(E),f.sizers.push(A),I.parent=f}),f.syncHandles(),f.normalizeSizes(),f}})($||={});var _e=class extends B{constructor(e={}){super(),this.addClass("lm-DockPanel"),this.addClass("p-DockPanel"),this._document=e.document||document,this._mode=e.mode||"multiple-document",this._renderer=e.renderer||_e.defaultRenderer,this._edges=e.edges||U.DEFAULT_EDGES,e.tabsMovable!==void 0&&(this._tabsMovable=e.tabsMovable),e.tabsConstrained!==void 0&&(this._tabsConstrained=e.tabsConstrained),e.addButtonEnabled!==void 0&&(this._addButtonEnabled=e.addButtonEnabled),this.dataset.mode=this._mode;let t={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new pt({document:this._document,renderer:t,spacing:e.spacing,hiddenMode:e.hiddenMode}),this.overlay=e.overlay||new _e.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}overlay;get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get mode(){return this._mode}set mode(e){if(this._mode===e)return;this._mode=e,this.dataset.mode=e;let t=this.layout;switch(e){case"multiple-document":H(t.tabBars(),n=>{n.show()});break;case"single-document":t.restoreLayout(U.createSingleDocumentConfig(this));break;default:throw"unreachable"}O.postMessage(this,U.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(e){this._tabsMovable=e,H(this.tabBars(),t=>{t.tabsMovable=e})}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(e){this._tabsConstrained=e}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled=e,H(this.tabBars(),t=>{t.addButtonEnabled=e})}get isEmpty(){return this.layout.isEmpty}widgets(){return this.layout.widgets()}selectedWidgets(){return this.layout.selectedWidgets()}tabBars(){return this.layout.tabBars()}handles(){return this.layout.handles()}selectWidget(e){let t=Ze(this.tabBars(),n=>n.titles.indexOf(e.title)!==-1);if(!t)throw new Error("Widget is not contained in the dock panel.");t.currentTitle=e.title}activateWidget(e){this.selectWidget(e),e.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(e){this._mode="multiple-document",this.layout.restoreLayout(e),(V.IS_EDGE||V.IS_IE)&&O.flush(),O.postMessage(this,U.LayoutModified)}addWidget(e,t={}){this._mode==="single-document"?this.layout.addWidget(e):this.layout.addWidget(e,t),O.postMessage(this,U.LayoutModified)}processMessage(e){e.type==="layout-modified"?this._layoutModified.emit(void 0):super.processMessage(e)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){U.isGeneratedTabBarProperty.get(e.child)||(e.child.addClass("lm-DockPanel-widget"),e.child.addClass("p-DockPanel-widget"))}onChildRemoved(e){U.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),e.child.removeClass("p-DockPanel-widget"),O.postMessage(this,U.LayoutModified))}_evtDragEnter(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),!(this._tabsConstrained&&e.source!==this)&&(e.stopPropagation(),this.overlay.hide(1))}_evtDragOver(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||this._showOverlay(e.clientX,e.clientY)==="invalid"?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)}_evtDrop(e){if(e.preventDefault(),this.overlay.hide(0),e.proposedAction==="none"){e.dropAction="none";return}let{clientX:t,clientY:n}=e,{zone:r,target:o}=U.findDropTarget(this,t,n,this._edges);if(this._tabsConstrained&&e.source!==this||r==="invalid"){e.dropAction="none";return}let a=e.mimeData.getData("application/vnd.lumino.widget-factory");if(typeof a!="function"){e.dropAction="none";return}let d=a();if(!(d instanceof B)){e.dropAction="none";return}if(d.contains(this)){e.dropAction="none";return}let g=o?U.getDropRef(o.tabBar):null;switch(r){case"root-all":this.addWidget(d);break;case"root-top":this.addWidget(d,{mode:"split-top"});break;case"root-left":this.addWidget(d,{mode:"split-left"});break;case"root-right":this.addWidget(d,{mode:"split-right"});break;case"root-bottom":this.addWidget(d,{mode:"split-bottom"});break;case"widget-all":this.addWidget(d,{mode:"tab-after",ref:g});break;case"widget-top":this.addWidget(d,{mode:"split-top",ref:g});break;case"widget-left":this.addWidget(d,{mode:"split-left",ref:g});break;case"widget-right":this.addWidget(d,{mode:"split-right",ref:g});break;case"widget-bottom":this.addWidget(d,{mode:"split-bottom",ref:g});break;case"widget-tab":this.addWidget(d,{mode:"tab-after",ref:g});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(d)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&(this._releaseMouse(),O.postMessage(this,U.LayoutModified))}_evtMouseDown(e){if(e.button!==0)return;let t=this.layout,n=e.target,r=Ze(t.handles(),_=>_.contains(n));if(!r)return;e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("mouseup",this,!0),this._document.addEventListener("mousemove",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let o=r.getBoundingClientRect(),s=e.clientX-o.left,a=e.clientY-o.top,d=window.getComputedStyle(r),g=ke.overrideCursor(d.cursor,this._document);this._pressData={handle:r,deltaX:s,deltaY:a,override:g}}_evtMouseMove(e){if(!this._pressData)return;e.preventDefault(),e.stopPropagation();let t=this.node.getBoundingClientRect(),n=e.clientX-t.left-this._pressData.deltaX,r=e.clientY-t.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,n,r)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),O.postMessage(this,U.LayoutModified))}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("mouseup",this,!0),this._document.removeEventListener("mousemove",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(e,t){let{zone:n,target:r}=U.findDropTarget(this,e,t,this._edges);if(n==="invalid")return this.overlay.hide(100),n;let o,s,a,d,g=j.boxSizing(this.node),_=this.node.getBoundingClientRect();switch(n){case"root-all":o=g.paddingTop,s=g.paddingLeft,a=g.paddingRight,d=g.paddingBottom;break;case"root-top":o=g.paddingTop,s=g.paddingLeft,a=g.paddingRight,d=_.height*U.GOLDEN_RATIO;break;case"root-left":o=g.paddingTop,s=g.paddingLeft,a=_.width*U.GOLDEN_RATIO,d=g.paddingBottom;break;case"root-right":o=g.paddingTop,s=_.width*U.GOLDEN_RATIO,a=g.paddingRight,d=g.paddingBottom;break;case"root-bottom":o=_.height*U.GOLDEN_RATIO,s=g.paddingLeft,a=g.paddingRight,d=g.paddingBottom;break;case"widget-all":o=r.top,s=r.left,a=r.right,d=r.bottom;break;case"widget-top":o=r.top,s=r.left,a=r.right,d=r.bottom+r.height/2;break;case"widget-left":o=r.top,s=r.left,a=r.right+r.width/2,d=r.bottom;break;case"widget-right":o=r.top,s=r.left+r.width/2,a=r.right,d=r.bottom;break;case"widget-bottom":o=r.top+r.height/2,s=r.left,a=r.right,d=r.bottom;break;case"widget-tab":let M=r.tabBar.node.getBoundingClientRect().height;o=r.top,s=r.left,a=r.right,d=r.bottom+r.height-M;break;default:throw"unreachable"}return this.overlay.show({top:o,left:s,right:a,bottom:d}),n}_createTabBar(){let e=this._renderer.createTabBar(this._document);return U.isGeneratedTabBarProperty.set(e,!0),this._mode==="single-document"&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){O.postMessage(this,U.LayoutModified)}_onCurrentChanged(e,t){let{previousTitle:n,currentTitle:r}=t;n&&n.owner.hide(),r&&r.owner.show(),(V.IS_EDGE||V.IS_IE)&&O.flush(),O.postMessage(this,U.LayoutModified)}_onTabAddRequested(e){this._addRequested.emit(e)}_onTabActivateRequested(e,t){t.title.owner.activate()}_onTabCloseRequested(e,t){t.title.owner.close()}_onTabDetachRequested(e,t){if(this._drag)return;e.releaseMouse();let{title:n,tab:r,clientX:o,clientY:s}=t,a=new Zt.MimeData,d=()=>n.owner;a.setData("application/vnd.lumino.widget-factory",d);let g=r.cloneNode(!0);this._drag=new ke({document:this._document,mimeData:a,dragImage:g,proposedAction:"move",supportedActions:"move",source:this}),r.classList.add("lm-mod-hidden"),r.classList.add("p-mod-hidden");let _=()=>{this._drag=null,r.classList.remove("lm-mod-hidden"),r.classList.remove("p-mod-hidden")};this._drag.start(o,s).then(_)}_edges;_document;_mode;_drag=null;_renderer;_tabsMovable=!0;_tabsConstrained=!1;_addButtonEnabled=!1;_pressData=null;_layoutModified=new W(this);_addRequested=new W(this)};(n=>{class i{constructor(){this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}node;show(o){let s=this.node.style;s.top=`${o.top}px`,s.left=`${o.left}px`,s.right=`${o.right}px`,s.bottom=`${o.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))}hide(o){if(!this._hidden){if(o<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden")},o))}}_timer=-1;_hidden=!0}n.Overlay=i;class e{createTabBar(o){let s=new ae({document:o});return s.addClass("lm-DockPanel-tabBar"),s.addClass("p-DockPanel-tabBar"),s}createHandle(){let o=document.createElement("div");return o.className="lm-DockPanel-handle",o.classList.add("p-DockPanel-handle"),o}}n.Renderer=e,n.defaultRenderer=new e})(_e||={});var U;(a=>{a.GOLDEN_RATIO=.618,a.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},a.LayoutModified=new Pe("layout-modified"),a.isGeneratedTabBarProperty=new te({name:"isGeneratedTabBar",create:()=>!1});function r(d){if(d.isEmpty)return{main:null};let g=jt(d.widgets()),_=d.selectedWidgets().next(),M=_?g.indexOf(_):-1;return{main:{type:"tab-area",widgets:g,currentIndex:M}}}a.createSingleDocumentConfig=r;function o(d,g,_,M){if(!j.hitTest(d.node,g,_))return{zone:"invalid",target:null};let x=d.layout;if(x.isEmpty)return{zone:"root-all",target:null};if(d.mode==="multiple-document"){let v=d.node.getBoundingClientRect(),T=g-v.left+1,u=_-v.top+1,l=v.right-g,m=v.bottom-_;switch(Math.min(u,l,m,T)){case u:if(u<M.top)return{zone:"root-top",target:null};break;case l:if(l<M.right)return{zone:"root-right",target:null};break;case m:if(m<M.bottom)return{zone:"root-bottom",target:null};break;case T:if(T<M.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let b=x.hitTestTabAreas(g,_);if(!b)return{zone:"invalid",target:null};if(d.mode==="single-document")return{zone:"widget-all",target:b};let c=b.x-b.left+1,p=b.y-b.top+1,f=b.left+b.width-b.x,w=b.top+b.height-b.y,y=b.tabBar.node.getBoundingClientRect().height;if(p<y)return{zone:"widget-tab",target:b};let I=Math.round(b.width/3),A=Math.round(b.height/3);if(c>I&&f>I&&p>A&&w>A)return{zone:"widget-all",target:b};c/=I,p/=A,f/=I,w/=A;let E=Math.min(c,p,f,w),S;switch(E){case c:S="widget-left";break;case p:S="widget-top";break;case f:S="widget-right";break;case w:S="widget-bottom";break;default:throw"unreachable"}return{zone:S,target:b}}a.findDropTarget=o;function s(d){return d.titles.length===0?null:d.currentTitle?d.currentTitle.owner:d.titles[d.titles.length-1].owner}a.getDropRef=s})(U||={});var _i;(e=>{function i(t){let n=document.body,r=o=>{o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",t),n.removeEventListener("copy",r,!0)};n.addEventListener("copy",r,!0),document.execCommand("copy")}e.copyText=i})(_i||={});var Ct;(r=>{function i(o){let s=window.getComputedStyle(o),a=parseFloat(s.borderTopWidth)||0,d=parseFloat(s.borderLeftWidth)||0,g=parseFloat(s.borderRightWidth)||0,_=parseFloat(s.borderBottomWidth)||0,M=parseFloat(s.paddingTop)||0,x=parseFloat(s.paddingLeft)||0,b=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingBottom)||0,p=d+x+b+g,f=a+M+c+_;return{borderTop:a,borderLeft:d,borderRight:g,borderBottom:_,paddingTop:M,paddingLeft:x,paddingRight:b,paddingBottom:c,horizontalSum:p,verticalSum:f}}r.boxSizing=i;function e(o){let s=window.getComputedStyle(o),a=parseFloat(s.minWidth)||0,d=parseFloat(s.minHeight)||0,g=parseFloat(s.maxWidth)||1/0,_=parseFloat(s.maxHeight)||1/0;return g=Math.max(a,g),_=Math.max(d,_),{minWidth:a,minHeight:d,maxWidth:g,maxHeight:_}}r.sizeLimits=e;function t(o,s,a){let d=o.getBoundingClientRect();return s>=d.left&&s<d.right&&a>=d.top&&a<d.bottom}r.hitTest=t;function n(o,s){let a=o.getBoundingClientRect(),d=s.getBoundingClientRect();if(!(d.top<=a.top&&d.bottom>=a.bottom)){if(d.top<a.top&&d.height<=a.height){o.scrollTop-=a.top-d.top;return}if(d.bottom>a.bottom&&d.height>=a.height){o.scrollTop-=a.top-d.top;return}if(d.top<a.top&&d.height>a.height){o.scrollTop-=a.bottom-d.bottom;return}if(d.bottom>a.bottom&&d.height<a.height){o.scrollTop-=a.bottom-d.bottom;return}}}r.scrollIntoViewIfNeeded=n})(Ct||={});var xi;(o=>{o.IS_MAC=!!navigator.platform.match(/Mac/i),o.IS_WIN=!!navigator.platform.match(/Win/i),o.IS_IE=/Trident/.test(navigator.userAgent),o.IS_EDGE=/Edge/.test(navigator.userAgent);function r(s){return o.IS_MAC?s.metaKey:s.ctrlKey}o.accelKey=r})(xi||={});var Ii;(n=>{function i(r){if(r in xe.specificityCache)return xe.specificityCache[r];let o=xe.calculateSingle(r);return xe.specificityCache[r]=o}n.calculateSpecificity=i;function e(r){if(r in xe.validityCache)return xe.validityCache[r];let o=!0;try{xe.testElem.querySelector(r)}catch{o=!1}return xe.validityCache[r]=o}n.isValid=e;function t(r,o){return xe.protoMatchFunc.call(r,o)}n.matches=t})(Ii||={});var xe;(b=>{b.specificityCache=Object.create(null),b.validityCache=Object.create(null),b.testElem=document.createElement("div"),b.protoMatchFunc=(()=>{let c=Element.prototype;return c.matches||c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector||function(p){let f=this,w=f.ownerDocument?f.ownerDocument.querySelectorAll(p):[];return Array.prototype.indexOf.call(w,f)!==-1}})();function r(c){c=c.split(",",1)[0];let p=0,f=0,w=0;function y(I){let A=c.match(I);return A===null?!1:(c=c.slice(A[0].length),!0)}for(c=c.replace(x," $1 ");c.length>0;){if(y(o)){p++;continue}if(y(s)){f++;continue}if(y(a)){f++;continue}if(y(g)){w++;continue}if(y(_)){f++;continue}if(y(d)){w++;continue}if(!y(M))return 0}return p=Math.min(p,255),f=Math.min(f,255),w=Math.min(w,255),p<<16|f<<8|w}b.calculateSingle=r;let o=/^#[^\s\+>~#\.\[:]+/,s=/^\.[^\s\+>~#\.\[:]+/,a=/^\[[^\]]+\]/,d=/^[^\s\+>~#\.\[:]+/,g=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,_=/^:[^\s\+>~#\.\[:]+/,M=/^[\s\+>~\*]+/,x=/:not\(([^\)]+)\)/g})(xe||={});var $e=class{content;type="text";constructor(e){this.content=e}},it=class{tag;attrs;children;renderer;type="element";constructor(e,t,n,r){this.tag=e,this.attrs=t,this.children=n,this.renderer=r}};function Q(i){let e={},t,n=[];for(let o=1,s=arguments.length;o<s;++o){let a=arguments[o];typeof a=="string"?n.push(new $e(a)):a instanceof $e||a instanceof it?n.push(a):a instanceof Array?r(n,a):(o===1||o===2)&&a&&typeof a=="object"&&("render"in a?t=a:e=a)}return new it(i,e,n,t);function r(o,s){for(let a of s)typeof a=="string"?o.push(new $e(a)):(a instanceof $e||a instanceof it)&&o.push(a)}}(C=>(C.a=C.bind(void 0,"a"),C.abbr=C.bind(void 0,"abbr"),C.address=C.bind(void 0,"address"),C.area=C.bind(void 0,"area"),C.article=C.bind(void 0,"article"),C.aside=C.bind(void 0,"aside"),C.audio=C.bind(void 0,"audio"),C.b=C.bind(void 0,"b"),C.bdi=C.bind(void 0,"bdi"),C.bdo=C.bind(void 0,"bdo"),C.blockquote=C.bind(void 0,"blockquote"),C.br=C.bind(void 0,"br"),C.button=C.bind(void 0,"button"),C.canvas=C.bind(void 0,"canvas"),C.caption=C.bind(void 0,"caption"),C.cite=C.bind(void 0,"cite"),C.code=C.bind(void 0,"code"),C.col=C.bind(void 0,"col"),C.colgroup=C.bind(void 0,"colgroup"),C.data=C.bind(void 0,"data"),C.datalist=C.bind(void 0,"datalist"),C.dd=C.bind(void 0,"dd"),C.del=C.bind(void 0,"del"),C.dfn=C.bind(void 0,"dfn"),C.div=C.bind(void 0,"div"),C.dl=C.bind(void 0,"dl"),C.dt=C.bind(void 0,"dt"),C.em=C.bind(void 0,"em"),C.embed=C.bind(void 0,"embed"),C.fieldset=C.bind(void 0,"fieldset"),C.figcaption=C.bind(void 0,"figcaption"),C.figure=C.bind(void 0,"figure"),C.footer=C.bind(void 0,"footer"),C.form=C.bind(void 0,"form"),C.h1=C.bind(void 0,"h1"),C.h2=C.bind(void 0,"h2"),C.h3=C.bind(void 0,"h3"),C.h4=C.bind(void 0,"h4"),C.h5=C.bind(void 0,"h5"),C.h6=C.bind(void 0,"h6"),C.header=C.bind(void 0,"header"),C.hr=C.bind(void 0,"hr"),C.i=C.bind(void 0,"i"),C.iframe=C.bind(void 0,"iframe"),C.img=C.bind(void 0,"img"),C.input=C.bind(void 0,"input"),C.ins=C.bind(void 0,"ins"),C.kbd=C.bind(void 0,"kbd"),C.label=C.bind(void 0,"label"),C.legend=C.bind(void 0,"legend"),C.li=C.bind(void 0,"li"),C.main=C.bind(void 0,"main"),C.map=C.bind(void 0,"map"),C.mark=C.bind(void 0,"mark"),C.meter=C.bind(void 0,"meter"),C.nav=C.bind(void 0,"nav"),C.noscript=C.bind(void 0,"noscript"),C.object=C.bind(void 0,"object"),C.ol=C.bind(void 0,"ol"),C.optgroup=C.bind(void 0,"optgroup"),C.option=C.bind(void 0,"option"),C.output=C.bind(void 0,"output"),C.p=C.bind(void 0,"p"),C.param=C.bind(void 0,"param"),C.pre=C.bind(void 0,"pre"),C.progress=C.bind(void 0,"progress"),C.q=C.bind(void 0,"q"),C.rp=C.bind(void 0,"rp"),C.rt=C.bind(void 0,"rt"),C.ruby=C.bind(void 0,"ruby"),C.s=C.bind(void 0,"s"),C.samp=C.bind(void 0,"samp"),C.section=C.bind(void 0,"section"),C.select=C.bind(void 0,"select"),C.small=C.bind(void 0,"small"),C.source=C.bind(void 0,"source"),C.span=C.bind(void 0,"span"),C.strong=C.bind(void 0,"strong"),C.sub=C.bind(void 0,"sub"),C.summary=C.bind(void 0,"summary"),C.sup=C.bind(void 0,"sup"),C.table=C.bind(void 0,"table"),C.tbody=C.bind(void 0,"tbody"),C.td=C.bind(void 0,"td"),C.textarea=C.bind(void 0,"textarea"),C.tfoot=C.bind(void 0,"tfoot"),C.th=C.bind(void 0,"th"),C.thead=C.bind(void 0,"thead"),C.time=C.bind(void 0,"time"),C.title=C.bind(void 0,"title"),C.tr=C.bind(void 0,"tr"),C.track=C.bind(void 0,"track"),C.u=C.bind(void 0,"u"),C.ul=C.bind(void 0,"ul"),C.var_=C.bind(void 0,"var"),C.video=C.bind(void 0,"video"),C.wbr=C.bind(void 0,"wbr")))(Q||={});var Ti;(t=>{function i(n){return Ue.createDOMNode(n)}t.realize=i;function e(n,r){let o=Ue.hostMap.get(r)||[],s=Ue.asContentArray(n);Ue.hostMap.set(r,s),Ue.updateContent(r,o,s)}t.render=e})(Ti||={});var Ue;(b=>{b.hostMap=new WeakMap;function e(c){return c?c instanceof Array?c:[c]:[]}b.asContentArray=e;function t(c){let p=arguments[1]||null,f=arguments[2]||null;if(p)p.insertBefore(t(c),f);else{if(c.type==="text")return document.createTextNode(c.content);if(p=document.createElement(c.tag),s(p,c.attrs),c.renderer)return c.renderer.render(p,{attrs:c.attrs,children:c.children}),p;for(let w=0,y=c.children.length;w<y;++w)t(c.children[w],p)}return p}b.createDOMNode=t;function n(c,p,f){if(p===f)return;let w=x(c,p),y=p.slice(),I=c.firstChild,A=f.length;for(let E=0;E<A;++E){if(E>=y.length){t(f[E],c);continue}let S=y[E],v=f[E];if(S===v){I=I.nextSibling;continue}if(S.type==="text"&&v.type==="text"){I.textContent!==v.content&&(I.textContent=v.content),I=I.nextSibling;continue}if(S.type==="text"||v.type==="text"){z.insert(y,E,v),t(v,c,I);continue}if(!S.renderer!=!v.renderer){z.insert(y,E,v),t(v,c,I);continue}let T=v.attrs.key;if(T&&T in w){let l=w[T];l.vNode!==S&&(z.move(y,y.indexOf(l.vNode,E+1),E),c.insertBefore(l.element,I),S=l.vNode,I=l.element)}if(S===v){I=I.nextSibling;continue}let u=S.attrs.key;if(u&&u!==T){z.insert(y,E,v),t(v,c,I);continue}if(S.tag!==v.tag){z.insert(y,E,v),t(v,c,I);continue}a(I,S.attrs,v.attrs),v.renderer?v.renderer.render(I,{attrs:v.attrs,children:v.children}):n(I,S.children,v.children),I=I.nextSibling}r(c,y,A,!0)}b.updateContent=n;function r(c,p,f,w){for(let y=p.length-1;y>=f;--y){let I=p[y],A=w?c.lastChild:c.childNodes[y];I.type==="text"||(I.renderer&&I.renderer.unrender?I.renderer.unrender(A,{attrs:I.attrs,children:I.children}):r(A,I.children,0,!1)),w&&c.removeChild(A)}}let o={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function s(c,p){for(let f in p)f in o||(f.substr(0,2)==="on"?c[f]=p[f]:c.setAttribute(f,p[f]));p.className!==void 0&&c.setAttribute("class",p.className),p.htmlFor!==void 0&&c.setAttribute("for",p.htmlFor),p.dataset&&d(c,p.dataset),p.style&&_(c,p.style)}function a(c,p,f){if(p===f)return;let w;for(w in p)w in o||w in f||(w.substr(0,2)==="on"?c[w]=null:c.removeAttribute(w));for(w in f)w in o||p[w]===f[w]||(w.substr(0,2)==="on"?c[w]=f[w]:c.setAttribute(w,f[w]));p.className!==f.className&&(f.className!==void 0?c.setAttribute("class",f.className):c.removeAttribute("class")),p.htmlFor!==f.htmlFor&&(f.htmlFor!==void 0?c.setAttribute("for",f.htmlFor):c.removeAttribute("for")),p.dataset!==f.dataset&&g(c,p.dataset||{},f.dataset||{}),p.style!==f.style&&M(c,p.style||{},f.style||{})}function d(c,p){for(let f in p)c.setAttribute(`data-${f}`,p[f])}function g(c,p,f){for(let w in p)w in f||c.removeAttribute(`data-${w}`);for(let w in f)p[w]!==f[w]&&c.setAttribute(`data-${w}`,f[w])}function _(c,p){let f=c.style,w;for(w in p)f[w]=p[w]}function M(c,p,f){let w=c.style,y;for(y in p)y in f||(w[y]="");for(y in f)p[y]!==f[y]&&(w[y]=f[y])}function x(c,p){let f=c.firstChild,w=Object.create(null);for(let y of p)y.type==="element"&&y.attrs.key&&(w[y.attrs.key]={vNode:y,element:f}),f=f.nextSibling;return w}})(Ue||={});var gt={Config:"config",Label:"label"},wi="untitled",ft=class extends ae.Renderer{constructor(e){super(),this.maximized=e}renderLabel(e){return Q.span({className:"p-TabBar-tabLabel",id:gt.Label},e.title.label||wi)}renderOther(e,t){return Q.span({},t.label||"untitled")}renderInert(){return Q.div()}renderTab(e){let t=e.title.caption,n=this.createTabKey(e),r=this.createTabStyle(e),o=this.createTabClass(e),s=this.createTabDataset(e),a=[];return e.onClick&&a.push(Q.div({onclick:e.onClick,class:"bookmarks-button"},Q.div({class:"bookmarks"}))),Q.li({key:n,className:o,title:t,style:r,dataset:s},this.renderDragHandle(),...a,this.renderLabel(e),this.renderCloseIcon())}renderDragHandle(){return Q.div({className:"drag-handle"})}renderCloseIcon(){return Q.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}};var ee=at(tt());function De(){return St.keyboardLayout}var At=function(){function i(e,t,n){n===void 0&&(n=[]),this.name=e,this._codes=t,this._keys=i.extractKeys(t),this._modifierKeys=i.convertToKeySet(n)}return i.prototype.keys=function(){return Object.keys(this._keys)},i.prototype.isValidKey=function(e){return e in this._keys},i.prototype.isModifierKey=function(e){return e in this._modifierKeys},i.prototype.keyForKeydownEvent=function(e){return this._codes[e.keyCode]||""},i}();(function(i){function e(n){var r=Object.create(null);for(var o in n)r[n[o]]=!0;return r}i.extractKeys=e;function t(n){for(var r=Object(null),o=0,s=n.length;o<s;++o)r[n[o]]=!0;return r}i.convertToKeySet=t})(At||(At={}));var Mi=new At("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),St;(function(i){i.keyboardLayout=Mi})(St||(St={}));var he=class{get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Object.keys(this._commands)}hasCommand(e){return e in this._commands}addCommand(e,t){if(e in this._commands)throw new Error(`Command '${e}' already registered.`);return this._commands[e]=Ne.createCommand(t),this._commandChanged.emit({id:e,type:"added"}),new Me(()=>{delete this._commands[e],this._commandChanged.emit({id:e,type:"removed"})})}notifyCommandChanged(e){if(e!==void 0&&!(e in this._commands))throw new Error(`Command '${e}' is not registered.`);this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})}describedBy(e){let t=this._commands[e];return t?t.describedBy||{args:null}:{args:null}}label(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.label.call(void 0,t):""}mnemonic(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.mnemonic.call(void 0,t):-1}icon(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.icon.call(void 0,t):""}iconClass(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.iconClass.call(void 0,t):""}iconLabel(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.iconLabel.call(void 0,t):""}caption(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.caption.call(void 0,t):""}usage(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.usage.call(void 0,t):""}className(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.className.call(void 0,t):""}dataset(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.dataset.call(void 0,t):{}}isEnabled(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.isEnabled.call(void 0,t):!1}isToggled(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.isToggled.call(void 0,t):!1}isToggleable(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.isToggleable:!1}isVisible(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];return n?n.isVisible.call(void 0,t):!1}execute(e,t=ee.JSONExt.emptyObject){let n=this._commands[e];if(!n)return Promise.reject(new Error(`Command '${e}' not registered.`));let r;try{r=n.execute.call(void 0,t)}catch(s){r=Promise.reject(s)}let o=Promise.resolve(r);return this._commandExecuted.emit({id:e,args:t,result:o}),o}addKeyBinding(e){let t=Ne.createKeyBinding(e);return this._keyBindings.push(t),this._keyBindingChanged.emit({binding:t,type:"added"}),new Me(()=>{z.removeFirstOf(this._keyBindings,t),this._keyBindingChanged.emit({binding:t,type:"removed"})})}processKeydownEvent(e){if(this._replaying||he.isModifierKeyPressed(e))return;let t=he.keystrokeForKeydownEvent(e);if(!t){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(t);let{exact:n,partial:r}=Ne.matchKeyBinding(this._keyBindings,this._keystrokes,e);if(!n&&!r){this._replayKeydownEvents(),this._clearPendingState();return}if(e.preventDefault(),e.stopPropagation(),n&&!r){this._executeKeyBinding(n),this._clearPendingState();return}n&&(this._exactKeyMatch=n),this._keydownEvents.push(e),this._startTimer()}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},Ne.CHORD_TIMEOUT)}_clearTimer(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Ne.replayKeyEvent),this._replaying=!1)}_executeKeyBinding(e){let{command:t,args:n}=e;if(!this.hasCommand(t)||!this.isEnabled(t,n)){let r=this.hasCommand(t)?"enabled":"registered",s=`Cannot execute key binding '${e.keys.join(", ")}':`,a=`command '${t}' is not ${r}.`;console.warn(`${s} ${a}`);return}this.execute(t,n)}_clearPendingState(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}_timerID=0;_replaying=!1;_keystrokes=[];_keydownEvents=[];_keyBindings=[];_exactKeyMatch=null;_commands=Object.create(null);_commandChanged=new W(this);_commandExecuted=new W(this);_keyBindingChanged=new W(this)};(s=>{function i(a){let d="",g=!1,_=!1,M=!1,x=!1;for(let b of a.split(/\s+/))b==="Accel"?V.IS_MAC?_=!0:M=!0:b==="Alt"?g=!0:b==="Cmd"?_=!0:b==="Ctrl"?M=!0:b==="Shift"?x=!0:b.length>0&&(d=b);return{cmd:_,ctrl:M,alt:g,shift:x,key:d}}s.parseKeystroke=i;function e(a){let d="",g=i(a);return g.ctrl&&(d+="Ctrl "),g.alt&&(d+="Alt "),g.shift&&(d+="Shift "),g.cmd&&V.IS_MAC&&(d+="Cmd "),d+g.key}s.normalizeKeystroke=e;function t(a){let d;return V.IS_WIN?d=a.winKeys||a.keys:V.IS_MAC?d=a.macKeys||a.keys:d=a.linuxKeys||a.keys,d.map(e)}s.normalizeKeys=t;function n(a){return typeof a=="string"?d(a):a.map(d).join(", ");function d(g){let _=[],M=V.IS_MAC?" ":"+",x=i(g);return x.ctrl&&_.push("Ctrl"),x.alt&&_.push("Alt"),x.shift&&_.push("Shift"),V.IS_MAC&&x.cmd&&_.push("Cmd"),_.push(x.key),_.map(Ne.formatKey).join(M)}}s.formatKeystroke=n;function r(a){let d=De(),g=d.keyForKeydownEvent(a);return d.isModifierKey(g)}s.isModifierKeyPressed=r;function o(a){let d=De(),g=d.keyForKeydownEvent(a);if(!g||d.isModifierKey(g))return"";let _=[];return a.ctrlKey&&_.push("Ctrl"),a.altKey&&_.push("Alt"),a.shiftKey&&_.push("Shift"),a.metaKey&&V.IS_MAC&&_.push("Cmd"),_.push(g),_.join(" ")}s.keystrokeForKeydownEvent=o})(he||={});var Ne;(A=>{A.CHORD_TIMEOUT=1e3;function e(E){let S,v;return!E.icon||typeof E.icon=="string"?(v=c(E.iconClass||E.icon,d),S=v):(v=c(E.iconClass,d),S=c(E.icon,b)),{execute:E.execute,describedBy:{args:null,...E.describedBy},label:c(E.label,d),mnemonic:c(E.mnemonic,g),icon:S,iconClass:v,iconLabel:c(E.iconLabel,d),caption:c(E.caption,d),usage:c(E.usage,d),className:c(E.className,d),dataset:c(E.dataset,x),isEnabled:E.isEnabled||_,isToggled:E.isToggled||M,isToggleable:E.isToggleable||!!E.isToggled,isVisible:E.isVisible||_}}A.createCommand=e;function t(E){return{keys:he.normalizeKeys(E),selector:p(E),command:E.command,args:E.args||ee.JSONExt.emptyObject}}A.createKeyBinding=t;function n(E,S,v){let T=null,u=!1,l=1/0,m=0;for(let k=0,h=E.length;k<h;++k){let L=E[k],D=w(L.keys,S);if(D===f.None)continue;if(D===f.Partial){!u&&y(L.selector,v)!==-1&&(u=!0);continue}let R=y(L.selector,v);if(R===-1||R>l)continue;let P=ve.calculateSpecificity(L.selector);(!T||R<l||P>=m)&&(T=L,l=R,m=P)}return{exact:T,partial:u}}A.matchKeyBinding=n;function r(E){E.target.dispatchEvent(I(E))}A.replayKeyEvent=r;function o(E){return V.IS_MAC?s.hasOwnProperty(E)?s[E]:E:a.hasOwnProperty(E)?a[E]:E}A.formatKey=o;let s={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},a={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},d=()=>"",g=()=>-1,_=()=>!0,M=()=>!1,x=()=>({}),b=()=>{};function c(E,S){return E===void 0?S:typeof E=="function"?E:()=>E}function p(E){if(E.selector.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${E.selector}`);if(!ve.isValid(E.selector))throw new Error(`Invalid selector: ${E.selector}`);return E.selector}let f;(T=>(T[T.None=0]="None",T[T.Exact=1]="Exact",T[T.Partial=2]="Partial"))(f||={});function w(E,S){if(E.length<S.length)return 0;for(let v=0,T=S.length;v<T;++v)if(E[v]!==S[v])return 0;return E.length>S.length?2:1}function y(E,S){let v=S.target,T=S.currentTarget;for(let u=0;v!==null;v=v.parentElement,++u){if(v.hasAttribute("data-lm-suppress-shortcuts")||v.hasAttribute("data-p-suppress-shortcuts"))return-1;if(ve.matches(v,E))return u;if(v===T)return-1}return-1}function I(E){let S=document.createEvent("Event"),v=E.bubbles||!0,T=E.cancelable||!0;return S.initEvent(E.type||"keydown",v,T),S.key=E.key||"",S.keyCode=E.keyCode||0,S.which=E.keyCode||0,S.ctrlKey=E.ctrlKey||!1,S.altKey=E.altKey||!1,S.shiftKey=E.shiftKey||!1,S.metaKey=E.metaKey||!1,S.view=E.view||window,S}})(Ne||={});var ie=at(tt());var Dt=function(){return Dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Dt.apply(this,arguments)},nt=function(){function i(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new W(this),this._commandExecuted=new W(this),this._keyBindingChanged=new W(this)}return Object.defineProperty(i.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),i.prototype.listCommands=function(){return Object.keys(this._commands)},i.prototype.hasCommand=function(e){return e in this._commands},i.prototype.addCommand=function(e,t){var n=this;if(e in this._commands)throw new Error("Command '"+e+"' already registered.");return this._commands[e]=Be.createCommand(t),this._commandChanged.emit({id:e,type:"added"}),new Me(function(){delete n._commands[e],n._commandChanged.emit({id:e,type:"removed"})})},i.prototype.notifyCommandChanged=function(e){if(e!==void 0&&!(e in this._commands))throw new Error("Command '"+e+"' is not registered.");this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})},i.prototype.describedBy=function(e){var t=this._commands[e];return t?t.describedBy||{args:null}:{args:null}},i.prototype.label=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.label.call(void 0,t):""},i.prototype.mnemonic=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.mnemonic.call(void 0,t):-1},i.prototype.icon=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.icon.call(void 0,t):""},i.prototype.iconClass=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.iconClass.call(void 0,t):""},i.prototype.iconLabel=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.iconLabel.call(void 0,t):""},i.prototype.caption=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.caption.call(void 0,t):""},i.prototype.usage=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.usage.call(void 0,t):""},i.prototype.className=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.className.call(void 0,t):""},i.prototype.dataset=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.dataset.call(void 0,t):{}},i.prototype.isEnabled=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.isEnabled.call(void 0,t):!1},i.prototype.isToggled=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.isToggled.call(void 0,t):!1},i.prototype.isToggleable=function(e,t){var n=this._commands[e];return n?n.isToggleable:!1},i.prototype.isVisible=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];return n?n.isVisible.call(void 0,t):!1},i.prototype.execute=function(e,t){t===void 0&&(t=ie.JSONExt.emptyObject);var n=this._commands[e];if(!n)return Promise.reject(new Error("Command '"+e+"' not registered."));var r;try{r=n.execute.call(void 0,t)}catch(s){r=Promise.reject(s)}var o=Promise.resolve(r);return this._commandExecuted.emit({id:e,args:t,result:o}),o},i.prototype.addKeyBinding=function(e){var t=this,n=Be.createKeyBinding(e);return this._keyBindings.push(n),this._keyBindingChanged.emit({binding:n,type:"added"}),new Me(function(){z.removeFirstOf(t._keyBindings,n),t._keyBindingChanged.emit({binding:n,type:"removed"})})},i.prototype.processKeydownEvent=function(e){if(!(this._replaying||i.isModifierKeyPressed(e))){var t=i.keystrokeForKeydownEvent(e);if(!t){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(t);var n=Be.matchKeyBinding(this._keyBindings,this._keystrokes,e),r=n.exact,o=n.partial;if(!r&&!o){this._replayKeydownEvents(),this._clearPendingState();return}if(e.preventDefault(),e.stopPropagation(),r&&!o){this._executeKeyBinding(r),this._clearPendingState();return}r&&(this._exactKeyMatch=r),this._keydownEvents.push(e),this._startTimer()}},i.prototype._startTimer=function(){var e=this;this._clearTimer(),this._timerID=window.setTimeout(function(){e._onPendingTimeout()},Be.CHORD_TIMEOUT)},i.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},i.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Be.replayKeyEvent),this._replaying=!1)},i.prototype._executeKeyBinding=function(e){var t=e.command,n=e.args;if(!this.hasCommand(t)||!this.isEnabled(t,n)){var r=this.hasCommand(t)?"enabled":"registered",o=e.keys.join(", "),s="Cannot execute key binding '"+o+"':",a="command '"+t+"' is not "+r+".";console.warn(s+" "+a);return}this.execute(t,n)},i.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},i.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},i}();(function(i){function e(a){for(var d="",g=!1,_=!1,M=!1,x=!1,b=0,c=a.split(/\s+/);b<c.length;b++){var p=c[b];p==="Accel"?V.IS_MAC?_=!0:M=!0:p==="Alt"?g=!0:p==="Cmd"?_=!0:p==="Ctrl"?M=!0:p==="Shift"?x=!0:p.length>0&&(d=p)}return{cmd:_,ctrl:M,alt:g,shift:x,key:d}}i.parseKeystroke=e;function t(a){var d="",g=e(a);return g.ctrl&&(d+="Ctrl "),g.alt&&(d+="Alt "),g.shift&&(d+="Shift "),g.cmd&&V.IS_MAC&&(d+="Cmd "),d+g.key}i.normalizeKeystroke=t;function n(a){var d;return V.IS_WIN?d=a.winKeys||a.keys:V.IS_MAC?d=a.macKeys||a.keys:d=a.linuxKeys||a.keys,d.map(t)}i.normalizeKeys=n;function r(a){return typeof a=="string"?d(a):a.map(d).join(", ");function d(g){var _=[],M=V.IS_MAC?" ":"+",x=e(g);return x.ctrl&&_.push("Ctrl"),x.alt&&_.push("Alt"),x.shift&&_.push("Shift"),V.IS_MAC&&x.cmd&&_.push("Cmd"),_.push(x.key),_.map(Be.formatKey).join(M)}}i.formatKeystroke=r;function o(a){var d=De(),g=d.keyForKeydownEvent(a);return d.isModifierKey(g)}i.isModifierKeyPressed=o;function s(a){var d=De(),g=d.keyForKeydownEvent(a);if(!g||d.isModifierKey(g))return"";var _=[];return a.ctrlKey&&_.push("Ctrl"),a.altKey&&_.push("Alt"),a.shiftKey&&_.push("Shift"),a.metaKey&&V.IS_MAC&&_.push("Cmd"),_.push(g),_.join(" ")}i.keystrokeForKeydownEvent=s})(nt||(nt={}));var Be;(function(i){i.CHORD_TIMEOUT=1e3;function e(I){var A,E;return!I.icon||typeof I.icon=="string"?(E=c(I.iconClass||I.icon,d),A=E):(E=c(I.iconClass,d),A=c(I.icon,b)),{execute:I.execute,describedBy:Dt({args:null},I.describedBy),label:c(I.label,d),mnemonic:c(I.mnemonic,g),icon:A,iconClass:E,iconLabel:c(I.iconLabel,d),caption:c(I.caption,d),usage:c(I.usage,d),className:c(I.className,d),dataset:c(I.dataset,x),isEnabled:I.isEnabled||_,isToggled:I.isToggled||M,isToggleable:I.isToggleable||!!I.isToggled,isVisible:I.isVisible||_}}i.createCommand=e;function t(I){return{keys:nt.normalizeKeys(I),selector:p(I),command:I.command,args:I.args||ie.JSONExt.emptyObject}}i.createKeyBinding=t;function n(I,A,E){for(var S=null,v=!1,T=1/0,u=0,l=0,m=I.length;l<m;++l){var k=I[l],h=f(k.keys,A);if(h!==0){if(h===2){!v&&w(k.selector,E)!==-1&&(v=!0);continue}var L=w(k.selector,E);if(!(L===-1||L>T)){var D=ve.calculateSpecificity(k.selector);(!S||L<T||D>=u)&&(S=k,T=L,u=D)}}}return{exact:S,partial:v}}i.matchKeyBinding=n;function r(I){I.target.dispatchEvent(y(I))}i.replayKeyEvent=r;function o(I){return V.IS_MAC?s.hasOwnProperty(I)?s[I]:I:a.hasOwnProperty(I)?a[I]:I}i.formatKey=o;var s={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},a={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},d=function(){return""},g=function(){return-1},_=function(){return!0},M=function(){return!1},x=function(){return{}},b=function(){};function c(I,A){return I===void 0?A:typeof I=="function"?I:function(){return I}}function p(I){if(I.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+I.selector);if(!ve.isValid(I.selector))throw new Error("Invalid selector: "+I.selector);return I.selector}function f(I,A){if(I.length<A.length)return 0;for(var E=0,S=A.length;E<S;++E)if(I[E]!==A[E])return 0;return I.length>A.length?2:1}function w(I,A){for(var E=A.target,S=A.currentTarget,v=0;E!==null;E=E.parentElement,++v){if(E.hasAttribute("data-lm-suppress-shortcuts")||E.hasAttribute("data-p-suppress-shortcuts"))return-1;if(ve.matches(E,I))return v;if(E===S)return-1}return-1}function y(I){var A=document.createEvent("Event"),E=I.bubbles||!0,S=I.cancelable||!0;return A.initEvent(I.type||"keydown",E,S),A.key=I.key||"",A.keyCode=I.keyCode||0,A.which=I.keyCode||0,A.ctrlKey=I.ctrlKey||!1,A.altKey=I.altKey||!1,A.shiftKey=I.shiftKey||!1,A.metaKey=I.metaKey||!1,A.view=I.view||window,A}})(Be||(Be={}));var Bt=at(tt());var le=class extends B{constructor(e){super({node:se.createNode()}),this.addClass("lm-Menu"),this.addClass("p-Menu"),this.setFlag(B.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||le.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}commands;renderer;get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}get leafMenu(){let e=this;for(;e._childMenu;)e=e._childMenu;return e}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(e){this.activeIndex=e?this._items.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._items.length)&&(e=-1),e!==-1&&!se.canActivate(this._items[e])&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let e=this._items.length,t=this._activeIndex,n=t<e-1?t+1:0,r=n===0?e-1:n-1;this.activeIndex=z.findFirstIndex(this._items,se.canActivate,n,r)}activatePreviousItem(){let e=this._items.length,t=this._activeIndex,n=t<=0?e-1:t-1,r=n===e-1?0:n+1;this.activeIndex=z.findLastIndex(this._items,se.canActivate,n,r)}triggerActiveItem(){if(!this.isAttached)return;let e=this.activeItem;if(!e)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),e.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();let{command:t,args:n}=e;this.commands.isEnabled(t,n)?this.commands.execute(t,n):console.log(`Command '${t}' is disabled.`)}addItem(e){return this.insertItem(this._items.length,e)}insertItem(e,t){this.isAttached&&this.close(),this.activeIndex=-1;let n=Math.max(0,Math.min(e,this._items.length)),r=se.createItem(this,t);return z.insert(this._items,n,r),this.update(),r}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){this.isAttached&&this.close(),this.activeIndex=-1,z.removeAt(this._items,e)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())}open(e,t,n={}){if(this.isAttached)return;let r=n.forceX||!1,o=n.forceY||!1;se.openRootMenu(this,e,t,r,o),this.activate()}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(e){this.isAttached&&this.node.focus()}onUpdateRequest(e){let t=this._items,n=this.renderer,r=this._activeIndex,o=se.computeCollapsed(t),s=new Array(t.length);for(let a=0,d=t.length;a<d;++a){let g=t[a],_=a===r,M=o[a];s[a]=n.renderItem({item:g,active:_,collapsed:M,onfocus:()=>{this.activeIndex=a}})}Se.render(s,this.contentNode)}onCloseRequest(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let t=this._childMenu;t&&(this._childIndex=-1,this._childMenu=null,t._parentMenu=null,t.close());let n=this._parentMenu;n&&(this._parentMenu=null,n._childIndex=-1,n._childMenu=null,n.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(e)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation();let t=e.keyCode;if(t===13){this.triggerActiveItem();return}if(t===27){this.close();return}if(t===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(t===38){this.activatePreviousItem();return}if(t===39){let s=this.activeItem;s&&s.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(t===40){this.activateNextItem();return}let n=De().keyForKeydownEvent(e);if(!n)return;let r=this._activeIndex+1,o=se.findMnemonic(this._items,n,r);o.index!==-1&&!o.multiple?(this.activeIndex=o.index,this.triggerActiveItem()):o.index!==-1?this.activeIndex=o.index:o.auto!==-1&&(this.activeIndex=o.auto)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(e){let t=z.findFirstIndex(this.contentNode.children,r=>j.hitTest(r,e.clientX,e.clientY));if(t===this._activeIndex)return;if(this.activeIndex=t,t=this.activeIndex,t===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();let n=this.activeItem;!n||n.type!=="submenu"||!n.submenu||this._startOpenTimer()}_evtMouseEnter(e){for(let t=this._parentMenu;t;t=t._parentMenu)t._cancelOpenTimer(),t._cancelCloseTimer(),t.activeIndex=t._childIndex}_evtMouseLeave(e){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}let{clientX:t,clientY:n}=e;if(j.hitTest(this._childMenu.node,t,n)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()}_evtMouseDown(e){this._parentMenu||(se.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())}_openChildMenu(e=!1){let t=this.activeItem;if(!t||t.type!=="submenu"||!t.submenu){this._closeChildMenu();return}let n=t.submenu;if(n===this._childMenu)return;le.saveWindowData(),this._closeChildMenu(),this._childMenu=n,this._childIndex=this._activeIndex,n._parentMenu=this,O.sendMessage(this,B.Msg.UpdateRequest);let r=this.contentNode.children[this._activeIndex];se.openSubmenu(n,r),e&&(n.activeIndex=-1,n.activateNextItem()),n.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){this._openTimerID===0&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},se.TIMER_DELAY))}_startCloseTimer(){this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},se.TIMER_DELAY))}_cancelOpenTimer(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){se.saveWindowData()}_childIndex=-1;_activeIndex=-1;_openTimerID=0;_closeTimerID=0;_items=[];_childMenu=null;_parentMenu=null;_aboutToClose=new W(this);_menuRequested=new W(this)};(t=>{class i{renderItem(r){let o=this.createItemClass(r),s=this.createItemDataset(r),a=this.createItemARIA(r);return X.li({className:o,dataset:s,tabindex:"0",onfocus:r.onfocus,...a},this.renderIcon(r),this.renderLabel(r),this.renderShortcut(r),this.renderSubmenu(r))}renderIcon(r){let o=this.createIconClass(r);return typeof r.item.icon=="string"?X.div({className:o},r.item.iconLabel):X.div({className:o},r.item.icon,r.item.iconLabel)}renderLabel(r){let o=this.formatLabel(r);return X.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},o)}renderShortcut(r){let o=this.formatShortcut(r);return X.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},o)}renderSubmenu(r){return X.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}createItemClass(r){let o="lm-Menu-item";o+=" p-Menu-item",r.item.isEnabled||(o+=" lm-mod-disabled",o+=" p-mod-disabled"),r.item.isToggled&&(o+=" lm-mod-toggled",o+=" p-mod-toggled"),r.item.isVisible||(o+=" lm-mod-hidden",o+=" p-mod-hidden"),r.active&&(o+=" lm-mod-active",o+=" p-mod-active"),r.collapsed&&(o+=" lm-mod-collapsed",o+=" p-mod-collapsed");let s=r.item.className;return s&&(o+=` ${s}`),o}createItemDataset(r){let o,{type:s,command:a,dataset:d}=r.item;return s==="command"?o={...d,type:s,command:a}:o={...d,type:s},o}createIconClass(r){let o="lm-Menu-itemIcon";o+=" p-Menu-itemIcon";let s=r.item.iconClass;return s?`${o} ${s}`:o}createItemARIA(r){let o={};switch(r.item.type){case"separator":o.role="presentation";break;case"submenu":o["aria-haspopup"]="true",r.item.isEnabled||(o["aria-disabled"]="true");break;default:r.item.isEnabled||(o["aria-disabled"]="true"),o.role="menuitem"}return o}formatLabel(r){let{label:o,mnemonic:s}=r.item;if(s<0||s>=o.length)return o;let a=o.slice(0,s),d=o.slice(s+1),g=o[s],_=X.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},g);return[a,_,d]}formatShortcut(r){let o=r.item.keyBinding;return o?nt.formatKeystroke(o.keys):null}}t.Renderer=i,t.defaultRenderer=new i})(le||={});var se;(f=>{f.TIMER_DELAY=300,f.SUBMENU_OVERLAP=3;let t=null,n=0;function r(){return n>0?(n--,t):M()}function o(){t=M(),n++}f.saveWindowData=o;function s(){let w=document.createElement("div"),y=document.createElement("ul");return y.className="lm-Menu-content",y.classList.add("p-Menu-content"),w.appendChild(y),y.setAttribute("role","menu"),w.tabIndex=0,w}f.createNode=s;function a(w){return w.type!=="separator"&&w.isEnabled&&w.isVisible}f.canActivate=a;function d(w,y){return new p(w.commands,y)}f.createItem=d;function g(w,y,I){for(let A=w;A;A=A.childMenu)if(j.hitTest(A.node,y,I))return!0;return!1}f.hitTestMenus=g;function _(w){let y=new Array(w.length);z.fill(y,!1);let I=0,A=w.length;for(;I<A;++I){let v=w[I];if(!!v.isVisible){if(v.type!=="separator")break;y[I]=!0}}let E=A-1;for(;E>=0;--E){let v=w[E];if(!!v.isVisible){if(v.type!=="separator")break;y[E]=!0}}let S=!1;for(;++I<E;){let v=w[I];!v.isVisible||(v.type!=="separator"?S=!1:S?y[I]=!0:S=!0)}return y}f.computeCollapsed=_;function M(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}function x(w,y,I,A,E){let S=r(),v=S.pageXOffset,T=S.pageYOffset,u=S.clientWidth,l=S.clientHeight;O.sendMessage(w,B.Msg.UpdateRequest);let m=l-(E?I:0),k=w.node,h=k.style;h.opacity="0",h.maxHeight=`${m}px`,B.attach(w,document.body);let{width:L,height:D}=k.getBoundingClientRect();!A&&y+L>v+u&&(y=v+u-L),!E&&I+D>T+l&&(I>T+l?I=T+l-D:I=I-D),h.transform=`translate(${Math.max(0,y)}px, ${Math.max(0,I)}px`,h.opacity="1"}f.openRootMenu=x;function b(w,y){let I=r(),A=I.pageXOffset,E=I.pageYOffset,S=I.clientWidth,v=I.clientHeight;O.sendMessage(w,B.Msg.UpdateRequest);let T=v,u=w.node,l=u.style;l.opacity="0",l.maxHeight=`${T}px`,B.attach(w,document.body);let{width:m,height:k}=u.getBoundingClientRect(),h=j.boxSizing(w.node),L=y.getBoundingClientRect(),D=L.right-3;D+m>A+S&&(D=L.left+3-m);let R=L.top-h.borderTop-h.paddingTop;R+k>E+v&&(R=L.bottom+h.borderBottom+h.paddingBottom-k),l.transform=`translate(${Math.max(0,D)}px, ${Math.max(0,R)}px`,l.opacity="1"}f.openSubmenu=b;function c(w,y,I){let A=-1,E=-1,S=!1,v=y.toUpperCase();for(let T=0,u=w.length;T<u;++T){let l=(T+I)%u,m=w[l];if(!a(m))continue;let k=m.label;if(k.length===0)continue;let h=m.mnemonic;if(h>=0&&h<k.length){k[h].toUpperCase()===v&&(A===-1?A=l:S=!0);continue}E===-1&&k[0].toUpperCase()===v&&(E=l)}return{index:A,multiple:S,auto:E}}f.findMnemonic=c;class p{constructor(y,I){this._commands=y,this.type=I.type||"command",this.command=I.command||"",this.args=I.args||Bt.JSONExt.emptyObject,this.submenu=I.submenu||null}type;command;args;submenu;get label(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""}get mnemonic(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return this.type==="command"?this._commands.icon(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.icon:this.iconClass}get iconClass(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""}get className(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""}get dataset(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get isToggled(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1}get isVisible(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get keyBinding(){if(this.type==="command"){let{command:y,args:I}=this;return z.findLastValue(this._commands.keyBindings,A=>A.command===y&&Bt.JSONExt.deepEqual(A.args,I))||null}return null}_commands}})(se||={});var Ge=class extends le.Renderer{formatLabel(e){let{label:t,mnemonic:n}=e.item;if(n<0||n>=t.length)return t;let r=t.slice(0,n),o=t.slice(n+1),s=t[n],a=Q.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},s);return[r,a,o]}renderLabel(e){let t=this.formatLabel(e);return Q.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},t)}renderSubmenu(e){return Q.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}renderItem(e){let t=this.createItemClass(e),n=this.createItemDataset(e),r=this.createItemARIA(e);return Q.li({className:t,dataset:n,tabindex:"0",onfocus:e.onfocus,...r},this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))}};var bt=class extends ae{constructor(e,t={}){super(t),this._addEventListeners(),this.__content_node__,this._workspace=e}onUpdateRequest(e){this.__content_node__=this.contentNode;let t=this._titles,n=this.renderer,r=this.currentTitle,o=new Array;for(let s=0,a=t.length;s<a;++s){let d=t[s],g=d===r,_=t.filter(x=>x!==r),M;_.length>0&&(M=this.onClick.bind(this,_,s)),g?o[s]=n.renderTab({title:d,zIndex:t.length+1,current:g,onClick:M}):o[s]=n.renderInert()}Se.render(o,this.contentNode),this._check_shade()}onClick(e,t,n){let r=new he,o=new Ge(null);this._menu=new le({commands:r,renderer:o}),this._menu.addClass("perspective-workspace-menu"),this._menu.dataset.minwidth=this._titles[t];for(let a of e)this._menu.addItem({command:"tabbar:switch",args:{title:a}});r.addCommand("tabbar:switch",{execute:async({title:a})=>{let d=this._titles.findIndex(g=>g===a);this.currentTitle=a,this.tabActivateRequested.emit({index:d,title:a})},label:({title:a})=>a.label||"untitled",mnemonic:0});let s=n.target.getBoundingClientRect();this._menu.open(s.x,s.y+s.height),this._menu.aboutToClose.connect(()=>{this._menu=void 0}),n.preventDefault(),n.stopPropagation()}_check_shade(){Array.from(this.contentNode.children).filter(e=>e.classList.contains("settings_open")&&e.classList.contains("p-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(e){switch(this._menu?.close(),this.retargetEvent(e),e.type){case"contextmenu":let t=this.currentTitle.owner;this.parent.parent.parent.showContextMenu(t,e),e.preventDefault();break;case"mousedown":if(e.target.id===gt.Label)return;break;case"pointerdown":if(e.target.id===gt.Label){let n=this.contentNode.children,r=yt.findFirstIndex(n,s=>Ct.hitTest(s,e.clientX,e.clientY));if(r<0)break;let o=this.titles[r];this._workspace._maximize(o.owner),requestAnimationFrame(()=>o.owner.viewer.toggleConfig());return}break}super.handleEvent(e)}retargetEvent(e){return Object.defineProperty(e,"target",{value:e.composedPath()[0],enumerable:!0}),e}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}};var zt=class extends _e.Renderer{constructor(e){super(),this._workspace=e}createTabBar(){let e=new bt(this._workspace,{renderer:new ft});return e.addClass("p-DockPanel-tabBar"),e}},ne=class extends _e{constructor(e){super({renderer:new zt(e)}),this._renderer.dock=this}_onTabDetachRequested(e,t){super._onTabDetachRequested(e,t);let n=e.titles[t.index].owner,r=this.layout.saveLayout();Je(this.layout.widgets()).length>1&&this.layout.removeWidget(n),n.addClass("widget-blur"),this._drag&&this._drag._promise.then(()=>{n.node.isConnected||this.layout.restoreLayout(r),n.removeClass("widget-blur")})}static getWidgets(e){return e?.hasOwnProperty("main")?ne.getWidgets(e.main):e?.children?e.children.flatMap(t=>ne.getWidgets(t)):e?.widgets?e.widgets:[]}static mapWidgets(e,t){return t.main?t.main=ne.mapWidgets(e,t.main):t.children?t.children=t.children.map(n=>ne.mapWidgets(e,n)):t.widgets&&(t.widgets=t.widgets.map(n=>e(n))),t}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}};var Qt=(i,e)=>{let t=new he;return t.addCommand("workspace:export",{execute:async n=>{let r=document.createElement("perspective-export-menu");i.apply_indicator_theme(),r.unsafe_set_model(await n.widget.viewer.unsafeGetModel()),r.open(e),n.init_overlay(),r.addEventListener("blur",()=>{n.contextMenu.aboutToClose.emit({})})},isEnabled:n=>{if(n.contextMenu.node.isConnected){let r=n.contextMenu.node.getBoundingClientRect();e.style.top=r.top+"px",e.style.left=r.left+"px"}return!0},label:"Export",mnemonic:0}),t.addCommand("workspace:copy",{execute:async n=>{let r=document.createElement("perspective-copy-menu");i.apply_indicator_theme(),r.unsafe_set_model(await n.widget.viewer.unsafeGetModel()),r.open(e),n.init_overlay(),r.addEventListener("blur",()=>{n.contextMenu.aboutToClose.emit({})})},isEnabled:n=>{if(n.contextMenu.node.isConnected){let r=n.contextMenu.node.getBoundingClientRect();e.style.top=r.top+"px",e.style.left=r.left+"px"}return!0},label:"Copy",mnemonic:0}),t.addCommand("workspace:new",{execute:n=>{let r=i._createWidgetAndNode({config:{table:n.table}});i.dockpanel.addWidget(r,{mode:"split-right",ref:n.widget})},label:n=>n.table}),t.addCommand("workspace:newview",{execute:async n=>{let r=await n.target_widget.save(),o=i._createWidgetAndNode({config:r});i.dockpanel.addWidget(o,{mode:"split-right",ref:n.widget})},isVisible:n=>n.target_widget.title.label!=="",label:n=>n.target_widget.title.label||"untitled"}),t.addCommand("workspace:reset",{execute:n=>n.widget.viewer.reset(),label:"Reset",mnemonic:0}),t.addCommand("workspace:duplicate",{execute:({widget:n})=>i.duplicate(n),isVisible:n=>n.widget.parent===i.dockpanel,label:"Duplicate",mnemonic:0}),t.addCommand("workspace:master",{execute:n=>i.toggleMasterDetail(n.widget),isVisible:()=>i.mode===ze.GLOBAL_FILTERS,label:n=>n.widget.parent===i.dockpanel?"Create Global Filter":"Remove Global Filter",mnemonic:0}),t.addCommand("workspace:close",{execute:n=>{n.widget.close()},label:()=>"Close",mnemonic:0}),t.addCommand("workspace:help",{label:"Shift+Click for Browser Menu",isEnabled:()=>!1}),t.add,t};var rt=class extends B{constructor({viewer:e,node:t}){super({node:t}),this.viewer=e,this.master=!1}set master(e){e!==void 0&&this._master!==e&&(e?(this.viewer.classList.add("workspace-master-widget"),this.viewer.classList.remove("workspace-detail-widget"),this.viewer.toggleAttribute?.("selectable",!0)):(this.viewer.classList.add("workspace-detail-widget"),this.viewer.classList.remove("workspace-master-widget"),this.viewer.removeAttribute("selectable")),this._master=e)}get master(){return this._master}get name(){return console.error("Test"),this._title}set linked(e){e!==void 0&&(e?this.viewer.setAttribute("linked",""):this.viewer.removeAttribute("linked"))}get linked(){return this.viewer.hasAttribute("linked")}toggleConfig(){return this.viewer.toggleConfig()}async load(e){this._is_table_loaded=!0;let t=[this.viewer.load(e)];this._restore_config&&t.push(this._restore_config()),await Promise.all(t)}restore(e){let{master:t,table:n,linked:r,name:o,editable:s,selectable:a,...d}=e;this.master=t,this.linked=r,this._title=e.title,this.title.label=e.title,n&&this.viewer.setAttribute("table",n),a&&this.viewer.setAttribute("selectable",a),s&&this.viewer.setAttribute("editable",s);let g=()=>this.viewer.restore({...d});if(this._is_table_loaded)return g();this._restore_config=g}async save(){let e={...await this.viewer.save(),master:this.master,table:this.viewer.getAttribute("table"),linked:this.linked};return this.viewer.hasAttribute("selectable")&&(e.selectable=this.viewer.getAttribute("selectable")),this.viewer.hasAttribute("editable")&&(e.editable=this.viewer.getAttribute("editable")),e}removeClass(e){super.removeClass(e),this.viewer&&this.viewer.classList.remove(e)}async onCloseRequest(e){super.onCloseRequest(e),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}};import ki from"lodash/uniqBy";import Ei from"lodash/debounce";var Rt=[1,3],Li=0,Ye={LEFT:"left",RIGHT:"right"},ze={GLOBAL_FILTERS:"globalFilters",LINKED:"linked"},Ot=class extends Map{set(e,t){this._set_listener?.(e,t),super.set(e,t)}get(e){return super.get(e)}delete(e){return this._delete_listener?.(e)?super.delete(e):!1}addSetListener(e){this._set_listener=e}addDeleteListener(e){this._delete_listener=e}},ot=class extends Ae{constructor(e,t={}){super({orientation:"horizontal"}),this.addClass("perspective-workspace"),this.dockpanel=new ne(this),this.detailPanel=new qe,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new Ae({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>this.workspaceUpdated()),this.addWidget(this.detailPanel),this.spacing=8,this.element=e,this._side=t.side||Ye.LEFT,this.mode=t.mode||ze.GLOBAL_FILTERS,this._linkedViewers=[],this.listeners=new WeakMap,this._tables=new Ot,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.indicator=this.init_indicator(),this.commands=Qt(this,this.indicator),this.menuRenderer=new Ge(this.element),this.customCommands=[],e.addEventListener("contextmenu",n=>this.showContextMenu(null,n))}init_indicator(){let e=document.createElement("perspective-indicator");return e.style.position="fixed",e.style.pointerEvents="none",document.body.appendChild(e),e}apply_indicator_theme(){let e=JSON.parse(window.getComputedStyle(this.element).getPropertyValue("--theme-name").trim());this.indicator.setAttribute("theme",e)}addTable(e,t){this.tables.set(e,t)}getTable(e){return this.tables.get(e)}removeTable(e){return this.tables.delete(e)}get tables(){return this._tables}set side(e){if(Ye[e.toUpperCase()]===void 0){console.warn("Unknown `side` attribute:",e);return}if(this._side!==e&&this.masterPanel.isAttached){let t=this.relativeSizes().slice().reverse();this.detailPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close(),e===Ye.LEFT?(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel)):(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel)),this.setRelativeSizes(t)}this._side=e}get side(){return this._side}async save(){let e=this.dockpanel.mode==="single-document",t=e?this._minimizedLayoutSlots:ne.mapWidgets(s=>s.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),n={sizes:[...this.relativeSizes()],detail:t,mode:this.mode};if(this.masterPanel.isAttached){let s={widgets:this.masterPanel.widgets.map(a=>a.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};n.master=s}let r={};for(let s of this.masterPanel.widgets)r[s.viewer.getAttribute("slot")]=await s.save();let o=ne.getWidgets(e?this._minimizedLayout:this.dockpanel.saveLayout());return await Promise.all(o.map(async s=>{let a=s.viewer.getAttribute("slot");r[a]=await s.save(),r[a].settings=!1})),{...n,viewers:r}}async restore(e){let{sizes:t,master:n,detail:r,viewers:o=[],mode:s=ze.GLOBAL_FILTERS}=structuredClone(e);this.mode=s,this.mode===ze.GLOBAL_FILTERS&&n&&n.widgets.length>0?this.setupMasterPanel(t||Rt):(this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close()),this.addWidget(this.detailPanel));let a=[];for(let d of this._capture_viewers())for(let g of this._capture_widgets()){let _=this._restore_callback.bind(this,o,d,g);if(r){let M=ne.mapWidgets(_.bind(this,!1),r);this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(M),a=a.concat(ne.getWidgets(M).map(x=>x.task))}n&&(this.mode===ze.GLOBAL_FILTERS?(a=a.concat(n.widgets.map(M=>_.bind(this,!0)(M).task)),n.sizes&&this.masterPanel.setRelativeSizes(n.sizes)):a=a.concat(n.widgets.map(M=>{let x=_.bind(this,void 0)(M);return this.dockpanel.addWidget(x),x.task})))}await Promise.all(a)}*_capture_widgets(){let e=this.getAllWidgets();yield e;for(let t of e)t.node.isConnected||t.close()}*_capture_viewers(){let e=Array.from(this.element.children);yield e;let t=this.getAllWidgets();for(let n of e)!t.find(o=>o.viewer===n)&&Array.from(this.element.children).indexOf(n)>-1&&(this.element.removeChild(n),n.delete())}_restore_callback(e,t,n,r,o){let s;typeof o=="string"?s=e[o]:(s=o,o=s.slot);let a=!!o&&t.find(g=>g.getAttribute("slot")===o),d;return a?(d=n.find(g=>g.viewer===a),d?(d.load(this.tables.get(s.table)),d.restore({...s,master:r})):d=this._createWidget({config:{...s,master:r},viewer:a})):s?d=this._createWidgetAndNode({config:{...s,master:r},slot:o}):console.error(`Could not find or create <perspective-viewer> for slot "${o}"`),(r||this.mode===ze.LINKED)&&(d.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this)),d.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),this.masterPanel.addWidget(d)),d.linked&&this._linkWidget(d),d}_validate(e){if(!e||!("view"in e)||typeof e?.view!="function")throw new Error("Only `perspective.Table()` instances can be added to `tables`");return e}_set_listener(e,t){typeof t?.then=="function"?t=t.then(this._validate):this._validate(t),this.getAllWidgets().forEach(n=>{n.viewer.getAttribute("table")===e&&n.load(t)})}_delete_listener(e){return this.getAllWidgets().some(n=>n.viewer.getAttribute("table")===e)?(console.error(`Cannot remove table: '${e}' because it's still bound to widget(s)`),!1):!0}update_widget_for_viewer(e){let t=e.getAttribute("slot");if(t||(t=this._gen_id(),e.setAttribute("slot",t)),e.getAttribute("table")){if(!this.node.querySelector(`slot[name=${t}]`)){console.warn(`Undocked ${e.outerHTML}, creating default layout`);let o=this._createWidget({table:e.getAttribute("table"),config:{master:!1},viewer:e});this.dockpanel.addWidget(o),this.dockpanel.activateWidget(o)}}else console.warn(`No table set for ${e.outerHTML}`)}remove_unslotted_widgets(e){let t=this.getAllWidgets();for(let n of t)e.indexOf(n.viewer)===-1&&n.close()}update_details_panel(e){this.masterPanel.widgets.length===0&&this.masterPanel.close()}async duplicate(e){this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e);let t=await e.save();t.title=t.title?`${t.title} (*)`:"";let n=this._createWidgetAndNode({config:t});if(t.linked&&this._linkWidget(n),e.master){let r=this.masterPanel.widgets.indexOf(e)+1;this.masterPanel.insertWidget(r,n)}else this.dockpanel.addWidget(n,{mode:"split-right",ref:e});await n.task}toggleMasterDetail(e){let t=e.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:e,isGlobalFilter:!t}})),t?this.makeDetail(e):(this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e),this.makeMaster(e))}_maximize(e){e.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._minimizedLayoutSlots=ne.mapWidgets(t=>t.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),this._maximizedWidget=e,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(e)}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(e){this.dockpanel.mode!=="single-document"?this._maximize(e):this._unmaximize()}async _filterViewer(e,t,n){let r=await e.save(),o=await e.getTable(),s=Object.keys(await o.schema()),a=r.filter||[],d=M=>M[0]&&s.includes(M[0]),g=t.filter(d);g.push(...a.filter(M=>!n.has(M[0])));let _=ki(g,M=>M[0]);await e.restore({filter:_})}async onPerspectiveSelect(e){let t=await e.target.save();if(e.type==="perspective-click"&&(t.plugin==="Datagrid"||t.plugin===null))return;let n=new Set([...t.group_by||[],...t.split_by||[],...(t.filter||[]).map(o=>o[0])]),r=[...e.detail.config.filter];this.mode===ze.LINKED?this._linkedViewers.forEach(o=>{o!==e.target&&this._filterViewer(o,r,n)}):Je(this.dockpanel.widgets()).forEach(o=>this._filterViewer(o.viewer,r,n))}async makeMaster(e){e.master=!0,e.viewer.hasAttribute("settings")&&await e.toggleConfig(),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(Rt)),this.masterPanel.addWidget(e),e.isHidden&&e.show(),e.viewer.restyleElement(),e.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}makeDetail(e){e.master=!1,this.dockpanel.addWidget(e,{mode:`split-${this._side}`}),this.masterPanel.widgets.length===0&&(this.detailPanel.close(),this.masterPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.addWidget(this.detailPanel)),e.viewer.restyleElement(),e.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}isLinked(e){return this._linkedViewers.indexOf(e.viewer)>-1}async _linkWidget(e){e.title.className+=" linked",this._linkedViewers.indexOf(e.viewer)===-1&&(this._linkedViewers.push(e.viewer),this._linkedViewers.length===1&&this.getAllWidgets().forEach(async t=>{(await t.viewer.save()).group_by&&await t.viewer.restore({selectable:!0})}))}toggleLink(e){e.linked=!e.linked,e.linked?this._linkWidget(e):(e.title.className=e.title.className.replace(/ linked/g,""),this._linkedViewers=this._linkedViewers.filter(t=>t!==e.viewer),this._linkedViewers.length===0&&this.getAllWidgets().forEach(t=>t.viewer.restore({selectable:!1})))}createContextMenu(e){let t=new le({commands:this.commands,renderer:this.menuRenderer}),n=Kt(this.dockpanel.tabBars(),o=>o.currentTitle.owner===e),r=()=>{e&&(e.addClass("context-focus"),e.viewer.classList.add("context-focus"),n&&n.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),e.viewer.classList.contains("workspace-master-widget")?t.node.classList.add("workspace-master-menu"):t.node.classList.remove("workspace-master-menu"))};return t.init_overlay=r,(e?.parent===this.dockpanel||e===null)&&t.addItem({type:"submenu",command:"workspace:newmenu",submenu:(()=>{let o=new le({commands:this.commands,renderer:this.menuRenderer});for(let d of this.tables.keys())o.addItem({command:"workspace:new",args:{table:d,widget:e}});let s=ne.getWidgets(this.dockpanel.saveLayout());s.length>0&&o.addItem({type:"separator"});let a=new Set;for(let d of s)a.has(d.title.label)||(o.addItem({command:"workspace:newview",args:{widget:e,target_widget:d}}),a.add(d.title.label));return o.title.label="New Table",o})()}),e&&(e?.parent===this.dockpanel&&t.addItem({type:"separator"}),t.addItem({command:"workspace:maximize",args:{widget:e}}),t.addItem({command:"workspace:minimize",args:{widget:e}}),t.addItem({command:"workspace:duplicate",args:{widget:e}}),t.addItem({command:"workspace:master",args:{widget:e}}),t.addItem({command:"workspace:link",args:{widget:e}}),t.addItem({type:"separator"}),t.addItem({command:"workspace:reset",args:{widget:e}}),t.addItem({command:"workspace:export",args:{contextMenu:t,widget:e,init_overlay:r}}),t.addItem({command:"workspace:copy",args:{contextMenu:t,widget:e,init_overlay:r}}),t.addItem({type:"separator"}),t.addItem({command:"workspace:close",args:{widget:e}}),t.addItem({command:"workspace:help"})),this.customCommands.length>0&&(t.addItem({type:"separator"}),this.customCommands.forEach(o=>{t.addItem({command:o,args:{widget:e}})})),t.aboutToClose.connect(()=>{e&&(this.element.classList.remove("context-menu"),this.removeClass("context-menu"),e.removeClass("context-focus"),n?.node?.classList.remove("context-focus"))}),t}showContextMenu(e,t){if(!t.shiftKey){let n=this.createContextMenu(e);n.init_overlay(),n.open(t.clientX,t.clientY),t.preventDefault(),t.stopPropagation()}}clearLayout(){this.getAllWidgets().forEach(e=>e.close()),this.widgets.forEach(e=>e.close()),this.detailPanel.close(),this._linkedViewers=[],this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close())}setupMasterPanel(e){this.detailPanel.addClass("has-master-panel"),this.side===Ye.RIGHT?(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel),this.setRelativeSizes(e.slice().reverse())):(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(e))}_addContextMenuItem(e){this.customCommands.push(e.id),this.commands.addCommand(e.id,{execute:t=>e.execute({widget:t.widget}),label:e.label,isVisible:t=>e.isVisible({widget:t.widget}),mnemonic:0})}addViewer(e){let t=this._createWidgetAndNode({config:e});this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(),e.master?(this.masterPanel.isAttached||this.setupMasterPanel(Rt),this.masterPanel.addWidget(t)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(t,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:e,slot:t}){let n=this._createNode(t),r=e.table,o=document.createElement("perspective-viewer");return o.setAttribute("slot",n.querySelector("slot").getAttribute("name")),r&&o.setAttribute("table",r),this._createWidget({config:e,node:n,viewer:o})}_gen_id(){let e=`PERSPECTIVE_GENERATED_ID_${Li++}`;return this.element.querySelector(`[slot=${e}]`)&&(e=this._gen_id()),e}_createNode(e){let t=this.node.querySelector(`slot[name=${e}]`);if(t)t=t.parentElement.parentElement;else{let n=document.createElement("slot");e=e||this._gen_id(),n.setAttribute("name",e);let r=document.createElement("div");r.classList.add("viewer-container"),r.appendChild(n),t=document.createElement("div"),t.classList.add("workspace-widget"),t.appendChild(r)}return t}_createWidget({config:e,node:t,viewer:n}){if(!t){let a=n.getAttribute("slot");t=this.node.querySelector(`slot[name=${a}]`),t?t=t.parentElement.parentElement:t=this._createNode(a)}let r=this.tables.get(n.getAttribute("table")||e.table),o=new rt({node:t,viewer:n});o.task=(async()=>{r&&o.load(r),await o.restore(e)})();let s=new CustomEvent("workspace-new-view",{detail:{config:e,widget:o}});return this.element.dispatchEvent(s),o.title.closable=!0,this.element.appendChild(o.viewer),this._addWidgetEventListeners(o),o}_addWidgetEventListeners(e){this.listeners.has(e)&&this.listeners.get(e)();let t=o=>{!o.detail&&this.dockpanel.mode==="single-document"&&this._unmaximize()},n=o=>this.showContextMenu(e,o),r=async o=>{this.workspaceUpdated();let s=await o.target?.save();s&&(e.title.label=s.title)};e.node.addEventListener("contextmenu",n),e.viewer.addEventListener("perspective-toggle-settings",t),e.viewer.addEventListener("perspective-config-update",r),e.viewer.addEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),e.title.changed.connect(r),this.listeners.set(e,()=>{e.node.removeEventListener("contextmenu",n),e.viewer.removeEventListener("perspective-toggle-settings",t),e.viewer.removeEventListener("perspective-config-update",r),e.viewer.removeEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),e.title.changed.disconnect(r)})}getAllWidgets(){return[...this.masterPanel.widgets,...Je(this.dockpanel.widgets())]}async _fireUpdateEvent(){let e=await this.save();if(e){let t={};this.tables.forEach((n,r)=>{t[r]=n}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:t,layout:e}}))}}async workspaceUpdated(){this._save||(this._save=Ei(()=>this.dockpanel.mode!=="single-document"&&this._fireUpdateEvent(),500)),this._save()}};var vt;(T=>{function i(u,l){let m=g.get(u);if(!m||m.length===0){w(u,l);return}st(ut(m),h=>h?f(h,u,l):!0)&&w(u,l)}T.sendMessage=i;function e(u,l){if(!l.isConflatable){y(u,l);return}lt(d,k=>k.handler!==u||!k.msg||k.msg.type!==l.type||!k.msg.isConflatable?!1:k.msg.conflate(l))||y(u,l)}T.postMessage=e;function t(u,l){let m=g.get(u);m&&m.indexOf(l)!==-1||(m?m.push(l):g.set(u,[l]))}T.installMessageHook=t;function n(u,l){let m=g.get(u);if(!m)return;let k=m.indexOf(l);k!==-1&&(m[k]=null,A(m))}T.removeMessageHook=n;function r(u){let l=g.get(u);l&&l.length>0&&(z.fill(l,null),A(l)),H(d,m=>{m.handler===u&&(m.handler=null,m.msg=null)})}T.clearData=r;function o(){b||x===0||(p(x),b=!0,I(),b=!1)}T.flush=o;function s(){return M}T.getExceptionHandler=s;function a(u){let l=M;return M=u,l}T.setExceptionHandler=a;let d=new Ke,g=new WeakMap,_=new Set,M=u=>{console.error(u)},x=0,b=!1,c=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)(),p=(()=>typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearImmediate)();function f(u,l,m){let k=!0;try{typeof u=="function"?k=u(l,m):k=u.messageHook(l,m)}catch(h){M(h)}return k}function w(u,l){try{u.processMessage(l)}catch(m){M(m)}}function y(u,l){d.addLast({handler:u,msg:l}),x===0&&(x=c(I))}function I(){if(x=0,d.isEmpty)return;let u={handler:null,msg:null};for(d.addLast(u);;){let l=d.removeFirst();if(l===u)return;l.handler&&l.msg&&i(l.handler,l.msg)}}function A(u){_.size===0&&c(E),_.add(u)}function E(){_.forEach(S),_.clear()}function S(u){z.removeAllWhere(u,v)}function v(u){return u===null}})(vt||={});function Ci(i){let e=document.createElement("div");return e.innerHTML=i,Array.prototype.slice.call(e.children)[0]}function Ai(i){if(i.content)return;i.content=document.createDocumentFragment();let e;for(;e=i.firstChild;)Node.prototype.appendChild.call(i.content,e)}function Si(i,e,t){let n=Ci(i);Ai(n),e&&(n.innerHTML=`<style>${e.toString()}</style>`+n.innerHTML),n.innerHTML=`<style id="psp_styles" scope="${n.getAttribute("id")}">test{}</style>`+n.innerHTML;let r=0,o=class extends t{attributeChangedCallback(a,d,g){r>0||(g===null&&(g="null"),a[0]!=="_"&&d!=g&&!!Object.getOwnPropertyDescriptor(t.prototype,a).set&&(this[a]=g))}_setAttributeSafe(a,d){r++;try{this.setAttribute(a,d)}finally{r--}}connectedCallback(){if(!this._initialized){this._initializing=!0;var a=document.importNode(n.content,!0);this.attachShadow({mode:"open"}),this._vieux&&(this._vieux.appendChild(a),a=this._vieux),this.shadowRoot.appendChild(a),super.connectedCallback&&super.connectedCallback();for(let d of Object.getOwnPropertyNames(t.prototype))d!=="connectedCallback"&&this.hasAttribute(d)&&d[0]!=="_"&&!!Object.getOwnPropertyDescriptor(t.prototype,d).set&&(this[d]=this.getAttribute(d));this._initializing=!1,this._initialized=!0}}static get observedAttributes(){return Object.getOwnPropertyNames(t.prototype)}};for(let a of Object.getOwnPropertyNames(t.prototype)){let d=Object.getOwnPropertyDescriptor(t.prototype,a);if(d&&d.set){let g=d.set;d.set=function(_){if(!this.hasAttribute(a)||this.getAttribute(a)!==_){this.setAttribute(a,_);return}!this._initializing&&!this._initialized||g.call(this,_)},Object.defineProperty(t.prototype,a,d)}}let s=n.getAttribute("id");window.customElements.define(s,o)}function ei(i,...e){let t=e.map(n=>n.toString()).join(`
`);return function(n){return Si(i,{toString:()=>t},n)}}var ti='.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.p-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-detail-widget{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}.lm-mod-override-cursor{cursor:grabbing!important;}.lm-mod-override-cursor perspective-viewer>*{pointer-events:none;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-Menu{font-size:12px;padding:8px;background:white;color:#666;border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;}.p-Menu.perspective-workspace-menu .p-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.p-Menu-item.p-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.p-Menu-item.p-mod-disabled{opacity:0.5;}.p-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.p-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.p-Menu-itemMnemonic{text-decoration:underline;}.p-Menu-itemShortcut{padding:4px 0px;}.p-Menu-itemSubmenuIcon{width:24px;height:18px;}.p-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.p-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.p-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.p-MenuBar-menu{transform:translateY(-1px);}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.p-MenuBar-item.p-mod-active{background:rgba(0,0,0,0.2);}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.p-Menu-itemIcon:before{content:attr(content);font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;height:18px;}.p-mod-drag-image.p-TabBar-tab{display:none;}';var Pt=class extends HTMLElement{set side(e){this.setAttribute("side",e),this.workspace&&(this.workspace.side=e)}get side(){return this.getAttribute("side")}save(){return this.workspace.save()}async restore(e){await this.workspace.restore(e)}async flush(){await Promise.all(Array.from(this.querySelectorAll("perspective-viewer")).map(e=>e.flush()))}addViewer(e){this.workspace.addViewer(e)}addTable(e,t){this.workspace.addTable(e,t)}getTable(e){return this.workspace.getTable(e)}removeTable(e){return this.workspace.removeTable(e)}get tables(){return this.workspace.tables}resize(){this.workspace.update()}_light_dom_changed(){let e=Array.from(this.childNodes);for(let t of e)t.tagName==="PERSPECTIVE-VIEWER"&&this.workspace.update_widget_for_viewer(t);this.workspace.remove_unslotted_widgets(e),this.workspace.update_details_panel(e)}_register_light_dom_listener(){let e=new MutationObserver(this._light_dom_changed.bind(this)),t={attributes:!1,childList:!0,subtree:!1};e.observe(this,t),this._light_dom_changed()}connectedCallback(){if(!this.side){this.side=this.side||Ye.LEFT;let e=this.shadowRoot.querySelector("#container");this.workspace=new ot(this,{side:this.side}),this._register_light_dom_listener(),vt.sendMessage(this.workspace,B.Msg.BeforeAttach),e.insertBefore(this.workspace.node,null),vt.sendMessage(this.workspace,B.Msg.AfterAttach),window.onresize=this.workspace.update.bind(this.workspace)}}},Ht=document.createElement("style");Ht.toggleAttribute("injected",!0);Ht.innerHTML=ti;document.head.appendChild(Ht);ei(Nt,Ft)(Pt);export{rt as PerspectiveViewerWidget,ot as PerspectiveWorkspace};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=perspective-workspace.js.map
