var ll=Object.create;var Jn=Object.defineProperty;var dl=Object.getOwnPropertyDescriptor;var ul=Object.getOwnPropertyNames;var cl=Object.getPrototypeOf,hl=Object.prototype.hasOwnProperty;var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ml=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ul(e))!hl.call(t,r)&&r!==n&&Jn(t,r,{get:()=>e[r],enumerable:!(i=dl(e,r))||i.enumerable});return t};var $e=(t,e,n)=>(n=t!=null?ll(cl(t)):{},ml(e||!t||!t.__esModule?Jn(n,"default",{value:t,enumerable:!0}):n,t));var vt=D((Ht,di)=>{(function(t,e){typeof Ht=="object"&&typeof di<"u"?e(Ht):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.lumino_coreutils={}))})(Ht,function(t){"use strict";t.JSONExt=void 0,function(s){s.emptyObject=Object.freeze({}),s.emptyArray=Object.freeze([]);function a(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"}s.isPrimitive=a;function l(f){return Array.isArray(f)}s.isArray=l;function h(f){return!a(f)&&!l(f)}s.isObject=h;function y(f,w){if(f===w)return!0;if(a(f)||a(w))return!1;var x=l(f),I=l(w);return x!==I?!1:x&&I?_(f,w):b(f,w)}s.deepEqual=y;function T(f){return a(f)?f:l(f)?c(f):m(f)}s.deepCopy=T;function _(f,w){if(f===w)return!0;if(f.length!==w.length)return!1;for(var x=0,I=f.length;x<I;++x)if(!y(f[x],w[x]))return!1;return!0}function b(f,w){if(f===w)return!0;for(var x in f)if(f[x]!==void 0&&!(x in w))return!1;for(var x in w)if(w[x]!==void 0&&!(x in f))return!1;for(var x in f){var I=f[x],A=w[x];if(!(I===void 0&&A===void 0)&&(I===void 0||A===void 0||!y(I,A)))return!1}return!0}function c(f){for(var w=new Array(f.length),x=0,I=f.length;x<I;++x)w[x]=T(f[x]);return w}function m(f){var w={};for(var x in f){var I=f[x];I!==void 0&&(w[x]=T(I))}return w}}(t.JSONExt||(t.JSONExt={}));var e=function(){function s(){this._types=[],this._values=[]}return s.prototype.types=function(){return this._types.slice()},s.prototype.hasData=function(a){return this._types.indexOf(a)!==-1},s.prototype.getData=function(a){var l=this._types.indexOf(a);return l!==-1?this._values[l]:void 0},s.prototype.setData=function(a,l){this.clearData(a),this._types.push(a),this._values.push(l)},s.prototype.clearData=function(a){var l=this._types.indexOf(a);l!==-1&&(this._types.splice(l,1),this._values.splice(l,1))},s.prototype.clear=function(){this._types.length=0,this._values.length=0},s}(),n=function(){function s(){var a=this;this.promise=new Promise(function(l,h){a._resolve=l,a._reject=h})}return s.prototype.resolve=function(a){var l=this._resolve;l(a)},s.prototype.reject=function(a){var l=this._reject;l(a)},s}(),i=function(){function s(a){this.name=a,this._tokenStructuralPropertyT=null}return s}();function r(s){for(var a=0,l=0,h=s.length;l<h;++l)l%4===0&&(a=Math.random()*4294967295>>>0),s[l]=a&255,a>>>=8}t.Random=void 0,function(s){s.getRandomValues=function(){var a=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return a&&typeof a.getRandomValues=="function"?function(h){return a.getRandomValues(h)}:r}()}(t.Random||(t.Random={}));function o(s){for(var a=new Uint8Array(16),l=new Array(256),h=0;h<16;++h)l[h]="0"+h.toString(16);for(var h=16;h<256;++h)l[h]=h.toString(16);return function(){return s(a),a[6]=64|a[6]&15,a[8]=128|a[8]&63,l[a[0]]+l[a[1]]+l[a[2]]+l[a[3]]+"-"+l[a[4]]+l[a[5]]+"-"+l[a[6]]+l[a[7]]+"-"+l[a[8]]+l[a[9]]+"-"+l[a[10]]+l[a[11]]+l[a[12]]+l[a[13]]+l[a[14]]+l[a[15]]}}t.UUID=void 0,function(s){s.uuid4=o(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=e,t.PromiseDelegate=n,t.Token=i,Object.defineProperty(t,"__esModule",{value:!0})})});var mi=D((pI,hi)=>{function Sl(){this.__data__=[],this.size=0}hi.exports=Sl});var gn=D((fI,pi)=>{function Dl(t,e){return t===e||t!==t&&e!==e}pi.exports=Dl});var It=D((gI,fi)=>{var Bl=gn();function zl(t,e){for(var n=t.length;n--;)if(Bl(t[n][0],e))return n;return-1}fi.exports=zl});var bi=D((bI,gi)=>{var Rl=It(),Ol=Array.prototype,Pl=Ol.splice;function Hl(t){var e=this.__data__,n=Rl(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Pl.call(e,n,1),--this.size,!0}gi.exports=Hl});var yi=D((vI,vi)=>{var Fl=It();function Wl(t){var e=this.__data__,n=Fl(e,t);return n<0?void 0:e[n][1]}vi.exports=Wl});var xi=D((yI,_i)=>{var ql=It();function Nl(t){return ql(this.__data__,t)>-1}_i.exports=Nl});var Ti=D((_I,Ii)=>{var Kl=It();function jl(t,e){var n=this.__data__,i=Kl(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}Ii.exports=jl});var Tt=D((xI,wi)=>{var Vl=mi(),Ul=bi(),Gl=yi(),$l=xi(),Yl=Ti();function nt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}nt.prototype.clear=Vl;nt.prototype.delete=Ul;nt.prototype.get=Gl;nt.prototype.has=$l;nt.prototype.set=Yl;wi.exports=nt});var Ei=D((II,Mi)=>{var Xl=Tt();function Jl(){this.__data__=new Xl,this.size=0}Mi.exports=Jl});var Li=D((TI,ki)=>{function Zl(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}ki.exports=Zl});var Ai=D((wI,Ci)=>{function Ql(t){return this.__data__.get(t)}Ci.exports=Ql});var Di=D((MI,Si)=>{function ed(t){return this.__data__.has(t)}Si.exports=ed});var bn=D((EI,Bi)=>{var td=typeof window=="object"&&window&&window.Object===Object&&window;Bi.exports=td});var _e=D((kI,zi)=>{var nd=bn(),id=typeof self=="object"&&self&&self.Object===Object&&self,rd=nd||id||Function("return this")();zi.exports=rd});var wt=D((LI,Ri)=>{var od=_e(),ad=od.Symbol;Ri.exports=ad});var Fi=D((CI,Hi)=>{var Oi=wt(),Pi=Object.prototype,sd=Pi.hasOwnProperty,ld=Pi.toString,Mt=Oi?Oi.toStringTag:void 0;function dd(t){var e=sd.call(t,Mt),n=t[Mt];try{t[Mt]=void 0;var i=!0}catch{}var r=ld.call(t);return i&&(e?t[Mt]=n:delete t[Mt]),r}Hi.exports=dd});var qi=D((AI,Wi)=>{var ud=Object.prototype,cd=ud.toString;function hd(t){return cd.call(t)}Wi.exports=hd});var it=D((SI,ji)=>{var Ni=wt(),md=Fi(),pd=qi(),fd="[object Null]",gd="[object Undefined]",Ki=Ni?Ni.toStringTag:void 0;function bd(t){return t==null?t===void 0?gd:fd:Ki&&Ki in Object(t)?md(t):pd(t)}ji.exports=bd});var rt=D((DI,Vi)=>{function vd(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Vi.exports=vd});var vn=D((BI,Ui)=>{var yd=it(),_d=rt(),xd="[object AsyncFunction]",Id="[object Function]",Td="[object GeneratorFunction]",wd="[object Proxy]";function Md(t){if(!_d(t))return!1;var e=yd(t);return e==Id||e==Td||e==xd||e==wd}Ui.exports=Md});var $i=D((zI,Gi)=>{var Ed=_e(),kd=Ed["__core-js_shared__"];Gi.exports=kd});var Ji=D((RI,Xi)=>{var yn=$i(),Yi=function(){var t=/[^.]+$/.exec(yn&&yn.keys&&yn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ld(t){return!!Yi&&Yi in t}Xi.exports=Ld});var _n=D((OI,Zi)=>{var Cd=Function.prototype,Ad=Cd.toString;function Sd(t){if(t!=null){try{return Ad.call(t)}catch{}try{return t+""}catch{}}return""}Zi.exports=Sd});var er=D((PI,Qi)=>{var Dd=vn(),Bd=Ji(),zd=rt(),Rd=_n(),Od=/[\\^$.*+?()[\]{}|]/g,Pd=/^\[object .+?Constructor\]$/,Hd=Function.prototype,Fd=Object.prototype,Wd=Hd.toString,qd=Fd.hasOwnProperty,Nd=RegExp("^"+Wd.call(qd).replace(Od,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kd(t){if(!zd(t)||Bd(t))return!1;var e=Dd(t)?Nd:Pd;return e.test(Rd(t))}Qi.exports=Kd});var nr=D((HI,tr)=>{function jd(t,e){return t?.[e]}tr.exports=jd});var Ue=D((FI,ir)=>{var Vd=er(),Ud=nr();function Gd(t,e){var n=Ud(t,e);return Vd(n)?n:void 0}ir.exports=Gd});var Vt=D((WI,rr)=>{var $d=Ue(),Yd=_e(),Xd=$d(Yd,"Map");rr.exports=Xd});var Et=D((qI,or)=>{var Jd=Ue(),Zd=Jd(Object,"create");or.exports=Zd});var lr=D((NI,sr)=>{var ar=Et();function Qd(){this.__data__=ar?ar(null):{},this.size=0}sr.exports=Qd});var ur=D((KI,dr)=>{function eu(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}dr.exports=eu});var hr=D((jI,cr)=>{var tu=Et(),nu="__lodash_hash_undefined__",iu=Object.prototype,ru=iu.hasOwnProperty;function ou(t){var e=this.__data__;if(tu){var n=e[t];return n===nu?void 0:n}return ru.call(e,t)?e[t]:void 0}cr.exports=ou});var pr=D((VI,mr)=>{var au=Et(),su=Object.prototype,lu=su.hasOwnProperty;function du(t){var e=this.__data__;return au?e[t]!==void 0:lu.call(e,t)}mr.exports=du});var gr=D((UI,fr)=>{var uu=Et(),cu="__lodash_hash_undefined__";function hu(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=uu&&e===void 0?cu:e,this}fr.exports=hu});var vr=D((GI,br)=>{var mu=lr(),pu=ur(),fu=hr(),gu=pr(),bu=gr();function ot(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ot.prototype.clear=mu;ot.prototype.delete=pu;ot.prototype.get=fu;ot.prototype.has=gu;ot.prototype.set=bu;br.exports=ot});var xr=D(($I,_r)=>{var yr=vr(),vu=Tt(),yu=Vt();function _u(){this.size=0,this.__data__={hash:new yr,map:new(yu||vu),string:new yr}}_r.exports=_u});var Tr=D((YI,Ir)=>{function xu(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}Ir.exports=xu});var kt=D((XI,wr)=>{var Iu=Tr();function Tu(t,e){var n=t.__data__;return Iu(e)?n[typeof e=="string"?"string":"hash"]:n.map}wr.exports=Tu});var Er=D((JI,Mr)=>{var wu=kt();function Mu(t){var e=wu(this,t).delete(t);return this.size-=e?1:0,e}Mr.exports=Mu});var Lr=D((ZI,kr)=>{var Eu=kt();function ku(t){return Eu(this,t).get(t)}kr.exports=ku});var Ar=D((QI,Cr)=>{var Lu=kt();function Cu(t){return Lu(this,t).has(t)}Cr.exports=Cu});var Dr=D((eT,Sr)=>{var Au=kt();function Su(t,e){var n=Au(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}Sr.exports=Su});var Ut=D((tT,Br)=>{var Du=xr(),Bu=Er(),zu=Lr(),Ru=Ar(),Ou=Dr();function at(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}at.prototype.clear=Du;at.prototype.delete=Bu;at.prototype.get=zu;at.prototype.has=Ru;at.prototype.set=Ou;Br.exports=at});var Rr=D((nT,zr)=>{var Pu=Tt(),Hu=Vt(),Fu=Ut(),Wu=200;function qu(t,e){var n=this.__data__;if(n instanceof Pu){var i=n.__data__;if(!Hu||i.length<Wu-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fu(i)}return n.set(t,e),this.size=n.size,this}zr.exports=qu});var xn=D((iT,Or)=>{var Nu=Tt(),Ku=Ei(),ju=Li(),Vu=Ai(),Uu=Di(),Gu=Rr();function st(t){var e=this.__data__=new Nu(t);this.size=e.size}st.prototype.clear=Ku;st.prototype.delete=ju;st.prototype.get=Vu;st.prototype.has=Uu;st.prototype.set=Gu;Or.exports=st});var Hr=D((rT,Pr)=>{var $u="__lodash_hash_undefined__";function Yu(t){return this.__data__.set(t,$u),this}Pr.exports=Yu});var Wr=D((oT,Fr)=>{function Xu(t){return this.__data__.has(t)}Fr.exports=Xu});var In=D((aT,qr)=>{var Ju=Ut(),Zu=Hr(),Qu=Wr();function Gt(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ju;++e<n;)this.add(t[e])}Gt.prototype.add=Gt.prototype.push=Zu;Gt.prototype.has=Qu;qr.exports=Gt});var Kr=D((sT,Nr)=>{function ec(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}Nr.exports=ec});var Tn=D((lT,jr)=>{function tc(t,e){return t.has(e)}jr.exports=tc});var wn=D((dT,Vr)=>{var nc=In(),ic=Kr(),rc=Tn(),oc=1,ac=2;function sc(t,e,n,i,r,o){var s=n&oc,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var h=o.get(t),y=o.get(e);if(h&&y)return h==e&&y==t;var T=-1,_=!0,b=n&ac?new nc:void 0;for(o.set(t,e),o.set(e,t);++T<a;){var c=t[T],m=e[T];if(i)var f=s?i(m,c,T,e,t,o):i(c,m,T,t,e,o);if(f!==void 0){if(f)continue;_=!1;break}if(b){if(!ic(e,function(w,x){if(!rc(b,x)&&(c===w||r(c,w,n,i,o)))return b.push(x)})){_=!1;break}}else if(!(c===m||r(c,m,n,i,o))){_=!1;break}}return o.delete(t),o.delete(e),_}Vr.exports=sc});var Gr=D((uT,Ur)=>{var lc=_e(),dc=lc.Uint8Array;Ur.exports=dc});var Yr=D((cT,$r)=>{function uc(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}$r.exports=uc});var $t=D((hT,Xr)=>{function cc(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}Xr.exports=cc});var to=D((mT,eo)=>{var Jr=wt(),Zr=Gr(),hc=gn(),mc=wn(),pc=Yr(),fc=$t(),gc=1,bc=2,vc="[object Boolean]",yc="[object Date]",_c="[object Error]",xc="[object Map]",Ic="[object Number]",Tc="[object RegExp]",wc="[object Set]",Mc="[object String]",Ec="[object Symbol]",kc="[object ArrayBuffer]",Lc="[object DataView]",Qr=Jr?Jr.prototype:void 0,Mn=Qr?Qr.valueOf:void 0;function Cc(t,e,n,i,r,o,s){switch(n){case Lc:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case kc:return!(t.byteLength!=e.byteLength||!o(new Zr(t),new Zr(e)));case vc:case yc:case Ic:return hc(+t,+e);case _c:return t.name==e.name&&t.message==e.message;case Tc:case Mc:return t==e+"";case xc:var a=pc;case wc:var l=i&gc;if(a||(a=fc),t.size!=e.size&&!l)return!1;var h=s.get(t);if(h)return h==e;i|=bc,s.set(t,e);var y=mc(a(t),a(e),i,r,o,s);return s.delete(t),y;case Ec:if(Mn)return Mn.call(t)==Mn.call(e)}return!1}eo.exports=Cc});var io=D((pT,no)=>{function Ac(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}no.exports=Ac});var Ae=D((fT,ro)=>{var Sc=Array.isArray;ro.exports=Sc});var ao=D((gT,oo)=>{var Dc=io(),Bc=Ae();function zc(t,e,n){var i=e(t);return Bc(t)?i:Dc(i,n(t))}oo.exports=zc});var lo=D((bT,so)=>{function Rc(t,e){for(var n=-1,i=t==null?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}so.exports=Rc});var co=D((vT,uo)=>{function Oc(){return[]}uo.exports=Oc});var po=D((yT,mo)=>{var Pc=lo(),Hc=co(),Fc=Object.prototype,Wc=Fc.propertyIsEnumerable,ho=Object.getOwnPropertySymbols,qc=ho?function(t){return t==null?[]:(t=Object(t),Pc(ho(t),function(e){return Wc.call(t,e)}))}:Hc;mo.exports=qc});var go=D((_T,fo)=>{function Nc(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}fo.exports=Nc});var lt=D((xT,bo)=>{function Kc(t){return t!=null&&typeof t=="object"}bo.exports=Kc});var yo=D((IT,vo)=>{var jc=it(),Vc=lt(),Uc="[object Arguments]";function Gc(t){return Vc(t)&&jc(t)==Uc}vo.exports=Gc});var En=D((TT,Io)=>{var _o=yo(),$c=lt(),xo=Object.prototype,Yc=xo.hasOwnProperty,Xc=xo.propertyIsEnumerable,Jc=_o(function(){return arguments}())?_o:function(t){return $c(t)&&Yc.call(t,"callee")&&!Xc.call(t,"callee")};Io.exports=Jc});var wo=D((wT,To)=>{function Zc(){return!1}To.exports=Zc});var kn=D((Lt,dt)=>{var Qc=_e(),eh=wo(),ko=typeof Lt=="object"&&Lt&&!Lt.nodeType&&Lt,Mo=ko&&typeof dt=="object"&&dt&&!dt.nodeType&&dt,th=Mo&&Mo.exports===ko,Eo=th?Qc.Buffer:void 0,nh=Eo?Eo.isBuffer:void 0,ih=nh||eh;dt.exports=ih});var Ln=D((MT,Lo)=>{var rh=9007199254740991,oh=/^(?:0|[1-9]\d*)$/;function ah(t,e){var n=typeof t;return e=e??rh,!!e&&(n=="number"||n!="symbol"&&oh.test(t))&&t>-1&&t%1==0&&t<e}Lo.exports=ah});var Yt=D((ET,Co)=>{var sh=9007199254740991;function lh(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=sh}Co.exports=lh});var So=D((kT,Ao)=>{var dh=it(),uh=Yt(),ch=lt(),hh="[object Arguments]",mh="[object Array]",ph="[object Boolean]",fh="[object Date]",gh="[object Error]",bh="[object Function]",vh="[object Map]",yh="[object Number]",_h="[object Object]",xh="[object RegExp]",Ih="[object Set]",Th="[object String]",wh="[object WeakMap]",Mh="[object ArrayBuffer]",Eh="[object DataView]",kh="[object Float32Array]",Lh="[object Float64Array]",Ch="[object Int8Array]",Ah="[object Int16Array]",Sh="[object Int32Array]",Dh="[object Uint8Array]",Bh="[object Uint8ClampedArray]",zh="[object Uint16Array]",Rh="[object Uint32Array]",V={};V[kh]=V[Lh]=V[Ch]=V[Ah]=V[Sh]=V[Dh]=V[Bh]=V[zh]=V[Rh]=!0;V[hh]=V[mh]=V[Mh]=V[ph]=V[Eh]=V[fh]=V[gh]=V[bh]=V[vh]=V[yh]=V[_h]=V[xh]=V[Ih]=V[Th]=V[wh]=!1;function Oh(t){return ch(t)&&uh(t.length)&&!!V[dh(t)]}Ao.exports=Oh});var Bo=D((LT,Do)=>{function Ph(t){return function(e){return t(e)}}Do.exports=Ph});var Ro=D((Ct,ut)=>{var Hh=bn(),zo=typeof Ct=="object"&&Ct&&!Ct.nodeType&&Ct,At=zo&&typeof ut=="object"&&ut&&!ut.nodeType&&ut,Fh=At&&At.exports===zo,Cn=Fh&&Hh.process,Wh=function(){try{var t=At&&At.require&&At.require("util").types;return t||Cn&&Cn.binding&&Cn.binding("util")}catch{}}();ut.exports=Wh});var An=D((CT,Ho)=>{var qh=So(),Nh=Bo(),Oo=Ro(),Po=Oo&&Oo.isTypedArray,Kh=Po?Nh(Po):qh;Ho.exports=Kh});var Wo=D((AT,Fo)=>{var jh=go(),Vh=En(),Uh=Ae(),Gh=kn(),$h=Ln(),Yh=An(),Xh=Object.prototype,Jh=Xh.hasOwnProperty;function Zh(t,e){var n=Uh(t),i=!n&&Vh(t),r=!n&&!i&&Gh(t),o=!n&&!i&&!r&&Yh(t),s=n||i||r||o,a=s?jh(t.length,String):[],l=a.length;for(var h in t)(e||Jh.call(t,h))&&!(s&&(h=="length"||r&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||$h(h,l)))&&a.push(h);return a}Fo.exports=Zh});var No=D((ST,qo)=>{var Qh=Object.prototype;function em(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Qh;return t===n}qo.exports=em});var jo=D((DT,Ko)=>{function tm(t,e){return function(n){return t(e(n))}}Ko.exports=tm});var Uo=D((BT,Vo)=>{var nm=jo(),im=nm(Object.keys,Object);Vo.exports=im});var $o=D((zT,Go)=>{var rm=No(),om=Uo(),am=Object.prototype,sm=am.hasOwnProperty;function lm(t){if(!rm(t))return om(t);var e=[];for(var n in Object(t))sm.call(t,n)&&n!="constructor"&&e.push(n);return e}Go.exports=lm});var Xo=D((RT,Yo)=>{var dm=vn(),um=Yt();function cm(t){return t!=null&&um(t.length)&&!dm(t)}Yo.exports=cm});var Sn=D((OT,Jo)=>{var hm=Wo(),mm=$o(),pm=Xo();function fm(t){return pm(t)?hm(t):mm(t)}Jo.exports=fm});var Qo=D((PT,Zo)=>{var gm=ao(),bm=po(),vm=Sn();function ym(t){return gm(t,vm,bm)}Zo.exports=ym});var na=D((HT,ta)=>{var ea=Qo(),_m=1,xm=Object.prototype,Im=xm.hasOwnProperty;function Tm(t,e,n,i,r,o){var s=n&_m,a=ea(t),l=a.length,h=ea(e),y=h.length;if(l!=y&&!s)return!1;for(var T=l;T--;){var _=a[T];if(!(s?_ in e:Im.call(e,_)))return!1}var b=o.get(t),c=o.get(e);if(b&&c)return b==e&&c==t;var m=!0;o.set(t,e),o.set(e,t);for(var f=s;++T<l;){_=a[T];var w=t[_],x=e[_];if(i)var I=s?i(x,w,_,e,t,o):i(w,x,_,t,e,o);if(!(I===void 0?w===x||r(w,x,n,i,o):I)){m=!1;break}f||(f=_=="constructor")}if(m&&!f){var A=t.constructor,E=e.constructor;A!=E&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E)&&(m=!1)}return o.delete(t),o.delete(e),m}ta.exports=Tm});var ra=D((FT,ia)=>{var wm=Ue(),Mm=_e(),Em=wm(Mm,"DataView");ia.exports=Em});var aa=D((WT,oa)=>{var km=Ue(),Lm=_e(),Cm=km(Lm,"Promise");oa.exports=Cm});var Dn=D((qT,sa)=>{var Am=Ue(),Sm=_e(),Dm=Am(Sm,"Set");sa.exports=Dm});var da=D((NT,la)=>{var Bm=Ue(),zm=_e(),Rm=Bm(zm,"WeakMap");la.exports=Rm});var ba=D((KT,ga)=>{var Bn=ra(),zn=Vt(),Rn=aa(),On=Dn(),Pn=da(),fa=it(),ct=_n(),ua="[object Map]",Om="[object Object]",ca="[object Promise]",ha="[object Set]",ma="[object WeakMap]",pa="[object DataView]",Pm=ct(Bn),Hm=ct(zn),Fm=ct(Rn),Wm=ct(On),qm=ct(Pn),Ge=fa;(Bn&&Ge(new Bn(new ArrayBuffer(1)))!=pa||zn&&Ge(new zn)!=ua||Rn&&Ge(Rn.resolve())!=ca||On&&Ge(new On)!=ha||Pn&&Ge(new Pn)!=ma)&&(Ge=function(t){var e=fa(t),n=e==Om?t.constructor:void 0,i=n?ct(n):"";if(i)switch(i){case Pm:return pa;case Hm:return ua;case Fm:return ca;case Wm:return ha;case qm:return ma}return e});ga.exports=Ge});var Ma=D((jT,wa)=>{var Hn=xn(),Nm=wn(),Km=to(),jm=na(),va=ba(),ya=Ae(),_a=kn(),Vm=An(),Um=1,xa="[object Arguments]",Ia="[object Array]",Xt="[object Object]",Gm=Object.prototype,Ta=Gm.hasOwnProperty;function $m(t,e,n,i,r,o){var s=ya(t),a=ya(e),l=s?Ia:va(t),h=a?Ia:va(e);l=l==xa?Xt:l,h=h==xa?Xt:h;var y=l==Xt,T=h==Xt,_=l==h;if(_&&_a(t)){if(!_a(e))return!1;s=!0,y=!1}if(_&&!y)return o||(o=new Hn),s||Vm(t)?Nm(t,e,n,i,r,o):Km(t,e,l,n,i,r,o);if(!(n&Um)){var b=y&&Ta.call(t,"__wrapped__"),c=T&&Ta.call(e,"__wrapped__");if(b||c){var m=b?t.value():t,f=c?e.value():e;return o||(o=new Hn),r(m,f,n,i,o)}}return _?(o||(o=new Hn),jm(t,e,n,i,r,o)):!1}wa.exports=$m});var Fn=D((VT,La)=>{var Ym=Ma(),Ea=lt();function ka(t,e,n,i,r){return t===e?!0:t==null||e==null||!Ea(t)&&!Ea(e)?t!==t&&e!==e:Ym(t,e,n,i,ka,r)}La.exports=ka});var Aa=D((UT,Ca)=>{var Xm=xn(),Jm=Fn(),Zm=1,Qm=2;function ep(t,e,n,i){var r=n.length,o=r,s=!i;if(t==null)return!o;for(t=Object(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){a=n[r];var l=a[0],h=t[l],y=a[1];if(s&&a[2]){if(h===void 0&&!(l in t))return!1}else{var T=new Xm;if(i)var _=i(h,y,l,t,e,T);if(!(_===void 0?Jm(y,h,Zm|Qm,i,T):_))return!1}}return!0}Ca.exports=ep});var Wn=D((GT,Sa)=>{var tp=rt();function np(t){return t===t&&!tp(t)}Sa.exports=np});var Ba=D(($T,Da)=>{var ip=Wn(),rp=Sn();function op(t){for(var e=rp(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ip(r)]}return e}Da.exports=op});var qn=D((YT,za)=>{function ap(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}za.exports=ap});var Oa=D((XT,Ra)=>{var sp=Aa(),lp=Ba(),dp=qn();function up(t){var e=lp(t);return e.length==1&&e[0][2]?dp(e[0][0],e[0][1]):function(n){return n===t||sp(n,t,e)}}Ra.exports=up});var St=D((JT,Pa)=>{var cp=it(),hp=lt(),mp="[object Symbol]";function pp(t){return typeof t=="symbol"||hp(t)&&cp(t)==mp}Pa.exports=pp});var Jt=D((ZT,Ha)=>{var fp=Ae(),gp=St(),bp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vp=/^\w*$/;function yp(t,e){if(fp(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||gp(t)?!0:vp.test(t)||!bp.test(t)||e!=null&&t in Object(e)}Ha.exports=yp});var qa=D((QT,Wa)=>{var Fa=Ut(),_p="Expected a function";function Nn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_p);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Nn.Cache||Fa),n}Nn.Cache=Fa;Wa.exports=Nn});var Ka=D((ew,Na)=>{var xp=qa(),Ip=500;function Tp(t){var e=xp(t,function(i){return n.size===Ip&&n.clear(),i}),n=e.cache;return e}Na.exports=Tp});var Va=D((tw,ja)=>{var wp=Ka(),Mp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ep=/\\(\\)?/g,kp=wp(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Mp,function(n,i,r,o){e.push(r?o.replace(Ep,"$1"):i||n)}),e});ja.exports=kp});var Ga=D((nw,Ua)=>{function Lp(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}Ua.exports=Lp});var Qa=D((iw,Za)=>{var $a=wt(),Cp=Ga(),Ap=Ae(),Sp=St(),Dp=1/0,Ya=$a?$a.prototype:void 0,Xa=Ya?Ya.toString:void 0;function Ja(t){if(typeof t=="string")return t;if(Ap(t))return Cp(t,Ja)+"";if(Sp(t))return Xa?Xa.call(t):"";var e=t+"";return e=="0"&&1/t==-Dp?"-0":e}Za.exports=Ja});var ts=D((rw,es)=>{var Bp=Qa();function zp(t){return t==null?"":Bp(t)}es.exports=zp});var Kn=D((ow,ns)=>{var Rp=Ae(),Op=Jt(),Pp=Va(),Hp=ts();function Fp(t,e){return Rp(t)?t:Op(t,e)?[t]:Pp(Hp(t))}ns.exports=Fp});var Dt=D((aw,is)=>{var Wp=St(),qp=1/0;function Np(t){if(typeof t=="string"||Wp(t))return t;var e=t+"";return e=="0"&&1/t==-qp?"-0":e}is.exports=Np});var jn=D((sw,rs)=>{var Kp=Kn(),jp=Dt();function Vp(t,e){e=Kp(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[jp(e[n++])];return n&&n==i?t:void 0}rs.exports=Vp});var as=D((lw,os)=>{var Up=jn();function Gp(t,e,n){var i=t==null?void 0:Up(t,e);return i===void 0?n:i}os.exports=Gp});var ls=D((dw,ss)=>{function $p(t,e){return t!=null&&e in Object(t)}ss.exports=$p});var us=D((uw,ds)=>{var Yp=Kn(),Xp=En(),Jp=Ae(),Zp=Ln(),Qp=Yt(),ef=Dt();function tf(t,e,n){e=Yp(e,t);for(var i=-1,r=e.length,o=!1;++i<r;){var s=ef(e[i]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++i!=r?o:(r=t==null?0:t.length,!!r&&Qp(r)&&Zp(s,r)&&(Jp(t)||Xp(t)))}ds.exports=tf});var hs=D((cw,cs)=>{var nf=ls(),rf=us();function of(t,e){return t!=null&&rf(t,e,nf)}cs.exports=of});var ps=D((hw,ms)=>{var af=Fn(),sf=as(),lf=hs(),df=Jt(),uf=Wn(),cf=qn(),hf=Dt(),mf=1,pf=2;function ff(t,e){return df(t)&&uf(e)?cf(hf(t),e):function(n){var i=sf(n,t);return i===void 0&&i===e?lf(n,t):af(e,i,mf|pf)}}ms.exports=ff});var gs=D((mw,fs)=>{function gf(t){return t}fs.exports=gf});var vs=D((pw,bs)=>{function bf(t){return function(e){return e?.[t]}}bs.exports=bf});var _s=D((fw,ys)=>{var vf=jn();function yf(t){return function(e){return vf(e,t)}}ys.exports=yf});var Is=D((gw,xs)=>{var _f=vs(),xf=_s(),If=Jt(),Tf=Dt();function wf(t){return If(t)?_f(Tf(t)):xf(t)}xs.exports=wf});var ws=D((bw,Ts)=>{var Mf=Oa(),Ef=ps(),kf=gs(),Lf=Ae(),Cf=Is();function Af(t){return typeof t=="function"?t:t==null?kf:typeof t=="object"?Lf(t)?Ef(t[0],t[1]):Mf(t):Cf(t)}Ts.exports=Af});var Es=D((vw,Ms)=>{function Sf(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}Ms.exports=Sf});var Ls=D((yw,ks)=>{function Df(t){return t!==t}ks.exports=Df});var As=D((_w,Cs)=>{function Bf(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}Cs.exports=Bf});var Ds=D((xw,Ss)=>{var zf=Es(),Rf=Ls(),Of=As();function Pf(t,e,n){return e===e?Of(t,e,n):zf(t,Rf,n)}Ss.exports=Pf});var zs=D((Iw,Bs)=>{var Hf=Ds();function Ff(t,e){var n=t==null?0:t.length;return!!n&&Hf(t,e,0)>-1}Bs.exports=Ff});var Os=D((Tw,Rs)=>{function Wf(t,e,n){for(var i=-1,r=t==null?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}Rs.exports=Wf});var Hs=D((ww,Ps)=>{function qf(){}Ps.exports=qf});var Ws=D((Mw,Fs)=>{var Vn=Dn(),Nf=Hs(),Kf=$t(),jf=1/0,Vf=Vn&&1/Kf(new Vn([,-0]))[1]==jf?function(t){return new Vn(t)}:Nf;Fs.exports=Vf});var Ns=D((Ew,qs)=>{var Uf=In(),Gf=zs(),$f=Os(),Yf=Tn(),Xf=Ws(),Jf=$t(),Zf=200;function Qf(t,e,n){var i=-1,r=Gf,o=t.length,s=!0,a=[],l=a;if(n)s=!1,r=$f;else if(o>=Zf){var h=e?null:Xf(t);if(h)return Jf(h);s=!1,r=Yf,l=new Uf}else l=e?[]:a;e:for(;++i<o;){var y=t[i],T=e?e(y):y;if(y=n||y!==0?y:0,s&&T===T){for(var _=l.length;_--;)if(l[_]===T)continue e;e&&l.push(T),a.push(y)}else r(l,T,n)||(l!==a&&l.push(T),a.push(y))}return a}qs.exports=Qf});var js=D((kw,Ks)=>{var eg=ws(),tg=Ns();function ng(t,e){return t&&t.length?tg(t,eg(e,2)):[]}Ks.exports=ng});var Us=D((Lw,Vs)=>{var ig=_e(),rg=function(){return ig.Date.now()};Vs.exports=rg});var $s=D((Cw,Gs)=>{var og=/\s/;function ag(t){for(var e=t.length;e--&&og.test(t.charAt(e)););return e}Gs.exports=ag});var Xs=D((Aw,Ys)=>{var sg=$s(),lg=/^\s+/;function dg(t){return t&&t.slice(0,sg(t)+1).replace(lg,"")}Ys.exports=dg});var el=D((Sw,Qs)=>{var ug=Xs(),Js=rt(),cg=St(),Zs=0/0,hg=/^[-+]0x[0-9a-f]+$/i,mg=/^0b[01]+$/i,pg=/^0o[0-7]+$/i,fg=parseInt;function gg(t){if(typeof t=="number")return t;if(cg(t))return Zs;if(Js(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Js(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ug(t);var n=mg.test(t);return n||pg.test(t)?fg(t.slice(2),n?2:8):hg.test(t)?Zs:+t}Qs.exports=gg});var il=D((Dw,nl)=>{var bg=rt(),Un=Us(),tl=el(),vg="Expected a function",yg=Math.max,_g=Math.min;function xg(t,e,n){var i,r,o,s,a,l,h=0,y=!1,T=!1,_=!0;if(typeof t!="function")throw new TypeError(vg);e=tl(e)||0,bg(n)&&(y=!!n.leading,T="maxWait"in n,o=T?yg(tl(n.maxWait)||0,e):o,_="trailing"in n?!!n.trailing:_);function b(S){var v=i,M=r;return i=r=void 0,h=S,s=t.apply(M,v),s}function c(S){return h=S,a=setTimeout(w,e),y?b(S):s}function m(S){var v=S-l,M=S-h,d=e-v;return T?_g(d,o-M):d}function f(S){var v=S-l,M=S-h;return l===void 0||v>=e||v<0||T&&M>=o}function w(){var S=Un();if(f(S))return x(S);a=setTimeout(w,m(S))}function x(S){return a=void 0,_&&i?b(S):(i=r=void 0,s)}function I(){a!==void 0&&clearTimeout(a),h=0,i=l=r=a=void 0}function A(){return a===void 0?s:x(Un())}function E(){var S=Un(),v=f(S);if(i=arguments,r=this,l=S,v){if(a===void 0)return c(l);if(T)return clearTimeout(a),a=setTimeout(w,e),b(l)}return a===void 0&&(a=setTimeout(w,e)),s}return E.cancel=I,E.flush=A,E}nl.exports=xg});var Zn=`.p-Widget,.lm-Widget{box-sizing:border-box;position:relative;overflow:hidden;cursor:default;}.p-Widget.p-mod-hidden,.lm-Widget.lm-mod-hidden{display:none!important;}.lm-AccordionPanel[data-orientation='horizontal']>.lm-AccordionPanel-title{display:block;transform-origin:top left;transform:rotate(-90deg)translate(-100%);}.p-CommandPalette,.lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-CommandPalette-search,.lm-CommandPalette-search{flex:0 0 auto;}.p-CommandPalette-content,.lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none;}.p-CommandPalette-header,.lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.p-CommandPalette-item,.lm-CommandPalette-item{display:flex;flex-direction:row;}.p-CommandPalette-itemIcon,.lm-CommandPalette-itemIcon{flex:0 0 auto;}.p-CommandPalette-itemContent,.lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden;}.p-CommandPalette-itemShortcut,.lm-CommandPalette-itemShortcut{flex:0 0 auto;}.p-CommandPalette-itemLabel,.lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-close-icon{border:1px solid transparent;background-color:transparent;position:absolute;z-index:1;right:3%;top:0;bottom:0;margin:auto;padding:7px 0;display:none;vertical-align:middle;outline:0;cursor:pointer;}.lm-close-icon:after{content:'X';display:block;width:15px;height:15px;text-align:center;color:#000;font-weight:normal;font-size:12px;cursor:pointer;}.p-DockPanel,.lm-DockPanel{z-index:0;}.p-DockPanel-widget,.lm-DockPanel-widget{z-index:0;}.p-DockPanel-tabBar,.lm-DockPanel-tabBar{z-index:1;}.p-DockPanel-handle,.lm-DockPanel-handle{z-index:2;}.p-DockPanel-handle.p-mod-hidden,.lm-DockPanel-handle.lm-mod-hidden{display:none!important;}.p-DockPanel-handle:after,.lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-DockPanel-handle[data-orientation='horizontal'],.lm-DockPanel-handle[data-orientation='horizontal']{cursor:ew-resize;}.p-DockPanel-handle[data-orientation='vertical'],.lm-DockPanel-handle[data-orientation='vertical']{cursor:ns-resize;}.p-DockPanel-handle[data-orientation='horizontal']:after,.lm-DockPanel-handle[data-orientation='horizontal']:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-DockPanel-handle[data-orientation='vertical']:after,.lm-DockPanel-handle[data-orientation='vertical']:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-DockPanel-overlay,.lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none;}.p-DockPanel-overlay.p-mod-hidden,.lm-DockPanel-overlay.lm-mod-hidden{display:none!important;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-MenuBar,.lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-MenuBar-content,.lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none;}.p--MenuBar-item,.lm-MenuBar-item{box-sizing:border-box;}.p-MenuBar-itemIcon,.p-MenuBar-itemLabel,.lm-MenuBar-itemIcon,.lm-MenuBar-itemLabel{display:inline-block;}.p-ScrollBar,.lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-ScrollBar[data-orientation='horizontal'],.lm-ScrollBar[data-orientation='horizontal']{flex-direction:row;}.p-ScrollBar[data-orientation='vertical'],.lm-ScrollBar[data-orientation='vertical']{flex-direction:column;}.p-ScrollBar-button,.lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto;}.p-ScrollBar-track,.lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto;}.p-ScrollBar-thumb,.lm-ScrollBar-thumb{box-sizing:border-box;position:absolute;}.p-SplitPanel-child,.lm-SplitPanel-child{z-index:0;}.p-SplitPanel-handle,.lm-SplitPanel-handle{z-index:1;}.p-SplitPanel-handle.p-mod-hidden,.lm-SplitPanel-handle.lm-mod-hidden{display:none!important;}.p-SplitPanel-handle:after,.lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle{cursor:ew-resize;}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle{cursor:ns-resize;}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-TabBar,.lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-TabBar[data-orientation='horizontal'],.lm-TabBar[data-orientation='horizontal']{flex-direction:row;align-items:flex-end;}.p-TabBar[data-orientation='vertical'],.lm-TabBar[data-orientation='vertical']{flex-direction:column;align-items:flex-end;}.p-TabBar-content,.lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none;}.p-TabBar[data-orientation='horizontal']>.p-TabBar-content,.lm-TabBar[data-orientation='horizontal']>.lm-TabBar-content{flex-direction:row;}.p-TabBar[data-orientation='vertical']>.p-TabBar-content,.lm-TabBar[data-orientation='vertical']>.lm-TabBar-content{flex-direction:column;}.p-TabBar-tab,.lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;touch-action:none;}.p-TabBar-tabIcon,.p-TabBar-tabCloseIcon,.lm-TabBar-tabIcon,.lm-TabBar-tabCloseIcon{flex:0 0 auto;}.p-TabBar-tabLabel,.lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap;}.lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;}.p-TabBar-tab.p-mod-hidden,.lm-TabBar-tab.lm-mod-hidden{display:none!important;}.lm-TabBar-addButton.lm-mod-hidden{display:none!important;}.p-TabBar.p-mod-dragging .p-TabBar-tab,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative;}.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab{left:0;transition:left 150ms ease;}.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab{top:0;transition:top 150ms ease;}.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none;}.lm-TabBar-tabLabel .lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;background:inherit;}.p-TabPanel-tabBar,.lm-TabPanel-tabBar{z-index:1;}.p-TabPanel-stackedPanel,.lm-TabPanel-stackedPanel{z-index:0;}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:var(--icon--color,#666);cursor:pointer;padding:0px 6px;margin:0;margin-left:10.5px;margin-right:auto;flex:0 1 auto;border-radius:3px;}:host .p-TabBar-tabLabel:hover{background-color:var(--icon--color);color:var(--plugin--background);}:host .p-TabBar-tabLabel:focus{outline:none;color:var(--workspace-secondary--color,#666)!important;cursor:text;}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content,"\\2715");}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content,"\\1F527");font-family:var(--settings--font-family,"Arial");transition:color 0.5s ease;}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content,"\\1F527");}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce;}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none;}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all;}:host .p-mod-current .p-TabBar-tabConfigIcon,:host .p-mod-current .p-TabBar-tabCloseIcon{color:inherit;transition:color 0.2s ease-out;}:host .p-mod-current .p-TabBar-tabConfigIcon:hover,:host .p-mod-current .p-TabBar-tabCloseIcon:hover{color:#1a7da1;transition:color 0.2s ease-out;}:host .p-BoxPanel{overflow:scroll!important;}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";color:#aaa;}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";}:host .divider{left:32px;bottom:0;position:absolute;right:32px;height:1px;background-color:var(--workspace-tabbar--border-color);margin-bottom:0px;}:host .p-TabBar-tab .drag-handle{height:12px;width:5px;-webkit-mask-image:var(--column-drag-handle--mask-image);mask-image:var(--column-drag-handle--mask-image);margin:0px 0 0 16.5px;background-repeat:no-repeat;background-color:var(--inactive--color,red);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:0.5;}:host .p-TabBar-tab.p-mod-current .divider{display:block;}:host .p-TabBar{min-height:40px!important;}:host .pfm-button-base{background:white!important;}:host .pfm-button-base:active{background:#016bc6!important;}:host .p-TabBar-content{padding:0px;border-bottom:0px solid#fff!important;border-left:#eaeaea;border-right:#eaeaea;}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0px;}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none;}:host .p-TabBar-tab{border-color:#eaeaea;align-items:center;}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:var(--workspace-inactive-blur--background-color,transparent);}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block;}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0px;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px 1px 0px 1px!important;border-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0px;background-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{transition:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block;}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:none;color:#737373;height:40px!important;max-height:40px!important;transform:none!important;transition:color 0.2s ease-out;color:#ccc;color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-secondary--color,#666);}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important;}:host .p-TabBar-tabLabel{font-family:inherit;font-size:12px;line-height:22px;text-align:start;white-space:normal!important;word-break:break-all;}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:16.5px!important;}:host .p-TabBar-tabConfigIcon{padding-left:8px;padding-right:8px!important;}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px;}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-tabbar--color,#666)!important;border:var(--workspace-tabbar--border,1px solid#ddd);border-width:var(--workspace-tabbar-tab--border-width);box-shadow:0 13px 0 -12px var(--inactive--border-color);border-radius:6px 6px 0 0;background-color:var(--workspace-tabbar--background-color,white);height:40px!important;max-height:40px!important;}:host .bottom .p-TabBar-tab.p-mod-current{border:none;}:host ::-webkit-scrollbar-thumb{background-color:#ccc;}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1;}:host .perspective-workspace.context-menu * .p-TabBar,:host .perspective-workspace.context-menu .p-Widget.workspace-widget:not(.context-focus) .viewer-container{opacity:0.2;}:host .bookmarks-button{margin-left:11px;margin-right:-13px;border-radius:3px;height:22px;}:host .bookmarks-button:hover{background-color:var(--icon--color);}:host .bookmarks{cursor:pointer;background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:26px;height:12px;-webkit-mask-image:var(--bookmarks--mask-image);mask-image:var(--bookmarks--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-size:auto;mask-size:auto;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;padding:5px;}:host .bookmarks:hover{background-color:var(--plugin--background);}:host .p-DockPanel{overflow:var(--dock-panel--overflow,hidden);position:absolute;background-color:var(--detail--background-color,transparent);padding:3px;top:0;left:0;right:0;bottom:0;}:host .p-DockPanel[data-mode="single-document"]{padding:0px;}:host .lm-Widget,:host .p-Widget{cursor:inherit;}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important;}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important;}:host .workspace-master-widget{min-width:100px!important;}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none;}:host .widget-blur ::slotted(perspective-viewer){opacity:0.5;}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,0.05);}:host .perspective-scroll-panel{overflow:auto!important;}:host .p-Panel{min-height:100%;}:host .p-DockPanel-handle{background-color:none;}:host .p-SplitPanel-handle,:host .p-DockPanel-handle{transition:background-color 0.3s ease-out;}:host .p-SplitPanel-handle:hover,:host .p-DockPanel-handle:hover{background-color:rgba(0,0,0,0.05);}:host .p-DockPanel-overlay{background:rgba(75,75,75,0.2);border:1px dashed#666;border-radius:6px;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:linear;margin:0px;}:host .lm-DockPanel:not([data-mode="single-document"]) .viewer-container{border:var(--workspace-tabbar--border,1px solid var(--inactive--color));border-width:var(--workspace-tabbar--border-width);border-radius:var(--workspace-tabbar--border-radius,0 0 6px 6px);}:host .viewer-container{flex:1;height:100%;overflow:hidden;}:host .perspective-scroll-panel.has-master-panel{margin-left:-8px!important;}:host .perspective-scroll-panel .workspace-widget{min-width:300px;min-height:200px;}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid#eaedef;border-width:0px!important;}:host{background-color:hsl(210deg 18% 90%);width:100%;height:100%;}:host .workspace{width:100%;height:100%;}:host .p-SplitPanel{height:100%;width:100%;}:host div.p-SplitPanel-handle{background-color:inherit;}:host .master-panel{background-color:var(--workspace-master--background-color,inherit);padding:0px 0px 0px 0px;}:host .master-panel .viewer-container{border-width:0px;}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:0.2;}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:0.2;}`;var Qn=`<!--

Copyright (c) 2017, the Perspective Authors.

This file is part of the Perspective library, distributed under the terms of
the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<template id="perspective-workspace">
    <div id="container" class="workspace"></div>
</template>
`;var Qt;(S=>{function t(v,M,d=0,u=-1){let g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k;u<d?k=u+1+(g-d):k=u-d+1;for(let p=0;p<k;++p){let L=(d+p)%g;if(v[L]===M)return L}return-1}S.firstIndexOf=t;function e(v,M,d=-1,u=0){let g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k;d<u?k=d+1+(g-u):k=d-u+1;for(let p=0;p<k;++p){let L=(d-p+g)%g;if(v[L]===M)return L}return-1}S.lastIndexOf=e;function n(v,M,d=0,u=-1){let g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k;u<d?k=u+1+(g-d):k=u-d+1;for(let p=0;p<k;++p){let L=(d+p)%g;if(M(v[L],L))return L}return-1}S.findFirstIndex=n;function i(v,M,d=-1,u=0){let g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k;d<u?k=d+1+(g-u):k=d-u+1;for(let p=0;p<k;++p){let L=(d-p+g)%g;if(M(v[L],L))return L}return-1}S.findLastIndex=i;function r(v,M,d=0,u=-1){let g=n(v,M,d,u);return g!==-1?v[g]:void 0}S.findFirstValue=r;function o(v,M,d=-1,u=0){let g=i(v,M,d,u);return g!==-1?v[g]:void 0}S.findLastValue=o;function s(v,M,d,u=0,g=-1){let k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),g<0?g=Math.max(0,g+k):g=Math.min(g,k-1);let p=u,L=g-u+1;for(;L>0;){let B=L>>1,O=p+B;d(v[O],M)<0?(p=O+1,L-=B+1):L=B}return p}S.lowerBound=s;function a(v,M,d,u=0,g=-1){let k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),g<0?g=Math.max(0,g+k):g=Math.min(g,k-1);let p=u,L=g-u+1;for(;L>0;){let B=L>>1,O=p+B;d(v[O],M)>0?L=B:(p=O+1,L-=B+1)}return p}S.upperBound=a;function l(v,M,d){if(v===M)return!0;if(v.length!==M.length)return!1;for(let u=0,g=v.length;u<g;++u)if(d?!d(v[u],M[u]):v[u]!==M[u])return!1;return!0}S.shallowEqual=l;function h(v,M={}){let{start:d,stop:u,step:g}=M;if(g===void 0&&(g=1),g===0)throw new Error("Slice `step` cannot be zero.");let k=v.length;d===void 0?d=g<0?k-1:0:d<0?d=Math.max(d+k,g<0?-1:0):d>=k&&(d=g<0?k-1:k),u===void 0?u=g<0?-1:k:u<0?u=Math.max(u+k,g<0?-1:0):u>=k&&(u=g<0?k-1:k);let p;g<0&&u>=d||g>0&&d>=u?p=0:g<0?p=Math.floor((u-d+1)/g+1):p=Math.floor((u-d-1)/g+1);let L=[];for(let B=0;B<p;++B)L[B]=v[d+B*g];return L}S.slice=h;function y(v,M,d){let u=v.length;if(u<=1||(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1),M===d))return;let g=v[M],k=M<d?1:-1;for(let p=M;p!==d;p+=k)v[p]=v[p+k];v[d]=g}S.move=y;function T(v,M=0,d=-1){let u=v.length;if(!(u<=1))for(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1);M<d;){let g=v[M],k=v[d];v[M++]=k,v[d--]=g}}S.reverse=T;function _(v,M,d=0,u=-1){let g=v.length;if(g<=1||(d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1),d>=u))return;let k=u-d+1;if(M>0?M=M%k:M<0&&(M=(M%k+k)%k),M===0)return;let p=d+M;T(v,d,p-1),T(v,p,u),T(v,d,u)}S.rotate=_;function b(v,M,d=0,u=-1){let g=v.length;if(g===0)return;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k;u<d?k=u+1+(g-d):k=u-d+1;for(let p=0;p<k;++p)v[(d+p)%g]=M}S.fill=b;function c(v,M,d){let u=v.length;M<0?M=Math.max(0,M+u):M=Math.min(M,u);for(let g=u;g>M;--g)v[g]=v[g-1];v[M]=d}S.insert=c;function m(v,M){let d=v.length;if(M<0&&(M+=d),M<0||M>=d)return;let u=v[M];for(let g=M+1;g<d;++g)v[g-1]=v[g];return v.length=d-1,u}S.removeAt=m;function f(v,M,d=0,u=-1){let g=t(v,M,d,u);return g!==-1&&m(v,g),g}S.removeFirstOf=f;function w(v,M,d=-1,u=0){let g=e(v,M,d,u);return g!==-1&&m(v,g),g}S.removeLastOf=w;function x(v,M,d=0,u=-1){let g=v.length;if(g===0)return 0;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k=0;for(let p=0;p<g;++p)d<=u&&p>=d&&p<=u&&v[p]===M||u<d&&(p<=u||p>=d)&&v[p]===M?k++:k>0&&(v[p-k]=v[p]);return k>0&&(v.length=g-k),k}S.removeAllOf=x;function I(v,M,d=0,u=-1){let g,k=n(v,M,d,u);return k!==-1&&(g=m(v,k)),{index:k,value:g}}S.removeFirstWhere=I;function A(v,M,d=-1,u=0){let g,k=i(v,M,d,u);return k!==-1&&(g=m(v,k)),{index:k,value:g}}S.removeLastWhere=A;function E(v,M,d=0,u=-1){let g=v.length;if(g===0)return 0;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);let k=0;for(let p=0;p<g;++p)d<=u&&p>=d&&p<=u&&M(v[p],p)||u<d&&(p<=u||p>=d)&&M(v[p],p)?k++:k>0&&(v[p-k]=v[p]);return k>0&&(v.length=g-k),k}S.removeAllWhere=E})(Qt||={});function fe(t){let e;return typeof t.iter=="function"?e=t.iter():e=new mt(t),e}function pt(t){let e=0,n=[],i=fe(t),r;for(;(r=i.next())!==void 0;)n[e++]=r;return n}var mt=class{constructor(e){this._source=e}iter(){return this}clone(){let e=new mt(this._source);return e._index=this._index,e}next(){if(!(this._index>=this._source.length))return this._source[this._index++]}_index=0;_source};function ei(t,e){let n=0,i=fe(t),r;for(;(r=i.next())!==void 0;)if(e(r,n++))return r}var gl;(e=>{function t(n,i,r){return r===0?1/0:n>i&&r>0||n<i&&r<0?0:Math.ceil((i-n)/r)}e.rangeLength=t})(gl||={});var bl;(o=>{function t(s,a,l=0){let h=new Array(a.length);for(let y=0,T=l,_=a.length;y<_;++y,++T){if(T=s.indexOf(a[y],T),T===-1)return null;h[y]=T}return h}o.findIndices=t;function e(s,a,l=0){let h=t(s,a,l);if(!h)return null;let y=0;for(let T=0,_=h.length;T<_;++T){let b=h[T]-l;y+=b*b}return{score:y,indices:h}}o.matchSumOfSquares=e;function n(s,a,l=0){let h=t(s,a,l);if(!h)return null;let y=0,T=l-1;for(let _=0,b=h.length;_<b;++_){let c=h[_];y+=c-T-1,T=c}return{score:y,indices:h}}o.matchSumOfDeltas=n;function i(s,a,l){let h=[],y=0,T=0,_=a.length;for(;y<_;){let b=a[y],c=a[y];for(;++y<_&&a[y]===c+1;)c++;T<b&&h.push(s.slice(T,b)),b<c+1&&h.push(l(s.slice(b,c+1))),T=c+1}return T<s.length&&h.push(s.slice(T)),h}o.highlight=i;function r(s,a){return s<a?-1:s>a?1:0}o.cmp=r})(bl||={});var R;(function(t){function e(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);var k;u<d?k=u+1+(g-d):k=u-d+1;for(var p=0;p<k;++p){var L=(d+p)%g;if(v[L]===M)return L}return-1}t.firstIndexOf=e;function n(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);var k;d<u?k=d+1+(g-u):k=d-u+1;for(var p=0;p<k;++p){var L=(d-p+g)%g;if(v[L]===M)return L}return-1}t.lastIndexOf=n;function i(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);var k;u<d?k=u+1+(g-d):k=u-d+1;for(var p=0;p<k;++p){var L=(d+p)%g;if(M(v[L],L))return L}return-1}t.findFirstIndex=i;function r(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var g=v.length;if(g===0)return-1;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);var k;d<u?k=d+1+(g-u):k=d-u+1;for(var p=0;p<k;++p){var L=(d-p+g)%g;if(M(v[L],L))return L}return-1}t.findLastIndex=r;function o(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=i(v,M,d,u);return g!==-1?v[g]:void 0}t.findFirstValue=o;function s(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var g=r(v,M,d,u);return g!==-1?v[g]:void 0}t.findLastValue=s;function a(v,M,d,u,g){u===void 0&&(u=0),g===void 0&&(g=-1);var k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),g<0?g=Math.max(0,g+k):g=Math.min(g,k-1);for(var p=u,L=g-u+1;L>0;){var B=L>>1,O=p+B;d(v[O],M)<0?(p=O+1,L-=B+1):L=B}return p}t.lowerBound=a;function l(v,M,d,u,g){u===void 0&&(u=0),g===void 0&&(g=-1);var k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),g<0?g=Math.max(0,g+k):g=Math.min(g,k-1);for(var p=u,L=g-u+1;L>0;){var B=L>>1,O=p+B;d(v[O],M)>0?L=B:(p=O+1,L-=B+1)}return p}t.upperBound=l;function h(v,M,d){if(v===M)return!0;if(v.length!==M.length)return!1;for(var u=0,g=v.length;u<g;++u)if(d?!d(v[u],M[u]):v[u]!==M[u])return!1;return!0}t.shallowEqual=h;function y(v,M){M===void 0&&(M={});var d=M.start,u=M.stop,g=M.step;if(g===void 0&&(g=1),g===0)throw new Error("Slice `step` cannot be zero.");var k=v.length;d===void 0?d=g<0?k-1:0:d<0?d=Math.max(d+k,g<0?-1:0):d>=k&&(d=g<0?k-1:k),u===void 0?u=g<0?-1:k:u<0?u=Math.max(u+k,g<0?-1:0):u>=k&&(u=g<0?k-1:k);var p;g<0&&u>=d||g>0&&d>=u?p=0:g<0?p=Math.floor((u-d+1)/g+1):p=Math.floor((u-d-1)/g+1);for(var L=[],B=0;B<p;++B)L[B]=v[d+B*g];return L}t.slice=y;function T(v,M,d){var u=v.length;if(!(u<=1)&&(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1),M!==d)){for(var g=v[M],k=M<d?1:-1,p=M;p!==d;p+=k)v[p]=v[p+k];v[d]=g}}t.move=T;function _(v,M,d){M===void 0&&(M=0),d===void 0&&(d=-1);var u=v.length;if(!(u<=1))for(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1);M<d;){var g=v[M],k=v[d];v[M++]=k,v[d--]=g}}t.reverse=_;function b(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=v.length;if(!(g<=1)&&(d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1),!(d>=u))){var k=u-d+1;if(M>0?M=M%k:M<0&&(M=(M%k+k)%k),M!==0){var p=d+M;_(v,d,p-1),_(v,p,u),_(v,d,u)}}}t.rotate=b;function c(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=v.length;if(g!==0){d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);var k;u<d?k=u+1+(g-d):k=u-d+1;for(var p=0;p<k;++p)v[(d+p)%g]=M}}t.fill=c;function m(v,M,d){var u=v.length;M<0?M=Math.max(0,M+u):M=Math.min(M,u);for(var g=u;g>M;--g)v[g]=v[g-1];v[M]=d}t.insert=m;function f(v,M){var d=v.length;if(M<0&&(M+=d),!(M<0||M>=d)){for(var u=v[M],g=M+1;g<d;++g)v[g-1]=v[g];return v.length=d-1,u}}t.removeAt=f;function w(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=e(v,M,d,u);return g!==-1&&f(v,g),g}t.removeFirstOf=w;function x(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var g=n(v,M,d,u);return g!==-1&&f(v,g),g}t.removeLastOf=x;function I(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=v.length;if(g===0)return 0;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);for(var k=0,p=0;p<g;++p)d<=u&&p>=d&&p<=u&&v[p]===M||u<d&&(p<=u||p>=d)&&v[p]===M?k++:k>0&&(v[p-k]=v[p]);return k>0&&(v.length=g-k),k}t.removeAllOf=I;function A(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g,k=i(v,M,d,u);return k!==-1&&(g=f(v,k)),{index:k,value:g}}t.removeFirstWhere=A;function E(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var g,k=r(v,M,d,u);return k!==-1&&(g=f(v,k)),{index:k,value:g}}t.removeLastWhere=E;function S(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var g=v.length;if(g===0)return 0;d<0?d=Math.max(0,d+g):d=Math.min(d,g-1),u<0?u=Math.max(0,u+g):u=Math.min(u,g-1);for(var k=0,p=0;p<g;++p)d<=u&&p>=d&&p<=u&&M(v[p],p)||u<d&&(p<=u||p>=d)&&M(v[p],p)?k++:k>0&&(v[p-k]=v[p]);return k>0&&(v.length=g-k),k}t.removeAllWhere=S})(R||(R={}));function ge(t){var e;return typeof t.iter=="function"?e=t.iter():e=new vl(t),e}function F(t,e){for(var n=0,i=ge(t),r;(r=i.next())!==void 0;)if(e(r,n++)===!1)return}function zt(t,e){for(var n=0,i=ge(t),r;(r=i.next())!==void 0;)if(!e(r,n++))return!1;return!0}function Rt(t,e){for(var n=0,i=ge(t),r;(r=i.next())!==void 0;)if(e(r,n++))return!0;return!1}function ni(t){for(var e=0,n=[],i=ge(t),r;(r=i.next())!==void 0;)n[e++]=r;return n}var vl=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),Hv=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),Fv=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),Wv=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),qv=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();function tn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fe(ge(t.map(ge)))}var Fe=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();function ce(){return new yl}var yl=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var Nv=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var Kv=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,i;(i=n.next())!==void 0;)if(e(i,this._index++))return i},t}();function ft(t,e){for(var n=0,i=ge(t),r;(r=i.next())!==void 0;)if(e(r,n++))return r}function We(t,e){return new _l(ge(t),e)}var _l=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var jv=function(){function t(e,n,i){this._index=0,this._start=e,this._stop=n,this._step=i,this._length=en.rangeLength(e,n,i)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),en;(function(t){function e(n,i,r){return r===0?1/0:n>i&&r>0||n<i&&r<0?0:Math.ceil((i-n)/r)}t.rangeLength=e})(en||(en={}));function nn(t,e,n){var i=0,r=ge(t),o=r.next();if(o===void 0&&n===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(o===void 0)return n;var s=r.next();if(s===void 0&&n===void 0)return o;if(s===void 0)return e(n,o,i++);var a;n===void 0?a=e(o,s,i++):a=e(e(n,o,i++),s,i++);for(var l;(l=r.next())!==void 0;)a=e(a,l,i++);return a}function Ot(t){return new xl(t,1)}var xl=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();function Pt(t){var e;return typeof t.retro=="function"?e=t.retro():e=new Il(t),e}var Il=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var Vv=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),ti;(function(t){function e(s,a,l){l===void 0&&(l=0);for(var h=new Array(a.length),y=0,T=l,_=a.length;y<_;++y,++T){if(T=s.indexOf(a[y],T),T===-1)return null;h[y]=T}return h}t.findIndices=e;function n(s,a,l){l===void 0&&(l=0);var h=e(s,a,l);if(!h)return null;for(var y=0,T=0,_=h.length;T<_;++T){var b=h[T]-l;y+=b*b}return{score:y,indices:h}}t.matchSumOfSquares=n;function i(s,a,l){l===void 0&&(l=0);var h=e(s,a,l);if(!h)return null;for(var y=0,T=l-1,_=0,b=h.length;_<b;++_){var c=h[_];y+=c-T-1,T=c}return{score:y,indices:h}}t.matchSumOfDeltas=i;function r(s,a,l){for(var h=[],y=0,T=0,_=a.length;y<_;){for(var b=a[y],c=a[y];++y<_&&a[y]===c+1;)c++;T<b&&h.push(s.slice(T,b)),b<c+1&&h.push(l(s.slice(b,c+1))),T=c+1}return T<s.length&&h.push(s.slice(T)),h}t.highlight=r;function o(s,a){return s<a?-1:s>a?1:0}t.cmp=o})(ti||(ti={}));var Uv=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var Gv=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,i=this._source.length;n<i;++n){var r=this._source[n].next();if(r===void 0)return;e[n]=r}return e},t}();var ii=function(){function t(e){this._root=new G.LeafNode,this.cmp=e}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var e=G.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var e=G.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return G.iterItems(this._root)},t.prototype.retro=function(){return G.retroItems(this._root)},t.prototype.slice=function(e,n){return G.sliceItems(this._root,e,n)},t.prototype.retroSlice=function(e,n){return G.retroSliceItems(this._root,e,n)},t.prototype.at=function(e){return G.itemAt(this._root,e)},t.prototype.has=function(e,n){return G.hasItem(this._root,e,n)},t.prototype.indexOf=function(e,n){return G.indexOf(this._root,e,n)},t.prototype.get=function(e,n){return G.getItem(this._root,e,n)},t.prototype.assign=function(e){this.clear(),this.update(e)},t.prototype.insert=function(e){var n=G.insertItem(this._root,e,this.cmp);return this._root=G.maybeSplitRoot(this._root),n},t.prototype.update=function(e){var n=this;F(e,function(i){n.insert(i)})},t.prototype.delete=function(e,n){var i=G.deleteItem(this._root,e,n);return this._root=G.maybeExtractRoot(this._root),i},t.prototype.remove=function(e){var n=G.removeItem(this._root,e);return this._root=G.maybeExtractRoot(this._root),n},t.prototype.clear=function(){G.clear(this._root),this._root=new G.LeafNode},t}();(function(t){function e(n,i){var r=new t(i);return r.assign(n),r}t.from=e})(ii||(ii={}));var G;(function(t){var e=function(){function p(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(p.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),p}();t.BranchNode=e;var n=function(){function p(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(p.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),p}();t.LeafNode=n;function i(p){for(;p.type===0;)p=p.children[0];return p}t.firstLeaf=i;function r(p){for(;p.type===0;)p=p.children[p.children.length-1];return p}t.lastLeaf=r;function o(p){var L=i(p);return new E(L,0,-1)}t.iterItems=o;function s(p){var L=r(p);return new S(L,L.size-1,-1)}t.retroItems=s;function a(p,L,B){L===void 0?L=0:L<0?L=Math.max(0,L+p.size):L=Math.min(L,p.size),B===void 0?B=p.size:B<0?B=Math.max(0,B+p.size):B=Math.min(B,p.size);var O=Math.max(0,B-L);if(O===0)return ce();for(;p.type===0;){var H=v(p.sizes,L);H>0&&(L-=p.sizes[H-1]),p=p.children[H]}return new E(p,L,O)}t.sliceItems=a;function l(p,L,B){L===void 0?L=p.size-1:L<0?L=Math.max(-1,L+p.size):L=Math.min(L,p.size-1),B===void 0?B=-1:B<0?B=Math.max(-1,B+p.size):B=Math.min(B,p.size-1);var O=Math.max(0,L-B);if(O===0)return ce();for(;p.type===0;){var H=v(p.sizes,L);H>0&&(L-=p.sizes[H-1]),p=p.children[H]}return new S(p,L,O)}t.retroSliceItems=l;function h(p,L){if(L<0&&(L+=p.size),!(L<0||L>=p.size)){for(;p.type===0;){var B=v(p.sizes,L);B>0&&(L-=p.sizes[B-1]),p=p.children[B]}return p.items[L]}}t.itemAt=h;function y(p,L,B){for(;p.type===0;){var O=M(p.items,L,B);p=p.children[O]}var H=d(p.items,L,B);return H>=0}t.hasItem=y;function T(p,L,B){for(var O=0;p.type===0;){var H=M(p.items,L,B);H>0&&(O+=p.sizes[H-1]),p=p.children[H]}var K=d(p.items,L,B);return K>=0?O+K:-O+K}t.indexOf=T;function _(p,L,B){for(;p.type===0;){var O=M(p.items,L,B);p=p.children[O]}var H=d(p.items,L,B);return H>=0?p.items[H]:void 0}t.getItem=_;function b(p,L,B){if(p.type===1){var O=d(p.items,L,B),H;return O>=0?(H=p.items[O],p.items[O]=L):(H=void 0,R.insert(p.items,-O-1,L)),H}var K=M(p.items,L,B),X=p.children[K],me=X.size,J=b(X,L,B),Q=X.size;if(p.items[K]=X.items[0],me===Q)return J;if(X.width>I){var ae=g(X);R.insert(p.children,K+1,ae),R.insert(p.items,K+1,ae.items[0])}return u(p,K),J}t.insertItem=b;function c(p,L,B){if(p.type===1){var O=d(p.items,L,B);return O<0?void 0:R.removeAt(p.items,O)}var H=M(p.items,L,B),K=p.children[H],X=K.size,me=c(K,L,B),J=K.size;return X===J||(p.items[H]=K.items[0],K.width<A&&(H=k(p,H)),u(p,H)),me}t.deleteItem=c;function m(p,L){if(L<0&&(L+=p.size),!(L<0||L>=p.size)){if(p.type===1)return R.removeAt(p.items,L);var B=v(p.sizes,L);B>0&&(L-=p.sizes[B]);var O=p.children[B],H=m(O,L);return p.items[B]=O.items[0],O.width<A&&(B=k(p,B)),u(p,B),H}}t.removeItem=m;function f(p){p.type===0?(F(p.children,f),p.children.length=0,p.sizes.length=0,p.items.length=0):(p.items.length=0,p.next=null,p.prev=null)}t.clear=f;function w(p){if(p.width<=I)return p;var L=new e,B=g(p);return L.sizes[0]=p.size,L.sizes[1]=p.size+B.size,L.children[0]=p,L.children[1]=B,L.items[0]=p.items[0],L.items[1]=B.items[0],L}t.maybeSplitRoot=w;function x(p){if(p.type===1||p.children.length>1)return p;var L=p.children.pop();return f(p),L}t.maybeExtractRoot=x;var I=32,A=I>>1,E=function(){function p(L,B,O){this._node=L,this._index=B,this._count=O}return p.prototype.iter=function(){return this},p.prototype.clone=function(){return new p(this._node,this._index,this._count)},p.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},p}(),S=function(){function p(L,B,O){this._node=L,this._index=B,this._count=O}return p.prototype.iter=function(){return this},p.prototype.clone=function(){return new p(this._node,this._index,this._count)},p.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},p}();function v(p,L){for(var B=p.length,O=0;O<B;++O)if(p[O]>L)return O;return B-1}function M(p,L,B){for(var O=p.length,H=1;H<O;++H)if(B(p[H],L)>0)return H-1;return O-1}function d(p,L,B){for(var O=p.length,H=0;H<O;++H){var K=B(p[H],L);if(K===0)return H;if(K>0)return-H-1}return-O-1}function u(p,L){for(var B=p.sizes,O=p.children,H=L>0?B[L-1]:0,K=O.length;L<K;++L)H=B[L]=H+O[L].size;B.length=O.length}function g(p){if(p.type===1){for(var L=new n,B=p.items,O=L.items,H=A,K=B.length;H<K;++H)O.push(B[H]);return B.length=A,p.next&&(p.next.prev=L),L.next=p.next,L.prev=p,p.next=L,L}for(var X=new e,me=p.children,J=X.children,H=A,K=me.length;H<K;++H)J.push(me[H]);me.length=A;for(var Q=p.items,ae=X.items,H=A,K=Q.length;H<K;++H)ae.push(Q[H]);return Q.length=A,u(p,A),u(X,0),X}function k(p,L){var B,O,H,K,X,me,J=p.children[L],Q=L===0?p.children[L+1]:p.children[L-1],ae=L===0,Me=J.type===1,Ee=Q.width>A;if(Me&&Ee&&ae){var q=J,N=Q;return q.items.push(N.items.shift()),p.items[L+1]=N.items[0],L}if(Me&&Ee&&!ae){var q=J,N=Q;return q.items.unshift(N.items.pop()),p.items[L]=q.items[0],L-1}if(Me&&!Ee&&ae){var q=J,N=Q;return(B=N.items).unshift.apply(B,q.items),R.removeAt(p.children,L),R.removeAt(p.items,L+1),q.prev&&(q.prev.next=N),N.prev=q.prev,f(q),L}if(Me&&!Ee&&!ae){var q=J,N=Q;return(O=N.items).push.apply(O,q.items),R.removeAt(p.children,L),R.removeAt(p.items,L),q.next&&(q.next.prev=N),N.next=q.next,f(q),L-1}if(!Me&&Ee&&ae){var q=J,N=Q;return q.children.push(N.children.shift()),q.items.push(N.items.shift()),p.items[L+1]=N.items[0],u(q,q.width-1),u(N,0),L}if(!Me&&Ee&&!ae){var q=J,N=Q;return q.children.unshift(N.children.pop()),q.items.unshift(N.items.pop()),p.items[L]=q.items[0],u(q,0),u(N,N.width-1),L-1}if(!Me&&!Ee&&ae){var q=J,N=Q;return(H=N.children).unshift.apply(H,q.children),(K=N.items).unshift.apply(K,q.items),R.removeAt(p.children,L),R.removeAt(p.items,L+1),u(N,0),q.children.length=0,f(q),L}if(!Me&&!Ee&&!ae){var q=J,N=Q;return(X=N.children).push.apply(X,q.children),(me=N.items).push.apply(me,q.items),R.removeAt(p.children,L),R.removeAt(p.items,L),u(N,0),q.children.length=0,f(q),L-1}throw"unreachable"}})(G||(G={}));var Ye=function(){function t(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return new t.ForwardValueIterator(this._first)},t.prototype.retro=function(){return new t.RetroValueIterator(this._last)},t.prototype.nodes=function(){return new t.ForwardNodeIterator(this._first)},t.prototype.retroNodes=function(){return new t.RetroNodeIterator(this._last)},t.prototype.assign=function(e){var n=this;this.clear(),F(e,function(i){n.addLast(i)})},t.prototype.push=function(e){this.addLast(e)},t.prototype.pop=function(){return this.removeLast()},t.prototype.shift=function(e){this.addFirst(e)},t.prototype.unshift=function(){return this.removeFirst()},t.prototype.addFirst=function(e){var n=new ke.LinkedListNode(this,e);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},t.prototype.addLast=function(e){var n=new ke.LinkedListNode(this,e);return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,n},t.prototype.insertBefore=function(e,n){if(!n||n===this._first)return this.addFirst(e);if(!(n instanceof ke.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var i=new ke.LinkedListNode(this,e),r=n,o=r.prev;return i.next=r,i.prev=o,r.prev=i,o.next=i,this._size++,i},t.prototype.insertAfter=function(e,n){if(!n||n===this._last)return this.addLast(e);if(!(n instanceof ke.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var i=new ke.LinkedListNode(this,e),r=n,o=r.next;return i.next=o,i.prev=r,r.next=i,o.prev=i,this._size++,i},t.prototype.removeFirst=function(){var e=this._first;if(!!e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},t.prototype.removeLast=function(){var e=this._last;if(!!e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},t.prototype.removeNode=function(e){if(!(e instanceof ke.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");var n=e;n===this._first&&n===this._last?(this._first=null,this._last=null):n===this._first?(this._first=n.next,this._first.prev=null):n===this._last?(this._last=n.prev,this._last.next=null):(n.next.prev=n.prev,n.prev.next=n.next),n.list=null,n.next=null,n.prev=null,this._size--},t.prototype.clear=function(){for(var e=this._first;e;){var n=e.next;e.list=null,e.prev=null,e.next=null,e=n}this._first=null,this._last=null,this._size=0},t}();(function(t){function e(s){var a=new t;return a.assign(s),a}t.from=e;var n=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.next,a.value}},s}();t.ForwardValueIterator=n;var i=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.prev,a.value}},s}();t.RetroValueIterator=i;var r=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.next,a}},s}();t.ForwardNodeIterator=r;var o=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.prev,a}},s}();t.RetroNodeIterator=o})(Ye||(Ye={}));var ke;(function(t){var e=function(){function n(i,r){this.list=null,this.next=null,this.prev=null,this.list=i,this.value=r}return n}();t.LinkedListNode=e})(ke||(ke={}));var rn=function(t,e){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},rn(t,e)};function Tl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");rn(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var he=function(){function t(e){this.type=e}return Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.conflate=function(e){return!1},t}(),qe=function(t){Tl(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.conflate=function(n){return!0},e}(he),P;(function(t){function e(d,u){var g=y.get(d);if(!g||g.length===0){x(d,u);return}var k=zt(Pt(g),function(p){return p?w(p,d,u):!0});k&&x(d,u)}t.sendMessage=e;function n(d,u){if(!u.isConflatable){I(d,u);return}var g=Rt(h,function(k){return k.handler!==d||!k.msg||k.msg.type!==u.type||!k.msg.isConflatable?!1:k.msg.conflate(u)});g||I(d,u)}t.postMessage=n;function i(d,u){var g=y.get(d);g&&g.indexOf(u)!==-1||(g?g.push(u):y.set(d,[u]))}t.installMessageHook=i;function r(d,u){var g=y.get(d);if(!!g){var k=g.indexOf(u);k!==-1&&(g[k]=null,E(g))}}t.removeMessageHook=r;function o(d){var u=y.get(d);u&&u.length>0&&(R.fill(u,null),E(u)),F(h,function(g){g.handler===d&&(g.handler=null,g.msg=null)})}t.clearData=o;function s(){c||b===0||(f(b),c=!0,A(),c=!1)}t.flush=s;function a(){return _}t.getExceptionHandler=a;function l(d){var u=_;return _=d,u}t.setExceptionHandler=l;var h=new Ye,y=new WeakMap,T=new Set,_=function(d){console.error(d)},b=0,c=!1,m=function(){var d=typeof requestAnimationFrame=="function";return d?requestAnimationFrame:setImmediate}(),f=function(){var d=typeof cancelAnimationFrame=="function";return d?cancelAnimationFrame:clearImmediate}();function w(d,u,g){var k=!0;try{typeof d=="function"?k=d(u,g):k=d.messageHook(u,g)}catch(p){_(p)}return k}function x(d,u){try{d.processMessage(u)}catch(g){_(g)}}function I(d,u){h.addLast({handler:d,msg:u}),b===0&&(b=m(A))}function A(){if(b=0,!h.isEmpty){var d={handler:null,msg:null};for(h.addLast(d);;){var u=h.removeFirst();if(u===d)return;u.handler&&u.msg&&e(u.handler,u.msg)}}}function E(d){T.size===0&&m(S),T.add(d)}function S(){T.forEach(v),T.clear()}function v(d){R.removeAllWhere(d,M)}function M(d){return d===null}})(P||(P={}));var ri;(function(t){function e(n){var i=document.body,r=function(o){o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",n),i.removeEventListener("copy",r,!0)};i.addEventListener("copy",r,!0),document.execCommand("copy")}t.copyText=e})(ri||(ri={}));var U;(function(t){function e(o){var s=window.getComputedStyle(o),a=parseFloat(s.borderTopWidth)||0,l=parseFloat(s.borderLeftWidth)||0,h=parseFloat(s.borderRightWidth)||0,y=parseFloat(s.borderBottomWidth)||0,T=parseFloat(s.paddingTop)||0,_=parseFloat(s.paddingLeft)||0,b=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingBottom)||0,m=l+_+b+h,f=a+T+c+y;return{borderTop:a,borderLeft:l,borderRight:h,borderBottom:y,paddingTop:T,paddingLeft:_,paddingRight:b,paddingBottom:c,horizontalSum:m,verticalSum:f}}t.boxSizing=e;function n(o){var s=window.getComputedStyle(o),a=parseFloat(s.minWidth)||0,l=parseFloat(s.minHeight)||0,h=parseFloat(s.maxWidth)||1/0,y=parseFloat(s.maxHeight)||1/0;return h=Math.max(a,h),y=Math.max(l,y),{minWidth:a,minHeight:l,maxWidth:h,maxHeight:y}}t.sizeLimits=n;function i(o,s,a){var l=o.getBoundingClientRect();return s>=l.left&&s<l.right&&a>=l.top&&a<l.bottom}t.hitTest=i;function r(o,s){var a=o.getBoundingClientRect(),l=s.getBoundingClientRect();if(!(l.top<=a.top&&l.bottom>=a.bottom)){if(l.top<a.top&&l.height<=a.height){o.scrollTop-=a.top-l.top;return}if(l.bottom>a.bottom&&l.height>=a.height){o.scrollTop-=a.top-l.top;return}if(l.top<a.top&&l.height>a.height){o.scrollTop-=a.bottom-l.bottom;return}if(l.bottom>a.bottom&&l.height<a.height){o.scrollTop-=a.bottom-l.bottom;return}}}t.scrollIntoViewIfNeeded=r})(U||(U={}));var j;(function(t){t.IS_MAC=!!navigator.platform.match(/Mac/i),t.IS_WIN=!!navigator.platform.match(/Win/i),t.IS_IE=/Trident/.test(navigator.userAgent),t.IS_EDGE=/Edge/.test(navigator.userAgent);function e(n){return t.IS_MAC?n.metaKey:n.ctrlKey}t.accelKey=e})(j||(j={}));var xe;(function(t){function e(r){if(r in be.specificityCache)return be.specificityCache[r];var o=be.calculateSingle(r);return be.specificityCache[r]=o}t.calculateSpecificity=e;function n(r){if(r in be.validityCache)return be.validityCache[r];var o=!0;try{be.testElem.querySelector(r)}catch{o=!1}return be.validityCache[r]=o}t.isValid=n;function i(r,o){return be.protoMatchFunc.call(r,o)}t.matches=i})(xe||(xe={}));var be;(function(t){t.specificityCache=Object.create(null),t.validityCache=Object.create(null),t.testElem=document.createElement("div"),t.protoMatchFunc=function(){var y=Element.prototype;return y.matches||y.matchesSelector||y.mozMatchesSelector||y.msMatchesSelector||y.oMatchesSelector||y.webkitMatchesSelector||function(T){var _=this,b=_.ownerDocument?_.ownerDocument.querySelectorAll(T):[];return Array.prototype.indexOf.call(b,_)!==-1}}();function e(y){y=y.split(",",1)[0];var T=0,_=0,b=0;function c(m){var f=y.match(m);return f===null?!1:(y=y.slice(f[0].length),!0)}for(y=y.replace(h," $1 ");y.length>0;){if(c(n)){T++;continue}if(c(i)){_++;continue}if(c(r)){_++;continue}if(c(s)){b++;continue}if(c(a)){_++;continue}if(c(o)){b++;continue}if(!c(l))return 0}return T=Math.min(T,255),_=Math.min(_,255),b=Math.min(b,255),T<<16|_<<8|b}t.calculateSingle=e;var n=/^#[^\s\+>~#\.\[:]+/,i=/^\.[^\s\+>~#\.\[:]+/,r=/^\[[^\]]+\]/,o=/^[^\s\+>~#\.\[:]+/,s=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,a=/^:[^\s\+>~#\.\[:]+/,l=/^[\s\+>~\*]+/,h=/:not\(([^\)]+)\)/g})(be||(be={}));var ie=function(){function t(e){this._pid=Ne.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return t.prototype.get=function(e){var n,i=Ne.ensureMap(e);return this._pid in i?n=i[this._pid]:n=i[this._pid]=this._createValue(e),n},t.prototype.set=function(e,n){var i,r=Ne.ensureMap(e);this._pid in r?i=r[this._pid]:i=r[this._pid]=this._createValue(e);var o=this._coerceValue(e,n);this._maybeNotify(e,i,r[this._pid]=o)},t.prototype.coerce=function(e){var n,i=Ne.ensureMap(e);this._pid in i?n=i[this._pid]:n=i[this._pid]=this._createValue(e);var r=this._coerceValue(e,n);this._maybeNotify(e,n,i[this._pid]=r)},t.prototype._createValue=function(e){var n=this._create;return n(e)},t.prototype._coerceValue=function(e,n){var i=this._coerce;return i?i(e,n):n},t.prototype._compareValue=function(e,n){var i=this._compare;return i?i(e,n):e===n},t.prototype._maybeNotify=function(e,n,i){var r=this._changed;r&&!this._compareValue(n,i)&&r(e,n,i)},t}();(function(t){function e(n){Ne.ownerData.delete(n)}t.clearData=e})(ie||(ie={}));var Ne;(function(t){t.ownerData=new WeakMap,t.nextPID=function(){var n=0;return function(){var i=Math.random(),r=(""+i).slice(2);return"pid-"+r+"-"+n++}}();function e(n){var i=t.ownerData.get(n);return i||(i=Object.create(null),t.ownerData.set(n,i),i)}t.ensureMap=e})(Ne||(Ne={}));var W=function(){function t(e){this._blockedCount=0,this.sender=e}return t.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},t.prototype.connect=function(e,n){return se.connect(this,e,n)},t.prototype.disconnect=function(e,n){return se.disconnect(this,e,n)},t.prototype.emit=function(e){this._blockedCount||se.emit(this,e)},t}();(function(t){function e(h,y){var T=se.blockedProperty;T.set(h,T.get(h)+1);try{y()}finally{T.set(h,T.get(h)-1)}}t.blockAll=e;function n(h,y){se.disconnectBetween(h,y)}t.disconnectBetween=n;function i(h){se.disconnectSender(h)}t.disconnectSender=i;function r(h){se.disconnectReceiver(h)}t.disconnectReceiver=r;function o(h){se.disconnectAll(h)}t.disconnectAll=o;function s(h){se.disconnectAll(h)}t.clearData=s;function a(){return se.exceptionHandler}t.getExceptionHandler=a;function l(h){var y=se.exceptionHandler;return se.exceptionHandler=h,y}t.setExceptionHandler=l})(W||(W={}));var se;(function(t){t.exceptionHandler=function(x){console.error(x)};function e(x,I,A){A=A||void 0;var E=l.get(x.sender);if(E||(E=[],l.set(x.sender,E)),_(E,x,I,A))return!1;var S=A||I,v=h.get(S);v||(v=[],h.set(S,v));var M={signal:x,slot:I,thisArg:A};return E.push(M),v.push(M),!0}t.connect=e;function n(x,I,A){A=A||void 0;var E=l.get(x.sender);if(!E||E.length===0)return!1;var S=_(E,x,I,A);if(!S)return!1;var v=A||I,M=h.get(v);return S.signal=null,c(E),c(M),!0}t.disconnect=n;function i(x,I){var A=l.get(x);if(!(!A||A.length===0)){var E=h.get(I);!E||E.length===0||(F(E,function(S){!S.signal||S.signal.sender===x&&(S.signal=null)}),c(A),c(E))}}t.disconnectBetween=i;function r(x){var I=l.get(x);!I||I.length===0||(F(I,function(A){if(!!A.signal){var E=A.thisArg||A.slot;A.signal=null,c(h.get(E))}}),c(I))}t.disconnectSender=r;function o(x){var I=h.get(x);!I||I.length===0||(F(I,function(A){if(!!A.signal){var E=A.signal.sender;A.signal=null,c(l.get(E))}}),c(I))}t.disconnectReceiver=o;function s(x){r(x),o(x)}t.disconnectAll=s;function a(x,I){if(!(t.blockedProperty.get(x.sender)>0)){var A=l.get(x.sender);if(!(!A||A.length===0))for(var E=0,S=A.length;E<S;++E){var v=A[E];v.signal===x&&b(v,I)}}}t.emit=a;var l=new WeakMap,h=new WeakMap,y=new Set,T=function(){var x=typeof requestAnimationFrame=="function";return x?requestAnimationFrame:setImmediate}();function _(x,I,A,E){return ft(x,function(S){return S.signal===I&&S.slot===A&&S.thisArg===E})}function b(x,I){var A=x.signal,E=x.slot,S=x.thisArg;try{E.call(S,A.sender,I)}catch(v){t.exceptionHandler(v)}}function c(x){y.size===0&&T(m),y.add(x)}function m(){y.forEach(f),y.clear()}function f(x){R.removeAllWhere(x,w)}function w(x){return x.signal===null}t.blockedProperty=new ie({name:"blocked",create:function(){return 0}})})(se||(se={}));var Ke=class{constructor(e){this.owner=e.owner,e.label!==void 0&&(this._label=e.label),e.mnemonic!==void 0&&(this._mnemonic=e.mnemonic),e.icon!==void 0?typeof e.icon=="string"?(this._icon=null,this._iconClass=e.icon):this._icon=e.icon:this._icon=null,e.iconClass!==void 0&&(this._iconClass=e.iconClass),e.iconLabel!==void 0&&(this._iconLabel=e.iconLabel),e.iconRenderer!==void 0&&(this._icon=e.iconRenderer),e.caption!==void 0&&(this._caption=e.caption),e.className!==void 0&&(this._className=e.className),e.closable!==void 0&&(this._closable=e.closable),this._dataset=e.dataset||{}}get changed(){return this._changed}owner;get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))}get icon(){return this._icon===null?this.iconClass:this._icon}set icon(e){if(typeof e=="string")this._icon=null,this.iconClass=e;else{if(this._icon===e)return;this._icon=e,this._changed.emit(void 0)}}get iconClass(){return this._iconClass}set iconClass(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))}get iconRenderer(){return this._icon||void 0}set iconRenderer(e){this.icon=e}get caption(){return this._caption}set caption(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))}get className(){return this._className}set className(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))}get closable(){return this._closable}set closable(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,W.clearData(this))}_label="";_caption="";_mnemonic=-1;_icon;_iconClass="";_iconLabel="";_className="";_closable=!1;_dataset;_changed=new W(this);_isDisposed=!1};var z=class{constructor(e={}){this.node=on.createNode(e),this.addClass("lm-Widget"),this.addClass("p-Widget")}dispose(){this.isDisposed||(this.setFlag(z.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&z.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),W.clearData(this),P.clearData(this),ie.clearData(this))}get disposed(){return this._disposed}node;get isDisposed(){return this.testFlag(z.Flag.IsDisposed)}get isAttached(){return this.testFlag(z.Flag.IsAttached)}get isHidden(){return this.testFlag(z.Flag.IsHidden)}get isVisible(){return this.testFlag(z.Flag.IsVisible)}get title(){return on.titleProperty.get(this)}get id(){return this.node.id}set id(e){this.node.id=e}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this.isHidden&&this._toggleHidden(!1),e==z.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=e,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let n=new z.ChildMessage("child-removed",this);P.sendMessage(this._parent,n)}if(this._parent=e,this._parent&&!this._parent.isDisposed){let n=new z.ChildMessage("child-added",this);P.sendMessage(this._parent,n)}this.isDisposed||P.sendMessage(this,z.Msg.ParentChanged)}}get layout(){return this._layout}set layout(e){if(this._layout!==e){if(this.testFlag(z.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}}children(){return this._layout?this._layout.iter():ce()}contains(e){for(let n=e;n;n=n._parent)if(n===this)return!0;return!1}hasClass(e){return this.node.classList.contains(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e,n){return n===!0?(this.node.classList.add(e),!0):n===!1?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)}update(){P.postMessage(this,z.Msg.UpdateRequest)}fit(){P.postMessage(this,z.Msg.FitRequest)}activate(){P.postMessage(this,z.Msg.ActivateRequest)}close(){P.sendMessage(this,z.Msg.CloseRequest)}show(){if(!!this.testFlag(z.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.BeforeShow),this.clearFlag(z.Flag.IsHidden),this.node.removeAttribute("aria-hidden"),this._toggleHidden(!1),this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.AfterShow),this.parent)){let e=new z.ChildMessage("child-shown",this);P.sendMessage(this.parent,e)}}hide(){if(!this.testFlag(z.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.BeforeHide),this.setFlag(z.Flag.IsHidden),this.node.setAttribute("aria-hidden","true"),this._toggleHidden(!0),this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.AfterHide),this.parent)){let e=new z.ChildMessage("child-hidden",this);P.sendMessage(this.parent,e)}}setHidden(e){e?this.hide():this.show()}testFlag(e){return(this._flags&e)!==0}setFlag(e){this._flags|=e}clearFlag(e){this._flags&=~e}processMessage(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(z.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(z.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(z.Flag.IsVisible),this.setFlag(z.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(z.Flag.IsVisible),this.clearFlag(z.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e);break}}notifyLayout(e){this._layout&&this._layout.processParentMessage(e)}onCloseRequest(e){this.parent?this.parent=null:this.isAttached&&z.detach(this)}onResize(e){}onUpdateRequest(e){}onFitRequest(e){}onActivateRequest(e){}onBeforeShow(e){}onAfterShow(e){}onBeforeHide(e){}onAfterHide(e){}onBeforeAttach(e){}onAfterAttach(e){}onBeforeDetach(e){}onAfterDetach(e){}onChildAdded(e){}onChildRemoved(e){}_toggleHidden(e){if(e)switch(this._hiddenMode){case z.HiddenMode.Display:this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden");break;case z.HiddenMode.Scale:this.node.style.transform="scale(0)";break;case z.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1";break}else switch(this._hiddenMode){case z.HiddenMode.Display:this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden");break;case z.HiddenMode.Scale:this.node.style.transform="";break;case z.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex="";break}}_flags=0;_layout=null;_parent=null;_disposed=new W(this);_hiddenMode=z.HiddenMode.Display};(a=>{let t;(T=>(T[T.Display=0]="Display",T[T.Scale=1]="Scale",T[T.ContentVisibility=2]="ContentVisibility"))(t=a.HiddenMode||={});let e;(b=>(b[b.IsDisposed=1]="IsDisposed",b[b.IsAttached=2]="IsAttached",b[b.IsHidden=4]="IsHidden",b[b.IsVisible=8]="IsVisible",b[b.DisallowLayout=16]="DisallowLayout"))(e=a.Flag||={});let n;(E=>(E.BeforeShow=new he("before-show"),E.AfterShow=new he("after-show"),E.BeforeHide=new he("before-hide"),E.AfterHide=new he("after-hide"),E.BeforeAttach=new he("before-attach"),E.AfterAttach=new he("after-attach"),E.BeforeDetach=new he("before-detach"),E.AfterDetach=new he("after-detach"),E.ParentChanged=new he("parent-changed"),E.UpdateRequest=new qe("update-request"),E.FitRequest=new qe("fit-request"),E.ActivateRequest=new qe("activate-request"),E.CloseRequest=new qe("close-request")))(n=a.Msg||={});class i extends he{constructor(h,y){super(h),this.child=y}child}a.ChildMessage=i;class r extends he{constructor(h,y){super("resize"),this.width=h,this.height=y}width;height}a.ResizeMessage=r,(h=>h.UnknownSize=new h(-1,-1))(r=a.ResizeMessage||={});function o(l,h,y=null){if(l.parent)throw new Error("Cannot attach a child widget.");if(l.isAttached||l.node.isConnected)throw new Error("Widget is already attached.");if(!h.isConnected)throw new Error("Host is not attached.");P.sendMessage(l,a.Msg.BeforeAttach),h.insertBefore(l.node,y),P.sendMessage(l,a.Msg.AfterAttach)}a.attach=o;function s(l){if(l.parent)throw new Error("Cannot detach a child widget.");if(!l.isAttached||!l.node.isConnected)throw new Error("Widget is not attached.");P.sendMessage(l,a.Msg.BeforeDetach),l.node.parentNode.removeChild(l.node),P.sendMessage(l,a.Msg.AfterDetach)}a.detach=s})(z||={});var on;(n=>{n.titleProperty=new ie({name:"title",create:i=>new Ke({owner:i})});function e(i){return i.node||document.createElement(i.tag||"div")}n.createNode=e})(on||={});var Ie=class{constructor(e={}){this._fitPolicy=e.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,W.clearData(this),ie.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){let n=this._parent.node.style;n.minWidth="",n.minHeight="",n.maxWidth="",n.maxHeight="",this._parent.fit()}}processParentMessage(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e);break}}init(){F(this,e=>{e.parent=this.parent})}onResize(e){F(this,n=>{P.sendMessage(n,z.ResizeMessage.UnknownSize)})}onUpdateRequest(e){F(this,n=>{P.sendMessage(n,z.ResizeMessage.UnknownSize)})}onBeforeAttach(e){F(this,n=>{P.sendMessage(n,e)})}onAfterAttach(e){F(this,n=>{P.sendMessage(n,e)})}onBeforeDetach(e){F(this,n=>{P.sendMessage(n,e)})}onAfterDetach(e){F(this,n=>{P.sendMessage(n,e)})}onBeforeShow(e){F(this,n=>{n.isHidden||P.sendMessage(n,e)})}onAfterShow(e){F(this,n=>{n.isHidden||P.sendMessage(n,e)})}onBeforeHide(e){F(this,n=>{n.isHidden||P.sendMessage(n,e)})}onAfterHide(e){F(this,n=>{n.isHidden||P.sendMessage(n,e)})}onChildRemoved(e){this.removeWidget(e.child)}onFitRequest(e){}onChildShown(e){}onChildHidden(e){}_disposed=!1;_fitPolicy;_parent=null};(r=>{function t(o){return gt.horizontalAlignmentProperty.get(o)}r.getHorizontalAlignment=t;function e(o,s){gt.horizontalAlignmentProperty.set(o,s)}r.setHorizontalAlignment=e;function n(o){return gt.verticalAlignmentProperty.get(o)}r.getVerticalAlignment=n;function i(o,s){gt.verticalAlignmentProperty.set(o,s)}r.setVerticalAlignment=i})(Ie||={});var Xe=class{constructor(e){this.widget=e,this.widget.node.style.position="absolute"}dispose(){if(this._disposed)return;this._disposed=!0;let e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height=""}widget;get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let e=U.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight}update(e,n,i,r){let o=Math.max(this._minWidth,Math.min(i,this._maxWidth)),s=Math.max(this._minHeight,Math.min(r,this._maxHeight));if(o<i)switch(Ie.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(i-o)/2;break;case"right":e+=i-o;break;default:throw"unreachable"}if(s<r)switch(Ie.getVerticalAlignment(this.widget)){case"top":break;case"center":n+=(r-s)/2;break;case"bottom":n+=r-s;break;default:throw"unreachable"}let a=!1,l=this.widget.node.style;if(this._top!==n&&(this._top=n,l.top=`${n}px`),this._left!==e&&(this._left=e,l.left=`${e}px`),this._width!==o&&(a=!0,this._width=o,l.width=`${o}px`),this._height!==s&&(a=!0,this._height=s,l.height=`${s}px`),a){let h=new z.ResizeMessage(o,s);P.sendMessage(this.widget,h)}}_top=NaN;_left=NaN;_width=NaN;_height=NaN;_minWidth=0;_minHeight=0;_maxWidth=1/0;_maxHeight=1/0;_disposed=!1},gt;(i=>{i.horizontalAlignmentProperty=new ie({name:"horizontalAlignment",create:()=>"center",changed:n}),i.verticalAlignmentProperty=new ie({name:"verticalAlignment",create:()=>"top",changed:n});function n(r){r.parent&&r.parent.layout&&r.parent.update()}})(gt||={});var Je=class extends Ie{dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}iter(){return ge(this._widgets)}addWidget(e){this.insertWidget(this._widgets.length,e)}insertWidget(e,n){n.parent=this.parent;let i=this._widgets.indexOf(n),r=Math.max(0,Math.min(e,this._widgets.length));if(i===-1){R.insert(this._widgets,r,n),this.parent&&this.attachWidget(r,n);return}r===this._widgets.length&&r--,i!==r&&(R.move(this._widgets,i,r),this.parent&&this.moveWidget(i,r,n))}removeWidget(e){this.removeWidgetAt(this._widgets.indexOf(e))}removeWidgetAt(e){let n=R.removeAt(this._widgets,e);n&&this.parent&&this.detachWidget(e,n)}init(){super.init(),F(this,(e,n)=>{this.attachWidget(n,e)})}attachWidget(e,n){let i=this.parent.node.children[e];this.parent.isAttached&&P.sendMessage(n,z.Msg.BeforeAttach),this.parent.node.insertBefore(n.node,i),this.parent.isAttached&&P.sendMessage(n,z.Msg.AfterAttach)}moveWidget(e,n,i){this.parent.isAttached&&P.sendMessage(i,z.Msg.BeforeDetach),this.parent.node.removeChild(i.node),this.parent.isAttached&&P.sendMessage(i,z.Msg.AfterDetach);let r=this.parent.node.children[n];this.parent.isAttached&&P.sendMessage(i,z.Msg.BeforeAttach),this.parent.node.insertBefore(i.node,r),this.parent.isAttached&&P.sendMessage(i,z.Msg.AfterAttach)}detachWidget(e,n){this.parent.isAttached&&P.sendMessage(n,z.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&P.sendMessage(n,z.Msg.AfterDetach)}_widgets=[]};var Ze=class extends z{constructor(e={}){super(),this.addClass("lm-Panel"),this.addClass("p-Panel"),this.layout=oi.createLayout(e)}get widgets(){return this.layout.widgets}addWidget(e){this.layout.addWidget(e)}insertWidget(e,n){this.layout.insertWidget(e,n)}},oi;(e=>{function t(n){return n.layout||new Je}e.createLayout=t})(oi||={});var an=function(t,e){return an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},an(t,e)};function si(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");an(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Le=function(){function t(e){this._fn=e}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(!!this._fn){var e=this._fn;this._fn=null,e()}},t}(),Hy=function(t){si(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=new W(n),n}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),W.clearData(this))},e}(Le),sn=function(){function t(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(e){e.dispose()}),this._items.clear())},t.prototype.contains=function(e){return this._items.has(e)},t.prototype.add=function(e){this._items.add(e)},t.prototype.remove=function(e){this._items.delete(e)},t.prototype.clear=function(){this._items.clear()},t}();(function(t){function e(n){var i=new t;return F(n,function(r){i.add(r)}),i}t.from=e})(sn||(sn={}));var ai=function(t){si(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=new W(n),n}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),W.clearData(this))},e}(sn);(function(t){function e(n){var i=new t;return F(n,function(r){i.add(r)}),i}t.from=e})(ai||(ai={}));var Ce=function(){function t(e){var n=this;this._onScrollFrame=function(){if(!!n._scrollTarget){var i=n._scrollTarget,r=i.element,o=i.edge,s=i.distance,a=ee.SCROLL_EDGE_SIZE-s,l=Math.pow(a/ee.SCROLL_EDGE_SIZE,2),h=Math.max(1,Math.round(l*ee.SCROLL_EDGE_SIZE));switch(o){case"top":r.scrollTop-=h;break;case"left":r.scrollLeft-=h;break;case"right":r.scrollLeft+=h;break;case"bottom":r.scrollTop+=h;break}requestAnimationFrame(n._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}return t.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var e=ee.createMouseEvent("pointerup",-1,-1);ee.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.start=function(e,n){var i=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,n),this._promise=new Promise(function(o,s){i._resolve=o});var r=ee.createMouseEvent("pointermove",e,n);return document.dispatchEvent(r),this._promise},t.prototype.handleEvent=function(e){switch(e.type){case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation();break}},t.prototype.moveDragImage=function(e,n){if(!!this.dragImage){var i=this.dragImage.style;i.top=n+"px",i.left=e+"px"}},t.prototype._evtMouseMove=function(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)},t.prototype._evtMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),e.button===0){if(this._updateCurrentTarget(e),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){ee.dispatchDragLeave(this,this._currentTarget,null,e),this._finalize("none");return}var n=ee.dispatchDrop(this,this._currentTarget,e);this._finalize(n)}},t.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this.dispose()},t.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},t.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},t.prototype._updateDragScroll=function(e){var n=ee.findScrollTarget(e);!this._scrollTarget&&!n||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=n)},t.prototype._updateCurrentTarget=function(e){var n=this._currentTarget,i=this._currentTarget,r=this._currentElement,o=this.document.elementFromPoint(e.clientX,e.clientY);this._currentElement=o,o!==r&&o!==i&&ee.dispatchDragExit(this,i,o,e),o!==r&&o!==i&&(i=ee.dispatchDragEnter(this,o,i,e)),i!==n&&(this._currentTarget=i,ee.dispatchDragLeave(this,n,i,e));var s=ee.dispatchDragOver(this,i,e);this._setDropAction(s)},t.prototype._attachDragImage=function(e,n){if(!!this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var i=this.dragImage.style;i.pointerEvents="none",i.position="fixed",i.top=n+"px",i.left=e+"px";var r=this.document instanceof Document?this.document.body:this.document.firstElementChild;r.appendChild(this.dragImage)}},t.prototype._detachDragImage=function(){if(!!this.dragImage){var e=this.dragImage.parentNode;!e||e.removeChild(this.dragImage)}},t.prototype._setDropAction=function(e){if(e=ee.validateAction(e,this.supportedActions),!(this._override&&this._dropAction===e))switch(e){case"none":this._dropAction=e,this._override=t.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=e,this._override=t.overrideCursor("copy",this.document);break;case"link":this._dropAction=e,this._override=t.overrideCursor("alias",this.document);break;case"move":this._dropAction=e,this._override=t.overrideCursor("move",this.document);break}},t.prototype._finalize=function(e){var n=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,n&&n(e)},t}();(function(t){function e(i,r){r===void 0&&(r=document);var o=++n,s=r instanceof Document?r.body:r.firstElementChild;return s.style.cursor=i,s.classList.add("lm-mod-override-cursor"),s.classList.add("p-mod-override-cursor"),new Le(function(){o===n&&(s.style.cursor="",s.classList.remove("lm-mod-override-cursor"),s.classList.remove("p-mod-override-cursor"))})}t.overrideCursor=e;var n=0})(Ce||(Ce={}));var ee;(function(t){t.SCROLL_EDGE_SIZE=20;function e(_,b){return h[_]&y[b]?_:"none"}t.validateAction=e;function n(_,b,c){var m=document.createEvent("MouseEvent");return m.initMouseEvent(_,!0,!0,window,0,0,0,b,c,!1,!1,!1,!1,0,null),m}t.createMouseEvent=n;function i(_){for(var b=_.clientX,c=_.clientY,m=document.elementFromPoint(b,c);m;m=m.parentElement){var f=m.hasAttribute("data-lm-dragscroll");if(f=f||m.hasAttribute("data-p-dragscroll"),!!f){var w=0,x=0;m===document.body&&(w=window.pageXOffset,x=window.pageYOffset);var I=m.getBoundingClientRect(),A=I.top+x,E=I.left+w,S=E+I.width,v=A+I.height;if(!(b<E||b>=S||c<A||c>=v)){var M=b-E+1,d=c-A+1,u=S-b,g=v-c,k=Math.min(M,d,u,g);if(!(k>t.SCROLL_EDGE_SIZE)){var p=void 0;switch(k){case g:p="bottom";break;case d:p="top";break;case u:p="right";break;case M:p="left";break;default:throw"unreachable"}var L=m.scrollWidth-m.clientWidth,B=m.scrollHeight-m.clientHeight,O=void 0;switch(p){case"top":O=B>0&&m.scrollTop>0;break;case"left":O=L>0&&m.scrollLeft>0;break;case"right":O=L>0&&m.scrollLeft<L;break;case"bottom":O=B>0&&m.scrollTop<B;break;default:throw"unreachable"}if(!!O)return{element:m,edge:p,distance:k}}}}}return null}t.findScrollTarget=i;function r(_,b,c,m){if(!b)return null;var f=T("lm-dragenter",_,m,c),w=!b.dispatchEvent(f);if(w||(f=T("p-dragenter",_,m,c),w=!b.dispatchEvent(f),w))return b;var x=_.document instanceof Document?_.document.body:_.document.firstElementChild;return b===x?c:(f=T("lm-dragenter",_,m,c),x.dispatchEvent(f),f=T("p-dragenter",_,m,c),x.dispatchEvent(f),x)}t.dispatchDragEnter=r;function o(_,b,c,m){if(!!b){var f=T("lm-dragexit",_,m,c);b.dispatchEvent(f),f=T("p-dragexit",_,m,c),b.dispatchEvent(f)}}t.dispatchDragExit=o;function s(_,b,c,m){if(!!b){var f=T("lm-dragleave",_,m,c);b.dispatchEvent(f),f=T("p-dragleave",_,m,c),b.dispatchEvent(f)}}t.dispatchDragLeave=s;function a(_,b,c){if(!b)return"none";var m=T("lm-dragover",_,c,null),f=!b.dispatchEvent(m);return f||(m=T("p-dragover",_,c,null),f=!b.dispatchEvent(m),f)?m.dropAction:"none"}t.dispatchDragOver=a;function l(_,b,c){if(!b)return"none";var m=T("lm-drop",_,c,null),f=!b.dispatchEvent(m);return f||(m=T("p-drop",_,c,null),f=!b.dispatchEvent(m),f)?m.dropAction:"none"}t.dispatchDrop=l;var h={none:0,copy:1,link:2,move:4},y={none:h.none,copy:h.copy,link:h.link,move:h.move,"copy-link":h.copy|h.link,"copy-move":h.copy|h.move,"link-move":h.link|h.move,all:h.copy|h.link|h.move};function T(_,b,c,m){var f=document.createEvent("MouseEvent");return f.initMouseEvent(_,!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,m),f.dropAction="none",f.mimeData=b.mimeData,f.proposedAction=b.proposedAction,f.supportedActions=b.supportedActions,f.source=b.source,f}})(ee||(ee={}));var Se=class{sizeHint=0;minSize=0;maxSize=1/0;stretch=1;size=0;done=!1},De;(r=>{function t(o,s){let a=o.length;if(a===0)return s;let l=0,h=0,y=0,T=0,_=0;for(let m=0;m<a;++m){let f=o[m],w=f.minSize,x=f.maxSize,I=f.sizeHint;f.done=!1,f.size=Math.max(w,Math.min(I,x)),y+=f.size,l+=w,h+=x,f.stretch>0&&(T+=f.stretch,_++)}if(s===y)return 0;if(s<=l){for(let m=0;m<a;++m){let f=o[m];f.size=f.minSize}return s-l}if(s>=h){for(let m=0;m<a;++m){let f=o[m];f.size=f.maxSize}return s-h}let b=.01,c=a;if(s<y){let m=y-s;for(;_>0&&m>b;){let f=m,w=T;for(let x=0;x<a;++x){let I=o[x];if(I.done||I.stretch===0)continue;let A=I.stretch*f/w;I.size-A<=I.minSize?(m-=I.size-I.minSize,T-=I.stretch,I.size=I.minSize,I.done=!0,c--,_--):(m-=A,I.size-=A)}}for(;c>0&&m>b;){let f=m/c;for(let w=0;w<a;++w){let x=o[w];x.done||(x.size-f<=x.minSize?(m-=x.size-x.minSize,x.size=x.minSize,x.done=!0,c--):(m-=f,x.size-=f))}}}else{let m=s-y;for(;_>0&&m>b;){let f=m,w=T;for(let x=0;x<a;++x){let I=o[x];if(I.done||I.stretch===0)continue;let A=I.stretch*f/w;I.size+A>=I.maxSize?(m-=I.maxSize-I.size,T-=I.stretch,I.size=I.maxSize,I.done=!0,c--,_--):(m-=A,I.size+=A)}}for(;c>0&&m>b;){let f=m/c;for(let w=0;w<a;++w){let x=o[w];x.done||(x.size+f>=x.maxSize?(m-=x.maxSize-x.size,x.size=x.maxSize,x.done=!0,c--):(m-=f,x.size+=f))}}}return 0}r.calc=t;function e(o,s,a){o.length===0||a===0||(a>0?n(o,s,a):i(o,s,-a))}r.adjust=e;function n(o,s,a){let l=0;for(let _=0;_<=s;++_){let b=o[_];l+=b.maxSize-b.size}let h=0;for(let _=s+1,b=o.length;_<b;++_){let c=o[_];h+=c.size-c.minSize}a=Math.min(a,l,h);let y=a;for(let _=s;_>=0&&y>0;--_){let b=o[_],c=b.maxSize-b.size;c>=y?(b.sizeHint=b.size+y,y=0):(b.sizeHint=b.size+c,y-=c)}let T=a;for(let _=s+1,b=o.length;_<b&&T>0;++_){let c=o[_],m=c.size-c.minSize;m>=T?(c.sizeHint=c.size-T,T=0):(c.sizeHint=c.size-m,T-=m)}}function i(o,s,a){let l=0;for(let _=s+1,b=o.length;_<b;++_){let c=o[_];l+=c.maxSize-c.size}let h=0;for(let _=0;_<=s;++_){let b=o[_];h+=b.size-b.minSize}a=Math.min(a,l,h);let y=a;for(let _=s+1,b=o.length;_<b&&y>0;++_){let c=o[_],m=c.maxSize-c.size;m>=y?(c.sizeHint=c.size+y,y=0):(c.sizeHint=c.size+m,y-=m)}let T=a;for(let _=s;_>=0&&T>0;--_){let b=o[_],c=b.size-b.minSize;c>=T?(b.sizeHint=b.size-T,T=0):(b.sizeHint=b.size-c,T-=c)}}})(De||={});var bt;(e=>{function t(n){return Math.max(0,Math.floor(n))}e.clampDimension=t})(bt||={});var ln=bt;var ve=class extends Je{constructor(e){super(),this.renderer=e.renderer,e.orientation!==void 0&&(this._orientation=e.orientation),e.alignment!==void 0&&(this._alignment=e.alignment),e.spacing!==void 0&&(this._spacing=bt.clampDimension(e.spacing))}dispose(){F(this._items,e=>{e.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}renderer;get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=bt.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(e=>e.size)}relativeSizes(){return Be.normalize(this._sizers.map(e=>e.size))}setRelativeSizes(e,n=!0){let i=this._sizers.length,r=e.slice(0,i);for(;r.length<i;)r.push(0);let o=Be.normalize(r);for(let s=0;s<i;++s){let a=this._sizers[s];a.sizeHint=o[s],a.size=o[s]}this._hasNormedSizes=!0,n&&this.parent&&this.parent.update()}moveHandle(e,n){let i=this._handles[e];if(!i||i.classList.contains("lm-mod-hidden"))return;let r;if(this._orientation==="horizontal"?r=n-i.offsetLeft:r=n-i.offsetTop,r!==0){for(let o of this._sizers)o.size>0&&(o.sizeHint=o.size);De.adjust(this._sizers,e,r),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,n){let i=new Xe(n),r=Be.createHandle(this.renderer),o=Be.averageSize(this._sizers),s=Be.createSizer(o);R.insert(this._items,e,i),R.insert(this._sizers,e,s),R.insert(this._handles,e,r),this.parent.isAttached&&P.sendMessage(n,z.Msg.BeforeAttach),this.parent.node.appendChild(n.node),this.parent.node.appendChild(r),this.parent.isAttached&&P.sendMessage(n,z.Msg.AfterAttach),this.parent.fit()}moveWidget(e,n,i){R.move(this._items,e,n),R.move(this._sizers,e,n),R.move(this._handles,e,n),this.parent.fit()}detachWidget(e,n){let i=R.removeAt(this._items,e),r=R.removeAt(this._handles,e);R.removeAt(this._sizers,e),this.parent.isAttached&&P.sendMessage(n,z.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.node.removeChild(r),this.parent.isAttached&&P.sendMessage(n,z.Msg.AfterDetach),i.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}updateItemPosition(e,n,i,r,o,s,a){let l=this._items[e];if(l.isHidden)return;let h=this._handles[e].style;n?(i+=this.widgetOffset,l.update(i,r,a,o),i+=a,h.top=`${r}px`,h.left=`${i}px`,h.width=`${this._spacing}px`,h.height=`${o}px`):(r+=this.widgetOffset,l.update(i,r,s,a),r+=a,h.top=`${r}px`,h.left=`${i}px`,h.width=`${s}px`,h.height=`${this._spacing}px`)}_fit(){let e=0,n=-1;for(let l=0,h=this._items.length;l<h;++l)this._items[l].isHidden?(this._handles[l].classList.add("lm-mod-hidden"),this._handles[l].classList.add("p-mod-hidden")):(this._handles[l].classList.remove("lm-mod-hidden"),this._handles[l].classList.remove("p-mod-hidden"),n=l,e++);n!==-1&&(this._handles[n].classList.add("lm-mod-hidden"),this._handles[n].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;let i=this._orientation==="horizontal",r=i?this._fixed:0,o=i?0:this._fixed;for(let l=0,h=this._items.length;l<h;++l){let y=this._items[l],T=this._sizers[l];if(T.size>0&&(T.sizeHint=T.size),y.isHidden){T.minSize=0,T.maxSize=0;continue}y.fit(),T.stretch=ve.getStretch(y.widget),i?(T.minSize=y.minWidth,T.maxSize=y.maxWidth,r+=y.minWidth,o=Math.max(o,y.minHeight)):(T.minSize=y.minHeight,T.maxSize=y.maxHeight,o+=y.minHeight,r=Math.max(r,y.minWidth))}let s=this._box=U.boxSizing(this.parent.node);r+=s.horizontalSum,o+=s.verticalSum;let a=this.parent.node.style;a.minWidth=`${r}px`,a.minHeight=`${o}px`,this._dirty=!0,this.parent.parent&&P.sendMessage(this.parent.parent,z.Msg.FitRequest),this._dirty&&P.sendMessage(this.parent,z.Msg.UpdateRequest)}_update(e,n){this._dirty=!1;let i=0;for(let T=0,_=this._items.length;T<_;++T)i+=+!this._items[T].isHidden;if(i===0&&this.widgetOffset===0)return;e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=U.boxSizing(this.parent.node));let r=this._box.paddingTop,o=this._box.paddingLeft,s=e-this._box.horizontalSum,a=n-this._box.verticalSum,l=0,h=0,y=this._orientation==="horizontal";if(i>0){let T;if(y?T=Math.max(0,s-this._fixed):T=Math.max(0,a-this._fixed),this._hasNormedSizes){for(let b of this._sizers)b.sizeHint*=T;this._hasNormedSizes=!1}let _=De.calc(this._sizers,T);if(_>0)switch(this._alignment){case"start":break;case"center":l=0,h=_/2;break;case"end":l=0,h=_;break;case"justify":l=_/i,h=0;break;default:throw"unreachable"}}for(let T=0,_=this._items.length;T<_;++T){let c=this._items[T].isHidden?0:this._sizers[T].size+l;this.updateItemPosition(T,y,y?o+h:o,y?r:r+h,a,s,c);let m=this.widgetOffset+(this._handles[T].classList.contains("lm-mod-hidden")?0:this._spacing);y?o+=c+m:r+=c+m}}widgetOffset=0;_fixed=0;_spacing=4;_dirty=!1;_hasNormedSizes=!1;_sizers=[];_items=[];_handles=[];_box=null;_alignment="start";_orientation="horizontal"};(n=>{function t(i){return Be.stretchProperty.get(i)}n.getStretch=t;function e(i,r){Be.stretchProperty.set(i,r)}n.setStretch=e})(ve||={});var Be;(s=>{s.stretchProperty=new ie({name:"stretch",create:()=>0,coerce:(a,l)=>Math.max(0,Math.floor(l)),changed:o});function e(a){let l=new Se;return l.sizeHint=Math.floor(a),l}s.createSizer=e;function n(a){let l=a.createHandle();return l.style.position="absolute",l}s.createHandle=n;function i(a){return a.reduce((l,h)=>l+h.size,0)/a.length||0}s.averageSize=i;function r(a){let l=a.length;if(l===0)return[];let h=a.reduce((y,T)=>y+Math.abs(T),0);return h===0?a.map(y=>1/l):a.map(y=>y/h)}s.normalize=r;function o(a){a.parent&&a.parent.layout instanceof ve&&a.parent.fit()}})(Be||={});var ze=class extends Ze{constructor(e={}){super({layout:li.createLayout(e)}),this.addClass("lm-SplitPanel"),this.addClass("p-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(e){this.layout.orientation=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(e,n=!0){this.layout.setRelativeSizes(e,n)}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){e.child.addClass("lm-SplitPanel-child"),e.child.addClass("p-SplitPanel-child"),this._releaseMouse()}onChildRemoved(e){e.child.removeClass("lm-SplitPanel-child"),e.child.removeClass("p-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),e.keyCode===27&&this._releaseMouse()}_evtMouseDown(e){if(e.button!==0)return;let n=this.layout,i=R.findFirstIndex(n.handles,h=>h.contains(e.target));if(i===-1)return;e.preventDefault(),e.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let r,o=n.handles[i],s=o.getBoundingClientRect();n.orientation==="horizontal"?r=e.clientX-s.left:r=e.clientY-s.top;let a=window.getComputedStyle(o),l=Ce.overrideCursor(a.cursor);this._pressData={index:i,delta:r,override:l}}_evtMouseMove(e){e.preventDefault(),e.stopPropagation();let n,i=this.layout,r=this.node.getBoundingClientRect();i.orientation==="horizontal"?n=e.clientX-r.left-this._pressData.delta:n=e.clientY-r.top-this._pressData.delta,i.moveHandle(this._pressData.index,n)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}_handleMoved=new W(this);_pressData=null};(r=>{class t{createHandle(){let s=document.createElement("div");return s.className="lm-SplitPanel-handle",s.classList.add("p-SplitPanel-handle"),s}}r.Renderer=t,r.defaultRenderer=new t;function n(o){return ve.getStretch(o)}r.getStretch=n;function i(o,s){ve.setStretch(o,s)}r.setStretch=i})(ze||={});var li;(e=>{function t(n){return n.layout||new ve({renderer:n.renderer||ze.defaultRenderer,orientation:n.orientation,alignment:n.alignment,spacing:n.spacing})}e.createLayout=t})(li||={});var ui=$e(vt());var dn=function(t,e){return dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},dn(t,e)};function wl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dn(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ft=function(){function t(e){this.type="text",this.content=e}return t}(),Wt=function(){function t(e,n,i,r){this.type="element",this.tag=e,this.attrs=n,this.children=i,this.renderer=r}return t}(),d_=function(t){wl(e,t);function e(n,i,r){return t.call(this,n,i,[],r||void 0)||this}return e}(Wt);function Z(t){for(var e={},n,i=[],r=1,o=arguments.length;r<o;++r){var s=arguments[r];typeof s=="string"?i.push(new Ft(s)):s instanceof Ft||s instanceof Wt?i.push(s):s instanceof Array?a(i,s):(r===1||r===2)&&s&&typeof s=="object"&&("render"in s?n=s:e=s)}return new Wt(t,e,i,n);function a(l,h){for(var y=0,T=h;y<T.length;y++){var _=T[y];typeof _=="string"?l.push(new Ft(_)):(_ instanceof Ft||_ instanceof Wt)&&l.push(_)}}}(function(t){t.a=t.bind(void 0,"a"),t.abbr=t.bind(void 0,"abbr"),t.address=t.bind(void 0,"address"),t.area=t.bind(void 0,"area"),t.article=t.bind(void 0,"article"),t.aside=t.bind(void 0,"aside"),t.audio=t.bind(void 0,"audio"),t.b=t.bind(void 0,"b"),t.bdi=t.bind(void 0,"bdi"),t.bdo=t.bind(void 0,"bdo"),t.blockquote=t.bind(void 0,"blockquote"),t.br=t.bind(void 0,"br"),t.button=t.bind(void 0,"button"),t.canvas=t.bind(void 0,"canvas"),t.caption=t.bind(void 0,"caption"),t.cite=t.bind(void 0,"cite"),t.code=t.bind(void 0,"code"),t.col=t.bind(void 0,"col"),t.colgroup=t.bind(void 0,"colgroup"),t.data=t.bind(void 0,"data"),t.datalist=t.bind(void 0,"datalist"),t.dd=t.bind(void 0,"dd"),t.del=t.bind(void 0,"del"),t.dfn=t.bind(void 0,"dfn"),t.div=t.bind(void 0,"div"),t.dl=t.bind(void 0,"dl"),t.dt=t.bind(void 0,"dt"),t.em=t.bind(void 0,"em"),t.embed=t.bind(void 0,"embed"),t.fieldset=t.bind(void 0,"fieldset"),t.figcaption=t.bind(void 0,"figcaption"),t.figure=t.bind(void 0,"figure"),t.footer=t.bind(void 0,"footer"),t.form=t.bind(void 0,"form"),t.h1=t.bind(void 0,"h1"),t.h2=t.bind(void 0,"h2"),t.h3=t.bind(void 0,"h3"),t.h4=t.bind(void 0,"h4"),t.h5=t.bind(void 0,"h5"),t.h6=t.bind(void 0,"h6"),t.header=t.bind(void 0,"header"),t.hr=t.bind(void 0,"hr"),t.i=t.bind(void 0,"i"),t.iframe=t.bind(void 0,"iframe"),t.img=t.bind(void 0,"img"),t.input=t.bind(void 0,"input"),t.ins=t.bind(void 0,"ins"),t.kbd=t.bind(void 0,"kbd"),t.label=t.bind(void 0,"label"),t.legend=t.bind(void 0,"legend"),t.li=t.bind(void 0,"li"),t.main=t.bind(void 0,"main"),t.map=t.bind(void 0,"map"),t.mark=t.bind(void 0,"mark"),t.meter=t.bind(void 0,"meter"),t.nav=t.bind(void 0,"nav"),t.noscript=t.bind(void 0,"noscript"),t.object=t.bind(void 0,"object"),t.ol=t.bind(void 0,"ol"),t.optgroup=t.bind(void 0,"optgroup"),t.option=t.bind(void 0,"option"),t.output=t.bind(void 0,"output"),t.p=t.bind(void 0,"p"),t.param=t.bind(void 0,"param"),t.pre=t.bind(void 0,"pre"),t.progress=t.bind(void 0,"progress"),t.q=t.bind(void 0,"q"),t.rp=t.bind(void 0,"rp"),t.rt=t.bind(void 0,"rt"),t.ruby=t.bind(void 0,"ruby"),t.s=t.bind(void 0,"s"),t.samp=t.bind(void 0,"samp"),t.section=t.bind(void 0,"section"),t.select=t.bind(void 0,"select"),t.small=t.bind(void 0,"small"),t.source=t.bind(void 0,"source"),t.span=t.bind(void 0,"span"),t.strong=t.bind(void 0,"strong"),t.sub=t.bind(void 0,"sub"),t.summary=t.bind(void 0,"summary"),t.sup=t.bind(void 0,"sup"),t.table=t.bind(void 0,"table"),t.tbody=t.bind(void 0,"tbody"),t.td=t.bind(void 0,"td"),t.textarea=t.bind(void 0,"textarea"),t.tfoot=t.bind(void 0,"tfoot"),t.th=t.bind(void 0,"th"),t.thead=t.bind(void 0,"thead"),t.time=t.bind(void 0,"time"),t.title=t.bind(void 0,"title"),t.tr=t.bind(void 0,"tr"),t.track=t.bind(void 0,"track"),t.u=t.bind(void 0,"u"),t.ul=t.bind(void 0,"ul"),t.var_=t.bind(void 0,"var"),t.video=t.bind(void 0,"video"),t.wbr=t.bind(void 0,"wbr")})(Z||(Z={}));var Re;(function(t){function e(i){return je.createDOMNode(i)}t.realize=e;function n(i,r){var o=je.hostMap.get(r)||[],s=je.asContentArray(i);je.hostMap.set(r,s),je.updateContent(r,o,s)}t.render=n})(Re||(Re={}));var je;(function(t){t.hostMap=new WeakMap;function e(b){return b?b instanceof Array?b:[b]:[]}t.asContentArray=e;function n(b){var c=arguments[1]||null,m=arguments[2]||null;if(c)c.insertBefore(n(b),m);else{if(b.type==="text")return document.createTextNode(b.content);if(c=document.createElement(b.tag),s(c,b.attrs),b.renderer)return b.renderer.render(c,{attrs:b.attrs,children:b.children}),c;for(var f=0,w=b.children.length;f<w;++f)n(b.children[f],c)}return c}t.createDOMNode=n;function i(b,c,m){if(c!==m){for(var f=_(b,c),w=c.slice(),x=b.firstChild,I=m.length,A=0;A<I;++A){if(A>=w.length){n(m[A],b);continue}var E=w[A],S=m[A];if(E===S){x=x.nextSibling;continue}if(E.type==="text"&&S.type==="text"){x.textContent!==S.content&&(x.textContent=S.content),x=x.nextSibling;continue}if(E.type==="text"||S.type==="text"){R.insert(w,A,S),n(S,b,x);continue}if(!E.renderer!=!S.renderer){R.insert(w,A,S),n(S,b,x);continue}var v=S.attrs.key;if(v&&v in f){var M=f[v];M.vNode!==E&&(R.move(w,w.indexOf(M.vNode,A+1),A),b.insertBefore(M.element,x),E=M.vNode,x=M.element)}if(E===S){x=x.nextSibling;continue}var d=E.attrs.key;if(d&&d!==v){R.insert(w,A,S),n(S,b,x);continue}if(E.tag!==S.tag){R.insert(w,A,S),n(S,b,x);continue}a(x,E.attrs,S.attrs),S.renderer?S.renderer.render(x,{attrs:S.attrs,children:S.children}):i(x,E.children,S.children),x=x.nextSibling}r(b,w,I,!0)}}t.updateContent=i;function r(b,c,m,f){for(var w=c.length-1;w>=m;--w){var x=c[w],I=f?b.lastChild:b.childNodes[w];x.type==="text"||(x.renderer&&x.renderer.unrender?x.renderer.unrender(I,{attrs:x.attrs,children:x.children}):r(I,x.children,0,!1)),f&&b.removeChild(I)}}var o={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function s(b,c){for(var m in c)m in o||(m.substr(0,2)==="on"?b[m]=c[m]:b.setAttribute(m,c[m]));c.className!==void 0&&b.setAttribute("class",c.className),c.htmlFor!==void 0&&b.setAttribute("for",c.htmlFor),c.dataset&&l(b,c.dataset),c.style&&y(b,c.style)}function a(b,c,m){if(c!==m){var f;for(f in c)f in o||f in m||(f.substr(0,2)==="on"?b[f]=null:b.removeAttribute(f));for(f in m)f in o||c[f]===m[f]||(f.substr(0,2)==="on"?b[f]=m[f]:b.setAttribute(f,m[f]));c.className!==m.className&&(m.className!==void 0?b.setAttribute("class",m.className):b.removeAttribute("class")),c.htmlFor!==m.htmlFor&&(m.htmlFor!==void 0?b.setAttribute("for",m.htmlFor):b.removeAttribute("for")),c.dataset!==m.dataset&&h(b,c.dataset||{},m.dataset||{}),c.style!==m.style&&T(b,c.style||{},m.style||{})}}function l(b,c){for(var m in c)b.setAttribute("data-"+m,c[m])}function h(b,c,m){for(var f in c)f in m||b.removeAttribute("data-"+f);for(var w in m)c[w]!==m[w]&&b.setAttribute("data-"+w,m[w])}function y(b,c){var m=b.style,f;for(f in c)m[f]=c[f]}function T(b,c,m){var f=b.style,w;for(w in c)w in m||(f[w]="");for(w in m)c[w]!==m[w]&&(f[w]=m[w])}function _(b,c){for(var m=b.firstChild,f=Object.create(null),w=0,x=c;w<x.length;w++){var I=x[w];I.type==="element"&&I.attrs.key&&(f[I.attrs.key]={vNode:I,element:m}),m=m.nextSibling}return f}})(je||(je={}));var le=class extends z{constructor(e={}){super({node:ye.createNode()}),this.addClass("lm-TabBar"),this.addClass("p-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(z.Flag.DisallowLayout),this._document=e.document||document,this.tabsMovable=e.tabsMovable||!1,this.titlesEditable=e.titlesEditable||!1,this.allowDeselect=e.allowDeselect||!1,this.addButtonEnabled=e.addButtonEnabled||!1,this.insertBehavior=e.insertBehavior||"select-tab-if-needed",this.name=e.name||"",this.orientation=e.orientation||"horizontal",this.removeBehavior=e.removeBehavior||"select-tab-after",this.renderer=e.renderer||le.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}renderer;get document(){return this._document}tabsMovable;get titlesEditable(){return this._titlesEditable}set titlesEditable(e){this._titlesEditable=e}allowDeselect;insertBehavior;removeBehavior;get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(e){this.currentIndex=e?this._titles.indexOf(e):-1}get currentIndex(){return this._currentIndex}set currentIndex(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex===e)return;let n=this._currentIndex,i=this._titles[n]||null,r=e,o=this._titles[r]||null;this._currentIndex=r,this._previousTitle=i,this.update(),this._currentChanged.emit({previousIndex:n,previousTitle:i,currentIndex:r,currentTitle:o})}get name(){return this._name}set name(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(e){return this.insertTab(this._titles.length,e)}insertTab(e,n){this._releaseMouse();let i=ye.asTitle(n),r=this._titles.indexOf(i),o=Math.max(0,Math.min(e,this._titles.length));return r===-1?(R.insert(this._titles,o,i),i.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(o,i),i):(o===this._titles.length&&o--,r===o||(R.move(this._titles,r,o),this.update(),this._adjustCurrentForMove(r,o)),i)}removeTab(e){this.removeTabAt(this._titles.indexOf(e))}removeTabAt(e){this._releaseMouse();let n=R.removeAt(this._titles,e);!n||(n.changed.disconnect(this._onTitleChanged,this),n===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,n))}clearTabs(){if(this._titles.length===0)return;this._releaseMouse();for(let i of this._titles)i.changed.disconnect(this._onTitleChanged,this);let e=this.currentIndex,n=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),e!==-1&&this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this)}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this._releaseMouse()}onUpdateRequest(e){let n=this._titles,i=this.renderer,r=this.currentTitle,o=new Array(n.length);for(let s=0,a=n.length;s<a;++s){let l=n[s],h=l===r,y=h?a:a-s-1;o[s]=i.renderTab({title:l,current:h,zIndex:y})}Re.render(o,this.contentNode)}_evtDblClick(e){if(!this.titlesEditable)return;let n=this.contentNode.children,i=R.findFirstIndex(n,s=>U.hitTest(s,e.clientX,e.clientY));if(i===-1)return;let r=this.titles[i],o=n[i].querySelector(".lm-TabBar-tabLabel");if(o&&o.contains(e.target)){let s=r.label||"",a=o.innerHTML;o.innerHTML="";let l=document.createElement("input");l.classList.add("lm-TabBar-tabInput"),l.value=s,o.appendChild(l);let h=()=>{l.removeEventListener("blur",h),o.innerHTML=a};l.addEventListener("dblclick",y=>y.stopPropagation()),l.addEventListener("blur",h),l.addEventListener("keydown",y=>{y.key==="Enter"?(l.value!==""&&(r.label=r.caption=l.value),h()):y.key==="Escape"&&h()}),l.select(),l.focus(),o.children.length>0&&o.children[0].focus()}}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this._releaseMouse()}_evtMouseDown(e){if(e.button!==0&&e.button!==1||this._dragData)return;let n=this.addButtonEnabled&&this.addButtonNode.contains(e.target),i=this.contentNode.children,r=R.findFirstIndex(i,s=>U.hitTest(s,e.clientX,e.clientY));if(r===-1&&!n||(e.preventDefault(),e.stopPropagation(),this._dragData={tab:i[r],index:r,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("mouseup",this,!0),this.document.addEventListener("pointerup",this,!0),e.button===1||n))return;let o=i[r].querySelector(this.renderer.closeIconSelector);o&&o.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("mousemove",this,!0),this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===r?this.currentIndex=-1:this.currentIndex=r,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtMouseMove(e){let n=this._dragData;if(!n)return;e.preventDefault(),e.stopPropagation();let i=this.contentNode.children;if(!(!n.dragActive&&!ye.dragExceeded(n,e))){if(!n.dragActive){let r=n.tab.getBoundingClientRect();this._orientation==="horizontal"?(n.tabPos=n.tab.offsetLeft,n.tabSize=r.width,n.tabPressPos=n.pressX-r.left):(n.tabPos=n.tab.offsetTop,n.tabSize=r.height,n.tabPressPos=n.pressY-r.top),n.tabLayout=ye.snapTabLayout(i,this._orientation),n.contentRect=this.contentNode.getBoundingClientRect(),n.override=Ce.overrideCursor("default"),n.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),n.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),n.dragActive=!0}if(!n.detachRequested&&ye.detachExceeded(n,e)){n.detachRequested=!0;let r=n.index,o=e.clientX,s=e.clientY,a=i[r],l=this._titles[r];if(this._tabDetachRequested.emit({index:r,title:l,tab:a,clientX:o,clientY:s}),n.dragAborted)return}ye.layoutTabs(i,n,e,this._orientation)}}_evtMouseUp(e){if(e.button!==0&&e.button!==1)return;let n=this._dragData;if(!n)return;if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!n.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target)){this._addRequested.emit(void 0);return}let o=this.contentNode.children,s=R.findFirstIndex(o,h=>U.hitTest(h,e.clientX,e.clientY));if(s!==n.index)return;let a=this._titles[s];if(!a.closable)return;if(e.button===1){this._tabCloseRequested.emit({index:s,title:a});return}let l=o[s].querySelector(this.renderer.closeIconSelector);if(l&&l.contains(e.target)){this._tabCloseRequested.emit({index:s,title:a});return}return}if(e.button!==0)return;ye.finalizeTabPosition(n,this._orientation),n.tab.classList.remove("lm-mod-dragging"),n.tab.classList.remove("p-mod-dragging");let i=ye.parseTransitionDuration(n.tab);setTimeout(()=>{if(n.dragAborted)return;this._dragData=null,ye.resetTabPositions(this.contentNode.children,this._orientation),n.override.dispose(),this.removeClass("lm-mod-dragging"),this.removeClass("p-mod-dragging");let r=n.index,o=n.targetIndex;o===-1||r===o||(R.move(this._titles,r,o),this._adjustCurrentForMove(r,o),this._tabMoved.emit({fromIndex:r,toIndex:o,title:this._titles[o]}),P.sendMessage(this,z.Msg.UpdateRequest))},i)}_releaseMouse(){let e=this._dragData;!e||(this._dragData=null,this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(ye.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),e.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))}_adjustCurrentForInsert(e,n){let i=this.currentTitle,r=this._currentIndex,o=this.insertBehavior;if(o==="select-tab"||o==="select-tab-if-needed"&&r===-1){this._currentIndex=e,this._previousTitle=i,this._currentChanged.emit({previousIndex:r,previousTitle:i,currentIndex:e,currentTitle:n});return}r>=e&&this._currentIndex++}_adjustCurrentForMove(e,n){this._currentIndex===e?this._currentIndex=n:this._currentIndex<e&&this._currentIndex>=n?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=n&&this._currentIndex--}_adjustCurrentForRemove(e,n){let i=this._currentIndex,r=this.removeBehavior;if(i!==e){i>e&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:-1,currentTitle:null});return}if(r==="select-tab-after"){this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(r==="select-tab-before"){this._currentIndex=Math.max(0,e-1),this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(r==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:-1,currentTitle:null})}_onTitleChanged(e){this.update()}_name;_currentIndex=-1;_titles=[];_orientation;_document;_titlesEditable=!1;_previousTitle=null;_dragData=null;_addButtonEnabled=!1;_tabMoved=new W(this);_currentChanged=new W(this);_addRequested=new W(this);_tabCloseRequested=new W(this);_tabDetachRequested=new W(this);_tabActivateRequested=new W(this)};(i=>{class t{constructor(){this._uuid=++t._nInstance}closeIconSelector=".lm-TabBar-tabCloseIcon";renderTab(o){let s=o.title.caption,a=this.createTabKey(o),l=a,h=this.createTabStyle(o),y=this.createTabClass(o),T=this.createTabDataset(o),_=this.createTabARIA(o);return o.title.closable?Z.li({id:l,key:a,className:y,title:s,style:h,dataset:T,..._},this.renderIcon(o),this.renderLabel(o),this.renderCloseIcon(o)):Z.li({id:l,key:a,className:y,title:s,style:h,dataset:T,..._},this.renderIcon(o),this.renderLabel(o))}renderIcon(o){let{title:s}=o,a=this.createIconClass(o);return typeof s.icon=="string"?Z.div({className:a},s.iconLabel):Z.div({className:a},s.icon,s.iconLabel)}renderLabel(o){return Z.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},o.title.label)}renderCloseIcon(o){return Z.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}createTabKey(o){let s=this._tabKeys.get(o.title);return s===void 0&&(s=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(o.title,s)),s}createTabStyle(o){return{zIndex:`${o.zIndex}`}}createTabClass(o){let s="lm-TabBar-tab";return s+=" p-TabBar-tab",o.title.className&&(s+=` ${o.title.className}`),o.title.closable&&(s+=" lm-mod-closable",s+=" p-mod-closable"),o.current&&(s+=" lm-mod-current",s+=" p-mod-current"),s}createTabDataset(o){return o.title.dataset}createTabARIA(o){return{role:"tab","aria-selected":o.current.toString()}}createIconClass(o){let s="lm-TabBar-tabIcon";s+=" p-TabBar-tabIcon";let a=o.title.iconClass;return a?`${s} ${a}`:s}static _nInstance=0;_uuid;_tabID=0;_tabKeys=new WeakMap}i.Renderer=t,i.defaultRenderer=new t,i.addButtonSelector=".lm-TabBar-addButton"})(le||={});var ye;(T=>{T.DRAG_THRESHOLD=5,T.DETACH_THRESHOLD=20;function n(){let _=document.createElement("div"),b=document.createElement("ul");b.setAttribute("role","tablist"),b.className="lm-TabBar-content",b.classList.add("p-TabBar-content"),_.appendChild(b);let c=document.createElement("div");return c.className="lm-TabBar-addButton lm-mod-hidden",_.appendChild(c),_}T.createNode=n;function i(_){return _ instanceof Ke?_:new Ke(_)}T.asTitle=i;function r(_){let b=window.getComputedStyle(_);return 1e3*(parseFloat(b.transitionDuration)||0)}T.parseTransitionDuration=r;function o(_,b){let c=new Array(_.length);for(let m=0,f=_.length;m<f;++m){let w=_[m],x=window.getComputedStyle(w);b==="horizontal"?c[m]={pos:w.offsetLeft,size:w.offsetWidth,margin:parseFloat(x.marginLeft)||0}:c[m]={pos:w.offsetTop,size:w.offsetHeight,margin:parseFloat(x.marginTop)||0}}return c}T.snapTabLayout=o;function s(_,b){let c=Math.abs(b.clientX-_.pressX),m=Math.abs(b.clientY-_.pressY);return c>=5||m>=5}T.dragExceeded=s;function a(_,b){let c=_.contentRect;return b.clientX<c.left-20||b.clientX>=c.right+20||b.clientY<c.top-20||b.clientY>=c.bottom+20}T.detachExceeded=a;function l(_,b,c,m){let f,w,x,I;m==="horizontal"?(f=b.pressX,w=c.clientX-b.contentRect.left,x=c.clientX,I=b.contentRect.width):(f=b.pressY,w=c.clientY-b.contentRect.top,x=c.clientY,I=b.contentRect.height);let A=b.index,E=w-b.tabPressPos,S=E+b.tabSize;for(let v=0,M=_.length;v<M;++v){let d,u=b.tabLayout[v],g=u.pos+(u.size>>1);if(v<b.index&&E<g)d=`${b.tabSize+b.tabLayout[v+1].margin}px`,A=Math.min(A,v);else if(v>b.index&&S>g)d=`${-b.tabSize-u.margin}px`,A=Math.max(A,v);else if(v===b.index){let k=x-f,p=I-(b.tabPos+b.tabSize);d=`${Math.max(-b.tabPos,Math.min(k,p))}px`}else d="";m==="horizontal"?_[v].style.left=d:_[v].style.top=d}b.targetIndex=A}T.layoutTabs=l;function h(_,b){let c;b==="horizontal"?c=_.contentRect.width:c=_.contentRect.height;let m;if(_.targetIndex===_.index)m=0;else if(_.targetIndex>_.index){let x=_.tabLayout[_.targetIndex];m=x.pos+x.size-_.tabSize-_.tabPos}else m=_.tabLayout[_.targetIndex].pos-_.tabPos;let f=c-(_.tabPos+_.tabSize),w=Math.max(-_.tabPos,Math.min(m,f));b==="horizontal"?_.tab.style.left=`${w}px`:_.tab.style.top=`${w}px`}T.finalizeTabPosition=h;function y(_,b){F(_,c=>{b==="horizontal"?c.style.left="":c.style.top=""})}T.resetTabPositions=y})(ye||={});var qt=class extends Ie{constructor(e){super(),this.renderer=e.renderer,e.spacing!==void 0&&(this._spacing=ln.clampDimension(e.spacing)),this._document=e.document||document,this._hiddenMode=e.hiddenMode!==void 0?e.hiddenMode:z.HiddenMode.Display}dispose(){let e=this.iter();this._items.forEach(n=>{n.dispose()}),this._box=null,this._root=null,this._items.clear(),F(e,n=>{n.dispose()}),super.dispose()}renderer;get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this._hiddenMode=e,F(this.tabBars(),n=>{n.titles.length>1&&n.titles.forEach(i=>{i.owner.hiddenMode=this._hiddenMode})}))}get spacing(){return this._spacing}set spacing(e){e=ln.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get isEmpty(){return this._root===null}iter(){return this._root?this._root.iterAllWidgets():ce()}widgets(){return this._root?this._root.iterUserWidgets():ce()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():ce()}tabBars(){return this._root?this._root.iterTabBars():ce()}handles(){return this._root?this._root.iterHandles():ce()}moveHandle(e,n,i){let r=e.classList.contains("lm-mod-hidden");if(r=r||e.classList.contains("p-mod-hidden"),!this._root||r)return;let o=this._root.findSplitNode(e);if(!o)return;let s;o.node.orientation==="horizontal"?s=n-e.offsetLeft:s=i-e.offsetTop,s!==0&&(o.node.holdSizes(),De.adjust(o.node.sizers,o.index,s),this.parent&&this.parent.update())}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(e){let n=new Set,i;e.main?i=Y.normalizeAreaConfig(e.main,n):i=null;let r=this.widgets(),o=this.tabBars(),s=this.handles();this._root=null,F(r,a=>{n.has(a)||(a.parent=null)}),F(o,a=>{a.dispose()}),F(s,a=>{a.parentNode&&a.parentNode.removeChild(a)}),n.forEach(a=>{a.parent=this.parent}),i?this._root=Y.realizeAreaConfig(i,{createTabBar:a=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):this._root=null,this.parent&&(n.forEach(a=>{this.attachWidget(a)}),this.parent.fit())}addWidget(e,n={}){let i=n.ref||null,r=n.mode||"tab-after",o=null;if(this._root&&i&&(o=this._root.findTabNode(i)),i&&!o)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,r){case"tab-after":this._insertTab(e,i,o,!0);break;case"tab-before":this._insertTab(e,i,o,!1);break;case"split-top":this._insertSplit(e,i,o,"vertical",!1);break;case"split-left":this._insertSplit(e,i,o,"horizontal",!1);break;case"split-right":this._insertSplit(e,i,o,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,i,o,"vertical",!0);break}!this.parent||(this.attachWidget(e),this.parent.fit())}removeWidget(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())}hitTestTabAreas(e,n){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=U.boxSizing(this.parent.node));let i=this.parent.node.getBoundingClientRect(),r=e-i.left-this._box.borderLeft,o=n-i.top-this._box.borderTop,s=this._root.hitTestTabNodes(r,o);if(!s)return null;let{tabBar:a,top:l,left:h,width:y,height:T}=s,_=this._box.borderLeft+this._box.borderRight,b=this._box.borderTop+this._box.borderBottom,c=i.width-_-(h+y),m=i.height-b-(l+T);return{tabBar:a,x:r,y:o,top:l,left:h,right:c,bottom:m,width:y,height:T}}init(){super.init(),F(this,e=>{this.attachWidget(e)}),F(this.handles(),e=>{this.parent.node.appendChild(e)}),this.parent.fit()}attachWidget(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new Xe(e)),this.parent.isAttached&&P.sendMessage(e,z.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&P.sendMessage(e,z.Msg.AfterAttach))}detachWidget(e){if(this.parent.node!==e.node.parentNode)return;this.parent.isAttached&&P.sendMessage(e,z.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&P.sendMessage(e,z.Msg.AfterDetach);let n=this._items.get(e);n&&(this._items.delete(e),n.dispose())}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_removeWidget(e){if(!this._root)return;let n=this._root.findTabNode(e);if(!n)return;if(Y.removeAria(e),n.tabBar.titles.length>1){if(n.tabBar.removeTab(e.title),this._hiddenMode===z.HiddenMode.Scale&&n.tabBar.titles.length==1){let _=n.tabBar.titles[0].owner;_.hiddenMode=z.HiddenMode.Display}return}if(n.tabBar.dispose(),this._root===n){this._root=null;return}this._root.holdAllSizes();let i=n.parent;n.parent=null;let r=R.removeFirstOf(i.children,n),o=R.removeAt(i.handles,r);if(R.removeAt(i.sizers,r),o.parentNode&&o.parentNode.removeChild(o),i.children.length>1){i.syncHandles();return}let s=i.parent;i.parent=null;let a=i.children[0],l=i.handles[0];if(i.children.length=0,i.handles.length=0,i.sizers.length=0,l.parentNode&&l.parentNode.removeChild(l),this._root===i){a.parent=null,this._root=a;return}let h=s,y=h.children.indexOf(i);if(a instanceof Y.TabLayoutNode){a.parent=h,h.children[y]=a;return}let T=R.removeAt(h.handles,y);R.removeAt(h.children,y),R.removeAt(h.sizers,y),T.parentNode&&T.parentNode.removeChild(T);for(let _=0,b=a.children.length;_<b;++_){let c=a.children[_],m=a.handles[_],f=a.sizers[_];R.insert(h.children,y+_,c),R.insert(h.handles,y+_,m),R.insert(h.sizers,y+_,f),c.parent=h}a.children.length=0,a.handles.length=0,a.sizers.length=0,a.parent=null,h.syncHandles()}_insertTab(e,n,i,r){if(e===n)return;if(!this._root){let s=new Y.TabLayoutNode(this._createTabBar());s.tabBar.addTab(e.title),this._root=s,Y.addAria(e,s.tabBar);return}i||(i=this._root.findFirstTabNode()),i.tabBar.titles.indexOf(e.title)===-1&&(this._removeWidget(e),e.hide());let o;if(n?o=i.tabBar.titles.indexOf(n.title):o=i.tabBar.currentIndex,this._hiddenMode===z.HiddenMode.Scale)if(i.tabBar.titles.length===0)e.hiddenMode=z.HiddenMode.Display;else if(i.tabBar.titles.length==1){let s=i.tabBar.titles[0].owner;s.hiddenMode=z.HiddenMode.Scale}else e.hiddenMode=z.HiddenMode.Scale;else e.hiddenMode=this._hiddenMode;i.tabBar.insertTab(o+(r?1:0),e.title),Y.addAria(e,i.tabBar)}_insertSplit(e,n,i,r,o){if(e===n&&i&&i.tabBar.titles.length===1)return;this._removeWidget(e);let s=new Y.TabLayoutNode(this._createTabBar());if(s.tabBar.addTab(e.title),Y.addAria(e,s.tabBar),!this._root){this._root=s;return}if(!i||!i.parent){let T=this._splitRoot(r),_=o?T.children.length:0;T.normalizeSizes();let b=Y.createSizer(i?1:Y.GOLDEN_RATIO);R.insert(T.children,_,s),R.insert(T.sizers,_,b),R.insert(T.handles,_,this._createHandle()),s.parent=T,T.normalizeSizes(),T.syncHandles();return}let a=i.parent;if(a.orientation===r){let T=a.children.indexOf(i);a.normalizeSizes();let _=a.sizers[T].sizeHint/=2,b=T+(o?1:0);R.insert(a.children,b,s),R.insert(a.sizers,b,Y.createSizer(_)),R.insert(a.handles,b,this._createHandle()),s.parent=a,a.syncHandles();return}let l=R.removeFirstOf(a.children,i),h=new Y.SplitLayoutNode(r);h.normalized=!0,h.children.push(i),h.sizers.push(Y.createSizer(.5)),h.handles.push(this._createHandle()),i.parent=h;let y=o?1:0;R.insert(h.children,y,s),R.insert(h.sizers,y,Y.createSizer(.5)),R.insert(h.handles,y,this._createHandle()),s.parent=h,h.syncHandles(),R.insert(a.children,l,h),h.parent=a}_splitRoot(e){let n=this._root;if(n instanceof Y.SplitLayoutNode&&n.orientation===e)return n;let i=this._root=new Y.SplitLayoutNode(e);return n&&(i.children.push(n),i.sizers.push(Y.createSizer(0)),i.handles.push(this._createHandle()),n.parent=i),i}_fit(){let e=0,n=0;if(this._root){let o=this._root.fit(this._spacing,this._items);e=o.minWidth,n=o.minHeight}let i=this._box=U.boxSizing(this.parent.node);e+=i.horizontalSum,n+=i.verticalSum;let r=this.parent.node.style;r.minWidth=`${e}px`,r.minHeight=`${n}px`,this._dirty=!0,this.parent.parent&&P.sendMessage(this.parent.parent,z.Msg.FitRequest),this._dirty&&P.sendMessage(this.parent,z.Msg.UpdateRequest)}_update(e,n){if(this._dirty=!1,!this._root)return;e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=U.boxSizing(this.parent.node));let i=this._box.paddingTop,r=this._box.paddingLeft,o=e-this._box.horizontalSum,s=n-this._box.verticalSum;this._root.update(i,r,o,s,this._spacing,this._items)}_createTabBar(){let e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&(e.parent=this.parent,this.attachWidget(e)),e}_createHandle(){let e=this.renderer.createHandle(),n=e.style;return n.position="absolute",n.top="0",n.left="0",n.width="0",n.height="0",this.parent&&this.parent.node.appendChild(e),e}_spacing=4;_dirty=!1;_root=null;_box=null;_document;_hiddenMode;_items=new Map},Y;(_=>{_.GOLDEN_RATIO=.618;function e(b){let c=new Se;return c.sizeHint=b,c.size=b,c}_.createSizer=e;function n(b,c){let m;return b.type==="tab-area"?m=l(b,c):m=h(b,c),m}_.normalizeAreaConfig=n;function i(b,c,m){let f;return b.type==="tab-area"?f=y(b,c,m):f=T(b,c,m),f}_.realizeAreaConfig=i;class r{constructor(c){let m=new Se,f=new Se;m.stretch=0,f.stretch=1,this.tabBar=c,this.sizers=[m,f]}parent=null;tabBar;sizers;get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}iterAllWidgets(){return tn(Ot(this.tabBar),this.iterUserWidgets())}iterUserWidgets(){return We(this.tabBar.titles,c=>c.owner)}iterSelectedWidgets(){let c=this.tabBar.currentTitle;return c?Ot(c.owner):ce()}iterTabBars(){return Ot(this.tabBar)}iterHandles(){return ce()}findTabNode(c){return this.tabBar.titles.indexOf(c.title)!==-1?this:null}findSplitNode(c){return null}findFirstTabNode(){return this}hitTestTabNodes(c,m){return c<this._left||c>=this._left+this._width||m<this._top||m>=this._top+this._height?null:this}createConfig(){let c=this.tabBar.titles.map(f=>f.owner),m=this.tabBar.currentIndex;return{type:"tab-area",widgets:c,currentIndex:m}}holdAllSizes(){}fit(c,m){let f=0,w=0,x=1/0,I=1/0,A=m.get(this.tabBar),E=this.tabBar.currentTitle,S=E?m.get(E.owner):void 0,[v,M]=this.sizers;return A&&A.fit(),S&&S.fit(),A&&!A.isHidden?(f=Math.max(f,A.minWidth),w+=A.minHeight,v.minSize=A.minHeight,v.maxSize=A.maxHeight):(v.minSize=0,v.maxSize=0),S&&!S.isHidden?(f=Math.max(f,S.minWidth),w+=S.minHeight,M.minSize=S.minHeight,M.maxSize=1/0):(M.minSize=0,M.maxSize=1/0),{minWidth:f,minHeight:w,maxWidth:x,maxHeight:I}}update(c,m,f,w,x,I){this._top=m,this._left=c,this._width=f,this._height=w;let A=I.get(this.tabBar),E=this.tabBar.currentTitle,S=E?I.get(E.owner):void 0;if(De.calc(this.sizers,w),A&&!A.isHidden){let v=this.sizers[0].size;A.update(c,m,f,v),m+=v}if(S&&!S.isHidden){let v=this.sizers[1].size;S.update(c,m,f,v)}}_top=0;_left=0;_width=0;_height=0}_.TabLayoutNode=r;class o{constructor(c){this.orientation=c}parent=null;normalized=!1;orientation;children=[];sizers=[];handles=[];iterAllWidgets(){let c=We(this.children,m=>m.iterAllWidgets());return new Fe(c)}iterUserWidgets(){let c=We(this.children,m=>m.iterUserWidgets());return new Fe(c)}iterSelectedWidgets(){let c=We(this.children,m=>m.iterSelectedWidgets());return new Fe(c)}iterTabBars(){let c=We(this.children,m=>m.iterTabBars());return new Fe(c)}iterHandles(){let c=We(this.children,m=>m.iterHandles());return tn(this.handles,new Fe(c))}findTabNode(c){for(let m=0,f=this.children.length;m<f;++m){let w=this.children[m].findTabNode(c);if(w)return w}return null}findSplitNode(c){let m=this.handles.indexOf(c);if(m!==-1)return{index:m,node:this};for(let f=0,w=this.children.length;f<w;++f){let x=this.children[f].findSplitNode(c);if(x)return x}return null}findFirstTabNode(){return this.children.length===0?null:this.children[0].findFirstTabNode()}hitTestTabNodes(c,m){for(let f=0,w=this.children.length;f<w;++f){let x=this.children[f].hitTestTabNodes(c,m);if(x)return x}return null}createConfig(){let c=this.orientation,m=this.createNormalizedSizes(),f=this.children.map(w=>w.createConfig());return{type:"split-area",orientation:c,children:f,sizes:m}}syncHandles(){F(this.handles,(c,m)=>{c.setAttribute("data-orientation",this.orientation),m===this.handles.length-1?(c.classList.add("lm-mod-hidden"),c.classList.add("p-mod-hidden")):(c.classList.remove("lm-mod-hidden"),c.classList.remove("p-mod-hidden"))})}holdSizes(){F(this.sizers,c=>{c.sizeHint=c.size})}holdAllSizes(){F(this.children,c=>c.holdAllSizes()),this.holdSizes()}normalizeSizes(){let c=this.sizers.length;if(c===0)return;this.holdSizes();let m=nn(this.sizers,(f,w)=>f+w.sizeHint,0);m===0?F(this.sizers,f=>{f.size=f.sizeHint=1/c}):F(this.sizers,f=>{f.size=f.sizeHint/=m}),this.normalized=!0}createNormalizedSizes(){let c=this.sizers.length;if(c===0)return[];let m=this.sizers.map(w=>w.size),f=nn(m,(w,x)=>w+x,0);return f===0?F(m,(w,x)=>{m[x]=1/c}):F(m,(w,x)=>{m[x]=w/f}),m}fit(c,m){let f=this.orientation==="horizontal",w=Math.max(0,this.children.length-1)*c,x=f?w:0,I=f?0:w,A=1/0,E=1/0;for(let S=0,v=this.children.length;S<v;++S){let M=this.children[S].fit(c,m);f?(I=Math.max(I,M.minHeight),x+=M.minWidth,this.sizers[S].minSize=M.minWidth):(x=Math.max(x,M.minWidth),I+=M.minHeight,this.sizers[S].minSize=M.minHeight)}return{minWidth:x,minHeight:I,maxWidth:A,maxHeight:E}}update(c,m,f,w,x,I){let A=this.orientation==="horizontal",E=Math.max(0,this.children.length-1)*x,S=Math.max(0,(A?f:w)-E);this.normalized&&(F(this.sizers,v=>{v.sizeHint*=S}),this.normalized=!1),De.calc(this.sizers,S);for(let v=0,M=this.children.length;v<M;++v){let d=this.children[v],u=this.sizers[v].size,g=this.handles[v].style;A?(d.update(c,m,u,w,x,I),c+=u,g.top=`${m}px`,g.left=`${c}px`,g.width=`${x}px`,g.height=`${w}px`,c+=x):(d.update(c,m,f,u,x,I),m+=u,g.top=`${m}px`,g.left=`${c}px`,g.width=`${f}px`,g.height=`${x}px`,m+=x)}}}_.SplitLayoutNode=o;function s(b,c){b.node.setAttribute("role","tabpanel");let m=c.renderer;if(m instanceof le.Renderer){let f=m.createTabKey({title:b.title,current:!1,zIndex:0});b.node.setAttribute("aria-labelledby",f)}}_.addAria=s;function a(b){b.node.removeAttribute("role"),b.node.removeAttribute("aria-labelledby")}_.removeAria=a;function l(b,c){if(b.widgets.length===0)return null;let m=[];if(F(b.widgets,w=>{c.has(w)||(c.add(w),m.push(w))}),m.length===0)return null;let f=b.currentIndex;return f!==-1&&(f<0||f>=m.length)&&(f=0),{type:"tab-area",widgets:m,currentIndex:f}}function h(b,c){let m=b.orientation,f=[],w=[];for(let x=0,I=b.children.length;x<I;++x){let A=n(b.children[x],c);!A||(A.type==="tab-area"||A.orientation!==m?(f.push(A),w.push(Math.abs(b.sizes[x]||0))):(f.push(...A.children),w.push(...A.sizes)))}return f.length===0?null:f.length===1?f[0]:{type:"split-area",orientation:m,children:f,sizes:w}}function y(b,c,m){let f=c.createTabBar(m);return F(b.widgets,w=>{w.hide(),f.addTab(w.title),_.addAria(w,f)}),f.currentIndex=b.currentIndex,new r(f)}function T(b,c,m){let f=new o(b.orientation);return F(b.children,(w,x)=>{let I=i(w,c,m),A=e(b.sizes[x]),E=c.createHandle();f.children.push(I),f.handles.push(E),f.sizers.push(A),I.parent=f}),f.syncHandles(),f.normalizeSizes(),f}})(Y||={});var Te=class extends z{constructor(e={}){super(),this.addClass("lm-DockPanel"),this.addClass("p-DockPanel"),this._document=e.document||document,this._mode=e.mode||"multiple-document",this._renderer=e.renderer||Te.defaultRenderer,this._edges=e.edges||$.DEFAULT_EDGES,e.tabsMovable!==void 0&&(this._tabsMovable=e.tabsMovable),e.tabsConstrained!==void 0&&(this._tabsConstrained=e.tabsConstrained),e.addButtonEnabled!==void 0&&(this._addButtonEnabled=e.addButtonEnabled),this.dataset.mode=this._mode;let n={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new qt({document:this._document,renderer:n,spacing:e.spacing,hiddenMode:e.hiddenMode}),this.overlay=e.overlay||new Te.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}overlay;get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get mode(){return this._mode}set mode(e){if(this._mode===e)return;this._mode=e,this.dataset.mode=e;let n=this.layout;switch(e){case"multiple-document":F(n.tabBars(),i=>{i.show()});break;case"single-document":n.restoreLayout($.createSingleDocumentConfig(this));break;default:throw"unreachable"}P.postMessage(this,$.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(e){this._tabsMovable=e,F(this.tabBars(),n=>{n.tabsMovable=e})}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(e){this._tabsConstrained=e}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled=e,F(this.tabBars(),n=>{n.addButtonEnabled=e})}get isEmpty(){return this.layout.isEmpty}widgets(){return this.layout.widgets()}selectedWidgets(){return this.layout.selectedWidgets()}tabBars(){return this.layout.tabBars()}handles(){return this.layout.handles()}selectWidget(e){let n=ft(this.tabBars(),i=>i.titles.indexOf(e.title)!==-1);if(!n)throw new Error("Widget is not contained in the dock panel.");n.currentTitle=e.title}activateWidget(e){this.selectWidget(e),e.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(e){this._mode="multiple-document",this.layout.restoreLayout(e),(j.IS_EDGE||j.IS_IE)&&P.flush(),P.postMessage(this,$.LayoutModified)}addWidget(e,n={}){this._mode==="single-document"?this.layout.addWidget(e):this.layout.addWidget(e,n),P.postMessage(this,$.LayoutModified)}processMessage(e){e.type==="layout-modified"?this._layoutModified.emit(void 0):super.processMessage(e)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){$.isGeneratedTabBarProperty.get(e.child)||(e.child.addClass("lm-DockPanel-widget"),e.child.addClass("p-DockPanel-widget"))}onChildRemoved(e){$.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),e.child.removeClass("p-DockPanel-widget"),P.postMessage(this,$.LayoutModified))}_evtDragEnter(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),!(this._tabsConstrained&&e.source!==this)&&(e.stopPropagation(),this.overlay.hide(1))}_evtDragOver(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||this._showOverlay(e.clientX,e.clientY)==="invalid"?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)}_evtDrop(e){if(e.preventDefault(),this.overlay.hide(0),e.proposedAction==="none"){e.dropAction="none";return}let{clientX:n,clientY:i}=e,{zone:r,target:o}=$.findDropTarget(this,n,i,this._edges);if(this._tabsConstrained&&e.source!==this||r==="invalid"){e.dropAction="none";return}let a=e.mimeData.getData("application/vnd.lumino.widget-factory");if(typeof a!="function"){e.dropAction="none";return}let l=a();if(!(l instanceof z)){e.dropAction="none";return}if(l.contains(this)){e.dropAction="none";return}let h=o?$.getDropRef(o.tabBar):null;switch(r){case"root-all":this.addWidget(l);break;case"root-top":this.addWidget(l,{mode:"split-top"});break;case"root-left":this.addWidget(l,{mode:"split-left"});break;case"root-right":this.addWidget(l,{mode:"split-right"});break;case"root-bottom":this.addWidget(l,{mode:"split-bottom"});break;case"widget-all":this.addWidget(l,{mode:"tab-after",ref:h});break;case"widget-top":this.addWidget(l,{mode:"split-top",ref:h});break;case"widget-left":this.addWidget(l,{mode:"split-left",ref:h});break;case"widget-right":this.addWidget(l,{mode:"split-right",ref:h});break;case"widget-bottom":this.addWidget(l,{mode:"split-bottom",ref:h});break;case"widget-tab":this.addWidget(l,{mode:"tab-after",ref:h});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(l)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&(this._releaseMouse(),P.postMessage(this,$.LayoutModified))}_evtMouseDown(e){if(e.button!==0)return;let n=this.layout,i=e.target,r=ft(n.handles(),y=>y.contains(i));if(!r)return;e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("mouseup",this,!0),this._document.addEventListener("mousemove",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let o=r.getBoundingClientRect(),s=e.clientX-o.left,a=e.clientY-o.top,l=window.getComputedStyle(r),h=Ce.overrideCursor(l.cursor,this._document);this._pressData={handle:r,deltaX:s,deltaY:a,override:h}}_evtMouseMove(e){if(!this._pressData)return;e.preventDefault(),e.stopPropagation();let n=this.node.getBoundingClientRect(),i=e.clientX-n.left-this._pressData.deltaX,r=e.clientY-n.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,i,r)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),P.postMessage(this,$.LayoutModified))}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("mouseup",this,!0),this._document.removeEventListener("mousemove",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(e,n){let{zone:i,target:r}=$.findDropTarget(this,e,n,this._edges);if(i==="invalid")return this.overlay.hide(100),i;let o,s,a,l,h=U.boxSizing(this.node),y=this.node.getBoundingClientRect();switch(i){case"root-all":o=h.paddingTop,s=h.paddingLeft,a=h.paddingRight,l=h.paddingBottom;break;case"root-top":o=h.paddingTop,s=h.paddingLeft,a=h.paddingRight,l=y.height*$.GOLDEN_RATIO;break;case"root-left":o=h.paddingTop,s=h.paddingLeft,a=y.width*$.GOLDEN_RATIO,l=h.paddingBottom;break;case"root-right":o=h.paddingTop,s=y.width*$.GOLDEN_RATIO,a=h.paddingRight,l=h.paddingBottom;break;case"root-bottom":o=y.height*$.GOLDEN_RATIO,s=h.paddingLeft,a=h.paddingRight,l=h.paddingBottom;break;case"widget-all":o=r.top,s=r.left,a=r.right,l=r.bottom;break;case"widget-top":o=r.top,s=r.left,a=r.right,l=r.bottom+r.height/2;break;case"widget-left":o=r.top,s=r.left,a=r.right+r.width/2,l=r.bottom;break;case"widget-right":o=r.top,s=r.left+r.width/2,a=r.right,l=r.bottom;break;case"widget-bottom":o=r.top+r.height/2,s=r.left,a=r.right,l=r.bottom;break;case"widget-tab":let T=r.tabBar.node.getBoundingClientRect().height;o=r.top,s=r.left,a=r.right,l=r.bottom+r.height-T;break;default:throw"unreachable"}return this.overlay.show({top:o,left:s,right:a,bottom:l}),i}_createTabBar(){let e=this._renderer.createTabBar(this._document);return $.isGeneratedTabBarProperty.set(e,!0),this._mode==="single-document"&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){P.postMessage(this,$.LayoutModified)}_onCurrentChanged(e,n){let{previousTitle:i,currentTitle:r}=n;i&&i.owner.hide(),r&&r.owner.show(),(j.IS_EDGE||j.IS_IE)&&P.flush(),P.postMessage(this,$.LayoutModified)}_onTabAddRequested(e){this._addRequested.emit(e)}_onTabActivateRequested(e,n){n.title.owner.activate()}_onTabCloseRequested(e,n){n.title.owner.close()}_onTabDetachRequested(e,n){if(this._drag)return;e.releaseMouse();let{title:i,tab:r,clientX:o,clientY:s}=n,a=new ui.MimeData,l=()=>i.owner;a.setData("application/vnd.lumino.widget-factory",l);let h=r.cloneNode(!0);this._drag=new Ce({document:this._document,mimeData:a,dragImage:h,proposedAction:"move",supportedActions:"move",source:this}),r.classList.add("lm-mod-hidden"),r.classList.add("p-mod-hidden");let y=()=>{this._drag=null,r.classList.remove("lm-mod-hidden"),r.classList.remove("p-mod-hidden")};this._drag.start(o,s).then(y)}_edges;_document;_mode;_drag=null;_renderer;_tabsMovable=!0;_tabsConstrained=!1;_addButtonEnabled=!1;_pressData=null;_layoutModified=new W(this);_addRequested=new W(this)};(i=>{class t{constructor(){this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}node;show(o){let s=this.node.style;s.top=`${o.top}px`,s.left=`${o.left}px`,s.right=`${o.right}px`,s.bottom=`${o.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))}hide(o){if(!this._hidden){if(o<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden")},o))}}_timer=-1;_hidden=!0}i.Overlay=t;class e{createTabBar(o){let s=new le({document:o});return s.addClass("lm-DockPanel-tabBar"),s.addClass("p-DockPanel-tabBar"),s}createHandle(){let o=document.createElement("div");return o.className="lm-DockPanel-handle",o.classList.add("p-DockPanel-handle"),o}}i.Renderer=e,i.defaultRenderer=new e})(Te||={});var $;(a=>{a.GOLDEN_RATIO=.618,a.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},a.LayoutModified=new qe("layout-modified"),a.isGeneratedTabBarProperty=new ie({name:"isGeneratedTabBar",create:()=>!1});function r(l){if(l.isEmpty)return{main:null};let h=ni(l.widgets()),y=l.selectedWidgets().next(),T=y?h.indexOf(y):-1;return{main:{type:"tab-area",widgets:h,currentIndex:T}}}a.createSingleDocumentConfig=r;function o(l,h,y,T){if(!U.hitTest(l.node,h,y))return{zone:"invalid",target:null};let _=l.layout;if(_.isEmpty)return{zone:"root-all",target:null};if(l.mode==="multiple-document"){let v=l.node.getBoundingClientRect(),M=h-v.left+1,d=y-v.top+1,u=v.right-h,g=v.bottom-y;switch(Math.min(d,u,g,M)){case d:if(d<T.top)return{zone:"root-top",target:null};break;case u:if(u<T.right)return{zone:"root-right",target:null};break;case g:if(g<T.bottom)return{zone:"root-bottom",target:null};break;case M:if(M<T.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let b=_.hitTestTabAreas(h,y);if(!b)return{zone:"invalid",target:null};if(l.mode==="single-document")return{zone:"widget-all",target:b};let c=b.x-b.left+1,m=b.y-b.top+1,f=b.left+b.width-b.x,w=b.top+b.height-b.y,x=b.tabBar.node.getBoundingClientRect().height;if(m<x)return{zone:"widget-tab",target:b};let I=Math.round(b.width/3),A=Math.round(b.height/3);if(c>I&&f>I&&m>A&&w>A)return{zone:"widget-all",target:b};c/=I,m/=A,f/=I,w/=A;let E=Math.min(c,m,f,w),S;switch(E){case c:S="widget-left";break;case m:S="widget-top";break;case f:S="widget-right";break;case w:S="widget-bottom";break;default:throw"unreachable"}return{zone:S,target:b}}a.findDropTarget=o;function s(l){return l.titles.length===0?null:l.currentTitle?l.currentTitle.owner:l.titles[l.titles.length-1].owner}a.getDropRef=s})($||={});var Ml;(e=>{function t(n){let i=document.body,r=o=>{o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",n),i.removeEventListener("copy",r,!0)};i.addEventListener("copy",r,!0),document.execCommand("copy")}e.copyText=t})(Ml||={});var un;(r=>{function t(o){let s=window.getComputedStyle(o),a=parseFloat(s.borderTopWidth)||0,l=parseFloat(s.borderLeftWidth)||0,h=parseFloat(s.borderRightWidth)||0,y=parseFloat(s.borderBottomWidth)||0,T=parseFloat(s.paddingTop)||0,_=parseFloat(s.paddingLeft)||0,b=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingBottom)||0,m=l+_+b+h,f=a+T+c+y;return{borderTop:a,borderLeft:l,borderRight:h,borderBottom:y,paddingTop:T,paddingLeft:_,paddingRight:b,paddingBottom:c,horizontalSum:m,verticalSum:f}}r.boxSizing=t;function e(o){let s=window.getComputedStyle(o),a=parseFloat(s.minWidth)||0,l=parseFloat(s.minHeight)||0,h=parseFloat(s.maxWidth)||1/0,y=parseFloat(s.maxHeight)||1/0;return h=Math.max(a,h),y=Math.max(l,y),{minWidth:a,minHeight:l,maxWidth:h,maxHeight:y}}r.sizeLimits=e;function n(o,s,a){let l=o.getBoundingClientRect();return s>=l.left&&s<l.right&&a>=l.top&&a<l.bottom}r.hitTest=n;function i(o,s){let a=o.getBoundingClientRect(),l=s.getBoundingClientRect();if(!(l.top<=a.top&&l.bottom>=a.bottom)){if(l.top<a.top&&l.height<=a.height){o.scrollTop-=a.top-l.top;return}if(l.bottom>a.bottom&&l.height>=a.height){o.scrollTop-=a.top-l.top;return}if(l.top<a.top&&l.height>a.height){o.scrollTop-=a.bottom-l.bottom;return}if(l.bottom>a.bottom&&l.height<a.height){o.scrollTop-=a.bottom-l.bottom;return}}}r.scrollIntoViewIfNeeded=i})(un||={});var El;(o=>{o.IS_MAC=!!navigator.platform.match(/Mac/i),o.IS_WIN=!!navigator.platform.match(/Win/i),o.IS_IE=/Trident/.test(navigator.userAgent),o.IS_EDGE=/Edge/.test(navigator.userAgent);function r(s){return o.IS_MAC?s.metaKey:s.ctrlKey}o.accelKey=r})(El||={});var kl;(i=>{function t(r){if(r in we.specificityCache)return we.specificityCache[r];let o=we.calculateSingle(r);return we.specificityCache[r]=o}i.calculateSpecificity=t;function e(r){if(r in we.validityCache)return we.validityCache[r];let o=!0;try{we.testElem.querySelector(r)}catch{o=!1}return we.validityCache[r]=o}i.isValid=e;function n(r,o){return we.protoMatchFunc.call(r,o)}i.matches=n})(kl||={});var we;(b=>{b.specificityCache=Object.create(null),b.validityCache=Object.create(null),b.testElem=document.createElement("div"),b.protoMatchFunc=(()=>{let c=Element.prototype;return c.matches||c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector||function(m){let f=this,w=f.ownerDocument?f.ownerDocument.querySelectorAll(m):[];return Array.prototype.indexOf.call(w,f)!==-1}})();function r(c){c=c.split(",",1)[0];let m=0,f=0,w=0;function x(I){let A=c.match(I);return A===null?!1:(c=c.slice(A[0].length),!0)}for(c=c.replace(_," $1 ");c.length>0;){if(x(o)){m++;continue}if(x(s)){f++;continue}if(x(a)){f++;continue}if(x(h)){w++;continue}if(x(y)){f++;continue}if(x(l)){w++;continue}if(!x(T))return 0}return m=Math.min(m,255),f=Math.min(f,255),w=Math.min(w,255),m<<16|f<<8|w}b.calculateSingle=r;let o=/^#[^\s\+>~#\.\[:]+/,s=/^\.[^\s\+>~#\.\[:]+/,a=/^\[[^\]]+\]/,l=/^[^\s\+>~#\.\[:]+/,h=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,y=/^:[^\s\+>~#\.\[:]+/,T=/^[\s\+>~\*]+/,_=/:not\(([^\)]+)\)/g})(we||={});var et=class{content;type="text";constructor(e){this.content=e}},yt=class{tag;attrs;children;renderer;type="element";constructor(e,n,i,r){this.tag=e,this.attrs=n,this.children=i,this.renderer=r}};function te(t){let e={},n,i=[];for(let o=1,s=arguments.length;o<s;++o){let a=arguments[o];typeof a=="string"?i.push(new et(a)):a instanceof et||a instanceof yt?i.push(a):a instanceof Array?r(i,a):(o===1||o===2)&&a&&typeof a=="object"&&("render"in a?n=a:e=a)}return new yt(t,e,i,n);function r(o,s){for(let a of s)typeof a=="string"?o.push(new et(a)):(a instanceof et||a instanceof yt)&&o.push(a)}}(C=>(C.a=C.bind(void 0,"a"),C.abbr=C.bind(void 0,"abbr"),C.address=C.bind(void 0,"address"),C.area=C.bind(void 0,"area"),C.article=C.bind(void 0,"article"),C.aside=C.bind(void 0,"aside"),C.audio=C.bind(void 0,"audio"),C.b=C.bind(void 0,"b"),C.bdi=C.bind(void 0,"bdi"),C.bdo=C.bind(void 0,"bdo"),C.blockquote=C.bind(void 0,"blockquote"),C.br=C.bind(void 0,"br"),C.button=C.bind(void 0,"button"),C.canvas=C.bind(void 0,"canvas"),C.caption=C.bind(void 0,"caption"),C.cite=C.bind(void 0,"cite"),C.code=C.bind(void 0,"code"),C.col=C.bind(void 0,"col"),C.colgroup=C.bind(void 0,"colgroup"),C.data=C.bind(void 0,"data"),C.datalist=C.bind(void 0,"datalist"),C.dd=C.bind(void 0,"dd"),C.del=C.bind(void 0,"del"),C.dfn=C.bind(void 0,"dfn"),C.div=C.bind(void 0,"div"),C.dl=C.bind(void 0,"dl"),C.dt=C.bind(void 0,"dt"),C.em=C.bind(void 0,"em"),C.embed=C.bind(void 0,"embed"),C.fieldset=C.bind(void 0,"fieldset"),C.figcaption=C.bind(void 0,"figcaption"),C.figure=C.bind(void 0,"figure"),C.footer=C.bind(void 0,"footer"),C.form=C.bind(void 0,"form"),C.h1=C.bind(void 0,"h1"),C.h2=C.bind(void 0,"h2"),C.h3=C.bind(void 0,"h3"),C.h4=C.bind(void 0,"h4"),C.h5=C.bind(void 0,"h5"),C.h6=C.bind(void 0,"h6"),C.header=C.bind(void 0,"header"),C.hr=C.bind(void 0,"hr"),C.i=C.bind(void 0,"i"),C.iframe=C.bind(void 0,"iframe"),C.img=C.bind(void 0,"img"),C.input=C.bind(void 0,"input"),C.ins=C.bind(void 0,"ins"),C.kbd=C.bind(void 0,"kbd"),C.label=C.bind(void 0,"label"),C.legend=C.bind(void 0,"legend"),C.li=C.bind(void 0,"li"),C.main=C.bind(void 0,"main"),C.map=C.bind(void 0,"map"),C.mark=C.bind(void 0,"mark"),C.meter=C.bind(void 0,"meter"),C.nav=C.bind(void 0,"nav"),C.noscript=C.bind(void 0,"noscript"),C.object=C.bind(void 0,"object"),C.ol=C.bind(void 0,"ol"),C.optgroup=C.bind(void 0,"optgroup"),C.option=C.bind(void 0,"option"),C.output=C.bind(void 0,"output"),C.p=C.bind(void 0,"p"),C.param=C.bind(void 0,"param"),C.pre=C.bind(void 0,"pre"),C.progress=C.bind(void 0,"progress"),C.q=C.bind(void 0,"q"),C.rp=C.bind(void 0,"rp"),C.rt=C.bind(void 0,"rt"),C.ruby=C.bind(void 0,"ruby"),C.s=C.bind(void 0,"s"),C.samp=C.bind(void 0,"samp"),C.section=C.bind(void 0,"section"),C.select=C.bind(void 0,"select"),C.small=C.bind(void 0,"small"),C.source=C.bind(void 0,"source"),C.span=C.bind(void 0,"span"),C.strong=C.bind(void 0,"strong"),C.sub=C.bind(void 0,"sub"),C.summary=C.bind(void 0,"summary"),C.sup=C.bind(void 0,"sup"),C.table=C.bind(void 0,"table"),C.tbody=C.bind(void 0,"tbody"),C.td=C.bind(void 0,"td"),C.textarea=C.bind(void 0,"textarea"),C.tfoot=C.bind(void 0,"tfoot"),C.th=C.bind(void 0,"th"),C.thead=C.bind(void 0,"thead"),C.time=C.bind(void 0,"time"),C.title=C.bind(void 0,"title"),C.tr=C.bind(void 0,"tr"),C.track=C.bind(void 0,"track"),C.u=C.bind(void 0,"u"),C.ul=C.bind(void 0,"ul"),C.var_=C.bind(void 0,"var"),C.video=C.bind(void 0,"video"),C.wbr=C.bind(void 0,"wbr")))(te||={});var Ll;(n=>{function t(i){return Qe.createDOMNode(i)}n.realize=t;function e(i,r){let o=Qe.hostMap.get(r)||[],s=Qe.asContentArray(i);Qe.hostMap.set(r,s),Qe.updateContent(r,o,s)}n.render=e})(Ll||={});var Qe;(b=>{b.hostMap=new WeakMap;function e(c){return c?c instanceof Array?c:[c]:[]}b.asContentArray=e;function n(c){let m=arguments[1]||null,f=arguments[2]||null;if(m)m.insertBefore(n(c),f);else{if(c.type==="text")return document.createTextNode(c.content);if(m=document.createElement(c.tag),s(m,c.attrs),c.renderer)return c.renderer.render(m,{attrs:c.attrs,children:c.children}),m;for(let w=0,x=c.children.length;w<x;++w)n(c.children[w],m)}return m}b.createDOMNode=n;function i(c,m,f){if(m===f)return;let w=_(c,m),x=m.slice(),I=c.firstChild,A=f.length;for(let E=0;E<A;++E){if(E>=x.length){n(f[E],c);continue}let S=x[E],v=f[E];if(S===v){I=I.nextSibling;continue}if(S.type==="text"&&v.type==="text"){I.textContent!==v.content&&(I.textContent=v.content),I=I.nextSibling;continue}if(S.type==="text"||v.type==="text"){R.insert(x,E,v),n(v,c,I);continue}if(!S.renderer!=!v.renderer){R.insert(x,E,v),n(v,c,I);continue}let M=v.attrs.key;if(M&&M in w){let u=w[M];u.vNode!==S&&(R.move(x,x.indexOf(u.vNode,E+1),E),c.insertBefore(u.element,I),S=u.vNode,I=u.element)}if(S===v){I=I.nextSibling;continue}let d=S.attrs.key;if(d&&d!==M){R.insert(x,E,v),n(v,c,I);continue}if(S.tag!==v.tag){R.insert(x,E,v),n(v,c,I);continue}a(I,S.attrs,v.attrs),v.renderer?v.renderer.render(I,{attrs:v.attrs,children:v.children}):i(I,S.children,v.children),I=I.nextSibling}r(c,x,A,!0)}b.updateContent=i;function r(c,m,f,w){for(let x=m.length-1;x>=f;--x){let I=m[x],A=w?c.lastChild:c.childNodes[x];I.type==="text"||(I.renderer&&I.renderer.unrender?I.renderer.unrender(A,{attrs:I.attrs,children:I.children}):r(A,I.children,0,!1)),w&&c.removeChild(A)}}let o={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function s(c,m){for(let f in m)f in o||(f.substr(0,2)==="on"?c[f]=m[f]:c.setAttribute(f,m[f]));m.className!==void 0&&c.setAttribute("class",m.className),m.htmlFor!==void 0&&c.setAttribute("for",m.htmlFor),m.dataset&&l(c,m.dataset),m.style&&y(c,m.style)}function a(c,m,f){if(m===f)return;let w;for(w in m)w in o||w in f||(w.substr(0,2)==="on"?c[w]=null:c.removeAttribute(w));for(w in f)w in o||m[w]===f[w]||(w.substr(0,2)==="on"?c[w]=f[w]:c.setAttribute(w,f[w]));m.className!==f.className&&(f.className!==void 0?c.setAttribute("class",f.className):c.removeAttribute("class")),m.htmlFor!==f.htmlFor&&(f.htmlFor!==void 0?c.setAttribute("for",f.htmlFor):c.removeAttribute("for")),m.dataset!==f.dataset&&h(c,m.dataset||{},f.dataset||{}),m.style!==f.style&&T(c,m.style||{},f.style||{})}function l(c,m){for(let f in m)c.setAttribute(`data-${f}`,m[f])}function h(c,m,f){for(let w in m)w in f||c.removeAttribute(`data-${w}`);for(let w in f)m[w]!==f[w]&&c.setAttribute(`data-${w}`,f[w])}function y(c,m){let f=c.style,w;for(w in m)f[w]=m[w]}function T(c,m,f){let w=c.style,x;for(x in m)x in f||(w[x]="");for(x in f)m[x]!==f[x]&&(w[x]=f[x])}function _(c,m){let f=c.firstChild,w=Object.create(null);for(let x of m)x.type==="element"&&x.attrs.key&&(w[x.attrs.key]={vNode:x,element:f}),f=f.nextSibling;return w}})(Qe||={});var Kt={Config:"config",Label:"label"},Cl="untitled",Nt=class extends le.Renderer{constructor(e){super(),this.maximized=e}renderLabel(e){return te.span({className:"p-TabBar-tabLabel",id:Kt.Label},e.title.label||Cl)}renderOther(e,n){return te.span({},n.label||"untitled")}renderInert(){return te.div()}renderTab(e){let n=e.title.caption,i=this.createTabKey(e),r=this.createTabStyle(e),o=this.createTabClass(e),s=this.createTabDataset(e),a=[];return e.onClick&&a.push(te.div({onclick:e.onClick,class:"bookmarks-button"},te.div({class:"bookmarks"}))),te.li({key:i,className:o,title:n,style:r,dataset:s},this.renderDragHandle(),...a,this.renderLabel(e),this.renderCloseIcon())}renderDragHandle(){return te.div({className:"drag-handle"})}renderCloseIcon(){return te.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}};var ne=$e(vt());function Oe(){return hn.keyboardLayout}var cn=function(){function t(e,n,i){i===void 0&&(i=[]),this.name=e,this._codes=n,this._keys=t.extractKeys(n),this._modifierKeys=t.convertToKeySet(i)}return t.prototype.keys=function(){return Object.keys(this._keys)},t.prototype.isValidKey=function(e){return e in this._keys},t.prototype.isModifierKey=function(e){return e in this._modifierKeys},t.prototype.keyForKeydownEvent=function(e){return this._codes[e.keyCode]||""},t}();(function(t){function e(i){var r=Object.create(null);for(var o in i)r[i[o]]=!0;return r}t.extractKeys=e;function n(i){for(var r=Object(null),o=0,s=i.length;o<s;++o)r[i[o]]=!0;return r}t.convertToKeySet=n})(cn||(cn={}));var Al=new cn("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),hn;(function(t){t.keyboardLayout=Al})(hn||(hn={}));var pe=class{get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Object.keys(this._commands)}hasCommand(e){return e in this._commands}addCommand(e,n){if(e in this._commands)throw new Error(`Command '${e}' already registered.`);return this._commands[e]=Ve.createCommand(n),this._commandChanged.emit({id:e,type:"added"}),new Le(()=>{delete this._commands[e],this._commandChanged.emit({id:e,type:"removed"})})}notifyCommandChanged(e){if(e!==void 0&&!(e in this._commands))throw new Error(`Command '${e}' is not registered.`);this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})}describedBy(e){let n=this._commands[e];return n?n.describedBy||{args:null}:{args:null}}label(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.label.call(void 0,n):""}mnemonic(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.mnemonic.call(void 0,n):-1}icon(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.icon.call(void 0,n):""}iconClass(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.iconClass.call(void 0,n):""}iconLabel(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.iconLabel.call(void 0,n):""}caption(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.caption.call(void 0,n):""}usage(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.usage.call(void 0,n):""}className(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.className.call(void 0,n):""}dataset(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.dataset.call(void 0,n):{}}isEnabled(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.isEnabled.call(void 0,n):!1}isToggled(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.isToggled.call(void 0,n):!1}isToggleable(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.isToggleable:!1}isVisible(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];return i?i.isVisible.call(void 0,n):!1}execute(e,n=ne.JSONExt.emptyObject){let i=this._commands[e];if(!i)return Promise.reject(new Error(`Command '${e}' not registered.`));let r;try{r=i.execute.call(void 0,n)}catch(s){r=Promise.reject(s)}let o=Promise.resolve(r);return this._commandExecuted.emit({id:e,args:n,result:o}),o}addKeyBinding(e){let n=Ve.createKeyBinding(e);return this._keyBindings.push(n),this._keyBindingChanged.emit({binding:n,type:"added"}),new Le(()=>{R.removeFirstOf(this._keyBindings,n),this._keyBindingChanged.emit({binding:n,type:"removed"})})}processKeydownEvent(e){if(this._replaying||pe.isModifierKeyPressed(e))return;let n=pe.keystrokeForKeydownEvent(e);if(!n){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(n);let{exact:i,partial:r}=Ve.matchKeyBinding(this._keyBindings,this._keystrokes,e);if(!i&&!r){this._replayKeydownEvents(),this._clearPendingState();return}if(e.preventDefault(),e.stopPropagation(),i&&!r){this._executeKeyBinding(i),this._clearPendingState();return}i&&(this._exactKeyMatch=i),this._keydownEvents.push(e),this._startTimer()}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},Ve.CHORD_TIMEOUT)}_clearTimer(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Ve.replayKeyEvent),this._replaying=!1)}_executeKeyBinding(e){let{command:n,args:i}=e;if(!this.hasCommand(n)||!this.isEnabled(n,i)){let r=this.hasCommand(n)?"enabled":"registered",s=`Cannot execute key binding '${e.keys.join(", ")}':`,a=`command '${n}' is not ${r}.`;console.warn(`${s} ${a}`);return}this.execute(n,i)}_clearPendingState(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}_timerID=0;_replaying=!1;_keystrokes=[];_keydownEvents=[];_keyBindings=[];_exactKeyMatch=null;_commands=Object.create(null);_commandChanged=new W(this);_commandExecuted=new W(this);_keyBindingChanged=new W(this)};(s=>{function t(a){let l="",h=!1,y=!1,T=!1,_=!1;for(let b of a.split(/\s+/))b==="Accel"?j.IS_MAC?y=!0:T=!0:b==="Alt"?h=!0:b==="Cmd"?y=!0:b==="Ctrl"?T=!0:b==="Shift"?_=!0:b.length>0&&(l=b);return{cmd:y,ctrl:T,alt:h,shift:_,key:l}}s.parseKeystroke=t;function e(a){let l="",h=t(a);return h.ctrl&&(l+="Ctrl "),h.alt&&(l+="Alt "),h.shift&&(l+="Shift "),h.cmd&&j.IS_MAC&&(l+="Cmd "),l+h.key}s.normalizeKeystroke=e;function n(a){let l;return j.IS_WIN?l=a.winKeys||a.keys:j.IS_MAC?l=a.macKeys||a.keys:l=a.linuxKeys||a.keys,l.map(e)}s.normalizeKeys=n;function i(a){return typeof a=="string"?l(a):a.map(l).join(", ");function l(h){let y=[],T=j.IS_MAC?" ":"+",_=t(h);return _.ctrl&&y.push("Ctrl"),_.alt&&y.push("Alt"),_.shift&&y.push("Shift"),j.IS_MAC&&_.cmd&&y.push("Cmd"),y.push(_.key),y.map(Ve.formatKey).join(T)}}s.formatKeystroke=i;function r(a){let l=Oe(),h=l.keyForKeydownEvent(a);return l.isModifierKey(h)}s.isModifierKeyPressed=r;function o(a){let l=Oe(),h=l.keyForKeydownEvent(a);if(!h||l.isModifierKey(h))return"";let y=[];return a.ctrlKey&&y.push("Ctrl"),a.altKey&&y.push("Alt"),a.shiftKey&&y.push("Shift"),a.metaKey&&j.IS_MAC&&y.push("Cmd"),y.push(h),y.join(" ")}s.keystrokeForKeydownEvent=o})(pe||={});var Ve;(A=>{A.CHORD_TIMEOUT=1e3;function e(E){let S,v;return!E.icon||typeof E.icon=="string"?(v=c(E.iconClass||E.icon,l),S=v):(v=c(E.iconClass,l),S=c(E.icon,b)),{execute:E.execute,describedBy:{args:null,...E.describedBy},label:c(E.label,l),mnemonic:c(E.mnemonic,h),icon:S,iconClass:v,iconLabel:c(E.iconLabel,l),caption:c(E.caption,l),usage:c(E.usage,l),className:c(E.className,l),dataset:c(E.dataset,_),isEnabled:E.isEnabled||y,isToggled:E.isToggled||T,isToggleable:E.isToggleable||!!E.isToggled,isVisible:E.isVisible||y}}A.createCommand=e;function n(E){return{keys:pe.normalizeKeys(E),selector:m(E),command:E.command,args:E.args||ne.JSONExt.emptyObject}}A.createKeyBinding=n;function i(E,S,v){let M=null,d=!1,u=1/0,g=0;for(let k=0,p=E.length;k<p;++k){let L=E[k],B=w(L.keys,S);if(B===f.None)continue;if(B===f.Partial){!d&&x(L.selector,v)!==-1&&(d=!0);continue}let O=x(L.selector,v);if(O===-1||O>u)continue;let H=xe.calculateSpecificity(L.selector);(!M||O<u||H>=g)&&(M=L,u=O,g=H)}return{exact:M,partial:d}}A.matchKeyBinding=i;function r(E){E.target.dispatchEvent(I(E))}A.replayKeyEvent=r;function o(E){return j.IS_MAC?s.hasOwnProperty(E)?s[E]:E:a.hasOwnProperty(E)?a[E]:E}A.formatKey=o;let s={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},a={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},l=()=>"",h=()=>-1,y=()=>!0,T=()=>!1,_=()=>({}),b=()=>{};function c(E,S){return E===void 0?S:typeof E=="function"?E:()=>E}function m(E){if(E.selector.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${E.selector}`);if(!xe.isValid(E.selector))throw new Error(`Invalid selector: ${E.selector}`);return E.selector}let f;(M=>(M[M.None=0]="None",M[M.Exact=1]="Exact",M[M.Partial=2]="Partial"))(f||={});function w(E,S){if(E.length<S.length)return 0;for(let v=0,M=S.length;v<M;++v)if(E[v]!==S[v])return 0;return E.length>S.length?2:1}function x(E,S){let v=S.target,M=S.currentTarget;for(let d=0;v!==null;v=v.parentElement,++d){if(v.hasAttribute("data-lm-suppress-shortcuts")||v.hasAttribute("data-p-suppress-shortcuts"))return-1;if(xe.matches(v,E))return d;if(v===M)return-1}return-1}function I(E){let S=document.createEvent("Event"),v=E.bubbles||!0,M=E.cancelable||!0;return S.initEvent(E.type||"keydown",v,M),S.key=E.key||"",S.keyCode=E.keyCode||0,S.which=E.keyCode||0,S.ctrlKey=E.ctrlKey||!1,S.altKey=E.altKey||!1,S.shiftKey=E.shiftKey||!1,S.metaKey=E.metaKey||!1,S.view=E.view||window,S}})(Ve||={});var re=$e(vt());var mn=function(){return mn=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},mn.apply(this,arguments)},_t=function(){function t(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new W(this),this._commandExecuted=new W(this),this._keyBindingChanged=new W(this)}return Object.defineProperty(t.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),t.prototype.listCommands=function(){return Object.keys(this._commands)},t.prototype.hasCommand=function(e){return e in this._commands},t.prototype.addCommand=function(e,n){var i=this;if(e in this._commands)throw new Error("Command '"+e+"' already registered.");return this._commands[e]=Pe.createCommand(n),this._commandChanged.emit({id:e,type:"added"}),new Le(function(){delete i._commands[e],i._commandChanged.emit({id:e,type:"removed"})})},t.prototype.notifyCommandChanged=function(e){if(e!==void 0&&!(e in this._commands))throw new Error("Command '"+e+"' is not registered.");this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})},t.prototype.describedBy=function(e){var n=this._commands[e];return n?n.describedBy||{args:null}:{args:null}},t.prototype.label=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.label.call(void 0,n):""},t.prototype.mnemonic=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.mnemonic.call(void 0,n):-1},t.prototype.icon=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.icon.call(void 0,n):""},t.prototype.iconClass=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.iconClass.call(void 0,n):""},t.prototype.iconLabel=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.iconLabel.call(void 0,n):""},t.prototype.caption=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.caption.call(void 0,n):""},t.prototype.usage=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.usage.call(void 0,n):""},t.prototype.className=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.className.call(void 0,n):""},t.prototype.dataset=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.dataset.call(void 0,n):{}},t.prototype.isEnabled=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.isEnabled.call(void 0,n):!1},t.prototype.isToggled=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.isToggled.call(void 0,n):!1},t.prototype.isToggleable=function(e,n){var i=this._commands[e];return i?i.isToggleable:!1},t.prototype.isVisible=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];return i?i.isVisible.call(void 0,n):!1},t.prototype.execute=function(e,n){n===void 0&&(n=re.JSONExt.emptyObject);var i=this._commands[e];if(!i)return Promise.reject(new Error("Command '"+e+"' not registered."));var r;try{r=i.execute.call(void 0,n)}catch(s){r=Promise.reject(s)}var o=Promise.resolve(r);return this._commandExecuted.emit({id:e,args:n,result:o}),o},t.prototype.addKeyBinding=function(e){var n=this,i=Pe.createKeyBinding(e);return this._keyBindings.push(i),this._keyBindingChanged.emit({binding:i,type:"added"}),new Le(function(){R.removeFirstOf(n._keyBindings,i),n._keyBindingChanged.emit({binding:i,type:"removed"})})},t.prototype.processKeydownEvent=function(e){if(!(this._replaying||t.isModifierKeyPressed(e))){var n=t.keystrokeForKeydownEvent(e);if(!n){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(n);var i=Pe.matchKeyBinding(this._keyBindings,this._keystrokes,e),r=i.exact,o=i.partial;if(!r&&!o){this._replayKeydownEvents(),this._clearPendingState();return}if(e.preventDefault(),e.stopPropagation(),r&&!o){this._executeKeyBinding(r),this._clearPendingState();return}r&&(this._exactKeyMatch=r),this._keydownEvents.push(e),this._startTimer()}},t.prototype._startTimer=function(){var e=this;this._clearTimer(),this._timerID=window.setTimeout(function(){e._onPendingTimeout()},Pe.CHORD_TIMEOUT)},t.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},t.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Pe.replayKeyEvent),this._replaying=!1)},t.prototype._executeKeyBinding=function(e){var n=e.command,i=e.args;if(!this.hasCommand(n)||!this.isEnabled(n,i)){var r=this.hasCommand(n)?"enabled":"registered",o=e.keys.join(", "),s="Cannot execute key binding '"+o+"':",a="command '"+n+"' is not "+r+".";console.warn(s+" "+a);return}this.execute(n,i)},t.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},t.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},t}();(function(t){function e(a){for(var l="",h=!1,y=!1,T=!1,_=!1,b=0,c=a.split(/\s+/);b<c.length;b++){var m=c[b];m==="Accel"?j.IS_MAC?y=!0:T=!0:m==="Alt"?h=!0:m==="Cmd"?y=!0:m==="Ctrl"?T=!0:m==="Shift"?_=!0:m.length>0&&(l=m)}return{cmd:y,ctrl:T,alt:h,shift:_,key:l}}t.parseKeystroke=e;function n(a){var l="",h=e(a);return h.ctrl&&(l+="Ctrl "),h.alt&&(l+="Alt "),h.shift&&(l+="Shift "),h.cmd&&j.IS_MAC&&(l+="Cmd "),l+h.key}t.normalizeKeystroke=n;function i(a){var l;return j.IS_WIN?l=a.winKeys||a.keys:j.IS_MAC?l=a.macKeys||a.keys:l=a.linuxKeys||a.keys,l.map(n)}t.normalizeKeys=i;function r(a){return typeof a=="string"?l(a):a.map(l).join(", ");function l(h){var y=[],T=j.IS_MAC?" ":"+",_=e(h);return _.ctrl&&y.push("Ctrl"),_.alt&&y.push("Alt"),_.shift&&y.push("Shift"),j.IS_MAC&&_.cmd&&y.push("Cmd"),y.push(_.key),y.map(Pe.formatKey).join(T)}}t.formatKeystroke=r;function o(a){var l=Oe(),h=l.keyForKeydownEvent(a);return l.isModifierKey(h)}t.isModifierKeyPressed=o;function s(a){var l=Oe(),h=l.keyForKeydownEvent(a);if(!h||l.isModifierKey(h))return"";var y=[];return a.ctrlKey&&y.push("Ctrl"),a.altKey&&y.push("Alt"),a.shiftKey&&y.push("Shift"),a.metaKey&&j.IS_MAC&&y.push("Cmd"),y.push(h),y.join(" ")}t.keystrokeForKeydownEvent=s})(_t||(_t={}));var Pe;(function(t){t.CHORD_TIMEOUT=1e3;function e(I){var A,E;return!I.icon||typeof I.icon=="string"?(E=c(I.iconClass||I.icon,l),A=E):(E=c(I.iconClass,l),A=c(I.icon,b)),{execute:I.execute,describedBy:mn({args:null},I.describedBy),label:c(I.label,l),mnemonic:c(I.mnemonic,h),icon:A,iconClass:E,iconLabel:c(I.iconLabel,l),caption:c(I.caption,l),usage:c(I.usage,l),className:c(I.className,l),dataset:c(I.dataset,_),isEnabled:I.isEnabled||y,isToggled:I.isToggled||T,isToggleable:I.isToggleable||!!I.isToggled,isVisible:I.isVisible||y}}t.createCommand=e;function n(I){return{keys:_t.normalizeKeys(I),selector:m(I),command:I.command,args:I.args||re.JSONExt.emptyObject}}t.createKeyBinding=n;function i(I,A,E){for(var S=null,v=!1,M=1/0,d=0,u=0,g=I.length;u<g;++u){var k=I[u],p=f(k.keys,A);if(p!==0){if(p===2){!v&&w(k.selector,E)!==-1&&(v=!0);continue}var L=w(k.selector,E);if(!(L===-1||L>M)){var B=xe.calculateSpecificity(k.selector);(!S||L<M||B>=d)&&(S=k,M=L,d=B)}}}return{exact:S,partial:v}}t.matchKeyBinding=i;function r(I){I.target.dispatchEvent(x(I))}t.replayKeyEvent=r;function o(I){return j.IS_MAC?s.hasOwnProperty(I)?s[I]:I:a.hasOwnProperty(I)?a[I]:I}t.formatKey=o;var s={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},a={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},l=function(){return""},h=function(){return-1},y=function(){return!0},T=function(){return!1},_=function(){return{}},b=function(){};function c(I,A){return I===void 0?A:typeof I=="function"?I:function(){return I}}function m(I){if(I.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+I.selector);if(!xe.isValid(I.selector))throw new Error("Invalid selector: "+I.selector);return I.selector}function f(I,A){if(I.length<A.length)return 0;for(var E=0,S=A.length;E<S;++E)if(I[E]!==A[E])return 0;return I.length>A.length?2:1}function w(I,A){for(var E=A.target,S=A.currentTarget,v=0;E!==null;E=E.parentElement,++v){if(E.hasAttribute("data-lm-suppress-shortcuts")||E.hasAttribute("data-p-suppress-shortcuts"))return-1;if(xe.matches(E,I))return v;if(E===S)return-1}return-1}function x(I){var A=document.createEvent("Event"),E=I.bubbles||!0,S=I.cancelable||!0;return A.initEvent(I.type||"keydown",E,S),A.key=I.key||"",A.keyCode=I.keyCode||0,A.which=I.keyCode||0,A.ctrlKey=I.ctrlKey||!1,A.altKey=I.altKey||!1,A.shiftKey=I.shiftKey||!1,A.metaKey=I.metaKey||!1,A.view=I.view||window,A}})(Pe||(Pe={}));var pn=$e(vt());var ue=class extends z{constructor(e){super({node:de.createNode()}),this.addClass("lm-Menu"),this.addClass("p-Menu"),this.setFlag(z.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||ue.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}commands;renderer;get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}get leafMenu(){let e=this;for(;e._childMenu;)e=e._childMenu;return e}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(e){this.activeIndex=e?this._items.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._items.length)&&(e=-1),e!==-1&&!de.canActivate(this._items[e])&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let e=this._items.length,n=this._activeIndex,i=n<e-1?n+1:0,r=i===0?e-1:i-1;this.activeIndex=R.findFirstIndex(this._items,de.canActivate,i,r)}activatePreviousItem(){let e=this._items.length,n=this._activeIndex,i=n<=0?e-1:n-1,r=i===e-1?0:i+1;this.activeIndex=R.findLastIndex(this._items,de.canActivate,i,r)}triggerActiveItem(){if(!this.isAttached)return;let e=this.activeItem;if(!e)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),e.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();let{command:n,args:i}=e;this.commands.isEnabled(n,i)?this.commands.execute(n,i):console.log(`Command '${n}' is disabled.`)}addItem(e){return this.insertItem(this._items.length,e)}insertItem(e,n){this.isAttached&&this.close(),this.activeIndex=-1;let i=Math.max(0,Math.min(e,this._items.length)),r=de.createItem(this,n);return R.insert(this._items,i,r),this.update(),r}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){this.isAttached&&this.close(),this.activeIndex=-1,R.removeAt(this._items,e)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())}open(e,n,i={}){if(this.isAttached)return;let r=i.forceX||!1,o=i.forceY||!1;de.openRootMenu(this,e,n,r,o),this.activate()}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(e){this.isAttached&&this.node.focus()}onUpdateRequest(e){let n=this._items,i=this.renderer,r=this._activeIndex,o=de.computeCollapsed(n),s=new Array(n.length);for(let a=0,l=n.length;a<l;++a){let h=n[a],y=a===r,T=o[a];s[a]=i.renderItem({item:h,active:y,collapsed:T,onfocus:()=>{this.activeIndex=a}})}Re.render(s,this.contentNode)}onCloseRequest(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let n=this._childMenu;n&&(this._childIndex=-1,this._childMenu=null,n._parentMenu=null,n.close());let i=this._parentMenu;i&&(this._parentMenu=null,i._childIndex=-1,i._childMenu=null,i.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(e)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation();let n=e.keyCode;if(n===13){this.triggerActiveItem();return}if(n===27){this.close();return}if(n===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(n===38){this.activatePreviousItem();return}if(n===39){let s=this.activeItem;s&&s.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(n===40){this.activateNextItem();return}let i=Oe().keyForKeydownEvent(e);if(!i)return;let r=this._activeIndex+1,o=de.findMnemonic(this._items,i,r);o.index!==-1&&!o.multiple?(this.activeIndex=o.index,this.triggerActiveItem()):o.index!==-1?this.activeIndex=o.index:o.auto!==-1&&(this.activeIndex=o.auto)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(e){let n=R.findFirstIndex(this.contentNode.children,r=>U.hitTest(r,e.clientX,e.clientY));if(n===this._activeIndex)return;if(this.activeIndex=n,n=this.activeIndex,n===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();let i=this.activeItem;!i||i.type!=="submenu"||!i.submenu||this._startOpenTimer()}_evtMouseEnter(e){for(let n=this._parentMenu;n;n=n._parentMenu)n._cancelOpenTimer(),n._cancelCloseTimer(),n.activeIndex=n._childIndex}_evtMouseLeave(e){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}let{clientX:n,clientY:i}=e;if(U.hitTest(this._childMenu.node,n,i)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()}_evtMouseDown(e){this._parentMenu||(de.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())}_openChildMenu(e=!1){let n=this.activeItem;if(!n||n.type!=="submenu"||!n.submenu){this._closeChildMenu();return}let i=n.submenu;if(i===this._childMenu)return;ue.saveWindowData(),this._closeChildMenu(),this._childMenu=i,this._childIndex=this._activeIndex,i._parentMenu=this,P.sendMessage(this,z.Msg.UpdateRequest);let r=this.contentNode.children[this._activeIndex];de.openSubmenu(i,r),e&&(i.activeIndex=-1,i.activateNextItem()),i.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){this._openTimerID===0&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},de.TIMER_DELAY))}_startCloseTimer(){this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},de.TIMER_DELAY))}_cancelOpenTimer(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){de.saveWindowData()}_childIndex=-1;_activeIndex=-1;_openTimerID=0;_closeTimerID=0;_items=[];_childMenu=null;_parentMenu=null;_aboutToClose=new W(this);_menuRequested=new W(this)};(n=>{class t{renderItem(r){let o=this.createItemClass(r),s=this.createItemDataset(r),a=this.createItemARIA(r);return Z.li({className:o,dataset:s,tabindex:"0",onfocus:r.onfocus,...a},this.renderIcon(r),this.renderLabel(r),this.renderShortcut(r),this.renderSubmenu(r))}renderIcon(r){let o=this.createIconClass(r);return typeof r.item.icon=="string"?Z.div({className:o},r.item.iconLabel):Z.div({className:o},r.item.icon,r.item.iconLabel)}renderLabel(r){let o=this.formatLabel(r);return Z.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},o)}renderShortcut(r){let o=this.formatShortcut(r);return Z.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},o)}renderSubmenu(r){return Z.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}createItemClass(r){let o="lm-Menu-item";o+=" p-Menu-item",r.item.isEnabled||(o+=" lm-mod-disabled",o+=" p-mod-disabled"),r.item.isToggled&&(o+=" lm-mod-toggled",o+=" p-mod-toggled"),r.item.isVisible||(o+=" lm-mod-hidden",o+=" p-mod-hidden"),r.active&&(o+=" lm-mod-active",o+=" p-mod-active"),r.collapsed&&(o+=" lm-mod-collapsed",o+=" p-mod-collapsed");let s=r.item.className;return s&&(o+=` ${s}`),o}createItemDataset(r){let o,{type:s,command:a,dataset:l}=r.item;return s==="command"?o={...l,type:s,command:a}:o={...l,type:s},o}createIconClass(r){let o="lm-Menu-itemIcon";o+=" p-Menu-itemIcon";let s=r.item.iconClass;return s?`${o} ${s}`:o}createItemARIA(r){let o={};switch(r.item.type){case"separator":o.role="presentation";break;case"submenu":o["aria-haspopup"]="true",r.item.isEnabled||(o["aria-disabled"]="true");break;default:r.item.isEnabled||(o["aria-disabled"]="true"),o.role="menuitem"}return o}formatLabel(r){let{label:o,mnemonic:s}=r.item;if(s<0||s>=o.length)return o;let a=o.slice(0,s),l=o.slice(s+1),h=o[s],y=Z.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},h);return[a,y,l]}formatShortcut(r){let o=r.item.keyBinding;return o?_t.formatKeystroke(o.keys):null}}n.Renderer=t,n.defaultRenderer=new t})(ue||={});var de;(f=>{f.TIMER_DELAY=300,f.SUBMENU_OVERLAP=3;let n=null,i=0;function r(){return i>0?(i--,n):T()}function o(){n=T(),i++}f.saveWindowData=o;function s(){let w=document.createElement("div"),x=document.createElement("ul");return x.className="lm-Menu-content",x.classList.add("p-Menu-content"),w.appendChild(x),x.setAttribute("role","menu"),w.tabIndex=0,w}f.createNode=s;function a(w){return w.type!=="separator"&&w.isEnabled&&w.isVisible}f.canActivate=a;function l(w,x){return new m(w.commands,x)}f.createItem=l;function h(w,x,I){for(let A=w;A;A=A.childMenu)if(U.hitTest(A.node,x,I))return!0;return!1}f.hitTestMenus=h;function y(w){let x=new Array(w.length);R.fill(x,!1);let I=0,A=w.length;for(;I<A;++I){let v=w[I];if(!!v.isVisible){if(v.type!=="separator")break;x[I]=!0}}let E=A-1;for(;E>=0;--E){let v=w[E];if(!!v.isVisible){if(v.type!=="separator")break;x[E]=!0}}let S=!1;for(;++I<E;){let v=w[I];!v.isVisible||(v.type!=="separator"?S=!1:S?x[I]=!0:S=!0)}return x}f.computeCollapsed=y;function T(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}function _(w,x,I,A,E){let S=r(),v=S.pageXOffset,M=S.pageYOffset,d=S.clientWidth,u=S.clientHeight;P.sendMessage(w,z.Msg.UpdateRequest);let g=u-(E?I:0),k=w.node,p=k.style;p.opacity="0",p.maxHeight=`${g}px`,z.attach(w,document.body);let{width:L,height:B}=k.getBoundingClientRect();!A&&x+L>v+d&&(x=v+d-L),!E&&I+B>M+u&&(I>M+u?I=M+u-B:I=I-B),p.transform=`translate(${Math.max(0,x)}px, ${Math.max(0,I)}px`,p.opacity="1"}f.openRootMenu=_;function b(w,x){let I=r(),A=I.pageXOffset,E=I.pageYOffset,S=I.clientWidth,v=I.clientHeight;P.sendMessage(w,z.Msg.UpdateRequest);let M=v,d=w.node,u=d.style;u.opacity="0",u.maxHeight=`${M}px`,z.attach(w,document.body);let{width:g,height:k}=d.getBoundingClientRect(),p=U.boxSizing(w.node),L=x.getBoundingClientRect(),B=L.right-3;B+g>A+S&&(B=L.left+3-g);let O=L.top-p.borderTop-p.paddingTop;O+k>E+v&&(O=L.bottom+p.borderBottom+p.paddingBottom-k),u.transform=`translate(${Math.max(0,B)}px, ${Math.max(0,O)}px`,u.opacity="1"}f.openSubmenu=b;function c(w,x,I){let A=-1,E=-1,S=!1,v=x.toUpperCase();for(let M=0,d=w.length;M<d;++M){let u=(M+I)%d,g=w[u];if(!a(g))continue;let k=g.label;if(k.length===0)continue;let p=g.mnemonic;if(p>=0&&p<k.length){k[p].toUpperCase()===v&&(A===-1?A=u:S=!0);continue}E===-1&&k[0].toUpperCase()===v&&(E=u)}return{index:A,multiple:S,auto:E}}f.findMnemonic=c;class m{constructor(x,I){this._commands=x,this.type=I.type||"command",this.command=I.command||"",this.args=I.args||pn.JSONExt.emptyObject,this.submenu=I.submenu||null}type;command;args;submenu;get label(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""}get mnemonic(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return this.type==="command"?this._commands.icon(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.icon:this.iconClass}get iconClass(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""}get className(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""}get dataset(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get isToggled(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1}get isVisible(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get keyBinding(){if(this.type==="command"){let{command:x,args:I}=this;return R.findLastValue(this._commands.keyBindings,A=>A.command===x&&pn.JSONExt.deepEqual(A.args,I))||null}return null}_commands}})(de||={});var tt=class extends ue.Renderer{formatLabel(e){let{label:n,mnemonic:i}=e.item;if(i<0||i>=n.length)return n;let r=n.slice(0,i),o=n.slice(i+1),s=n[i],a=te.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},s);return[r,a,o]}renderLabel(e){let n=this.formatLabel(e);return te.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},n)}renderSubmenu(e){return te.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}renderItem(e){let n=this.createItemClass(e),i=this.createItemDataset(e),r=this.createItemARIA(e);return te.li({className:n,dataset:i,tabindex:"0",onfocus:e.onfocus,...r},this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))}};var jt=class extends le{constructor(e,n={}){super(n),this._addEventListeners(),this.__content_node__,this._workspace=e}onUpdateRequest(e){this.__content_node__=this.contentNode;let n=this._titles,i=this.renderer,r=this.currentTitle,o=new Array;for(let s=0,a=n.length;s<a;++s){let l=n[s],h=l===r,y=n.filter(_=>_!==r),T;y.length>0&&(T=this.onClick.bind(this,y,s)),h?o[s]=i.renderTab({title:l,zIndex:n.length+1,current:h,onClick:T}):o[s]=i.renderInert()}Re.render(o,this.contentNode),this._check_shade()}onClick(e,n,i){let r=new pe,o=new tt(null);this._menu=new ue({commands:r,renderer:o}),this._menu.addClass("perspective-workspace-menu"),this._menu.dataset.minwidth=this._titles[n];for(let a of e)this._menu.addItem({command:"tabbar:switch",args:{title:a}});r.addCommand("tabbar:switch",{execute:async({title:a})=>{let l=this._titles.findIndex(h=>h===a);this.currentTitle=a,this.tabActivateRequested.emit({index:l,title:a})},label:({title:a})=>a.label||"untitled",mnemonic:0});let s=i.target.getBoundingClientRect();this._menu.open(s.x,s.y+s.height),this._menu.aboutToClose.connect(()=>{this._menu=void 0}),i.preventDefault(),i.stopPropagation()}_check_shade(){Array.from(this.contentNode.children).filter(e=>e.classList.contains("settings_open")&&e.classList.contains("p-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(e){switch(this._menu?.close(),this.retargetEvent(e),e.type){case"contextmenu":let n=this.currentTitle.owner;this.parent.parent.parent.showContextMenu(n,e),e.preventDefault();break;case"mousedown":if(e.target.id===Kt.Label)return;break;case"pointerdown":if(e.target.id===Kt.Label){let i=this.contentNode.children,r=Qt.findFirstIndex(i,s=>un.hitTest(s,e.clientX,e.clientY));if(r<0)break;let o=this.titles[r];this._workspace._maximize(o.owner),requestAnimationFrame(()=>o.owner.viewer.toggleConfig());return}break}super.handleEvent(e)}retargetEvent(e){return Object.defineProperty(e,"target",{value:e.composedPath()[0],enumerable:!0}),e}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}};var fn=class extends Te.Renderer{constructor(e){super(),this._workspace=e}createTabBar(){let e=new jt(this._workspace,{renderer:new Nt});return e.addClass("p-DockPanel-tabBar"),e}},oe=class extends Te{constructor(e){super({renderer:new fn(e)}),this._renderer.dock=this}_onTabDetachRequested(e,n){super._onTabDetachRequested(e,n);let i=e.titles[n.index].owner,r=this.layout.saveLayout();pt(this.layout.widgets()).length>1&&this.layout.removeWidget(i),i.addClass("widget-blur"),this._drag&&this._drag._promise.then(()=>{i.node.isConnected||this.layout.restoreLayout(r),i.removeClass("widget-blur")})}static getWidgets(e){return e?.hasOwnProperty("main")?oe.getWidgets(e.main):e?.children?e.children.flatMap(n=>oe.getWidgets(n)):e?.widgets?e.widgets:[]}static mapWidgets(e,n){return n.main?n.main=oe.mapWidgets(e,n.main):n.children?n.children=n.children.map(i=>oe.mapWidgets(e,i)):n.widgets&&(n.widgets=n.widgets.map(i=>e(i))),n}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}};var ci=(t,e)=>{let n=new pe;return n.addCommand("workspace:export",{execute:async i=>{let r=document.createElement("perspective-export-menu");t.apply_indicator_theme(),r.unsafe_set_model(await i.widget.viewer.unsafeGetModel()),r.open(e),i.init_overlay(),r.addEventListener("blur",()=>{i.contextMenu.aboutToClose.emit({})})},isEnabled:i=>{if(i.contextMenu.node.isConnected){let r=i.contextMenu.node.getBoundingClientRect();e.style.top=r.top+"px",e.style.left=r.left+"px"}return!0},label:"Export",mnemonic:0}),n.addCommand("workspace:copy",{execute:async i=>{let r=document.createElement("perspective-copy-menu");t.apply_indicator_theme(),r.unsafe_set_model(await i.widget.viewer.unsafeGetModel()),r.open(e),i.init_overlay(),r.addEventListener("blur",()=>{i.contextMenu.aboutToClose.emit({})})},isEnabled:i=>{if(i.contextMenu.node.isConnected){let r=i.contextMenu.node.getBoundingClientRect();e.style.top=r.top+"px",e.style.left=r.left+"px"}return!0},label:"Copy",mnemonic:0}),n.addCommand("workspace:new",{execute:i=>{let r=t._createWidgetAndNode({config:{table:i.table}});t.dockpanel.addWidget(r,{mode:"split-right",ref:i.widget})},label:i=>i.table}),n.addCommand("workspace:newview",{execute:async i=>{let r=await i.target_widget.save(),o=t._createWidgetAndNode({config:r});t.dockpanel.addWidget(o,{mode:"split-right",ref:i.widget})},isVisible:i=>i.target_widget.title.label!=="",label:i=>i.target_widget.title.label||"untitled"}),n.addCommand("workspace:reset",{execute:i=>i.widget.viewer.reset(),label:"Reset",mnemonic:0}),n.addCommand("workspace:duplicate",{execute:({widget:i})=>t.duplicate(i),isVisible:i=>i.widget.parent===t.dockpanel,label:"Duplicate",mnemonic:0}),n.addCommand("workspace:master",{execute:i=>t.toggleMasterDetail(i.widget),isVisible:()=>t.mode===He.GLOBAL_FILTERS,label:i=>i.widget.parent===t.dockpanel?"Create Global Filter":"Remove Global Filter",mnemonic:0}),n.addCommand("workspace:close",{execute:i=>{i.widget.close()},label:()=>"Close",mnemonic:0}),n.addCommand("workspace:help",{label:"Shift+Click for Browser Menu",isEnabled:()=>!1}),n.add,n};var xt=class extends z{constructor({viewer:e,node:n}){super({node:n}),this.viewer=e,this.master=!1}set master(e){e!==void 0&&this._master!==e&&(e?(this.viewer.classList.add("workspace-master-widget"),this.viewer.classList.remove("workspace-detail-widget"),this.viewer.toggleAttribute?.("selectable",!0)):(this.viewer.classList.add("workspace-detail-widget"),this.viewer.classList.remove("workspace-master-widget"),this.viewer.removeAttribute("selectable")),this._master=e)}get master(){return this._master}get name(){return console.error("Test"),this._title}set linked(e){e!==void 0&&(e?this.viewer.setAttribute("linked",""):this.viewer.removeAttribute("linked"))}get linked(){return this.viewer.hasAttribute("linked")}toggleConfig(){return this.viewer.toggleConfig()}async load(e){this._is_table_loaded=!0;let n=[this.viewer.load(e)];this._restore_config&&n.push(this._restore_config()),await Promise.all(n)}restore(e){let{master:n,table:i,linked:r,name:o,editable:s,selectable:a,...l}=e;this.master=n,this.linked=r,this._title=e.title,this.title.label=e.title,i&&this.viewer.setAttribute("table",i),a&&this.viewer.setAttribute("selectable",a),s&&this.viewer.setAttribute("editable",s);let h=()=>this.viewer.restore({...l});if(this._is_table_loaded)return h();this._restore_config=h}async save(){let e={...await this.viewer.save(),master:this.master,table:this.viewer.getAttribute("table"),linked:this.linked};return this.viewer.hasAttribute("selectable")&&(e.selectable=this.viewer.getAttribute("selectable")),this.viewer.hasAttribute("editable")&&(e.editable=this.viewer.getAttribute("editable")),e}removeClass(e){super.removeClass(e),this.viewer&&this.viewer.classList.remove(e)}async onCloseRequest(e){super.onCloseRequest(e),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}};var rl=$e(js(),1),ol=$e(il(),1),Gn=[1,3],Ig=0,ht={LEFT:"left",RIGHT:"right"},He={GLOBAL_FILTERS:"globalFilters",LINKED:"linked"},$n=class extends Map{set(e,n){this._set_listener?.(e,n),super.set(e,n)}get(e){return super.get(e)}delete(e){return this._delete_listener?.(e)?super.delete(e):!1}addSetListener(e){this._set_listener=e}addDeleteListener(e){this._delete_listener=e}},Bt=class extends ze{constructor(e,n={}){super({orientation:"horizontal"}),this.addClass("perspective-workspace"),this.dockpanel=new oe(this),this.detailPanel=new Ze,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new ze({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>this.workspaceUpdated()),this.addWidget(this.detailPanel),this.spacing=8,this.element=e,this._side=n.side||ht.LEFT,this.mode=n.mode||He.GLOBAL_FILTERS,this._linkedViewers=[],this.listeners=new WeakMap,this._tables=new $n,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.indicator=this.init_indicator(),this.commands=ci(this,this.indicator),this.menuRenderer=new tt(this.element),this.customCommands=[],e.addEventListener("contextmenu",i=>this.showContextMenu(null,i))}init_indicator(){let e=document.createElement("perspective-indicator");return e.style.position="fixed",e.style.pointerEvents="none",document.body.appendChild(e),e}apply_indicator_theme(){let e=JSON.parse(window.getComputedStyle(this.element).getPropertyValue("--theme-name").trim());this.indicator.setAttribute("theme",e)}addTable(e,n){this.tables.set(e,n)}getTable(e){return this.tables.get(e)}removeTable(e){return this.tables.delete(e)}get tables(){return this._tables}set side(e){if(ht[e.toUpperCase()]===void 0){console.warn("Unknown `side` attribute:",e);return}if(this._side!==e&&this.masterPanel.isAttached){let n=this.relativeSizes().slice().reverse();this.detailPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close(),e===ht.LEFT?(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel)):(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel)),this.setRelativeSizes(n)}this._side=e}get side(){return this._side}async save(){let e=this.dockpanel.mode==="single-document",n=e?this._minimizedLayoutSlots:oe.mapWidgets(s=>s.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),i={sizes:[...this.relativeSizes()],detail:n,mode:this.mode};if(this.masterPanel.isAttached){let s={widgets:this.masterPanel.widgets.map(a=>a.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};i.master=s}let r={};for(let s of this.masterPanel.widgets)r[s.viewer.getAttribute("slot")]=await s.save();let o=oe.getWidgets(e?this._minimizedLayout:this.dockpanel.saveLayout());return await Promise.all(o.map(async s=>{let a=s.viewer.getAttribute("slot");r[a]=await s.save(),r[a].settings=!1})),{...i,viewers:r}}async restore(e){let{sizes:n,master:i,detail:r,viewers:o=[],mode:s=He.GLOBAL_FILTERS}=structuredClone(e);this.mode=s,this.mode===He.GLOBAL_FILTERS&&i&&i.widgets.length>0?this.setupMasterPanel(n||Gn):(this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close()),this.addWidget(this.detailPanel));let a=[];for(let l of this._capture_viewers())for(let h of this._capture_widgets()){let y=this._restore_callback.bind(this,o,l,h);if(r){let T=oe.mapWidgets(y.bind(this,!1),r);this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(T),a=a.concat(oe.getWidgets(T).map(_=>_.task))}i&&(this.mode===He.GLOBAL_FILTERS?(a=a.concat(i.widgets.map(T=>y.bind(this,!0)(T).task)),i.sizes&&this.masterPanel.setRelativeSizes(i.sizes)):a=a.concat(i.widgets.map(T=>{let _=y.bind(this,void 0)(T);return this.dockpanel.addWidget(_),_.task})))}await Promise.all(a)}*_capture_widgets(){let e=this.getAllWidgets();yield e;for(let n of e)n.node.isConnected||n.close()}*_capture_viewers(){let e=Array.from(this.element.children);yield e;let n=this.getAllWidgets();for(let i of e)!n.find(o=>o.viewer===i)&&Array.from(this.element.children).indexOf(i)>-1&&(this.element.removeChild(i),i.delete())}_restore_callback(e,n,i,r,o){let s;typeof o=="string"?s=e[o]:(s=o,o=s.slot);let a=!!o&&n.find(h=>h.getAttribute("slot")===o),l;return a?(l=i.find(h=>h.viewer===a),l?(l.load(this.tables.get(s.table)),l.restore({...s,master:r})):l=this._createWidget({config:{...s,master:r},viewer:a})):s?l=this._createWidgetAndNode({config:{...s,master:r},slot:o}):console.error(`Could not find or create <perspective-viewer> for slot "${o}"`),(r||this.mode===He.LINKED)&&(l.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this)),l.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),this.masterPanel.addWidget(l)),l.linked&&this._linkWidget(l),l}_validate(e){if(!e||!("view"in e)||typeof e?.view!="function")throw new Error("Only `perspective.Table()` instances can be added to `tables`");return e}_set_listener(e,n){typeof n?.then=="function"?n=n.then(this._validate):this._validate(n),this.getAllWidgets().forEach(i=>{i.viewer.getAttribute("table")===e&&i.load(n)})}_delete_listener(e){return this.getAllWidgets().some(i=>i.viewer.getAttribute("table")===e)?(console.error(`Cannot remove table: '${e}' because it's still bound to widget(s)`),!1):!0}update_widget_for_viewer(e){let n=e.getAttribute("slot");if(n||(n=this._gen_id(),e.setAttribute("slot",n)),e.getAttribute("table")){if(!this.node.querySelector(`slot[name=${n}]`)){console.warn(`Undocked ${e.outerHTML}, creating default layout`);let o=this._createWidget({table:e.getAttribute("table"),config:{master:!1},viewer:e});this.dockpanel.addWidget(o),this.dockpanel.activateWidget(o)}}else console.warn(`No table set for ${e.outerHTML}`)}remove_unslotted_widgets(e){let n=this.getAllWidgets();for(let i of n)e.indexOf(i.viewer)===-1&&i.close()}update_details_panel(e){this.masterPanel.widgets.length===0&&this.masterPanel.close()}async duplicate(e){this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e);let n=await e.save();n.title=n.title?`${n.title} (*)`:"";let i=this._createWidgetAndNode({config:n});if(n.linked&&this._linkWidget(i),e.master){let r=this.masterPanel.widgets.indexOf(e)+1;this.masterPanel.insertWidget(r,i)}else this.dockpanel.addWidget(i,{mode:"split-right",ref:e});await i.task}toggleMasterDetail(e){let n=e.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:e,isGlobalFilter:!n}})),n?this.makeDetail(e):(this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e),this.makeMaster(e))}_maximize(e){e.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._minimizedLayoutSlots=oe.mapWidgets(n=>n.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),this._maximizedWidget=e,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(e)}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(e){this.dockpanel.mode!=="single-document"?this._maximize(e):this._unmaximize()}async _filterViewer(e,n,i){let r=await e.save(),o=await e.getTable(),s=Object.keys(await o.schema()),a=r.filter||[],l=T=>T[0]&&s.includes(T[0]),h=n.filter(l);h.push(...a.filter(T=>!i.has(T[0])));let y=(0,rl.default)(h,T=>T[0]);await e.restore({filter:y})}async onPerspectiveSelect(e){let n=await e.target.save();if(e.type==="perspective-click"&&(n.plugin==="Datagrid"||n.plugin===null))return;let i=new Set([...n.group_by||[],...n.split_by||[],...(n.filter||[]).map(o=>o[0])]),r=[...e.detail.config.filter];this.mode===He.LINKED?this._linkedViewers.forEach(o=>{o!==e.target&&this._filterViewer(o,r,i)}):pt(this.dockpanel.widgets()).forEach(o=>this._filterViewer(o.viewer,r,i))}async makeMaster(e){e.master=!0,e.viewer.hasAttribute("settings")&&await e.toggleConfig(),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(Gn)),this.masterPanel.addWidget(e),e.isHidden&&e.show(),e.viewer.restyleElement(),e.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}makeDetail(e){e.master=!1,this.dockpanel.addWidget(e,{mode:`split-${this._side}`}),this.masterPanel.widgets.length===0&&(this.detailPanel.close(),this.masterPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.addWidget(this.detailPanel)),e.viewer.restyleElement(),e.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}isLinked(e){return this._linkedViewers.indexOf(e.viewer)>-1}async _linkWidget(e){e.title.className+=" linked",this._linkedViewers.indexOf(e.viewer)===-1&&(this._linkedViewers.push(e.viewer),this._linkedViewers.length===1&&this.getAllWidgets().forEach(async n=>{(await n.viewer.save()).group_by&&await n.viewer.restore({selectable:!0})}))}toggleLink(e){e.linked=!e.linked,e.linked?this._linkWidget(e):(e.title.className=e.title.className.replace(/ linked/g,""),this._linkedViewers=this._linkedViewers.filter(n=>n!==e.viewer),this._linkedViewers.length===0&&this.getAllWidgets().forEach(n=>n.viewer.restore({selectable:!1})))}createContextMenu(e){let n=new ue({commands:this.commands,renderer:this.menuRenderer}),i=ei(this.dockpanel.tabBars(),o=>o.currentTitle.owner===e),r=()=>{e&&(e.addClass("context-focus"),e.viewer.classList.add("context-focus"),i&&i.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),e.viewer.classList.contains("workspace-master-widget")?n.node.classList.add("workspace-master-menu"):n.node.classList.remove("workspace-master-menu"))};return n.init_overlay=r,(e?.parent===this.dockpanel||e===null)&&n.addItem({type:"submenu",command:"workspace:newmenu",submenu:(()=>{let o=new ue({commands:this.commands,renderer:this.menuRenderer});for(let l of this.tables.keys())o.addItem({command:"workspace:new",args:{table:l,widget:e}});let s=oe.getWidgets(this.dockpanel.saveLayout());s.length>0&&o.addItem({type:"separator"});let a=new Set;for(let l of s)a.has(l.title.label)||(o.addItem({command:"workspace:newview",args:{widget:e,target_widget:l}}),a.add(l.title.label));return o.title.label="New Table",o})()}),e&&(e?.parent===this.dockpanel&&n.addItem({type:"separator"}),n.addItem({command:"workspace:maximize",args:{widget:e}}),n.addItem({command:"workspace:minimize",args:{widget:e}}),n.addItem({command:"workspace:duplicate",args:{widget:e}}),n.addItem({command:"workspace:master",args:{widget:e}}),n.addItem({command:"workspace:link",args:{widget:e}}),n.addItem({type:"separator"}),n.addItem({command:"workspace:reset",args:{widget:e}}),n.addItem({command:"workspace:export",args:{contextMenu:n,widget:e,init_overlay:r}}),n.addItem({command:"workspace:copy",args:{contextMenu:n,widget:e,init_overlay:r}}),n.addItem({type:"separator"}),n.addItem({command:"workspace:close",args:{widget:e}}),n.addItem({command:"workspace:help"})),this.customCommands.length>0&&(n.addItem({type:"separator"}),this.customCommands.forEach(o=>{n.addItem({command:o,args:{widget:e}})})),n.aboutToClose.connect(()=>{e&&(this.element.classList.remove("context-menu"),this.removeClass("context-menu"),e.removeClass("context-focus"),i?.node?.classList.remove("context-focus"))}),n}showContextMenu(e,n){if(!n.shiftKey){let i=this.createContextMenu(e);i.init_overlay(),i.open(n.clientX,n.clientY),n.preventDefault(),n.stopPropagation()}}clearLayout(){this.getAllWidgets().forEach(e=>e.close()),this.widgets.forEach(e=>e.close()),this.detailPanel.close(),this._linkedViewers=[],this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close())}setupMasterPanel(e){this.detailPanel.addClass("has-master-panel"),this.side===ht.RIGHT?(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel),this.setRelativeSizes(e.slice().reverse())):(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(e))}_addContextMenuItem(e){this.customCommands.push(e.id),this.commands.addCommand(e.id,{execute:n=>e.execute({widget:n.widget}),label:e.label,isVisible:n=>e.isVisible({widget:n.widget}),mnemonic:0})}addViewer(e){let n=this._createWidgetAndNode({config:e});this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(),e.master?(this.masterPanel.isAttached||this.setupMasterPanel(Gn),this.masterPanel.addWidget(n)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(n,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:e,slot:n}){let i=this._createNode(n),r=e.table,o=document.createElement("perspective-viewer");return o.setAttribute("slot",i.querySelector("slot").getAttribute("name")),r&&o.setAttribute("table",r),this._createWidget({config:e,node:i,viewer:o})}_gen_id(){let e=`PERSPECTIVE_GENERATED_ID_${Ig++}`;return this.element.querySelector(`[slot=${e}]`)&&(e=this._gen_id()),e}_createNode(e){let n=this.node.querySelector(`slot[name=${e}]`);if(n)n=n.parentElement.parentElement;else{let i=document.createElement("slot");e=e||this._gen_id(),i.setAttribute("name",e);let r=document.createElement("div");r.classList.add("viewer-container"),r.appendChild(i),n=document.createElement("div"),n.classList.add("workspace-widget"),n.appendChild(r)}return n}_createWidget({config:e,node:n,viewer:i}){if(!n){let a=i.getAttribute("slot");n=this.node.querySelector(`slot[name=${a}]`),n?n=n.parentElement.parentElement:n=this._createNode(a)}let r=this.tables.get(i.getAttribute("table")||e.table),o=new xt({node:n,viewer:i});o.task=(async()=>{r&&o.load(r),await o.restore(e)})();let s=new CustomEvent("workspace-new-view",{detail:{config:e,widget:o}});return this.element.dispatchEvent(s),o.title.closable=!0,this.element.appendChild(o.viewer),this._addWidgetEventListeners(o),o}_addWidgetEventListeners(e){this.listeners.has(e)&&this.listeners.get(e)();let n=o=>{!o.detail&&this.dockpanel.mode==="single-document"&&this._unmaximize()},i=o=>this.showContextMenu(e,o),r=async o=>{this.workspaceUpdated();let s=await o.target?.save();s&&(e.title.label=s.title)};e.node.addEventListener("contextmenu",i),e.viewer.addEventListener("perspective-toggle-settings",n),e.viewer.addEventListener("perspective-config-update",r),e.viewer.addEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),e.title.changed.connect(r),this.listeners.set(e,()=>{e.node.removeEventListener("contextmenu",i),e.viewer.removeEventListener("perspective-toggle-settings",n),e.viewer.removeEventListener("perspective-config-update",r),e.viewer.removeEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),e.title.changed.disconnect(r)})}getAllWidgets(){return[...this.masterPanel.widgets,...pt(this.dockpanel.widgets())]}async _fireUpdateEvent(){let e=await this.save();if(e){let n={};this.tables.forEach((i,r)=>{n[r]=i}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:n,layout:e}}))}}async workspaceUpdated(){this._save||(this._save=(0,ol.default)(()=>this.dockpanel.mode!=="single-document"&&this._fireUpdateEvent(),500)),this._save()}};var Zt;(M=>{function t(d,u){let g=h.get(d);if(!g||g.length===0){w(d,u);return}zt(Pt(g),p=>p?f(p,d,u):!0)&&w(d,u)}M.sendMessage=t;function e(d,u){if(!u.isConflatable){x(d,u);return}Rt(l,k=>k.handler!==d||!k.msg||k.msg.type!==u.type||!k.msg.isConflatable?!1:k.msg.conflate(u))||x(d,u)}M.postMessage=e;function n(d,u){let g=h.get(d);g&&g.indexOf(u)!==-1||(g?g.push(u):h.set(d,[u]))}M.installMessageHook=n;function i(d,u){let g=h.get(d);if(!g)return;let k=g.indexOf(u);k!==-1&&(g[k]=null,A(g))}M.removeMessageHook=i;function r(d){let u=h.get(d);u&&u.length>0&&(R.fill(u,null),A(u)),F(l,g=>{g.handler===d&&(g.handler=null,g.msg=null)})}M.clearData=r;function o(){b||_===0||(m(_),b=!0,I(),b=!1)}M.flush=o;function s(){return T}M.getExceptionHandler=s;function a(d){let u=T;return T=d,u}M.setExceptionHandler=a;let l=new Ye,h=new WeakMap,y=new Set,T=d=>{console.error(d)},_=0,b=!1,c=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)(),m=(()=>typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearImmediate)();function f(d,u,g){let k=!0;try{typeof d=="function"?k=d(u,g):k=d.messageHook(u,g)}catch(p){T(p)}return k}function w(d,u){try{d.processMessage(u)}catch(g){T(g)}}function x(d,u){l.addLast({handler:d,msg:u}),_===0&&(_=c(I))}function I(){if(_=0,l.isEmpty)return;let d={handler:null,msg:null};for(l.addLast(d);;){let u=l.removeFirst();if(u===d)return;u.handler&&u.msg&&t(u.handler,u.msg)}}function A(d){y.size===0&&c(E),y.add(d)}function E(){y.forEach(S),y.clear()}function S(d){R.removeAllWhere(d,v)}function v(d){return d===null}})(Zt||={});function Tg(t){let e=document.createElement("div");return e.innerHTML=t,Array.prototype.slice.call(e.children)[0]}function wg(t){if(t.content)return;t.content=document.createDocumentFragment();let e;for(;e=t.firstChild;)Node.prototype.appendChild.call(t.content,e)}function Mg(t,e,n){let i=Tg(t);wg(i),e&&(i.innerHTML=`<style>${e.toString()}</style>`+i.innerHTML),i.innerHTML=`<style id="psp_styles" scope="${i.getAttribute("id")}">test{}</style>`+i.innerHTML;let r=0,o=class extends n{attributeChangedCallback(a,l,h){r>0||(h===null&&(h="null"),a[0]!=="_"&&l!=h&&!!Object.getOwnPropertyDescriptor(n.prototype,a).set&&(this[a]=h))}_setAttributeSafe(a,l){r++;try{this.setAttribute(a,l)}finally{r--}}connectedCallback(){if(!this._initialized){this._initializing=!0;var a=document.importNode(i.content,!0);this.attachShadow({mode:"open"}),this._vieux&&(this._vieux.appendChild(a),a=this._vieux),this.shadowRoot.appendChild(a),super.connectedCallback&&super.connectedCallback();for(let l of Object.getOwnPropertyNames(n.prototype))l!=="connectedCallback"&&this.hasAttribute(l)&&l[0]!=="_"&&!!Object.getOwnPropertyDescriptor(n.prototype,l).set&&(this[l]=this.getAttribute(l));this._initializing=!1,this._initialized=!0}}static get observedAttributes(){return Object.getOwnPropertyNames(n.prototype)}};for(let a of Object.getOwnPropertyNames(n.prototype)){let l=Object.getOwnPropertyDescriptor(n.prototype,a);if(l&&l.set){let h=l.set;l.set=function(y){if(!this.hasAttribute(a)||this.getAttribute(a)!==y){this.setAttribute(a,y);return}!this._initializing&&!this._initialized||h.call(this,y)},Object.defineProperty(n.prototype,a,l)}}let s=i.getAttribute("id");window.customElements.define(s,o)}function al(t,...e){let n=e.map(i=>i.toString()).join(`
`);return function(i){return Mg(t,{toString:()=>n},i)}}var sl='.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.p-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-detail-widget{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}.lm-mod-override-cursor{cursor:grabbing!important;}.lm-mod-override-cursor perspective-viewer>*{pointer-events:none;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-Menu{font-size:12px;padding:8px;background:white;color:#666;border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;}.p-Menu.perspective-workspace-menu .p-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.p-Menu-item.p-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.p-Menu-item.p-mod-disabled{opacity:0.5;}.p-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.p-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.p-Menu-itemMnemonic{text-decoration:underline;}.p-Menu-itemShortcut{padding:4px 0px;}.p-Menu-itemSubmenuIcon{width:24px;height:18px;}.p-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.p-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.p-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.p-MenuBar-menu{transform:translateY(-1px);}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.p-MenuBar-item.p-mod-active{background:rgba(0,0,0,0.2);}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.p-Menu-itemIcon:before{content:attr(content);font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;height:18px;}.p-mod-drag-image.p-TabBar-tab{display:none;}';var Yn=class extends HTMLElement{set side(e){this.setAttribute("side",e),this.workspace&&(this.workspace.side=e)}get side(){return this.getAttribute("side")}save(){return this.workspace.save()}async restore(e){await this.workspace.restore(e)}async flush(){await Promise.all(Array.from(this.querySelectorAll("perspective-viewer")).map(e=>e.flush()))}addViewer(e){this.workspace.addViewer(e)}addTable(e,n){this.workspace.addTable(e,n)}getTable(e){return this.workspace.getTable(e)}removeTable(e){return this.workspace.removeTable(e)}get tables(){return this.workspace.tables}resize(){this.workspace.update()}_light_dom_changed(){let e=Array.from(this.childNodes);for(let n of e)n.tagName==="PERSPECTIVE-VIEWER"&&this.workspace.update_widget_for_viewer(n);this.workspace.remove_unslotted_widgets(e),this.workspace.update_details_panel(e)}_register_light_dom_listener(){let e=new MutationObserver(this._light_dom_changed.bind(this)),n={attributes:!1,childList:!0,subtree:!1};e.observe(this,n),this._light_dom_changed()}connectedCallback(){if(!this.side){this.side=this.side||ht.LEFT;let e=this.shadowRoot.querySelector("#container");this.workspace=new Bt(this,{side:this.side}),this._register_light_dom_listener(),Zt.sendMessage(this.workspace,z.Msg.BeforeAttach),e.insertBefore(this.workspace.node,null),Zt.sendMessage(this.workspace,z.Msg.AfterAttach),window.onresize=this.workspace.update.bind(this.workspace)}}},Xn=document.createElement("style");Xn.toggleAttribute("injected",!0);Xn.innerHTML=sl;document.head.appendChild(Xn);al(Qn,Zn)(Yn);export{xt as PerspectiveViewerWidget,Bt as PerspectiveWorkspace};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=perspective-workspace.js.map
